{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/README.md","path":"README.md","modified":0,"renderable":0},{"_id":"source/dmrs_red_t.png","path":"dmrs_red_t.png","modified":0,"renderable":0},{"_id":"source/others.md","path":"others.md","modified":0,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/exturl.js","path":"js/src/exturl.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/js.cookie.js","path":"js/src/js.cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scroll-cookie.js","path":"js/src/scroll-cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","path":"lib/algolia-instant-search/instantsearch.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","path":"lib/canvas-nest/canvas-nest.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","path":"lib/canvas-ribbon/canvas-ribbon.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/LICENSE","path":"lib/fastclick/LICENSE","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/README.md","path":"lib/fastclick/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/bower.json","path":"lib/fastclick/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","path":"lib/jquery_lazyload/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","path":"lib/jquery_lazyload/CONTRIBUTING.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","path":"lib/jquery_lazyload/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","path":"lib/jquery_lazyload/jquery.lazyload.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","path":"lib/jquery_lazyload/jquery.scrollstop.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.css","path":"lib/needsharebutton/needsharebutton.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/font-embedded.css","path":"lib/needsharebutton/font-embedded.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.js","path":"lib/needsharebutton/needsharebutton.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","path":"lib/pace/pace-theme-barber-shop.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","path":"lib/pace/pace-theme-big-counter.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","path":"lib/pace/pace-theme-center-atom.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","path":"lib/pace/pace-theme-bounce.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","path":"lib/pace/pace-theme-center-radar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","path":"lib/pace/pace-theme-center-circle.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","path":"lib/pace/pace-theme-center-simple.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","path":"lib/pace/pace-theme-corner-indicator.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","path":"lib/pace/pace-theme-fill-left.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","path":"lib/pace/pace-theme-flash.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","path":"lib/pace/pace-theme-loading-bar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","path":"lib/pace/pace-theme-minimal.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","path":"lib/pace/pace-theme-mac-osx.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace.min.js","path":"lib/pace/pace.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","path":"lib/three/canvas_lines.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","path":"lib/three/canvas_sphere.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/three-waves.min.js","path":"lib/three/three-waves.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/bower.json","path":"lib/velocity/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.css","path":"lib/Han/dist/han.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.js","path":"lib/Han/dist/han.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.min.css","path":"lib/Han/dist/han.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","path":"lib/fancybox/source/blank.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","path":"lib/fancybox/source/fancybox_loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","path":"lib/fancybox/source/fancybox_loading@2x.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","path":"lib/fancybox/source/fancybox_sprite.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","path":"lib/fancybox/source/fancybox_overlay.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","path":"lib/fancybox/source/fancybox_sprite@2x.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","path":"lib/fancybox/source/jquery.fancybox.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","path":"lib/fancybox/source/jquery.fancybox.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","path":"lib/fancybox/source/jquery.fancybox.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","path":"lib/fastclick/lib/fastclick.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","path":"lib/fastclick/lib/fastclick.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/han.js","path":"lib/Han/dist/han.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","path":"lib/Han/dist/font/han-space.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","path":"lib/Han/dist/font/han-space.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff2","path":"lib/Han/dist/font/han.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","path":"lib/Han/dist/font/han.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","path":"lib/Han/dist/font/han.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","path":"lib/fancybox/source/helpers/fancybox_buttons.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","path":"lib/fancybox/source/helpers/jquery.fancybox-media.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","path":"lib/font-awesome/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","path":"lib/font-awesome/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","path":"lib/algolia-instant-search/instantsearch.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/three/three.min.js","path":"lib/three/three.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","path":"lib/font-awesome/fonts/fontawesome-webfont.svg","modified":0,"renderable":1}],"Cache":[{"_id":"source/CNAME","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1511961066818},{"_id":"source/README.md","hash":"ead43b52e9eed78e6009549a0598a55c247a49f7","modified":1512479961408},{"_id":"source/dmrs_red_t.png","hash":"ca3bd2e3ba257ee62c1e3b910adee6ac54aae474","modified":1511961066824},{"_id":"source/others.md","hash":"e4887fe9a331f3947417d07f5f1ed6651bfbd72b","modified":1512575153508},{"_id":"themes/next/.bowerrc","hash":"334da94ca6f024d60d012cc26ea655681e724ad8","modified":1511961524720},{"_id":"themes/next/.editorconfig","hash":"211d2c92bfdddb3e81ea946f4ca7a539f150f4da","modified":1511961524720},{"_id":"themes/next/.gitattributes","hash":"8454b9313cb1a97b63fb87e2d29daee497ce6249","modified":1511961524720},{"_id":"themes/next/.gitignore","hash":"b935cc0e5b099ebd343ca1766e02f65138c13dd0","modified":1511961524722},{"_id":"themes/next/.javascript_ignore","hash":"cd250ad74ca22bd2c054476456a73d9687f05f87","modified":1511961524724},{"_id":"themes/next/.jshintrc","hash":"b7d23f2ce8d99fa073f22f9960605f318acd7710","modified":1511961524724},{"_id":"themes/next/.hound.yml","hash":"289dcf5bfe92dbd680d54d6e0668f41c9c9c0c78","modified":1511961524723},{"_id":"themes/next/.stylintrc","hash":"3b7f9785e9ad0dab764e1c535b40df02f4ff5fd6","modified":1511961524724},{"_id":"themes/next/LICENSE","hash":"ec44503d7e617144909e54533754f0147845f0c5","modified":1511961524725},{"_id":"themes/next/.travis.yml","hash":"6674fbdfe0d0c03b8a04527ffb8ab66a94253acd","modified":1511961524725},{"_id":"themes/next/README.cn.md","hash":"59e323ce21535d561507c9ecc984b7c4dcb61514","modified":1511961524726},{"_id":"themes/next/_config - 副本.yml","hash":"beb7eb3cb8010a012a1d9b388cc93aaaa964c506","modified":1511961524727},{"_id":"themes/next/README.md","hash":"7423256d6e7622434bbfe20c467819687e8e1b27","modified":1511961524726},{"_id":"themes/next/_config.yml","hash":"551b54d347314a0f969df830ff253e1ab2f9913a","modified":1513257283951},{"_id":"themes/next/gulpfile.coffee","hash":"412defab3d93d404b7c26aaa0279e2e586e97454","modified":1511961524729},{"_id":"themes/next/bower.json","hash":"47471a8f13528dc4052b746db5b4be2375682173","modified":1511961524728},{"_id":"themes/next/package.json","hash":"39370e2aadf1f9a7c105edff064c6e47682b3932","modified":1511961524770},{"_id":"themes/next/package-lock.json","hash":"cc3e9b232005f824a73555ad6568d566b8aae554","modified":1511961524770},{"_id":"source/_posts/01_abstract-document.md","hash":"461ad387ab5f73ce7927b574505ceee30892a89b","modified":1512792141467},{"_id":"source/_posts/02_abstract-factory.md","hash":"21b9f72cc8f1f5aa4dfd1bf5d7261c09f95f9651","modified":1512792156250},{"_id":"source/_posts/03_adapter.md","hash":"e3bee70dc2d305363f5ac51cd719835b4996ac63","modified":1512792185159},{"_id":"source/_posts/04_Async-Method-Invocation.md","hash":"6a9cb8292113c5bbbc909a7f0e07d698fee09c64","modified":1512804214893},{"_id":"source/_posts/05_balking.md","hash":"24503c0d8a2cd0de4cbdc7a90c3abca58545a59b","modified":1512796990199},{"_id":"source/_posts/06_bridge.md","hash":"52bebc6c1ff968478ce2c8d010a95b78b6def0db","modified":1512796993901},{"_id":"source/_posts/07_builder.md","hash":"f4685d938b3018eb8435451ac229d6159b133caa","modified":1512796996686},{"_id":"source/_posts/APP扫描二维码登陆流程.md","hash":"25a8c6721357335ec7c522e089e32d88e6b958d3","modified":1512056707461},{"_id":"source/_posts/InvalidClassException.md","hash":"6758bfc49d96712acfb318a929478ad96bf7ba62","modified":1512056707466},{"_id":"source/_posts/Hexo集成gitment异常处理.md","hash":"8b29f1b335e237ac7b3223e28cf3e2cd835cd42f","modified":1512804278851},{"_id":"source/_posts/SpringCloud-config-client不能连接server.md","hash":"ea260f91aef2b447b9685668c4e544e381460b6e","modified":1512056707460},{"_id":"source/_posts/ali-api.md","hash":"9b933b801b5de453631946ebf7f93df25a8d4547","modified":1512575833096},{"_id":"source/_posts/java-generate-md5.md","hash":"e420ca4ac52796d03a501885b74210b1f063fda8","modified":1512576157655},{"_id":"source/_posts/java生成二维码.md","hash":"1865855dca5c204769811b3e7803e028ba58a545","modified":1512576357335},{"_id":"source/_posts/website.md","hash":"64a1eb79c6c312f2b7c9a420582733e45c96e7d4","modified":1512577707905},{"_id":"source/_posts/二进制位运算实例.md","hash":"11da7a0cd75e849d1e66c9b2817c7a6dcfb143e2","modified":1512056707468},{"_id":"source/_posts/插件或主题修改记录.md","hash":"ef080d718407e5f7ad390edecce5cf72cea2290d","modified":1512056707469},{"_id":"source/_posts/程序员.md","hash":"25434e2c4f43f98ee5ba6960ecc02d200b684edc","modified":1512056707463},{"_id":"source/_posts/高房价背后的真实逻辑（深度长篇分析）.md","hash":"f363443ac4176b7f755370cb823b48c935753221","modified":1512056707465},{"_id":"source/categories/index.md","hash":"9b0213344c6ef7a2907330ff50694eb3a2d9fc51","modified":1509721319412},{"_id":"source/about/index.md","hash":"e1f8774597ee338051894086b2bf3fbfeee14018","modified":1512573943444},{"_id":"source/tags/index.md","hash":"002f3c1b89480fdfe20899be8f8a8356a86acc2d","modified":1509721279700},{"_id":"themes/next/.git/FETCH_HEAD","hash":"2084830eba36d1878bacd959faef69ed7f7eb668","modified":1512997489416},{"_id":"themes/next/.git/COMMIT_EDITMSG","hash":"43747f8281f19a9a5b1618fe77c68e7bc6fd09ef","modified":1512809081168},{"_id":"themes/next/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1511961524688},{"_id":"themes/next/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1511961503128},{"_id":"themes/next/.git/config","hash":"411471678ded266b1ce9ac8c8d768b586c812935","modified":1511961534039},{"_id":"themes/next/.git/index","hash":"e929588041d123e4025cedf4810494a0ed6e9e5f","modified":1512809081164},{"_id":"themes/next/.git/packed-refs","hash":"68cc704f5e9bcf3d63550bb81ff4da7903a59268","modified":1511961524677},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"5adfad3ef1b870063e621bc0838268eb2c7c697a","modified":1511961524721},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"b1ec000babd42bb7ffd26f5ad8aac9b5bec79ae5","modified":1511961524721},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"1228506a940114288d61812bfe60c045a0abeac1","modified":1511961524722},{"_id":"themes/next/.github/browserstack_logo.png","hash":"a6c43887f64a7f48a2814e3714eaa1215e542037","modified":1511961524722},{"_id":"themes/next/layout/_layout.swig","hash":"7d91c9ca571067a3548d0f3c132b480cd3beb823","modified":1511961524736},{"_id":"themes/next/layout/archive.swig","hash":"9a2c14874a75c7085d2bada5e39201d3fc4fd2b4","modified":1511961524767},{"_id":"themes/next/layout/category.swig","hash":"3cbb3f72429647411f9e85f2544bdf0e3ad2e6b2","modified":1511961524767},{"_id":"themes/next/layout/page.swig","hash":"e8fcaa641d46930237675d2ad4b56964d9e262e9","modified":1511961524768},{"_id":"themes/next/layout/index.swig","hash":"555a357ecf17128db4e29346c92bb6298e66547a","modified":1511961524768},{"_id":"themes/next/layout/schedule.swig","hash":"87ad6055df01fa2e63e51887d34a2d8f0fbd2f5a","modified":1511961524769},{"_id":"themes/next/layout/post.swig","hash":"7a6ce102ca82c3a80f776e555dddae1a9981e1ed","modified":1511961524768},{"_id":"themes/next/layout/tag.swig","hash":"34e1c016cbdf94a31f9c5d494854ff46b2a182e9","modified":1511961524769},{"_id":"themes/next/languages/de.yml","hash":"fd02d9c2035798d5dc7c1a96b4c3e24b05b31a47","modified":1511961524729},{"_id":"themes/next/languages/default.yml","hash":"b3bcd8934327448a43d9bfada5dd11b1b8c1402e","modified":1511961524730},{"_id":"themes/next/languages/fr-FR.yml","hash":"efeeb55d5c4add54ad59a612fc0630ee1300388c","modified":1511961524730},{"_id":"themes/next/languages/en.yml","hash":"2f4b4776ca1a08cc266a19afb0d1350a3926f42c","modified":1511961524730},{"_id":"themes/next/languages/id.yml","hash":"dccae33e2a5b3c9f11c0e05ec4a7201af1b25745","modified":1511961524731},{"_id":"themes/next/languages/ja.yml","hash":"37f954e47a3bc669620ca559e3edb3b0072a4be5","modified":1511961524732},{"_id":"themes/next/languages/it.yml","hash":"a215d016146b1bd92cef046042081cbe0c7f976f","modified":1511961524731},{"_id":"themes/next/languages/ko.yml","hash":"dc8f3e8c64eb7c4bb2385025b3006b8efec8b31d","modified":1511961524732},{"_id":"themes/next/languages/pt-BR.yml","hash":"568d494a1f37726a5375b11452a45c71c3e2852d","modified":1511961524733},{"_id":"themes/next/languages/pt.yml","hash":"2efcd240c66ab1a122f061505ca0fb1e8819877b","modified":1511961524733},{"_id":"themes/next/languages/zh-Hans.yml","hash":"66b9b42f143c3cb2f782a94abd4c4cbd5fd7f55f","modified":1511961524734},{"_id":"themes/next/languages/ru.yml","hash":"e33ee44e80f82e329900fc41eb0bb6823397a4d6","modified":1511961524733},{"_id":"themes/next/languages/zh-hk.yml","hash":"fe0d45807d015082049f05b54714988c244888da","modified":1511961524734},{"_id":"themes/next/languages/zh-tw.yml","hash":"432463b481e105073accda16c3e590e54c8e7b74","modified":1511961524734},{"_id":"themes/next/scripts/merge-configs.js","hash":"5758f8f3f12d17bc80da65bb808a20b3a8aae186","modified":1511961524771},{"_id":"themes/next/scripts/merge.js","hash":"39b84b937b2a9608b94e5872349a47200e1800ff","modified":1511961524771},{"_id":"themes/next/test/.jshintrc","hash":"c9fca43ae0d99718e45a6f5ce736a18ba5fc8fb6","modified":1511961524906},{"_id":"themes/next/test/intern.js","hash":"db90b1063356727d72be0d77054fdc32fa882a66","modified":1511961524907},{"_id":"themes/next/test/helpers.js","hash":"f25e7f3265eb5a6e1ccbb5e5012fa9bebf134105","modified":1511961524906},{"_id":"source/_posts/属性的行为.md","hash":"aca5b90fbfde7acd6e35978f9d61a7aa7db88a93","modified":1512479018489},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1511961524827},{"_id":"themes/next/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1511961503129},{"_id":"themes/next/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1511961503130},{"_id":"themes/next/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1511961503133},{"_id":"themes/next/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1511961503132},{"_id":"themes/next/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1511961503134},{"_id":"themes/next/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1511961503136},{"_id":"themes/next/.git/hooks/pre-rebase.sample","hash":"18be3eb275c1decd3614e139f5a311b75f1b0ab8","modified":1511961503138},{"_id":"themes/next/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1511961503138},{"_id":"themes/next/.git/hooks/prepare-commit-msg.sample","hash":"2b6275eda365cad50d167fe3a387c9bc9fedd54f","modified":1511961503140},{"_id":"themes/next/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1511961503141},{"_id":"themes/next/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1511961503143},{"_id":"themes/next/.git/logs/HEAD","hash":"262dd63d1169e46988680a6eac8d5159191fc986","modified":1512809081172},{"_id":"themes/next/layout/_custom/sidebar.swig","hash":"ba8ab5a0280b953aa97435ff8946cbcbb2755a27","modified":1511961524735},{"_id":"themes/next/layout/_partials/comments.swig","hash":"de45e77e7d52cf317129b7d21415a3002b95b94e","modified":1511961524738},{"_id":"themes/next/layout/_partials/footer.swig","hash":"f34654d26d277590e6b1d39a4b4113fde4d05f39","modified":1511961524740},{"_id":"themes/next/layout/_custom/header.swig","hash":"ba8ab5a0280b953aa97435ff8946cbcbb2755a27","modified":1511961524735},{"_id":"themes/next/layout/_partials/head.swig","hash":"f14a39dad1ddd98e6d3ceb25dda092ba80d391b5","modified":1511961524740},{"_id":"themes/next/layout/_partials/header.swig","hash":"c54b32263bc8d75918688fb21f795103b3f57f03","modified":1511961524741},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"1634fb887842698e01ff6e632597fe03c75d2d01","modified":1511961524742},{"_id":"themes/next/layout/_partials/page-header.swig","hash":"77c61e0baea3544df361b7338c3cd13dc84dde22","modified":1511961524741},{"_id":"themes/next/layout/_partials/search.swig","hash":"b4ebe4a52a3b51efe549dd1cdee846103664f5eb","modified":1511961524742},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"8c56dd26157cbc580ae41d97ac34b90ab48ced3f","modified":1511961524736},{"_id":"themes/next/layout/_macro/reward.swig","hash":"357d86ec9586705bfbb2c40a8c7d247a407db21a","modified":1511961524738},{"_id":"themes/next/layout/_macro/post-copyright.swig","hash":"f83befdc740beb8dc88805efd7fbb0fef9ed19be","modified":1511961524737},{"_id":"themes/next/layout/_macro/post.swig","hash":"18365c242e07bd4fd622f9cf8abc8f74c24072b6","modified":1511961524737},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"b9f9959225876fb56fb3fba96306d19396e704d4","modified":1511961524738},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"e2e4eae391476da994045ed4c7faf5e05aca2cd7","modified":1511961524738},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"c0f5a0955f69ca4ed9ee64a2d5f8aa75064935ad","modified":1511961524747},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"931808ad9b8d8390c0dcf9bdeb0954eeb9185d68","modified":1511961524747},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"9be624634703be496a5d2535228bc568a8373af9","modified":1511961524751},{"_id":"themes/next/layout/_third-party/duoshuo-hot-articles.swig","hash":"ba75672183d94f1de7c8bd0eeee497a58c70e889","modified":1511961524761},{"_id":"themes/next/layout/_third-party/exturl.swig","hash":"8301c9600bb3e47f7fb98b0e0332ef3c51bb1688","modified":1511961524762},{"_id":"themes/next/layout/_third-party/mathjax.swig","hash":"a0bd3388587fd943baae0d84ca779a707fbcad89","modified":1511961524762},{"_id":"themes/next/layout/_third-party/needsharebutton.swig","hash":"fa882641da3bd83d9a58a8a97f9d4c62a9ee7b5c","modified":1511961524762},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"554ec568e9d2c71e4a624a8de3cb5929050811d6","modified":1511961524763},{"_id":"themes/next/layout/_third-party/schedule.swig","hash":"db15d7e1552aa2d2386a6b8a33b3b3a40bf9e43d","modified":1511961524763},{"_id":"themes/next/layout/_third-party/scroll-cookie.swig","hash":"9a188938d46931d5f3882a140aa1c48b3a893f0c","modified":1511961524764},{"_id":"themes/next/scripts/tags/button.js","hash":"eddbb612c15ac27faf11c59c019ce188f33dec2c","modified":1511961524772},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"99b66949f18398689b904907af23c013be1b978f","modified":1511961524772},{"_id":"themes/next/scripts/tags/exturl.js","hash":"5022c0ba9f1d13192677cf1fd66005c57c3d0f53","modified":1511961524773},{"_id":"themes/next/scripts/tags/full-image.js","hash":"c9f833158c66bd72f627a0559cf96550e867aa72","modified":1511961524773},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"ac681b0d0d8d39ba3817336c0270c6787c2b6b70","modified":1511961524773},{"_id":"themes/next/scripts/tags/label.js","hash":"6f00952d70aadece844ce7fd27adc52816cc7374","modified":1511961524774},{"_id":"themes/next/scripts/tags/lazy-image.js","hash":"bcba2ff25cd7850ce6da322d8bd85a8dd00b5ceb","modified":1511961524774},{"_id":"themes/next/scripts/tags/note.js","hash":"f7eae135f35cdab23728e9d0d88b76e00715faa0","modified":1511961524774},{"_id":"themes/next/scripts/tags/tabs.js","hash":"aa7fc94a5ec27737458d9fe1a75c0db7593352fd","modified":1511961524775},{"_id":"themes/next/source/css/main.styl","hash":"a91dbb7ef799f0a171b5e726c801139efe545176","modified":1511961524826},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1511961524828},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1511961524828},{"_id":"themes/next/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1511961524828},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1511961524829},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1511961524829},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1511961524830},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1511961524830},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1511961524831},{"_id":"themes/next/source/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1511961524831},{"_id":"themes/next/source/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1511961524832},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1511961524832},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1511961524832},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1511961524832},{"_id":"themes/next/source/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1511961524833},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1511961524833},{"_id":"themes/next/source/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1511961524833},{"_id":"themes/next/source/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1511961524834},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1511961524834},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1511961524750},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1511961524750},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1511961524810},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1511961524811},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1511961524812},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1511961524824},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1511961524826},{"_id":"themes/next/.git/objects/08/6ed5d77eccbbfd33d8b1d7893f66fa1b9bb3ba","hash":"e774f0886a5bf552877bdd6108b3d7a0f3dbe8ec","modified":1512057019260},{"_id":"themes/next/.git/objects/1d/46c266906e2067b06b4d39cce9cdd4994ac226","hash":"a4a2719cd33520789d01caa160689a005fa6746f","modified":1512217509526},{"_id":"themes/next/.git/objects/38/5a8eb443867dbd6d1777d98df4bad8bfd75b77","hash":"31a9abfa81547a3ece909303da668c7bae401175","modified":1512057019251},{"_id":"themes/next/.git/objects/27/bd24ff9d6db073b301123048f528b541b94543","hash":"0d8a7151240adadaaa72bbfa84077a1f1e87464e","modified":1512057019253},{"_id":"themes/next/.git/objects/54/206d6e3053bbf40d24a0946bef3d67ea51a1a1","hash":"e2d9b106d8b068d6aed1be27009ba85bbf620465","modified":1512217509513},{"_id":"themes/next/.git/objects/5f/5d29df515383928fbce398de3f0dbea9e060a0","hash":"19050459605d5c52e3c5a8d297fc411c07adf948","modified":1512217509523},{"_id":"themes/next/.git/objects/79/a559159bc639a5ad6dca3e4900b83e6edcfab2","hash":"365ef04f7220e563001dbbe31b7874215d56a130","modified":1512057019072},{"_id":"themes/next/.git/objects/7e/cede1436bf310d1da1cb91881960990e31588a","hash":"874ad2ac35b6f5d32530b2eaa7938e627c699875","modified":1512057019069},{"_id":"themes/next/.git/objects/84/5625a129245ff9e5334739b98bc7318e663f01","hash":"c22c66e742ab9b51d6f985605be0a0e8969d8cec","modified":1512057019249},{"_id":"themes/next/.git/objects/ab/638b539ebd53498826f11bfa4162b379a63a53","hash":"ff99efcb50fdbc3bf093ab5186206a6cd07254e3","modified":1512217509520},{"_id":"themes/next/.git/objects/d8/7b38e85e86e9a73ad70f4c476ace3d1246b16e","hash":"3cafc9b449b54058e91de0b20f7d1c1382e411df","modified":1512057019247},{"_id":"themes/next/.git/objects/f1/5a88264c9cb9ef0b82d0f9533c8e416e9f3146","hash":"e8202fa777b75a3de8ea323762305b5c76f8c983","modified":1512217509517},{"_id":"themes/next/.git/objects/fd/1f10ed0bca6ae66a328d52788be9d8873c6238","hash":"3387a32ee593c15a519c6a1e1b9d251ddbc51e59","modified":1512057019067},{"_id":"themes/next/.git/objects/pack/pack-bd8081b85cf4b95f9c50643fa8c0f02032c8c6ac.idx","hash":"9114ca19783dff3d8a268a03ba972b2a2bcc89a3","modified":1511961846962},{"_id":"themes/next/.git/refs/heads/master","hash":"f92d56412a8dca529b5f26d13cb3d692be9fe749","modified":1512809081172},{"_id":"themes/next/layout/_partials/head/custom-head.swig","hash":"a223919d2e1bf17ca4d6abb2c86f2efca9883dc1","modified":1511961524740},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"f5e487b0d213ca0bd94aa30bc23b240d65081627","modified":1511961524741},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"b2f0d247b213e4cf8de47af6a304d98070cc7256","modified":1511961524743},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"a8c7f9ca7c605d039a1f3bf4e4d3183700a3dd62","modified":1511961524744},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"b25002a83cbd2ca0c4a5df87ad5bff26477c0457","modified":1511961524744},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"9e3d133ac5bcc6cb51702c83b2611a49811abad1","modified":1511961524745},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"d9e2d9282f9be6e04eae105964abb81e512bffed","modified":1511961524745},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"d4fbffd7fa8f2090eb32a871872665d90a885fac","modified":1511961524746},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"0a9cdd6958395fcdffc80ab60f0c6301b63664a5","modified":1511961524746},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"9b84ab576982b2c3bb0291da49143bc77fba3cc6","modified":1511961524748},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"a9a3995b9615adfb8d6b127c78c6771627bee19a","modified":1511961524749},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a9a3995b9615adfb8d6b127c78c6771627bee19a","modified":1511961524750},{"_id":"themes/next/layout/_third-party/analytics/analytics-with-widget.swig","hash":"ff947f3561b229bc528cb1837d4ca19612219411","modified":1511961524752},{"_id":"themes/next/layout/_third-party/analytics/application-insights.swig","hash":"71397a5823e8ec8aad3b68aace13150623b3e19d","modified":1511961524752},{"_id":"themes/next/layout/_third-party/analytics/busuanzi-counter.swig","hash":"7b11eac3a0685fa1ab2ab6ecff60afc4f15f0d16","modified":1511961524753},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"753d262911c27baf663fcaf199267133528656af","modified":1511961524753},{"_id":"themes/next/layout/_third-party/analytics/cnzz-analytics.swig","hash":"a10b7f19d7b5725527514622899df413a34a89db","modified":1511961524754},{"_id":"themes/next/layout/_third-party/analytics/facebook-sdk.swig","hash":"7d94845f96197d9d84a405fa5d4ede75fb81b225","modified":1511961524754},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"b1e13df83fb2b1d5d513b30b7aa6158b0837daab","modified":1511961524755},{"_id":"themes/next/layout/_third-party/analytics/lean-analytics.swig","hash":"e6d10ee4fb70b3ae1cd37e9e36e000306734aa2e","modified":1511961524756},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"45f3f629c2aacc381095750e1c8649041a71a84b","modified":1511961524755},{"_id":"themes/next/layout/_third-party/analytics/tencent-analytics.swig","hash":"8a399df90dadba5ad4e781445b58f4765aeb701e","modified":1511961524756},{"_id":"themes/next/layout/_third-party/analytics/tencent-mta.swig","hash":"5a8027328f060f965b3014060bebec1d7cf149c1","modified":1511961524756},{"_id":"themes/next/layout/_third-party/analytics/vkontakte-api.swig","hash":"f9a1647a8f1866deeb94052d1f87a5df99cb1e70","modified":1511961524756},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"b83a51bbe0f1e2ded9819070840b0ea145f003a6","modified":1511961524757},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"4c501ea0b9c494181eb3c607c5526a5754e7fbd8","modified":1511961524757},{"_id":"themes/next/layout/_third-party/comments/duoshuo.swig","hash":"1600f340e0225361580c44890568dc07dbcf2c89","modified":1511961524758},{"_id":"themes/next/layout/_third-party/comments/gitment.swig","hash":"730b0c87bc8b34408168b177b3cf76addf7cd005","modified":1512056589044},{"_id":"themes/next/layout/_third-party/comments/hypercomments.swig","hash":"af7f3e43cbdc4f88c13f101f0f341af96ace3383","modified":1511961524759},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"9246162d4bc7e949ce1d12d135cbbaf5dc3024ec","modified":1511961524760},{"_id":"themes/next/layout/_third-party/comments/index.swig","hash":"5e8cda360d630a037224e4d1e737cf3358425408","modified":1512056696932},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"1e47f2196a7cb3482c7a6c66de00a6dc7d403e92","modified":1511961524761},{"_id":"themes/next/layout/_third-party/comments/youyan.swig","hash":"7e65ff8fe586cd655b0e9d1ad2912663ff9bd36c","modified":1511961524761},{"_id":"themes/next/layout/_third-party/search/index.swig","hash":"34599633658f3b0ffb487728b7766e1c7b551f5a","modified":1511961524765},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"93479642fd076a1257fecc25fcf5d20ccdefe509","modified":1511961524766},{"_id":"themes/next/layout/_third-party/search/tinysou.swig","hash":"fe95dd3d166634c466e19aa756e65ad6e8254d3e","modified":1511961524766},{"_id":"themes/next/layout/_third-party/seo/baidu-push.swig","hash":"d8c98938719284fa06492c114d99a1904652a555","modified":1511961524766},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"3403fdd8efde1a0afd11ae8a5a97673f5903087f","modified":1511961524809},{"_id":"themes/next/source/css/_mixins/Gemini.styl","hash":"07f7da320689f828f6e36a6123807964a45157a0","modified":1511961524810},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"7896c3ee107e1a8b9108b6019f1c070600a1e8cc","modified":1511961524811},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"0e55cbd93852dc3f8ccb44df74d35d9918f847e0","modified":1511961524812},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"58e7dd5947817d9fc30770712fc39b2f52230d1e","modified":1511961524824},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"a25408534f8fe6e321db4bbf9dd03335d648fe17","modified":1511961524824},{"_id":"themes/next/source/css/_variables/base.styl","hash":"062941775a7badba458e5fda8d7f89230842450a","modified":1511961524825},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"4069f918ccc312da86db6c51205fc6c6eaabb116","modified":1511961524825},{"_id":"themes/next/source/js/src/affix.js","hash":"1b509c3b5b290a6f4607f0f06461a0c33acb69b1","modified":1511961524835},{"_id":"themes/next/source/js/src/algolia-search.js","hash":"cb431b54ba9c692165a1f5a12e4c564a560f8058","modified":1511961524835},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"0289031200c3d4c2bdd801ee10fff13bb2c353e4","modified":1511961524836},{"_id":"themes/next/source/js/src/exturl.js","hash":"a2a0f0de07e46211f74942a468f42ee270aa555c","modified":1511961524836},{"_id":"themes/next/source/js/src/js.cookie.js","hash":"1512c751d219577d338ac0780fb2bbd9075d5298","modified":1511961524837},{"_id":"themes/next/source/js/src/motion.js","hash":"885176ed51d468f662fbf0fc09611f45c7e5a3b1","modified":1511961524837},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"b35a7dc47b634197b93487cea8671a40a9fdffce","modified":1511961524836},{"_id":"themes/next/source/js/src/post-details.js","hash":"93a18271b4123dd8f94f09d1439b47c3c19a8712","modified":1511961524838},{"_id":"themes/next/source/js/src/scroll-cookie.js","hash":"02cf91514e41200bc9df5d8bdbeb58575ec06074","modified":1511961524838},{"_id":"themes/next/source/js/src/utils.js","hash":"b7ddc240208d57596a67c78a04a11b0f0bdecc97","modified":1511961524838},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"b7657be25fc52ec67c75ab5481bdcb483573338b","modified":1511961524838},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1511961524848},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1511961524852},{"_id":"themes/next/source/lib/canvas-ribbon/canvas-ribbon.js","hash":"b02737510e9b89aeed6b54f89f602a9c24b06ff2","modified":1511961524852},{"_id":"themes/next/source/lib/fancybox/.bower.json","hash":"9be892a4e14e0da18ff9cb962c9ef71f163b1b22","modified":1511961524853},{"_id":"themes/next/source/lib/fancybox/.gitattributes","hash":"672d3b5767e0eacd83bb41b188c913f2cf754793","modified":1511961524853},{"_id":"themes/next/source/lib/fastclick/.bower.json","hash":"bf3eef9d647cd7c9b62feda3bc708c6cdd7c0877","modified":1511961524863},{"_id":"themes/next/source/lib/fastclick/LICENSE","hash":"6f474ea75c42442da7bbcf2e9143ce98258efd8d","modified":1511961524863},{"_id":"themes/next/source/lib/fastclick/README.md","hash":"68a9b9d53126405b0fa5f3324f1fb96dbcc547aa","modified":1511961524863},{"_id":"themes/next/source/lib/fastclick/bower.json","hash":"a9b3ee1e4db71a0e4ea6d5bed292d176dd68b261","modified":1511961524864},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"b4aefc910578d76b267e86dfffdd5121c8db9aec","modified":1511961524866},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"03ddbf76c1dd1afb93eed0b670d2eee747472ef1","modified":1511961524866},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"c31ff06a740955e44edd4403902e653ccabfd4db","modified":1511961524866},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"71e7183634dc1b9449f590f15ebd7201add22ca7","modified":1511961524867},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"ee33b2798b1e714b904d663436c6b3521011d1fa","modified":1511961524867},{"_id":"themes/next/source/lib/jquery/.bower.json","hash":"865d6c1328ab209a4376b9d2b7a7824369565f28","modified":1511961524882},{"_id":"themes/next/source/lib/jquery_lazyload/.bower.json","hash":"90fa628f156d8045357ff11eaf32e61abacf10e8","modified":1511961524884},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","hash":"b930297cb98b8e1dbd5abe9bc1ed9d5935d18ce8","modified":1511961524884},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","hash":"4ded6fee668544778e97e38c2b211fc56c848e77","modified":1511961524884},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","hash":"e0acf1db27b0cc16128a59c46db1db406b5c4c58","modified":1511961524885},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","hash":"f4a570908f6c89c6edfb1c74959e733eaadea4f2","modified":1511961524885},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","hash":"bf773ad48a0b9aa77681a89d7569eefc0f7b7b18","modified":1511961524885},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.css","hash":"e33aa8fa48b6639d8d8b937d13261597dd473b3a","modified":1511961524887},{"_id":"themes/next/source/lib/needsharebutton/font-embedded.css","hash":"14264a210bf94232d58d7599ea2ba93bfa4fb458","modified":1511961524886},{"_id":"themes/next/source/lib/needsharebutton/needsharebutton.js","hash":"2ce5f3bf15c523b9bfc97720d8884bb22602a454","modified":1511961524887},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1511961524888},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1511961524888},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1511961524889},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1511961524888},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1511961524890},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1511961524889},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1511961524890},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1511961524890},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1511961524891},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1511961524891},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1511961524892},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1511961524893},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1511961524892},{"_id":"themes/next/source/lib/pace/pace.min.js","hash":"8aaa675f577d5501f5f22d5ccb07c2b76310b690","modified":1511961524894},{"_id":"themes/next/source/lib/three/canvas_lines.min.js","hash":"2d9a9f38c493fdf7c0b833bb9184b6a1645c11b2","modified":1511961524895},{"_id":"themes/next/source/lib/three/canvas_sphere.min.js","hash":"46a50b91c98b639c9a2b9265c5a1e66a5c656881","modified":1511961524896},{"_id":"themes/next/source/lib/three/three-waves.min.js","hash":"8148492dd49aa876d32bb7d5b728d3f5bf6f5074","modified":1511961524896},{"_id":"themes/next/source/lib/velocity/.bower.json","hash":"63da5e80ebb61bb66a2794d5936315ca44231f0c","modified":1511961524902},{"_id":"themes/next/source/lib/velocity/bower.json","hash":"92d92860418c4216aa59eb4cb4a556290a7ad9c3","modified":1511961524902},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"bf172816a9c57f9040e3d19c24e181a142daf92b","modified":1511961524905},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","hash":"dbbfb50f6502f6b81dcc9fee7b31f1e812da3464","modified":1511961524905},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"dde584994ac13dc601836e86f4cf490e418d9723","modified":1511961524905},{"_id":"themes/next/source/lib/jquery/index.js","hash":"17a740d68a1c330876c198b6a4d9319f379f3af2","modified":1511961524883},{"_id":"themes/next/.git/logs/refs/heads/master","hash":"262dd63d1169e46988680a6eac8d5159191fc986","modified":1512809081173},{"_id":"themes/next/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1511961524687},{"_id":"themes/next/.git/refs/remotes/origin/master","hash":"f92d56412a8dca529b5f26d13cb3d692be9fe749","modified":1512809086217},{"_id":"themes/next/.git/refs/remotes/upstream/button-refactor","hash":"fb495f16a68c230584ab7ce8aa719b0999b96e0b","modified":1511961847038},{"_id":"themes/next/.git/refs/remotes/upstream/dev","hash":"c9abcffd1f03a6a76afa09334100c5003cf895a0","modified":1511961847045},{"_id":"themes/next/.git/refs/remotes/upstream/master","hash":"d022a9d44457f7717004a8c765a92e0305245725","modified":1512804424848},{"_id":"themes/next/.git/refs/remotes/upstream/servant","hash":"ee903ee2112907f4498fdb13674a640c685e95fb","modified":1511961847053},{"_id":"themes/next/.git/refs/remotes/upstream/testing","hash":"15660a56eaab85fc3fd3324de8d61dbc2b09b42a","modified":1511961847058},{"_id":"themes/next/layout/_third-party/search/algolia-search/assets.swig","hash":"218cc936ba3518a3591b2c9eda46bc701edf7710","modified":1511961524765},{"_id":"themes/next/layout/_third-party/search/algolia-search/dom.swig","hash":"2530de0f3125a912756f6c0e9090cd012134a4c5","modified":1511961524765},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"8f86f694c0749a18ab3ad6f6df75466ca137a4bc","modified":1511961524776},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"237d185ac62ec9877e300947fa0109c44fb8db19","modified":1511961524777},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"8b32928686c327151e13d3ab100157f9a03cd59f","modified":1511961524777},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"7ad4081466b397e2a6204141bb7768b7c01bd93c","modified":1511961524778},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"ff4489cd582f518bba6909a301ac1292a38b4e96","modified":1511961524778},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"4f2801fc4cf3f31bf2069f41db8c6ce0e3da9e39","modified":1511961524786},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"6eb4bcc3056bd279d000607e8b4dad50d368ca69","modified":1511961524798},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"24ee4b356ff55fc6e58f26a929fa07750002cf29","modified":1511961524806},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"1da5c800d025345f212a3bf1be035060f4e5e6ed","modified":1511961524807},{"_id":"themes/next/source/css/_common/scaffolding/mobile.styl","hash":"91ca75492cd51f2553f4d294ed2f48239fcd55eb","modified":1511961524807},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"3f40e8a9fe8e7bd5cfc4cf4cbbbcb9539462e973","modified":1511961524807},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"a17e2b871a335f290afb392a08f94fd35f59c715","modified":1511961524808},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"ea9069645696f86c5df64208490876fe150c8cae","modified":1511961524808},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"12662536c7a07fff548abe94171f34b768dd610f","modified":1511961524806},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"60fa84aa7731760f05f52dd7d8f79b5f74ac478d","modified":1511961524814},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"25d5e45a355ee2093f3b8b8eeac125ebf3905026","modified":1511961524814},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"d0bfd1bef988c76f7d7dd72d88af6f0908a8b0db","modified":1511961524815},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"b1025c421406d2c24cc92a02ae28c1915b01e240","modified":1511961524816},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"26666c1f472bf5f3fb9bc62081cca22b4de15ccb","modified":1511961524816},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"9c99034f8e00d47e978b3959f51eb4a9ded0fcc8","modified":1511961524816},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"9b913b73d31d21f057f97115ffab93cfa578b884","modified":1511961524817},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1511961524817},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"bce344d3a665b4c55230d2a91eac2ad16d6f32fd","modified":1511961524821},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"416988dca389e6e2fdfa51fa7f4ee07eb53f82fb","modified":1511961524822},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"1f6e2ce674735269599acc6d77b3ea18d31967fc","modified":1511961524822},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"4642e30010af8b2b037f5b43146b10a934941958","modified":1511961524822},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"30561ed60fc64f3e4ce85143bdb55faa814743a6","modified":1511961524823},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"86197902dfd3bededba10ba62b8f9f22e0420bde","modified":1511961524823},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"31127dcbf4c7b4ada53ffbf1638b5fe325b7cbc0","modified":1511961524819},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"f23ac53ab901c48859dd29eee6e386b60ff956ba","modified":1511961524820},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"748dbfbf9c08e719ddc775958003c64b00d39dab","modified":1511961524819},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1511961524820},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"5dbc0d0c897e46760e5dbee416530d485c747bba","modified":1511961524820},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"f1d0b5d7af32c423eaa8bb93ab6a0b45655645dc","modified":1511961524838},{"_id":"themes/next/source/lib/Han/dist/han.css","hash":"6c26cdb36687d4f0a11dabf5290a909c3506be5c","modified":1511961524844},{"_id":"themes/next/source/lib/Han/dist/han.min.js","hash":"16b03db23a52623348f37c04544f2792032c1fb6","modified":1511961524847},{"_id":"themes/next/source/lib/Han/dist/han.min.css","hash":"6d586bfcfb7ae48f1b12f76eec82d3ad31947501","modified":1511961524846},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1511961524854},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1511961524854},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1511961524855},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1511961524855},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1511961524855},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1511961524856},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","hash":"82f33ad0842aa9c154d029e0dada2497d4eb1d57","modified":1511961524860},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","hash":"d71602cbca33b9ecdb7ab291b7f86a49530f3601","modified":1511961524861},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","hash":"ae6318aeb62ad4ce7a7e9a4cdacd93ffb004f0fb","modified":1511961524862},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","hash":"1d6aeda0480d0e4cb6198edf7719d601d4ae2ccc","modified":1511961524864},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1511961524865},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1511961524868},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"3655f1fdf1e584c4d8e8d39026093ca306a5a341","modified":1511961524868},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"88af80502c44cd52ca81ffe7dc7276b7eccb06cf","modified":1511961524868},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"41ea797c68dbcff2f6fb3aba1d1043a22e7cc0f6","modified":1511961524901},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"a817b6c158cbc5bab3582713de9fe18a18a80552","modified":1511961524901},{"_id":"themes/next/.git/objects/pack/pack-bd8081b85cf4b95f9c50643fa8c0f02032c8c6ac.pack","hash":"292addde74bd3d15b780db9ca6a55321e304fa45","modified":1511961846960},{"_id":"themes/next/source/lib/Han/dist/han.js","hash":"4ac683b2bc8531c84d98f51b86957be0e6f830f3","modified":1511961524845},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1511961524881},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1511961524880},{"_id":"themes/next/source/lib/velocity/velocity.js","hash":"4237c6e9d59da349639de20e559e87c2c0218cfd","modified":1511961524904},{"_id":"themes/next/.git/logs/refs/remotes/origin/HEAD","hash":"30605b540e31e00d7d8915c3514d3e0eddc174bd","modified":1511961524687},{"_id":"themes/next/.git/logs/refs/remotes/origin/master","hash":"f175fe3eae7b30e5463b9e3ce7a0dffec0c36cd0","modified":1512809086220},{"_id":"themes/next/.git/logs/refs/remotes/upstream/button-refactor","hash":"7e96b5590eac4be8846a42f4737ccc9c8cb4711a","modified":1511961847040},{"_id":"themes/next/.git/logs/refs/remotes/upstream/dev","hash":"ec5c089339324ddba8dd26c9b56933a897fcb5b2","modified":1511961847045},{"_id":"themes/next/.git/logs/refs/remotes/upstream/master","hash":"f338767d3d502165594a583240fc656594041313","modified":1512804424849},{"_id":"themes/next/.git/logs/refs/remotes/upstream/testing","hash":"bbd83c374a0a8a23d406699587f86bdb52510b3a","modified":1511961847058},{"_id":"themes/next/.git/logs/refs/remotes/upstream/servant","hash":"4af64350cd31a97a571a1daf5795d0ae3f4c5dab","modified":1511961847054},{"_id":"themes/next/.git/objects/pack/pack-384773371cfc56c2f834ae9ab1d789a17d47ca60.idx","hash":"70a48fe79baa57242574ffa73fee0bcb335ec6e0","modified":1511961524583},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"9f73c4696f0907aa451a855444f88fc0698fa472","modified":1511961524779},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"53cde051e0337f4bf42fb8d6d7a79fa3fa6d4ef2","modified":1511961524781},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d63e0cacc53dd375fcc113465a4328c59ff5f2c1","modified":1511961524781},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"1a0d059799a298fe17c49a44298d32cebde93785","modified":1511961524781},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"1727702eac5d326b5c81a667944a245016668231","modified":1511961524782},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"0656e753f182c9f47fef7304c847b7587a85ef0d","modified":1511961524782},{"_id":"themes/next/source/css/_common/components/highlight/diff.styl","hash":"167986d0f649516671ddf7193eebba7b421cd115","modified":1511961524783},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"7fe4d4d656e86276c17cb4e48a560cb6a4def703","modified":1511961524784},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"50450d9fdc8a2b2be8cfca51e3e1a01ffd636c0b","modified":1511961524783},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"b6f3a06a94a6ee5470c956663164d58eda818a64","modified":1511961524784},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"7fb593f90d74a99c21840679933b9ef6fdc16a61","modified":1511961524785},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"f9760ecf186954cee3ba4a149be334e9ba296b89","modified":1511961524785},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"4e3838d7ac81d9ad133960f0f7ed58a44a015285","modified":1511961524785},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"8cf318644acc8b4978537c263290363e21c7f5af","modified":1511961524786},{"_id":"themes/next/source/css/_common/components/post/post-button.styl","hash":"62fbbd32cf5a99ae550c45c763a2c4813a138d01","modified":1511961524787},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"875cbe88d5c7f6248990e2beb97c9828920e7e24","modified":1511961524787},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"caf263d1928496688c0e1419801eafd7e6919ce5","modified":1511961524787},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"a6c6eb8adba0a090ad1f4b9124e866887f20d10d","modified":1511961524788},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"a200c0a1c5a895ac9dc41e0641a5dfcd766be99b","modified":1511961524788},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"cd9e214e502697f2f2db84eb721bac57a49b0fce","modified":1511961524788},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"27deb3d3a243d30022055dac7dad851024099a8b","modified":1511961524789},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"d0d7a5c90d62b685520d2b47fea8ba6019ff5402","modified":1511961524788},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"b2495ae5e04dcca610aacadc47881d9e716cd440","modified":1511961524790},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"ca88ea6999a61fb905eb6e72eba5f92d4ee31e6e","modified":1511961524790},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"5a982d8ef3b3623ea5f59e63728990f5623c1b57","modified":1511961524790},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"01567edaea6978628aa5521a122a85434c418bfd","modified":1511961524791},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"ccb34c52be8adba5996c6b94f9e723bd07d34c16","modified":1511961524791},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"89d6c3b697efc63de42afd2e89194b1be14152af","modified":1511961524792},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"7968343e41f8b94b318c36289dff1196c3eb1791","modified":1511961524791},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"761eba9811b050b25d548cc0854de4824b41eb08","modified":1511961524793},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"39f04c4c7237a4e10acd3002331992b79945d241","modified":1511961524793},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"61f8cea3c01acd600e90e1bc2a07def405503748","modified":1511961524795},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-dimmer.styl","hash":"11c22f0fb3f6beb13e5a425ec064a4ff974c13b7","modified":1511961524795},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"8dd9a1c6f4f6baa00c2cf01837e7617120cf9660","modified":1511961524794},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"28a8737c090fbffd188d73a00b42e90b9ee57df2","modified":1511961524796},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"1153bb71edf253765145559674390e16dd67c633","modified":1511961524796},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"a1521d48bb06d8d703753f52a198baa197af7da2","modified":1511961524796},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"e71652d3216e289c8548b1ea2357822c1476a425","modified":1511961524797},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"5ef6343835f484a2c0770bd1eb9cc443609e4c39","modified":1511961524797},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"3159b55f35c40bd08e55b00148c523760a708c51","modified":1511961524798},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"2fe76476432b31993338cb45cdb3b29a518b6379","modified":1511961524798},{"_id":"themes/next/source/css/_common/components/tags/exturl.styl","hash":"a3bdd71237afc112b2aa255f278cab6baeb25351","modified":1511961524798},{"_id":"themes/next/source/css/_common/components/tags/label.styl","hash":"2ab1322fe52ab5aafd49e68f5bd890e8380ee927","modified":1511961524800},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"2ad1a2a9bbf6742d1b0762c4c623b68113d1e0fe","modified":1511961524798},{"_id":"themes/next/source/css/_common/components/tags/tabs.styl","hash":"154a87a32d2fead480d5e909c37f6c476671c5e6","modified":1511961524801},{"_id":"themes/next/source/css/_common/components/tags/note.styl","hash":"9a409b798decdefdaf7a23f0b11004a8c27e82f3","modified":1511961524800},{"_id":"themes/next/source/css/_common/components/tags/note-modern.styl","hash":"b7076e58d647265ee0ad2b461fe8ce72c9373bc5","modified":1511961524800},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"b80604868e4f5cf20fccafd7ee415c20c804f700","modified":1511961524801},{"_id":"themes/next/source/css/_common/components/third-party/algolia-search.styl","hash":"bba4f3bdb7517cd85376df3e1209b570c0548c69","modified":1511961524802},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"5dbeed535d63a50265d96b396a5440f9bb31e4ba","modified":1511961524802},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"a6e7d698702c2e383dde3fde2abde27951679084","modified":1511961524802},{"_id":"themes/next/source/css/_common/components/third-party/gitment.styl","hash":"874278147115601d2abf15987f5f7a84ada1ac6b","modified":1511961524803},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"717cc7f82be9cc151e23a7678601ff2fd3a7fa1d","modified":1511961524803},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"15975ba7456b96916b1dbac448a1a0d2c38b8f3d","modified":1511961524804},{"_id":"themes/next/source/css/_common/components/third-party/han.styl","hash":"10599e16414a8b7a76c4e79e6617b5fe3d4d1adf","modified":1511961524804},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"16087276945fa038f199692e3eabb1c52b8ea633","modified":1511961524804},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"9c8196394a89dfa40b87bf0019e80144365a9c93","modified":1511961524805},{"_id":"themes/next/source/css/_common/components/third-party/needsharebutton.styl","hash":"28825ae15fa20ae3942cdaa7bcc1f3523ce59acc","modified":1511961524805},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"a07aa12cc36ac5c819670c2a3c17d07ed7a08986","modified":1511961524818},{"_id":"themes/next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"1f09be9bb38411f0629b58c3b23873589a6dbcaa","modified":1511961524819},{"_id":"themes/next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"1f09be9bb38411f0629b58c3b23873589a6dbcaa","modified":1511961524821},{"_id":"themes/next/source/lib/Han/dist/font/han-space.otf","hash":"07436f011b44051f61b8329c99de4bec64e86f4b","modified":1511961524841},{"_id":"themes/next/source/lib/Han/dist/font/han-space.woff","hash":"7a635062b10bf5662ae1d218ba0980171005d060","modified":1511961524841},{"_id":"themes/next/source/lib/Han/dist/font/han.woff2","hash":"623af3ed5423371ac136a4fe0e8cc7bb7396037a","modified":1511961524843},{"_id":"themes/next/source/lib/Han/dist/font/han.otf","hash":"f1f6bb8f461f5672e000380195d3d2358a28494c","modified":1511961524842},{"_id":"themes/next/source/lib/Han/dist/font/han.woff","hash":"f38ff9b2eecaa17b50b66aa2dae87e9e7436d195","modified":1511961524843},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1511961524857},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"ee948b4489aedeb548a77c9e45d8c7c5732fd62d","modified":1511961524858},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"51139a4c79573d372a347ef01a493222a1eaf10a","modified":1511961524858},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"6394c48092085788a8c0ef72670b0652006231a1","modified":1511961524857},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"b88b589f5f1aa1b3d87cc7eef34c281ff749b1ae","modified":1511961524859},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"d22b1629cb23a6181bebb70d0cf653ffe4b835c8","modified":1511961524860},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1511961524873},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1511961524871},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1511961524878},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","hash":"90a1b22129efc172e2dfcceeeb76bff58bc3192f","modified":1511961524851},{"_id":"themes/next/source/lib/three/three.min.js","hash":"26273b1cb4914850a89529b48091dc584f2c57b8","modified":1511961524900},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"b5483b11f8ba213e733b5b8af9927a04fec996f6","modified":1511961524876},{"_id":"themes/next/.git/objects/pack/pack-384773371cfc56c2f834ae9ab1d789a17d47ca60.pack","hash":"24f02607cea439ac80cbafd7dd7c1cda495a5c09","modified":1511961524586},{"_id":"public/search.xml","hash":"daaf12047e64079ec07d2e141a4a6cefe3ad593e","modified":1512804301844},{"_id":"public/categories/index.html","hash":"09e8643e00c143f3cbbcf2b3b12e41859b6f42f1","modified":1513257302086},{"_id":"public/about/index.html","hash":"58df93615ce7791e24eb177dc4360a660e341ba0","modified":1513257302087},{"_id":"public/tags/index.html","hash":"12ca93fc0dfcc53b8689e2069579959984952f25","modified":1513257302087},{"_id":"public/120717/async-method-invocation/index.html","hash":"73d9a4d9d7851a1906cbf86cb318da590507ab33","modified":1513257302087},{"_id":"public/120717/java-generate-qr-code/index.html","hash":"420c596b817ef6e184e51dd37f054f926e7285ec","modified":1513257302087},{"_id":"public/120617/ali-api-util/index.html","hash":"81eca2e35b94cdce47b8a8aed5bbd74986e384fd","modified":1513257302088},{"_id":"public/120617/website/index.html","hash":"359229063249204a042c0f94e7cfb0e46c21e738","modified":1513257302088},{"_id":"public/120617/java-generate-md5/index.html","hash":"13aefbf75a075c49d5d2cc456c080872107a418a","modified":1513257302088},{"_id":"public/120617//adapter/index.html","hash":"58137d253952a9a120033b9823c8ec7b548b2b62","modified":1513257302088},{"_id":"public/120617/abstract-factory/index.html","hash":"1f3245eb087bce26eb35797c2dfe9049e67dfc66","modified":1513257302088},{"_id":"public/120617/abstract-document/index.html","hash":"c971f4cad8e085a8bc2d914404bf479409977da4","modified":1513257302088},{"_id":"public/113017/dealing-with-properties/index.html","hash":"eb070b0893a614064bbce6af0df982823a0f0ada","modified":1513257302088},{"_id":"public/111417/ap-scan-two-dimensional-code-landing-proces/index.html","hash":"740464135b418e33c9c249c0460ea6110c754ef8","modified":1513257302088},{"_id":"public/110917/hexo-integrated-gitment-exception-handling/index.html","hash":"f138b8fe561dfb8374842b9a0f7ccade137c6c29","modified":1513257302088},{"_id":"public/110617/plug-in-or-topic-modification-records/index.html","hash":"a64b880f93edf289b0ca7c96f846a3489e8daac4","modified":1513257302088},{"_id":"public/110517/the-real-logic-behind-the-high-house-price-(a-long-analysis-of-the-depth)/index.html","hash":"974eabed0d0df7eca559706c28f542dd8e6c4cb0","modified":1513257302089},{"_id":"public/103117/binary-bit-operation-example/index.html","hash":"f9190c42ba1f6befe53cbb254237fcd97fabff60","modified":1513257302089},{"_id":"public/103117/invalidclasexception/index.html","hash":"142dd5c338d9a2a38bb349adb6b17430abb3be62","modified":1513257302089},{"_id":"public/103017/springcloud-config-client-canot-conect-to-server/index.html","hash":"344b56ceacea914822037de64b18f9194e02faee","modified":1513257302089},{"_id":"public/102217/programer/index.html","hash":"86ec13aec3f3100254dab602809e423f615f0455","modified":1513257302089},{"_id":"public/archives/index.html","hash":"78e4f9bf8cc12dcc0a6f2954cda68594cab35c3d","modified":1513256757450},{"_id":"public/archives/2017/index.html","hash":"7170b55d8593fe33130c6b8502c7275f6a48935b","modified":1513256757450},{"_id":"public/archives/2017/10/index.html","hash":"404484539814298a0dfcbd8e00fe94db4bea4217","modified":1513256757452},{"_id":"public/archives/2017/11/index.html","hash":"179db9e6ac14698c40e46c22f24d28396bd6bdeb","modified":1513256757450},{"_id":"public/archives/2017/12/index.html","hash":"a2a8f8a4e604d9cc0e96c1d05c32ca5db21b6880","modified":1513256757452},{"_id":"public/tags/Java/index.html","hash":"cdca74e36b8340d0e115eebec7ea987c1dec56e9","modified":1513256757452},{"_id":"public/tags/中级难度/index.html","hash":"f8cf09c2923cd96ba9ef9bd9aaaedcc3e593e99a","modified":1512796117755},{"_id":"public/tags/译文/index.html","hash":"dc0b6f658c3048c0006018ed6416fb9edd7d7d41","modified":1512795763927},{"_id":"public/tags/中等难度/index.html","hash":"ca905bb081e84b1d901033a8b292d8089a622f7e","modified":1512795763927},{"_id":"public/tags/二维码/index.html","hash":"46568ba84932d6a380861f021024e29aff6a7688","modified":1512795763927},{"_id":"public/tags/登陆/index.html","hash":"247a414862e1773e77cc22886c3ecc9d953dc652","modified":1512795763927},{"_id":"public/tags/APP/index.html","hash":"169c08c3e550d210607c3c1f86e727fea7d2f213","modified":1513256757452},{"_id":"public/tags/流程/index.html","hash":"fc0f48e3c7d029872eaf02d847e8950efaa26b07","modified":1512795763927},{"_id":"public/tags/插件/index.html","hash":"96c8bbdf904adf8add6361eed2b213afdbca1046","modified":1512795763927},{"_id":"public/tags/gitment/index.html","hash":"ef121dc049266c11c89933d18416fb034a85e3f9","modified":1513256757453},{"_id":"public/tags/Hexo/index.html","hash":"9813aea7e6dd3d1c7fce610cee15433a56c67f2e","modified":1513256757453},{"_id":"public/tags/规范开发/index.html","hash":"23ba61cd3a5800d706392b3655e16cf49e96c36e","modified":1512795763927},{"_id":"public/tags/Spring-Boot/index.html","hash":"180c8be065dced88bd2d0e4ee6a2f35e10caf174","modified":1513256757453},{"_id":"public/tags/Exception/index.html","hash":"a028a826a332f0b599e9ce266726e1b4f5f01431","modified":1513256757454},{"_id":"public/tags/java/index.html","hash":"55cd55c1a07253aec7eb29364e43a67b1de6a772","modified":1513256757454},{"_id":"public/tags/Spring-Cloud/index.html","hash":"e67689d79913dd917193ae13ff03e2ae25c363e0","modified":1513256757454},{"_id":"public/tags/其他/index.html","hash":"e18c3f8dcda35a9133c501c0dadcedf447f263b9","modified":1512795763928},{"_id":"public/tags/二进制/index.html","hash":"4d2a90efd830b20b09afff4c045ed44016fd74bb","modified":1512795763928},{"_id":"public/tags/Java基础/index.html","hash":"fbda6490edeae15e487662b1a2fc30a8a42de71c","modified":1512795763928},{"_id":"public/tags/位运算/index.html","hash":"4db73cf50348393f502621d0d953e226ec65ad8e","modified":1512795763928},{"_id":"public/tags/主题/index.html","hash":"dfdf8cef0ced8e716de456bc25d9ceeaecfaa44a","modified":1512795763928},{"_id":"public/tags/程序员/index.html","hash":"a366703d88ec9ddb41ba20080c19efc53c2a274c","modified":1512795763928},{"_id":"public/tags/转载/index.html","hash":"e525754062dece31a15aaeeba4ec09a3cf28e541","modified":1512795763928},{"_id":"public/tags/生活/index.html","hash":"8179e4a2eb36e34b1d4cf4085f70cee429c01240","modified":1512795763928},{"_id":"public/tags/房子/index.html","hash":"9f33eec2b2cf7c5036903e93c1336aaedb17354f","modified":1512795763928},{"_id":"public/tags/属性/index.html","hash":"5f840629937f9b486e2b31d7c23d3d313d0b58f8","modified":1512795763928},{"_id":"public/tags/设计/index.html","hash":"12c1ec15ff9c9051cb69def438166f8ef274d058","modified":1512795763928},{"_id":"public/index.html","hash":"3001c9b08b7b4ccc90d782ba17dbaedc9b4e2ad8","modified":1513256757455},{"_id":"public/page/2/index.html","hash":"bb6d9dd8af30022631313063195d1c642fafffe7","modified":1513256757455},{"_id":"public/page/3/index.html","hash":"75252e9bad069ee764861b00b3308048e9f3ad7d","modified":1513256757455},{"_id":"public/page/4/index.html","hash":"1f81e11d46508670bc60a8dde6690c08e121671e","modified":1513256757455},{"_id":"public/categories/设计模式/index.html","hash":"fdae1b90775399a837d0acbb6b0e144387a7f4f5","modified":1512798373324},{"_id":"public/categories/Java相关/index.html","hash":"2d6a322abaa4fafda39d0ff20c56ed40ee50329d","modified":1512795763929},{"_id":"public/categories/Hexo/index.html","hash":"d6ae493e9f365228e889e8100bc15e2755c9c308","modified":1513256757450},{"_id":"public/categories/Gists/index.html","hash":"9e1e2ca9b10c72ca2db376e843bb08ac2aaed2d9","modified":1513256757450},{"_id":"public/categories/其他/index.html","hash":"f5e39238b952d9a66216fa98fafb14abf57b726d","modified":1512795763929},{"_id":"public/categories/译文/index.html","hash":"041d54041287e5c05dec6ff4b4e8a28e4bb1285f","modified":1512795763929},{"_id":"public/120917/07_builder/index.html","hash":"0b8f1dc2ec5ef16a6c9cacba8c4ad7825fa0eac7","modified":1512795763934},{"_id":"public/120917/06_bridge/index.html","hash":"b4fb6ca90e9d49511bc6aaf0609eb6b50177feba","modified":1512795763934},{"_id":"public/120917/05_balking/index.html","hash":"766c63cc34d3de87dbf507b8796f7643205dd199","modified":1512795763935},{"_id":"public/tags/初级难度/index.html","hash":"2cbec103557e4dbb4026f7c822c64949df201add","modified":1512796117755},{"_id":"public/CNAME","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1512795763935},{"_id":"public/README.md","hash":"ead43b52e9eed78e6009549a0598a55c247a49f7","modified":1512795763939},{"_id":"public/others.md","hash":"e4887fe9a331f3947417d07f5f1ed6651bfbd72b","modified":1512795763939},{"_id":"public/dmrs_red_t.png","hash":"ca3bd2e3ba257ee62c1e3b910adee6ac54aae474","modified":1512795763939},{"_id":"public/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1512795763939},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1512795763939},{"_id":"public/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1512795763939},{"_id":"public/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1512795763948},{"_id":"public/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1512795763948},{"_id":"public/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1512795763948},{"_id":"public/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1512795763948},{"_id":"public/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1512795763948},{"_id":"public/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1512795763948},{"_id":"public/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1512795763948},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1512795763948},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1512795763948},{"_id":"public/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1512795763948},{"_id":"public/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1512795763949},{"_id":"public/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1512795763949},{"_id":"public/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1512795763949},{"_id":"public/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1512795763949},{"_id":"public/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1512795763949},{"_id":"public/lib/fastclick/LICENSE","hash":"6f474ea75c42442da7bbcf2e9143ce98258efd8d","modified":1512795763949},{"_id":"public/lib/font-awesome/HELP-US-OUT.txt","hash":"ee33b2798b1e714b904d663436c6b3521011d1fa","modified":1512795763949},{"_id":"public/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1512795763949},{"_id":"public/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1512795763949},{"_id":"public/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1512795763949},{"_id":"public/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1512795763949},{"_id":"public/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1512795763949},{"_id":"public/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1512795763949},{"_id":"public/lib/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1512795763949},{"_id":"public/lib/Han/dist/font/han-space.otf","hash":"07436f011b44051f61b8329c99de4bec64e86f4b","modified":1512795763949},{"_id":"public/lib/Han/dist/font/han-space.woff","hash":"7a635062b10bf5662ae1d218ba0980171005d060","modified":1512795763949},{"_id":"public/lib/Han/dist/font/han.woff2","hash":"623af3ed5423371ac136a4fe0e8cc7bb7396037a","modified":1512795763949},{"_id":"public/lib/Han/dist/font/han.otf","hash":"f1f6bb8f461f5672e000380195d3d2358a28494c","modified":1512795763949},{"_id":"public/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1512795763949},{"_id":"public/lib/Han/dist/font/han.woff","hash":"f38ff9b2eecaa17b50b66aa2dae87e9e7436d195","modified":1512795763949},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1512795764527},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1512795764534},{"_id":"public/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1512795764594},{"_id":"public/js/src/exturl.js","hash":"e42e2aaab7bf4c19a0c8e779140e079c6aa5c0b1","modified":1512795764594},{"_id":"public/js/src/bootstrap.js","hash":"034bc8113e0966fe2096ba5b56061bbf10ef0512","modified":1512795764594},{"_id":"public/js/src/algolia-search.js","hash":"b172f697ed339a24b1e80261075232978d164c35","modified":1512795764594},{"_id":"public/js/src/js.cookie.js","hash":"9b37973a90fd50e71ea91682265715e45ae82c75","modified":1512795764594},{"_id":"public/js/src/motion.js","hash":"754b294394f102c8fd9423a1789ddb1201677898","modified":1512795764594},{"_id":"public/js/src/post-details.js","hash":"a13f45f7aa8291cf7244ec5ba93907d119c5dbdd","modified":1512795764594},{"_id":"public/js/src/scroll-cookie.js","hash":"09dc828cbf5f31158ff6250d2bf7c3cde6365c67","modified":1512795764594},{"_id":"public/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1512795764594},{"_id":"public/js/src/utils.js","hash":"dbdc3d1300eec7da9632608ebc0e5b697779dad7","modified":1512795764594},{"_id":"public/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1512795764594},{"_id":"public/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1512795764594},{"_id":"public/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1512795764594},{"_id":"public/lib/canvas-ribbon/canvas-ribbon.js","hash":"ff5915eb2596e890a2fc6697c864f861a1995ec0","modified":1512795764594},{"_id":"public/lib/fastclick/README.html","hash":"da3c74d484c73cc7df565e8abbfa4d6a5a18d4da","modified":1512795764594},{"_id":"public/lib/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1512795764594},{"_id":"public/lib/fastclick/bower.json","hash":"4dcecf83afddba148464d5339c93f6d0aa9f42e9","modified":1512795764594},{"_id":"public/lib/jquery_lazyload/README.html","hash":"bde24335f6bc09d8801c0dcd7274f71b466552bd","modified":1512795764594},{"_id":"public/lib/jquery_lazyload/bower.json","hash":"ae3c3b61e6e7f9e1d7e3585ad854380ecc04cf53","modified":1512795764594},{"_id":"public/lib/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1512795764595},{"_id":"public/lib/jquery_lazyload/CONTRIBUTING.html","hash":"a6358170d346af13b1452ac157b60505bec7015c","modified":1512795764595},{"_id":"public/lib/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1512795764595},{"_id":"public/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1512795764595},{"_id":"public/lib/needsharebutton/needsharebutton.css","hash":"3ef0020a1815ca6151ea4886cd0d37421ae3695c","modified":1512795764595},{"_id":"public/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1512795764595},{"_id":"public/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1512795764595},{"_id":"public/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1512795764595},{"_id":"public/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1512795764595},{"_id":"public/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1512795764595},{"_id":"public/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1512795764595},{"_id":"public/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1512795764595},{"_id":"public/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1512795764595},{"_id":"public/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1512795764595},{"_id":"public/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1512795764595},{"_id":"public/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1512795764595},{"_id":"public/lib/pace/pace.min.js","hash":"9944dfb7814b911090e96446cea4d36e2b487234","modified":1512795764595},{"_id":"public/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1512795764595},{"_id":"public/lib/velocity/bower.json","hash":"0ef14e7ccdfba5db6eb3f8fc6aa3b47282c36409","modified":1512795764595},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1512795764595},{"_id":"public/js/src/schemes/pisces.js","hash":"8050a5b2683d1d77238c5762b6bd89c543daed6e","modified":1512795764595},{"_id":"public/lib/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1512795764595},{"_id":"public/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1512795764596},{"_id":"public/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1512795764596},{"_id":"public/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1512795764596},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1512795764596},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1512795764596},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1512795764596},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1512795764596},{"_id":"public/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1512795764596},{"_id":"public/css/main.css","hash":"f5f1056d80e16ff736343f1adc3c8be18f9a9593","modified":1512795764596},{"_id":"public/lib/needsharebutton/needsharebutton.js","hash":"9885fd9bea5e7ebafc5b1de9d17be5e106248d96","modified":1512795764596},{"_id":"public/lib/needsharebutton/font-embedded.css","hash":"c39d37278c1e178838732af21bd26cd0baeddfe0","modified":1512795764596},{"_id":"public/lib/three/canvas_lines.min.js","hash":"dce4a3b65f8bf958f973690caa7ec4952f353b0c","modified":1512795764596},{"_id":"public/lib/three/canvas_sphere.min.js","hash":"d8ea241a53c135a650f7335d2b6982b899fd58a9","modified":1512795764596},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1512795764596},{"_id":"public/lib/three/three-waves.min.js","hash":"d968cba6b3a50b3626a02d67b544f349d83b147c","modified":1512795764596},{"_id":"public/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1512795764596},{"_id":"public/lib/Han/dist/han.min.js","hash":"f559c68a25065a14f47da954a7617d87263e409d","modified":1512795764596},{"_id":"public/lib/Han/dist/han.css","hash":"bd40da3fba8735df5850956814e312bd7b3193d7","modified":1512795764596},{"_id":"public/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1512795764596},{"_id":"public/lib/Han/dist/han.min.css","hash":"a0c9e32549a8b8cf327ab9227b037f323cdb60ee","modified":1512795764596},{"_id":"public/lib/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1512795764597},{"_id":"public/lib/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1512795764597},{"_id":"public/lib/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1512795764597},{"_id":"public/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1512795764597},{"_id":"public/lib/Han/dist/han.js","hash":"e345397e0585c9fed1449e614ec13e0224acf2ab","modified":1512795764597},{"_id":"public/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1512795764597},{"_id":"public/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1512795764597},{"_id":"public/lib/three/three.min.js","hash":"73f4cdc17e51a72b9bf5b9291f65386d615c483b","modified":1512795764597},{"_id":"public/lib/algolia-instant-search/instantsearch.min.js","hash":"9ccc6f8144f54e86df9a3fd33a18368d81cf3a4f","modified":1512795764597},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1512795764597},{"_id":"public/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1512795764597},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1512795764597},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"b5483b11f8ba213e733b5b8af9927a04fec996f6","modified":1512795764655},{"_id":"public/120917/builder/index.html","hash":"1018503aa59800a430769be7ab97f04da07f1afa","modified":1513257302087},{"_id":"public/120917/bridge/index.html","hash":"0b19def92569e9c70601c540d552c722e8242ef8","modified":1513257302087},{"_id":"public/120917/balking/index.html","hash":"b3bc89aa8c87bb3633750b0fc4961a10d7bd098f","modified":1513257302087},{"_id":"public/categories/design-patterns/index.html","hash":"281c0843ccb4c0c5fbb55449bd7214f429150bca","modified":1513256757450},{"_id":"public/categories/java/index.html","hash":"2247a39ce0355b15632d0cac88eecf63ebf642e4","modified":1513256757450},{"_id":"public/categories/other/index.html","hash":"b7d56daa003cc4898a7f2b2bc333c3f4be132960","modified":1513256757450},{"_id":"public/categories/translate/index.html","hash":"28da696171588d144c017c7a50466092084dbf47","modified":1513256757452},{"_id":"public/tags/translate/index.html","hash":"2dfccd8b2445ab6b0d8ba4fc19649e34604de05a","modified":1513256757452},{"_id":"public/tags/difficulty-intermediate/index.html","hash":"39451d88ef93a9b3b1ae375aff6df08f34c590a3","modified":1513256757453},{"_id":"public/tags/difficulty-beginner/index.html","hash":"5be44fba146615cf0b295563aae0ee9a0f507b3d","modified":1513256757454},{"_id":"public/tags/qr-code/index.html","hash":"89d7e2fae40ead42c3d1be96aee930431cc51604","modified":1513256757452},{"_id":"public/tags/login/index.html","hash":"a3871f2516b8204ecadf7117988d19d5523d4c2b","modified":1513256757454},{"_id":"public/tags/flow/index.html","hash":"89c103660a0e7bfcf17651706c05ffbecb0f954f","modified":1513256757454},{"_id":"public/tags/plugin/index.html","hash":"cea2cb5f8796aa9dd5d80ddd4434fc5bd30cb43f","modified":1513256757453},{"_id":"public/tags/other/index.html","hash":"01248c48190cfe9d7a91215824dbdedc7c8e9972","modified":1513256757454},{"_id":"public/tags/binary/index.html","hash":"158c75bf9240e037035f924385ede31ec793be83","modified":1513256757454},{"_id":"public/tags/java-basic/index.html","hash":"59708db9f0bb956ec483a70997c7ace1f21447cb","modified":1513256757454},{"_id":"public/tags/bit-operation/index.html","hash":"a1adebee84fb008c773174044bd56aa8596ba885","modified":1513256757454},{"_id":"public/tags/theme/index.html","hash":"a5047fb4415f91b2026a6eab28215dc3f4274175","modified":1513256757454},{"_id":"public/tags/programmer/index.html","hash":"0799520fb230f43e3b1584add6bd0aeb782fbb78","modified":1513256757455},{"_id":"public/tags/reprint/index.html","hash":"7c03c0b38ffb55fef16b8c7c2a4134888c6955c1","modified":1513256757455},{"_id":"public/tags/live/index.html","hash":"d10133c8197e3881a8965e70f8bf09136087586f","modified":1513256757454},{"_id":"public/tags/house/index.html","hash":"1cf80ede142e931f69c24f4c81cbfbdb779c37b7","modified":1513256757455},{"_id":"public/tags/properties/index.html","hash":"cba21387197f59cf4e188dcb5a7a9c65a4197ade","modified":1513256757455},{"_id":"public/tags/design/index.html","hash":"25ee95110fdbbd8736225d22186e3952ae487a3b","modified":1513256757455},{"_id":"public/tags/standard/index.html","hash":"09e7fc313a4262163b4ab84df64ad23448fa13ba","modified":1513256757455},{"_id":"themes/next/.git/objects/0f/809c9819bae6294293a6ce1c48d93bb3d28196","hash":"631c11a48de64dfff610ae47810bcb5a3c63870d","modified":1512809081069},{"_id":"themes/next/.git/objects/4e/c3dfa61de19314f56a7973d1ef064755f67b76","hash":"e6881d23a79e314a2fedbedef751ac7b3b98700e","modified":1512809081162},{"_id":"themes/next/.git/objects/24/a1de344d0109dca48bfa1055045d96df2bad07","hash":"67dc555e66580c794125f8eaa6c4c5d49e7afaaf","modified":1512804424788},{"_id":"themes/next/.git/objects/13/bb25c8f6b2d6a72fa6647c9221ef0e1275dc04","hash":"288904135b20c8e5633d20c82245003d63feee84","modified":1512804424795},{"_id":"themes/next/.git/objects/bf/f8843f36a0daf9005ea51d07ddbb6925a3563b","hash":"9957cc68c76c4377333a25f1f5ad537c9b01dba7","modified":1512809081169},{"_id":"themes/next/.git/objects/e6/fbc37c7287f42c059bd220752b9e598a1a626d","hash":"fb90230ab092dd59c045361c2cdf1a9e1f76da30","modified":1512804424779},{"_id":"themes/next/.git/objects/78/34f1341dd0597801a9170ceaff9c5cc66ff513","hash":"942a350fb860ff66d23c689704a4f12dd191d01d","modified":1512804424799},{"_id":"themes/next/.git/objects/eb/f8b09898af9858440b937691676ae1426a2b2b","hash":"cd9b8a54c7fb9c589440c21a1a19f758820bc2ae","modified":1512804424784},{"_id":"themes/next/.git/objects/c9/eb9a8085e2d63d98946f4e7ce1f9ec892ee511","hash":"8f5342990daed61fc834855043c9339b7251f6c7","modified":1512804424791}],"Category":[{"name":"设计模式","_id":"cjayvjb0e00044kvnqf0ejrgq"},{"name":"Java相关","_id":"cjayvjb0v000n4kvn4c8dc0zv"},{"name":"Hexo","_id":"cjayvjb11000w4kvn4uwc196z"},{"name":"Gists","_id":"cjayvjb1900164kvn748j1hvt"},{"name":"其他","_id":"cjayvjb1j001o4kvnp7mxyc3r"},{"name":"译文","_id":"cjayvjb3c003u4kvnxpgoylzl"}],"Data":[],"Page":[{"title":"categories","date":"2017-11-03T14:47:19.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2017-11-03 22:47:19\ntype: \"categories\"\n---\n","updated":"2017-11-03T15:01:59.412Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cjayvjb0a00014kvnt6n3qfd4","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"","date":"2017-10-22T03:57:52.000Z","_content":"#### 关于本站\n- [码市](https://coding.net/?from=dmrs.me)提供免费空间(Pages服务)\n- [阿里云](https://www.aliyun.com/?from=dmrs.me)提供域名.\n- [七牛云](https://www.qiniu.com/?from=dmrs.me)提供免费存储.\n- [Hexo](https://hexo.io/zh-cn/?from=dmrs.me)提供博客模板以及插件集成.\n- [gitter](https://gitter.im?from=dmrs.me)提供留言功能(需要Github/Twitter账户)\n- [不蒜子](http://ibruce.info/2015/04/04/busuanzi/?from=dmrs.me)提供网站统计功能.\n- [flashlab](https://github.com/flashlab/hexo-generator-search/?from=dmrs.me)提供本地搜索功能.\n\n\n---\n\n#### 关于本人\n- Email：github@m.dmrs.me\n- QQ：3081927676\n- 微信号：bughope \n- 原创内容均亲自实践过,若有疏漏或者不恰当之处欢迎[指正](https://gitter.im/maskspace/Lobby?from=dmrs.me).\n- 欢迎给我**[<font color=\"red\">留言</font>](https://gitter.im/maskspace/Lobby?from=dmrs.me)**.\n\n\n---\n\n#### 本站申明\n本站所有内容本着共享原则,转载请在显著位置标明来源和原作者(非原创内容遵循原有协议发布,著作权归属原作者或是团队),除特别声明外任何商业用途请联系作者,若侵犯到了您的合法权益,请联系邮件。\n   \n---\n[comment]: 个人常用网站</br>\n[comment]: [基金均线分析](http://ionia-code.gitee.io/fundtool/html/index.html)</br>\n[comment]: 数据来自天天基金网,由于原数据接口是http的为了防止跨域问题,采用http,挂在开源中国的[码云](https://gitee.com)上. \n\n\n#### 更新记录\n- 2017年11月13日将七牛云存储文件新建了一个工厂,独立了一个pages服务,分离出一些原来`github`上的文件,加速网页打开速度.\n- 2017年11月08日留言功能(Gitter)插件放在右下角,添加了[gitment](https://imsun.net/posts/gitment-introduction/#more)支持(Github的Issue做的留言插件).\n- 2017年11月06日修改了文章路径`/YYYY/MM/DD/title`改为`MMDDYY/title`.\n- 2017年11月05日添加了留言功能.\n- 2017年10月31日修改了代码样式,添加作者头像,添加了标签以及分类.\n- 2017年10月22日网站上线.","source":"about/index.md","raw":"---\ntitle: \ndate: 2017-10-22 11:57:52\n---\n#### 关于本站\n- [码市](https://coding.net/?from=dmrs.me)提供免费空间(Pages服务)\n- [阿里云](https://www.aliyun.com/?from=dmrs.me)提供域名.\n- [七牛云](https://www.qiniu.com/?from=dmrs.me)提供免费存储.\n- [Hexo](https://hexo.io/zh-cn/?from=dmrs.me)提供博客模板以及插件集成.\n- [gitter](https://gitter.im?from=dmrs.me)提供留言功能(需要Github/Twitter账户)\n- [不蒜子](http://ibruce.info/2015/04/04/busuanzi/?from=dmrs.me)提供网站统计功能.\n- [flashlab](https://github.com/flashlab/hexo-generator-search/?from=dmrs.me)提供本地搜索功能.\n\n\n---\n\n#### 关于本人\n- Email：github@m.dmrs.me\n- QQ：3081927676\n- 微信号：bughope \n- 原创内容均亲自实践过,若有疏漏或者不恰当之处欢迎[指正](https://gitter.im/maskspace/Lobby?from=dmrs.me).\n- 欢迎给我**[<font color=\"red\">留言</font>](https://gitter.im/maskspace/Lobby?from=dmrs.me)**.\n\n\n---\n\n#### 本站申明\n本站所有内容本着共享原则,转载请在显著位置标明来源和原作者(非原创内容遵循原有协议发布,著作权归属原作者或是团队),除特别声明外任何商业用途请联系作者,若侵犯到了您的合法权益,请联系邮件。\n   \n---\n[comment]: 个人常用网站</br>\n[comment]: [基金均线分析](http://ionia-code.gitee.io/fundtool/html/index.html)</br>\n[comment]: 数据来自天天基金网,由于原数据接口是http的为了防止跨域问题,采用http,挂在开源中国的[码云](https://gitee.com)上. \n\n\n#### 更新记录\n- 2017年11月13日将七牛云存储文件新建了一个工厂,独立了一个pages服务,分离出一些原来`github`上的文件,加速网页打开速度.\n- 2017年11月08日留言功能(Gitter)插件放在右下角,添加了[gitment](https://imsun.net/posts/gitment-introduction/#more)支持(Github的Issue做的留言插件).\n- 2017年11月06日修改了文章路径`/YYYY/MM/DD/title`改为`MMDDYY/title`.\n- 2017年11月05日添加了留言功能.\n- 2017年10月31日修改了代码样式,添加作者头像,添加了标签以及分类.\n- 2017年10月22日网站上线.","updated":"2017-12-06T15:25:43.444Z","path":"about/index.html","comments":1,"layout":"page","_id":"cjayvjb0c00034kvnzyxnggxm","content":"<h4 id=\"关于本站\"><a href=\"#关于本站\" class=\"headerlink\" title=\"关于本站\"></a>关于本站</h4><ul>\n<li><a href=\"https://coding.net/?from=dmrs.me\" target=\"_blank\" rel=\"external\">码市</a>提供免费空间(Pages服务)</li>\n<li><a href=\"https://www.aliyun.com/?from=dmrs.me\" target=\"_blank\" rel=\"external\">阿里云</a>提供域名.</li>\n<li><a href=\"https://www.qiniu.com/?from=dmrs.me\" target=\"_blank\" rel=\"external\">七牛云</a>提供免费存储.</li>\n<li><a href=\"https://hexo.io/zh-cn/?from=dmrs.me\" target=\"_blank\" rel=\"external\">Hexo</a>提供博客模板以及插件集成.</li>\n<li><a href=\"https://gitter.im?from=dmrs.me\" target=\"_blank\" rel=\"external\">gitter</a>提供留言功能(需要Github/Twitter账户)</li>\n<li><a href=\"http://ibruce.info/2015/04/04/busuanzi/?from=dmrs.me\" target=\"_blank\" rel=\"external\">不蒜子</a>提供网站统计功能.</li>\n<li><a href=\"https://github.com/flashlab/hexo-generator-search/?from=dmrs.me\" target=\"_blank\" rel=\"external\">flashlab</a>提供本地搜索功能.</li>\n</ul>\n<hr>\n<h4 id=\"关于本人\"><a href=\"#关于本人\" class=\"headerlink\" title=\"关于本人\"></a>关于本人</h4><ul>\n<li>Email：github@m.dmrs.me</li>\n<li>QQ：3081927676</li>\n<li>微信号：bughope </li>\n<li>原创内容均亲自实践过,若有疏漏或者不恰当之处欢迎<a href=\"https://gitter.im/maskspace/Lobby?from=dmrs.me\" target=\"_blank\" rel=\"external\">指正</a>.</li>\n<li>欢迎给我<strong><a href=\"https://gitter.im/maskspace/Lobby?from=dmrs.me\" target=\"_blank\" rel=\"external\"><font color=\"red\">留言</font></a></strong>.</li>\n</ul>\n<hr>\n<h4 id=\"本站申明\"><a href=\"#本站申明\" class=\"headerlink\" title=\"本站申明\"></a>本站申明</h4><p>本站所有内容本着共享原则,转载请在显著位置标明来源和原作者(非原创内容遵循原有协议发布,著作权归属原作者或是团队),除特别声明外任何商业用途请联系作者,若侵犯到了您的合法权益,请联系邮件。</p>\n<hr>\n<h4 id=\"更新记录\"><a href=\"#更新记录\" class=\"headerlink\" title=\"更新记录\"></a>更新记录</h4><ul>\n<li>2017年11月13日将七牛云存储文件新建了一个工厂,独立了一个pages服务,分离出一些原来<code>github</code>上的文件,加速网页打开速度.</li>\n<li>2017年11月08日留言功能(Gitter)插件放在右下角,添加了<a href=\"https://imsun.net/posts/gitment-introduction/#more\" target=\"_blank\" rel=\"external\">gitment</a>支持(Github的Issue做的留言插件).</li>\n<li>2017年11月06日修改了文章路径<code>/YYYY/MM/DD/title</code>改为<code>MMDDYY/title</code>.</li>\n<li>2017年11月05日添加了留言功能.</li>\n<li>2017年10月31日修改了代码样式,添加作者头像,添加了标签以及分类.</li>\n<li>2017年10月22日网站上线.</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"关于本站\"><a href=\"#关于本站\" class=\"headerlink\" title=\"关于本站\"></a>关于本站</h4><ul>\n<li><a href=\"https://coding.net/?from=dmrs.me\" target=\"_blank\" rel=\"external\">码市</a>提供免费空间(Pages服务)</li>\n<li><a href=\"https://www.aliyun.com/?from=dmrs.me\" target=\"_blank\" rel=\"external\">阿里云</a>提供域名.</li>\n<li><a href=\"https://www.qiniu.com/?from=dmrs.me\" target=\"_blank\" rel=\"external\">七牛云</a>提供免费存储.</li>\n<li><a href=\"https://hexo.io/zh-cn/?from=dmrs.me\" target=\"_blank\" rel=\"external\">Hexo</a>提供博客模板以及插件集成.</li>\n<li><a href=\"https://gitter.im?from=dmrs.me\" target=\"_blank\" rel=\"external\">gitter</a>提供留言功能(需要Github/Twitter账户)</li>\n<li><a href=\"http://ibruce.info/2015/04/04/busuanzi/?from=dmrs.me\" target=\"_blank\" rel=\"external\">不蒜子</a>提供网站统计功能.</li>\n<li><a href=\"https://github.com/flashlab/hexo-generator-search/?from=dmrs.me\" target=\"_blank\" rel=\"external\">flashlab</a>提供本地搜索功能.</li>\n</ul>\n<hr>\n<h4 id=\"关于本人\"><a href=\"#关于本人\" class=\"headerlink\" title=\"关于本人\"></a>关于本人</h4><ul>\n<li>Email：github@m.dmrs.me</li>\n<li>QQ：3081927676</li>\n<li>微信号：bughope </li>\n<li>原创内容均亲自实践过,若有疏漏或者不恰当之处欢迎<a href=\"https://gitter.im/maskspace/Lobby?from=dmrs.me\" target=\"_blank\" rel=\"external\">指正</a>.</li>\n<li>欢迎给我<strong><a href=\"https://gitter.im/maskspace/Lobby?from=dmrs.me\" target=\"_blank\" rel=\"external\"><font color=\"red\">留言</font></a></strong>.</li>\n</ul>\n<hr>\n<h4 id=\"本站申明\"><a href=\"#本站申明\" class=\"headerlink\" title=\"本站申明\"></a>本站申明</h4><p>本站所有内容本着共享原则,转载请在显著位置标明来源和原作者(非原创内容遵循原有协议发布,著作权归属原作者或是团队),除特别声明外任何商业用途请联系作者,若侵犯到了您的合法权益,请联系邮件。</p>\n<hr>\n<h4 id=\"更新记录\"><a href=\"#更新记录\" class=\"headerlink\" title=\"更新记录\"></a>更新记录</h4><ul>\n<li>2017年11月13日将七牛云存储文件新建了一个工厂,独立了一个pages服务,分离出一些原来<code>github</code>上的文件,加速网页打开速度.</li>\n<li>2017年11月08日留言功能(Gitter)插件放在右下角,添加了<a href=\"https://imsun.net/posts/gitment-introduction/#more\" target=\"_blank\" rel=\"external\">gitment</a>支持(Github的Issue做的留言插件).</li>\n<li>2017年11月06日修改了文章路径<code>/YYYY/MM/DD/title</code>改为<code>MMDDYY/title</code>.</li>\n<li>2017年11月05日添加了留言功能.</li>\n<li>2017年10月31日修改了代码样式,添加作者头像,添加了标签以及分类.</li>\n<li>2017年10月22日网站上线.</li>\n</ul>\n"},{"title":"tags","date":"2017-11-03T14:47:03.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2017-11-03 22:47:03\ntype: \"tags\"\n---\n","updated":"2017-11-03T15:01:19.700Z","path":"tags/index.html","comments":1,"layout":"page","_id":"cjayvjb0h00074kvn65qif3w5","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"Abstract Document","photos":["https://static.zuul.top/java-design-patterns-doc-cn/01_abstract-document.png"],"_content":"\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/01_abstract-document\n\n## 意图\n实现无类型语言的灵活性并保持类型安全 \n\n## 适用性\n使用抽象文档模式时\n\n* 有需要动态添加新的属性\n* 你想要一个灵活的方式来组织树状结构域\n* 你想要更松散的耦合系统\n\n\n## 参考\n\n* [Wikipedia: Abstract Document Pattern](https://en.wikipedia.org/wiki/Abstract_Document_Pattern)\n* [Martin Fowler: Dealing with properties](http://martinfowler.com/apsupp/properties.pdf)\n\n## 原项目地址:https://github.com/iluwatar/java-design-patterns ","source":"_posts/01_abstract-document.md","raw":"---\ntitle: Abstract Document\npermalink: abstract-document\ncategories: 设计模式\ntags: \n - Java\n - 中级难度\n - 译文\nphotos:\n - https://static.zuul.top/java-design-patterns-doc-cn/01_abstract-document.png\n---\n\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/01_abstract-document\n\n## 意图\n实现无类型语言的灵活性并保持类型安全 \n\n## 适用性\n使用抽象文档模式时\n\n* 有需要动态添加新的属性\n* 你想要一个灵活的方式来组织树状结构域\n* 你想要更松散的耦合系统\n\n\n## 参考\n\n* [Wikipedia: Abstract Document Pattern](https://en.wikipedia.org/wiki/Abstract_Document_Pattern)\n* [Martin Fowler: Dealing with properties](http://martinfowler.com/apsupp/properties.pdf)\n\n## 原项目地址:https://github.com/iluwatar/java-design-patterns ","slug":"abstract-document","published":1,"date":"2017-12-06T15:05:06.698Z","updated":"2017-12-09T04:02:21.467Z","comments":1,"layout":"post","link":"","_id":"cjayvjb0600004kvnac9ydc1h","content":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/01_abstract-document\" target=\"_blank\" rel=\"external\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/01_abstract-document</a></p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>实现无类型语言的灵活性并保持类型安全 </p>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用抽象文档模式时</p>\n<ul>\n<li>有需要动态添加新的属性</li>\n<li>你想要一个灵活的方式来组织树状结构域</li>\n<li>你想要更松散的耦合系统</li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Abstract_Document_Pattern\" target=\"_blank\" rel=\"external\">Wikipedia: Abstract Document Pattern</a></li>\n<li><a href=\"http://martinfowler.com/apsupp/properties.pdf\" target=\"_blank\" rel=\"external\">Martin Fowler: Dealing with properties</a></li>\n</ul>\n<h2 id=\"原项目地址-https-github-com-iluwatar-java-design-patterns\"><a href=\"#原项目地址-https-github-com-iluwatar-java-design-patterns\" class=\"headerlink\" title=\"原项目地址:https://github.com/iluwatar/java-design-patterns\"></a>原项目地址:<a href=\"https://github.com/iluwatar/java-design-patterns\" target=\"_blank\" rel=\"external\">https://github.com/iluwatar/java-design-patterns</a></h2>","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/01_abstract-document\" target=\"_blank\" rel=\"external\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/01_abstract-document</a></p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>实现无类型语言的灵活性并保持类型安全 </p>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用抽象文档模式时</p>\n<ul>\n<li>有需要动态添加新的属性</li>\n<li>你想要一个灵活的方式来组织树状结构域</li>\n<li>你想要更松散的耦合系统</li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Abstract_Document_Pattern\" target=\"_blank\" rel=\"external\">Wikipedia: Abstract Document Pattern</a></li>\n<li><a href=\"http://martinfowler.com/apsupp/properties.pdf\" target=\"_blank\" rel=\"external\">Martin Fowler: Dealing with properties</a></li>\n</ul>\n<h2 id=\"原项目地址-https-github-com-iluwatar-java-design-patterns\"><a href=\"#原项目地址-https-github-com-iluwatar-java-design-patterns\" class=\"headerlink\" title=\"原项目地址:https://github.com/iluwatar/java-design-patterns\"></a>原项目地址:<a href=\"https://github.com/iluwatar/java-design-patterns\" target=\"_blank\" rel=\"external\">https://github.com/iluwatar/java-design-patterns</a></h2>"},{"title":"Abstract Factory","photos":["https://static.zuul.top/java-design-patterns-doc-cn/02_abstract-factory.png"],"_content":"\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/02_abstract-factory\n\n## 也被称为\n套件\n\n## 意图\n提供一个用于创建相关或相关系列的界面\n对象，而不指定具体的类。\n\n## 说明\n真实世界的例子\n\n>要创造一个王国，我们需要有共同主题的物体。 精灵王国需要一个精灵王，精灵城堡和精灵军，而兽人王国需要一个兽人王，兽人城堡和兽人军。 王国中的物体之间有依赖关系。\n\n用简单的话来说\n\n>工厂工厂; 一个工厂，将个别但相关/依赖的工厂分组在一起，而不指定具体的类别。\n\n维基百科说\n\n>抽象工厂模式提供了一种方法来封装一组具有共同主题的单个工厂，而不指定具体的类\n\n**编程示例**\n\n翻译上面的王国的例子。 首先，我们有一些界面和实施的王国对象\n\n```java\npublic interface Castle {\n  String getDescription();\n}\npublic interface King {\n  String getDescription();\n}\npublic interface Army {\n  String getDescription();\n}\n\n// Elven implementations ->\npublic class ElfCastle implements Castle {\n  static final String DESCRIPTION = \"This is the Elven castle!\";\n  @Override\n  public String getDescription() {\n    return DESCRIPTION;\n  }\n}\npublic class ElfKing implements King {\n  static final String DESCRIPTION = \"This is the Elven king!\";\n  @Override\n  public String getDescription() {\n    return DESCRIPTION;\n  }\n}\npublic class ElfArmy implements Army {\n  static final String DESCRIPTION = \"This is the Elven Army!\";\n  @Override\n  public String getDescription() {\n    return DESCRIPTION;\n  }\n}\n\n// Orcish implementations similarly...\n\n```\n\n然后我们有王国工厂的抽象和实现\n\n```java\npublic interface KingdomFactory {\n  Castle createCastle();\n  King createKing();\n  Army createArmy();\n}\n\npublic class ElfKingdomFactory implements KingdomFactory {\n  public Castle createCastle() {\n    return new ElfCastle();\n  }\n  public King createKing() {\n    return new ElfKing();\n  }\n  public Army createArmy() {\n    return new ElfArmy();\n  }\n}\n\npublic class OrcKingdomFactory implements KingdomFactory {\n  public Castle createCastle() {\n    return new OrcCastle();\n  }\n  public King createKing() {\n    return new OrcKing();\n  }\n  public Army createArmy() {\n    return new OrcArmy();\n  }\n}\n```\n\n现在我们有我们的抽象工厂，让我们做相关对象的家庭，即精灵王国工厂创造精灵城堡，国王和军队等。\n\n```java\nKingdomFactory factory = new ElfKingdomFactory();\nCastle castle = factory.createCastle();\nKing king = factory.createKing();\nArmy army = factory.createArmy();\n\ncastle.getDescription();  // Output: This is the Elven castle!\nking.getDescription(); // Output: This is the Elven king!\narmy.getDescription(); // Output: This is the Elven Army!\n\n```\n\n现在，我们可以为我们不同的王国工厂设计一个工厂。 在这个例子中，我们创建了`FactoryMaker`，负责返回`ElfKingdomFactory`或`OrcKingdomFactory`的一个实例。\n客户端可以使用`FactoryMaker`创建所需的哪一个具体的工厂，反过来，他们将生产不同的具体对象（军队，国王，城堡）。\n在这个例子中，我们也使用了一个枚举来参数化客户端要求的王国工厂的类型。\n\n```java\npublic static class FactoryMaker {\n\n  public enum KingdomType {\n    ELF, ORC\n  }\n\n  public static KingdomFactory makeFactory(KingdomType type) {\n    switch (type) {\n      case ELF:\n        return new ElfKingdomFactory();\n      case ORC:\n        return new OrcKingdomFactory();\n      default:\n        throw new IllegalArgumentException(\"KingdomType not supported.\");\n    }\n  }\n}\n\npublic static void main(String[] args) {\n  App app = new App();\n\n  LOGGER.info(\"Elf Kingdom\");\n  app.createKingdom(FactoryMaker.makeFactory(KingdomType.ELF));\n  LOGGER.info(app.getArmy().getDescription());\n  LOGGER.info(app.getCastle().getDescription());\n  LOGGER.info(app.getKing().getDescription());\n\n  LOGGER.info(\"Orc Kingdom\");\n  app.createKingdom(FactoryMaker.makeFactory(KingdomType.ORC));\n  -- similar use of the orc factory\n}\n```\n\n\n## 适用性\n使用抽象工厂模式时\n\n* 一个系统应该独立于产品的创建，组成和代表\n* 系统应配置多个产品系列中的一个\n* 一系列相关产品对象被设计为一起使用，并且您需要强制执行此限制\n* 你想提供一个产品类库，你只想揭示他们的接口，而不是他们的实现\n* 依赖的生命周期在概念上比消费者的生命周期短。\n* 您需要运行时值来构建特定的依赖关系\n* 您想在运行时决定从家庭中调用哪个产品。\n* 您需要提供一个或多个只在运行时已知的参数，然后才能解析相关性。\n\n## 用例：\n\n* 选择在运行时调用适当的`FileSystemAcmeService`或`DatabaseAcmeService`或`NetworkAcmeService`实现。\n* 单元测试用例写作变得更容易\n\n## 后果：\n\njava中的依赖注入隐藏了可能导致运行时错误的服务类依赖，这些错误在编译时会被捕获。\n\n## 示例\n\n* [javax.xml.parsers.DocumentBuilderFactory](http://docs.oracle.com/javase/8/docs/api/javax/xml/parsers/DocumentBuilderFactory.html)\n* [javax.xml.transform.TransformerFactory](http://docs.oracle.com/javase/8/docs/api/javax/xml/transform/TransformerFactory.html#newInstance--)\n* [javax.xml.xpath.XPathFactory](http://docs.oracle.com/javase/8/docs/api/javax/xml/xpath/XPathFactory.html#newInstance--)\n\n## 参考\n\n* [Design Patterns: Elements of Reusable Object-Oriented Software](http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612)\n\n## 原项目地址:https://github.com/iluwatar/java-design-patterns\n","source":"_posts/02_abstract-factory.md","raw":"---\ntitle: Abstract Factory\npermalink: abstract-factory\ncategories: 设计模式\ntags:\n - Java\n - 中级难度\n - 译文\nphotos:\n - https://static.zuul.top/java-design-patterns-doc-cn/02_abstract-factory.png\n---\n\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/02_abstract-factory\n\n## 也被称为\n套件\n\n## 意图\n提供一个用于创建相关或相关系列的界面\n对象，而不指定具体的类。\n\n## 说明\n真实世界的例子\n\n>要创造一个王国，我们需要有共同主题的物体。 精灵王国需要一个精灵王，精灵城堡和精灵军，而兽人王国需要一个兽人王，兽人城堡和兽人军。 王国中的物体之间有依赖关系。\n\n用简单的话来说\n\n>工厂工厂; 一个工厂，将个别但相关/依赖的工厂分组在一起，而不指定具体的类别。\n\n维基百科说\n\n>抽象工厂模式提供了一种方法来封装一组具有共同主题的单个工厂，而不指定具体的类\n\n**编程示例**\n\n翻译上面的王国的例子。 首先，我们有一些界面和实施的王国对象\n\n```java\npublic interface Castle {\n  String getDescription();\n}\npublic interface King {\n  String getDescription();\n}\npublic interface Army {\n  String getDescription();\n}\n\n// Elven implementations ->\npublic class ElfCastle implements Castle {\n  static final String DESCRIPTION = \"This is the Elven castle!\";\n  @Override\n  public String getDescription() {\n    return DESCRIPTION;\n  }\n}\npublic class ElfKing implements King {\n  static final String DESCRIPTION = \"This is the Elven king!\";\n  @Override\n  public String getDescription() {\n    return DESCRIPTION;\n  }\n}\npublic class ElfArmy implements Army {\n  static final String DESCRIPTION = \"This is the Elven Army!\";\n  @Override\n  public String getDescription() {\n    return DESCRIPTION;\n  }\n}\n\n// Orcish implementations similarly...\n\n```\n\n然后我们有王国工厂的抽象和实现\n\n```java\npublic interface KingdomFactory {\n  Castle createCastle();\n  King createKing();\n  Army createArmy();\n}\n\npublic class ElfKingdomFactory implements KingdomFactory {\n  public Castle createCastle() {\n    return new ElfCastle();\n  }\n  public King createKing() {\n    return new ElfKing();\n  }\n  public Army createArmy() {\n    return new ElfArmy();\n  }\n}\n\npublic class OrcKingdomFactory implements KingdomFactory {\n  public Castle createCastle() {\n    return new OrcCastle();\n  }\n  public King createKing() {\n    return new OrcKing();\n  }\n  public Army createArmy() {\n    return new OrcArmy();\n  }\n}\n```\n\n现在我们有我们的抽象工厂，让我们做相关对象的家庭，即精灵王国工厂创造精灵城堡，国王和军队等。\n\n```java\nKingdomFactory factory = new ElfKingdomFactory();\nCastle castle = factory.createCastle();\nKing king = factory.createKing();\nArmy army = factory.createArmy();\n\ncastle.getDescription();  // Output: This is the Elven castle!\nking.getDescription(); // Output: This is the Elven king!\narmy.getDescription(); // Output: This is the Elven Army!\n\n```\n\n现在，我们可以为我们不同的王国工厂设计一个工厂。 在这个例子中，我们创建了`FactoryMaker`，负责返回`ElfKingdomFactory`或`OrcKingdomFactory`的一个实例。\n客户端可以使用`FactoryMaker`创建所需的哪一个具体的工厂，反过来，他们将生产不同的具体对象（军队，国王，城堡）。\n在这个例子中，我们也使用了一个枚举来参数化客户端要求的王国工厂的类型。\n\n```java\npublic static class FactoryMaker {\n\n  public enum KingdomType {\n    ELF, ORC\n  }\n\n  public static KingdomFactory makeFactory(KingdomType type) {\n    switch (type) {\n      case ELF:\n        return new ElfKingdomFactory();\n      case ORC:\n        return new OrcKingdomFactory();\n      default:\n        throw new IllegalArgumentException(\"KingdomType not supported.\");\n    }\n  }\n}\n\npublic static void main(String[] args) {\n  App app = new App();\n\n  LOGGER.info(\"Elf Kingdom\");\n  app.createKingdom(FactoryMaker.makeFactory(KingdomType.ELF));\n  LOGGER.info(app.getArmy().getDescription());\n  LOGGER.info(app.getCastle().getDescription());\n  LOGGER.info(app.getKing().getDescription());\n\n  LOGGER.info(\"Orc Kingdom\");\n  app.createKingdom(FactoryMaker.makeFactory(KingdomType.ORC));\n  -- similar use of the orc factory\n}\n```\n\n\n## 适用性\n使用抽象工厂模式时\n\n* 一个系统应该独立于产品的创建，组成和代表\n* 系统应配置多个产品系列中的一个\n* 一系列相关产品对象被设计为一起使用，并且您需要强制执行此限制\n* 你想提供一个产品类库，你只想揭示他们的接口，而不是他们的实现\n* 依赖的生命周期在概念上比消费者的生命周期短。\n* 您需要运行时值来构建特定的依赖关系\n* 您想在运行时决定从家庭中调用哪个产品。\n* 您需要提供一个或多个只在运行时已知的参数，然后才能解析相关性。\n\n## 用例：\n\n* 选择在运行时调用适当的`FileSystemAcmeService`或`DatabaseAcmeService`或`NetworkAcmeService`实现。\n* 单元测试用例写作变得更容易\n\n## 后果：\n\njava中的依赖注入隐藏了可能导致运行时错误的服务类依赖，这些错误在编译时会被捕获。\n\n## 示例\n\n* [javax.xml.parsers.DocumentBuilderFactory](http://docs.oracle.com/javase/8/docs/api/javax/xml/parsers/DocumentBuilderFactory.html)\n* [javax.xml.transform.TransformerFactory](http://docs.oracle.com/javase/8/docs/api/javax/xml/transform/TransformerFactory.html#newInstance--)\n* [javax.xml.xpath.XPathFactory](http://docs.oracle.com/javase/8/docs/api/javax/xml/xpath/XPathFactory.html#newInstance--)\n\n## 参考\n\n* [Design Patterns: Elements of Reusable Object-Oriented Software](http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612)\n\n## 原项目地址:https://github.com/iluwatar/java-design-patterns\n","slug":"abstract-factory","published":1,"date":"2017-12-06T15:05:06.704Z","updated":"2017-12-09T04:02:36.250Z","comments":1,"layout":"post","link":"","_id":"cjayvjb0b00024kvn4pwr2z6i","content":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/02_abstract-factory\" target=\"_blank\" rel=\"external\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/02_abstract-factory</a></p>\n<h2 id=\"也被称为\"><a href=\"#也被称为\" class=\"headerlink\" title=\"也被称为\"></a>也被称为</h2><p>套件</p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>提供一个用于创建相关或相关系列的界面<br>对象，而不指定具体的类。</p>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>真实世界的例子</p>\n<blockquote>\n<p>要创造一个王国，我们需要有共同主题的物体。 精灵王国需要一个精灵王，精灵城堡和精灵军，而兽人王国需要一个兽人王，兽人城堡和兽人军。 王国中的物体之间有依赖关系。</p>\n</blockquote>\n<p>用简单的话来说</p>\n<blockquote>\n<p>工厂工厂; 一个工厂，将个别但相关/依赖的工厂分组在一起，而不指定具体的类别。</p>\n</blockquote>\n<p>维基百科说</p>\n<blockquote>\n<p>抽象工厂模式提供了一种方法来封装一组具有共同主题的单个工厂，而不指定具体的类</p>\n</blockquote>\n<p><strong>编程示例</strong></p>\n<p>翻译上面的王国的例子。 首先，我们有一些界面和实施的王国对象</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Castle</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\">String <span class=\"title\">getDescription</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">King</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\">String <span class=\"title\">getDescription</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Army</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\">String <span class=\"title\">getDescription</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Elven implementations -&gt;</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ElfCastle</span> <span class=\"keyword\">implements</span> <span class=\"title\">Castle</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String DESCRIPTION = <span class=\"string\">\"This is the Elven castle!\"</span>;</div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> DESCRIPTION;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ElfKing</span> <span class=\"keyword\">implements</span> <span class=\"title\">King</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String DESCRIPTION = <span class=\"string\">\"This is the Elven king!\"</span>;</div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> DESCRIPTION;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ElfArmy</span> <span class=\"keyword\">implements</span> <span class=\"title\">Army</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String DESCRIPTION = <span class=\"string\">\"This is the Elven Army!\"</span>;</div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> DESCRIPTION;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Orcish implementations similarly...</span></div></pre></td></tr></table></figure>\n<p>然后我们有王国工厂的抽象和实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">KingdomFactory</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\">Castle <span class=\"title\">createCastle</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\">King <span class=\"title\">createKing</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\">Army <span class=\"title\">createArmy</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ElfKingdomFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">KingdomFactory</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Castle <span class=\"title\">createCastle</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ElfCastle();</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> King <span class=\"title\">createKing</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ElfKing();</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Army <span class=\"title\">createArmy</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ElfArmy();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OrcKingdomFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">KingdomFactory</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Castle <span class=\"title\">createCastle</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> OrcCastle();</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> King <span class=\"title\">createKing</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> OrcKing();</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Army <span class=\"title\">createArmy</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> OrcArmy();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>现在我们有我们的抽象工厂，让我们做相关对象的家庭，即精灵王国工厂创造精灵城堡，国王和军队等。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">KingdomFactory factory = <span class=\"keyword\">new</span> ElfKingdomFactory();</div><div class=\"line\">Castle castle = factory.createCastle();</div><div class=\"line\">King king = factory.createKing();</div><div class=\"line\">Army army = factory.createArmy();</div><div class=\"line\"></div><div class=\"line\">castle.getDescription();  <span class=\"comment\">// Output: This is the Elven castle!</span></div><div class=\"line\">king.getDescription(); <span class=\"comment\">// Output: This is the Elven king!</span></div><div class=\"line\">army.getDescription(); <span class=\"comment\">// Output: This is the Elven Army!</span></div></pre></td></tr></table></figure>\n<p>现在，我们可以为我们不同的王国工厂设计一个工厂。 在这个例子中，我们创建了<code>FactoryMaker</code>，负责返回<code>ElfKingdomFactory</code>或<code>OrcKingdomFactory</code>的一个实例。<br>客户端可以使用<code>FactoryMaker</code>创建所需的哪一个具体的工厂，反过来，他们将生产不同的具体对象（军队，国王，城堡）。<br>在这个例子中，我们也使用了一个枚举来参数化客户端要求的王国工厂的类型。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FactoryMaker</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> KingdomType &#123;</div><div class=\"line\">    ELF, ORC</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> KingdomFactory <span class=\"title\">makeFactory</span><span class=\"params\">(KingdomType type)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">switch</span> (type) &#123;</div><div class=\"line\">      <span class=\"keyword\">case</span> ELF:</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ElfKingdomFactory();</div><div class=\"line\">      <span class=\"keyword\">case</span> ORC:</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> OrcKingdomFactory();</div><div class=\"line\">      <span class=\"keyword\">default</span>:</div><div class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"KingdomType not supported.\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</div><div class=\"line\">  App app = <span class=\"keyword\">new</span> App();</div><div class=\"line\"></div><div class=\"line\">  LOGGER.info(<span class=\"string\">\"Elf Kingdom\"</span>);</div><div class=\"line\">  app.createKingdom(FactoryMaker.makeFactory(KingdomType.ELF));</div><div class=\"line\">  LOGGER.info(app.getArmy().getDescription());</div><div class=\"line\">  LOGGER.info(app.getCastle().getDescription());</div><div class=\"line\">  LOGGER.info(app.getKing().getDescription());</div><div class=\"line\"></div><div class=\"line\">  LOGGER.info(<span class=\"string\">\"Orc Kingdom\"</span>);</div><div class=\"line\">  app.createKingdom(FactoryMaker.makeFactory(KingdomType.ORC));</div><div class=\"line\">  -- similar use of the orc factory</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用抽象工厂模式时</p>\n<ul>\n<li>一个系统应该独立于产品的创建，组成和代表</li>\n<li>系统应配置多个产品系列中的一个</li>\n<li>一系列相关产品对象被设计为一起使用，并且您需要强制执行此限制</li>\n<li>你想提供一个产品类库，你只想揭示他们的接口，而不是他们的实现</li>\n<li>依赖的生命周期在概念上比消费者的生命周期短。</li>\n<li>您需要运行时值来构建特定的依赖关系</li>\n<li>您想在运行时决定从家庭中调用哪个产品。</li>\n<li>您需要提供一个或多个只在运行时已知的参数，然后才能解析相关性。</li>\n</ul>\n<h2 id=\"用例：\"><a href=\"#用例：\" class=\"headerlink\" title=\"用例：\"></a>用例：</h2><ul>\n<li>选择在运行时调用适当的<code>FileSystemAcmeService</code>或<code>DatabaseAcmeService</code>或<code>NetworkAcmeService</code>实现。</li>\n<li>单元测试用例写作变得更容易</li>\n</ul>\n<h2 id=\"后果：\"><a href=\"#后果：\" class=\"headerlink\" title=\"后果：\"></a>后果：</h2><p>java中的依赖注入隐藏了可能导致运行时错误的服务类依赖，这些错误在编译时会被捕获。</p>\n<h2 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h2><ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/javax/xml/parsers/DocumentBuilderFactory.html\" target=\"_blank\" rel=\"external\">javax.xml.parsers.DocumentBuilderFactory</a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/javax/xml/transform/TransformerFactory.html#newInstance--\" target=\"_blank\" rel=\"external\">javax.xml.transform.TransformerFactory</a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/javax/xml/xpath/XPathFactory.html#newInstance--\" target=\"_blank\" rel=\"external\">javax.xml.xpath.XPathFactory</a></li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612\" target=\"_blank\" rel=\"external\">Design Patterns: Elements of Reusable Object-Oriented Software</a></li>\n</ul>\n<h2 id=\"原项目地址-https-github-com-iluwatar-java-design-patterns\"><a href=\"#原项目地址-https-github-com-iluwatar-java-design-patterns\" class=\"headerlink\" title=\"原项目地址:https://github.com/iluwatar/java-design-patterns\"></a>原项目地址:<a href=\"https://github.com/iluwatar/java-design-patterns\" target=\"_blank\" rel=\"external\">https://github.com/iluwatar/java-design-patterns</a></h2>","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/02_abstract-factory\" target=\"_blank\" rel=\"external\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/02_abstract-factory</a></p>\n<h2 id=\"也被称为\"><a href=\"#也被称为\" class=\"headerlink\" title=\"也被称为\"></a>也被称为</h2><p>套件</p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>提供一个用于创建相关或相关系列的界面<br>对象，而不指定具体的类。</p>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>真实世界的例子</p>\n<blockquote>\n<p>要创造一个王国，我们需要有共同主题的物体。 精灵王国需要一个精灵王，精灵城堡和精灵军，而兽人王国需要一个兽人王，兽人城堡和兽人军。 王国中的物体之间有依赖关系。</p>\n</blockquote>\n<p>用简单的话来说</p>\n<blockquote>\n<p>工厂工厂; 一个工厂，将个别但相关/依赖的工厂分组在一起，而不指定具体的类别。</p>\n</blockquote>\n<p>维基百科说</p>\n<blockquote>\n<p>抽象工厂模式提供了一种方法来封装一组具有共同主题的单个工厂，而不指定具体的类</p>\n</blockquote>\n<p><strong>编程示例</strong></p>\n<p>翻译上面的王国的例子。 首先，我们有一些界面和实施的王国对象</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Castle</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\">String <span class=\"title\">getDescription</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">King</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\">String <span class=\"title\">getDescription</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Army</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\">String <span class=\"title\">getDescription</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Elven implementations -&gt;</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ElfCastle</span> <span class=\"keyword\">implements</span> <span class=\"title\">Castle</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String DESCRIPTION = <span class=\"string\">\"This is the Elven castle!\"</span>;</div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> DESCRIPTION;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ElfKing</span> <span class=\"keyword\">implements</span> <span class=\"title\">King</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String DESCRIPTION = <span class=\"string\">\"This is the Elven king!\"</span>;</div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> DESCRIPTION;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ElfArmy</span> <span class=\"keyword\">implements</span> <span class=\"title\">Army</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String DESCRIPTION = <span class=\"string\">\"This is the Elven Army!\"</span>;</div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDescription</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> DESCRIPTION;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Orcish implementations similarly...</span></div></pre></td></tr></table></figure>\n<p>然后我们有王国工厂的抽象和实现</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">KingdomFactory</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\">Castle <span class=\"title\">createCastle</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\">King <span class=\"title\">createKing</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\">Army <span class=\"title\">createArmy</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ElfKingdomFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">KingdomFactory</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Castle <span class=\"title\">createCastle</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ElfCastle();</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> King <span class=\"title\">createKing</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ElfKing();</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Army <span class=\"title\">createArmy</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ElfArmy();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">OrcKingdomFactory</span> <span class=\"keyword\">implements</span> <span class=\"title\">KingdomFactory</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Castle <span class=\"title\">createCastle</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> OrcCastle();</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> King <span class=\"title\">createKing</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> OrcKing();</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Army <span class=\"title\">createArmy</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> OrcArmy();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>现在我们有我们的抽象工厂，让我们做相关对象的家庭，即精灵王国工厂创造精灵城堡，国王和军队等。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">KingdomFactory factory = <span class=\"keyword\">new</span> ElfKingdomFactory();</div><div class=\"line\">Castle castle = factory.createCastle();</div><div class=\"line\">King king = factory.createKing();</div><div class=\"line\">Army army = factory.createArmy();</div><div class=\"line\"></div><div class=\"line\">castle.getDescription();  <span class=\"comment\">// Output: This is the Elven castle!</span></div><div class=\"line\">king.getDescription(); <span class=\"comment\">// Output: This is the Elven king!</span></div><div class=\"line\">army.getDescription(); <span class=\"comment\">// Output: This is the Elven Army!</span></div></pre></td></tr></table></figure>\n<p>现在，我们可以为我们不同的王国工厂设计一个工厂。 在这个例子中，我们创建了<code>FactoryMaker</code>，负责返回<code>ElfKingdomFactory</code>或<code>OrcKingdomFactory</code>的一个实例。<br>客户端可以使用<code>FactoryMaker</code>创建所需的哪一个具体的工厂，反过来，他们将生产不同的具体对象（军队，国王，城堡）。<br>在这个例子中，我们也使用了一个枚举来参数化客户端要求的王国工厂的类型。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FactoryMaker</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> KingdomType &#123;</div><div class=\"line\">    ELF, ORC</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> KingdomFactory <span class=\"title\">makeFactory</span><span class=\"params\">(KingdomType type)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">switch</span> (type) &#123;</div><div class=\"line\">      <span class=\"keyword\">case</span> ELF:</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ElfKingdomFactory();</div><div class=\"line\">      <span class=\"keyword\">case</span> ORC:</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> OrcKingdomFactory();</div><div class=\"line\">      <span class=\"keyword\">default</span>:</div><div class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"KingdomType not supported.\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</div><div class=\"line\">  App app = <span class=\"keyword\">new</span> App();</div><div class=\"line\"></div><div class=\"line\">  LOGGER.info(<span class=\"string\">\"Elf Kingdom\"</span>);</div><div class=\"line\">  app.createKingdom(FactoryMaker.makeFactory(KingdomType.ELF));</div><div class=\"line\">  LOGGER.info(app.getArmy().getDescription());</div><div class=\"line\">  LOGGER.info(app.getCastle().getDescription());</div><div class=\"line\">  LOGGER.info(app.getKing().getDescription());</div><div class=\"line\"></div><div class=\"line\">  LOGGER.info(<span class=\"string\">\"Orc Kingdom\"</span>);</div><div class=\"line\">  app.createKingdom(FactoryMaker.makeFactory(KingdomType.ORC));</div><div class=\"line\">  -- similar use of the orc factory</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用抽象工厂模式时</p>\n<ul>\n<li>一个系统应该独立于产品的创建，组成和代表</li>\n<li>系统应配置多个产品系列中的一个</li>\n<li>一系列相关产品对象被设计为一起使用，并且您需要强制执行此限制</li>\n<li>你想提供一个产品类库，你只想揭示他们的接口，而不是他们的实现</li>\n<li>依赖的生命周期在概念上比消费者的生命周期短。</li>\n<li>您需要运行时值来构建特定的依赖关系</li>\n<li>您想在运行时决定从家庭中调用哪个产品。</li>\n<li>您需要提供一个或多个只在运行时已知的参数，然后才能解析相关性。</li>\n</ul>\n<h2 id=\"用例：\"><a href=\"#用例：\" class=\"headerlink\" title=\"用例：\"></a>用例：</h2><ul>\n<li>选择在运行时调用适当的<code>FileSystemAcmeService</code>或<code>DatabaseAcmeService</code>或<code>NetworkAcmeService</code>实现。</li>\n<li>单元测试用例写作变得更容易</li>\n</ul>\n<h2 id=\"后果：\"><a href=\"#后果：\" class=\"headerlink\" title=\"后果：\"></a>后果：</h2><p>java中的依赖注入隐藏了可能导致运行时错误的服务类依赖，这些错误在编译时会被捕获。</p>\n<h2 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h2><ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/javax/xml/parsers/DocumentBuilderFactory.html\" target=\"_blank\" rel=\"external\">javax.xml.parsers.DocumentBuilderFactory</a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/javax/xml/transform/TransformerFactory.html#newInstance--\" target=\"_blank\" rel=\"external\">javax.xml.transform.TransformerFactory</a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/javax/xml/xpath/XPathFactory.html#newInstance--\" target=\"_blank\" rel=\"external\">javax.xml.xpath.XPathFactory</a></li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612\" target=\"_blank\" rel=\"external\">Design Patterns: Elements of Reusable Object-Oriented Software</a></li>\n</ul>\n<h2 id=\"原项目地址-https-github-com-iluwatar-java-design-patterns\"><a href=\"#原项目地址-https-github-com-iluwatar-java-design-patterns\" class=\"headerlink\" title=\"原项目地址:https://github.com/iluwatar/java-design-patterns\"></a>原项目地址:<a href=\"https://github.com/iluwatar/java-design-patterns\" target=\"_blank\" rel=\"external\">https://github.com/iluwatar/java-design-patterns</a></h2>"},{"title":"Async Method Invocation","date":"2017-12-07T14:07:23.000Z","photos":["https://static.zuul.top/java-design-patterns-doc-cn/04_async-method-invocation.png"],"_content":"\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/04_async-method-invocation\n\n## 意图\n异步方法调用是在等待任务结果时调用线程未被阻塞的模式。 \n该模式提供多个独立任务的并行处理，并通过回调检索结果，或等待一切完成。 \n\n## 适用性\n使用异步方法调用模式时\n\n* 您有多个可以并行运行的独立任务\n* 您需要改善一组连续任务的性能\n* 您的处理能力或长时间运行的任务数量有限，主任务不应该等待所有的任务完成\n\n## 示例\n\n* [FutureTask](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html), [CompletableFuture](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html) and [ExecutorService](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html) (Java)\n* [Task-based Asynchronous Pattern](https://msdn.microsoft.com/en-us/library/hh873175.aspx) (.NET)\n","source":"_posts/04_Async-Method-Invocation.md","raw":"---\ntitle: Async Method Invocation\npermalink: async-method-invocation\ncategories: 设计模式\ndate: 2017-12-07 22:07:23\ntags:\n - Java\n - 中级难度\n -  译文\nphotos:\n - https://static.zuul.top/java-design-patterns-doc-cn/04_async-method-invocation.png\n---\n\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/04_async-method-invocation\n\n## 意图\n异步方法调用是在等待任务结果时调用线程未被阻塞的模式。 \n该模式提供多个独立任务的并行处理，并通过回调检索结果，或等待一切完成。 \n\n## 适用性\n使用异步方法调用模式时\n\n* 您有多个可以并行运行的独立任务\n* 您需要改善一组连续任务的性能\n* 您的处理能力或长时间运行的任务数量有限，主任务不应该等待所有的任务完成\n\n## 示例\n\n* [FutureTask](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html), [CompletableFuture](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html) and [ExecutorService](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html) (Java)\n* [Task-based Asynchronous Pattern](https://msdn.microsoft.com/en-us/library/hh873175.aspx) (.NET)\n","slug":"async-method-invocation","published":1,"updated":"2017-12-09T07:23:34.893Z","_id":"cjayvjb0g00064kvn2slu7spe","comments":1,"layout":"post","link":"","content":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/04_async-method-invocation\" target=\"_blank\" rel=\"external\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/04_async-method-invocation</a></p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>异步方法调用是在等待任务结果时调用线程未被阻塞的模式。<br>该模式提供多个独立任务的并行处理，并通过回调检索结果，或等待一切完成。 </p>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用异步方法调用模式时</p>\n<ul>\n<li>您有多个可以并行运行的独立任务</li>\n<li>您需要改善一组连续任务的性能</li>\n<li>您的处理能力或长时间运行的任务数量有限，主任务不应该等待所有的任务完成</li>\n</ul>\n<h2 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h2><ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html\" target=\"_blank\" rel=\"external\">FutureTask</a>, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" target=\"_blank\" rel=\"external\">CompletableFuture</a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html\" target=\"_blank\" rel=\"external\">ExecutorService</a> (Java)</li>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/hh873175.aspx\" target=\"_blank\" rel=\"external\">Task-based Asynchronous Pattern</a> (.NET)</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/04_async-method-invocation\" target=\"_blank\" rel=\"external\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/04_async-method-invocation</a></p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>异步方法调用是在等待任务结果时调用线程未被阻塞的模式。<br>该模式提供多个独立任务的并行处理，并通过回调检索结果，或等待一切完成。 </p>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用异步方法调用模式时</p>\n<ul>\n<li>您有多个可以并行运行的独立任务</li>\n<li>您需要改善一组连续任务的性能</li>\n<li>您的处理能力或长时间运行的任务数量有限，主任务不应该等待所有的任务完成</li>\n</ul>\n<h2 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h2><ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/FutureTask.html\" target=\"_blank\" rel=\"external\">FutureTask</a>, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" target=\"_blank\" rel=\"external\">CompletableFuture</a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html\" target=\"_blank\" rel=\"external\">ExecutorService</a> (Java)</li>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/hh873175.aspx\" target=\"_blank\" rel=\"external\">Task-based Asynchronous Pattern</a> (.NET)</li>\n</ul>\n"},{"title":"balking","date":"2017-12-09T04:59:09.000Z","photos":["http://static.zuul.top/java-design-patterns-doc-cn/05_balking.png"],"_content":"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/05_balking\n\n## 意图\nBalking Pattern用于防止对象执行某些代码，如果它是不完整或不适当的状态\n\n\n## 适用性\n使用Balking模式\n\n* 只有在某个对象处于某个特定状态时才想调用这个对象\n* 对象通常只处于暂时喘息的状态，但时间不确定\n\n## 相关模式\n* 防护悬挂模式\n* 双重锁定锁定模式\n","source":"_posts/05_balking.md","raw":"---\ntitle: balking\ndate: 2017-12-09 12:59:09\npermalink: balking\ncategories: 设计模式\ntags:\n - Java\n - 初级难度\nphotos:\n - http://static.zuul.top/java-design-patterns-doc-cn/05_balking.png\n---\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/05_balking\n\n## 意图\nBalking Pattern用于防止对象执行某些代码，如果它是不完整或不适当的状态\n\n\n## 适用性\n使用Balking模式\n\n* 只有在某个对象处于某个特定状态时才想调用这个对象\n* 对象通常只处于暂时喘息的状态，但时间不确定\n\n## 相关模式\n* 防护悬挂模式\n* 双重锁定锁定模式\n","slug":"balking","published":1,"updated":"2017-12-09T05:23:10.199Z","_id":"cjayvjb0i00084kvnol54l58e","comments":1,"layout":"post","link":"","content":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/05_balking\" target=\"_blank\" rel=\"external\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/05_balking</a></p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>Balking Pattern用于防止对象执行某些代码，如果它是不完整或不适当的状态</p>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用Balking模式</p>\n<ul>\n<li>只有在某个对象处于某个特定状态时才想调用这个对象</li>\n<li>对象通常只处于暂时喘息的状态，但时间不确定</li>\n</ul>\n<h2 id=\"相关模式\"><a href=\"#相关模式\" class=\"headerlink\" title=\"相关模式\"></a>相关模式</h2><ul>\n<li>防护悬挂模式</li>\n<li>双重锁定锁定模式</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/05_balking\" target=\"_blank\" rel=\"external\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/05_balking</a></p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>Balking Pattern用于防止对象执行某些代码，如果它是不完整或不适当的状态</p>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用Balking模式</p>\n<ul>\n<li>只有在某个对象处于某个特定状态时才想调用这个对象</li>\n<li>对象通常只处于暂时喘息的状态，但时间不确定</li>\n</ul>\n<h2 id=\"相关模式\"><a href=\"#相关模式\" class=\"headerlink\" title=\"相关模式\"></a>相关模式</h2><ul>\n<li>防护悬挂模式</li>\n<li>双重锁定锁定模式</li>\n</ul>\n"},{"title":"bridge","date":"2017-12-09T04:59:24.000Z","photos":["http://static.zuul.top/java-design-patterns-doc-cn/06_bridge.png"],"_content":"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/06_bridge\n## 也被称为\n手柄/身体\n\n## 意图\n将一个抽象与其实现分离开来，以使两者可以独立地变化。\n\n## 说明\n\n真实世界的例子\n\n> 考虑你有一个不同的附魔武器，你应该允许混合不同的武器和不同的附魔。你会怎么做？为每个附魔创建每个武器的多个副本，或者你会创建单独的附魔，并根据需要将其设置为武器？桥梁模式可以让你做第二个。\n\n用普通话说\n\n桥梁模式是关于比继承更喜欢构图。实现细节从一个层次结构推送到另一个具有单独层次结构的对象。\n\n维基百科说\n\n> 桥梁模式是软件工程中使用的一种设计模式，旨在“将抽象与其实现分离开，以便二者可以独立地变化”\n\n**编程示例**\n\n从上面翻译我们的武器示例。这里我们有`Weapon`层次结构\n\n```java\npublic interface Weapon {\n  void wield();\n  void swing();\n  void unwield();\n  Enchantment getEnchantment();\n}\n\npublic class Sword implements Weapon {\n\n  private final Enchantment enchantment;\n\n  public Sword(Enchantment enchantment) {\n    this.enchantment = enchantment;\n  }\n\n  @Override\n  public void wield() {\n    LOGGER.info(\"The sword is wielded.\");\n    enchantment.onActivate();\n  }\n\n  @Override\n  public void swing() {\n    LOGGER.info(\"The sword is swinged.\");\n    enchantment.apply();\n  }\n\n  @Override\n  public void unwield() {\n    LOGGER.info(\"The sword is unwielded.\");\n    enchantment.onDeactivate();\n  }\n\n  @Override\n  public Enchantment getEnchantment() {\n    return enchantment;\n  }\n}\n\npublic class Hammer implements Weapon {\n\n  private final Enchantment enchantment;\n\n  public Hammer(Enchantment enchantment) {\n    this.enchantment = enchantment;\n  }\n\n  @Override\n  public void wield() {\n    LOGGER.info(\"The hammer is wielded.\");\n    enchantment.onActivate();\n  }\n\n  @Override\n  public void swing() {\n    LOGGER.info(\"The hammer is swinged.\");\n    enchantment.apply();\n  }\n\n  @Override\n  public void unwield() {\n    LOGGER.info(\"The hammer is unwielded.\");\n    enchantment.onDeactivate();\n  }\n\n  @Override\n  public Enchantment getEnchantment() {\n    return enchantment;\n  }\n}\n```\n\n和单独的结界层次\n\n```java\npublic interface Enchantment {\n  void onActivate();\n  void apply();\n  void onDeactivate();\n}\n\npublic class FlyingEnchantment implements Enchantment {\n\n  @Override\n  public void onActivate() {\n    LOGGER.info(\"The item begins to glow faintly.\");\n  }\n\n  @Override\n  public void apply() {\n    LOGGER.info(\"The item flies and strikes the enemies finally returning to owner's hand.\");\n  }\n\n  @Override\n  public void onDeactivate() {\n    LOGGER.info(\"The item's glow fades.\");\n  }\n}\n\npublic class SoulEatingEnchantment implements Enchantment {\n\n  @Override\n  public void onActivate() {\n    LOGGER.info(\"The item spreads bloodlust.\");\n  }\n\n  @Override\n  public void apply() {\n    LOGGER.info(\"The item eats the soul of enemies.\");\n  }\n\n  @Override\n  public void onDeactivate() {\n    LOGGER.info(\"Bloodlust slowly disappears.\");\n  }\n}\n```\n\n而且这两个行动层次\n\n```java\nSword enchantedSword = new Sword(new SoulEatingEnchantment());\nenchantedSword.wield();\nenchantedSword.swing();\nenchantedSword.unwield();\n// The sword is wielded.\n// The item spreads bloodlust.\n// The sword is swinged.\n// The item eats the soul of enemies.\n// The sword is unwielded.\n// Bloodlust slowly disappears.\n\nHammer hammer = new Hammer(new FlyingEnchantment());\nhammer.wield();\nhammer.swing();\nhammer.unwield();\n// The hammer is wielded.\n// The item begins to glow faintly.\n// The hammer is swinged.\n// The item flies and strikes the enemies finally returning to owner's hand.\n// The hammer is unwielded.\n// The item's glow fades.\n```\n\n## 适用性\n使用桥梁模式时\n\n* 您想避免抽象与其实现之间的永久绑定。例如，当实现必须在运行时被选择或切换时，情况可能如此。\n* 抽象和它们的实现都应该通过子类来扩展。在这种情况下，Bridge模式可以让您将不同的抽象和实现组合起来，并将其独立扩展\n* 抽象的实施变化不应该对客户产生影响;也就是说，他们的代码不应该被重新编译。\n* 你有一个类扩散。这样的类层次结构表示需要将对象分成两部分。 Rumbaugh使用术语“嵌套概括”来指代这样的类层次结构\n* 您想要在多个对象之间共享一个实现（可能使用引用计数），这个事实应该隐藏在客户端。一个简单的例子是Coplien的String类，其中多个对象可以共享相同的字符串表示。\n\n## 参考\n\n* [Design Patterns: Elements of Reusable Object-Oriented Software](http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612)\n","source":"_posts/06_bridge.md","raw":"---\ntitle: bridge\npermalink: bridge\ndate: 2017-12-09 12:59:24\ncategories: 设计模式\ntags:\n - Java\n - 中级难度\nphotos:\n - http://static.zuul.top/java-design-patterns-doc-cn/06_bridge.png\n---\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/06_bridge\n## 也被称为\n手柄/身体\n\n## 意图\n将一个抽象与其实现分离开来，以使两者可以独立地变化。\n\n## 说明\n\n真实世界的例子\n\n> 考虑你有一个不同的附魔武器，你应该允许混合不同的武器和不同的附魔。你会怎么做？为每个附魔创建每个武器的多个副本，或者你会创建单独的附魔，并根据需要将其设置为武器？桥梁模式可以让你做第二个。\n\n用普通话说\n\n桥梁模式是关于比继承更喜欢构图。实现细节从一个层次结构推送到另一个具有单独层次结构的对象。\n\n维基百科说\n\n> 桥梁模式是软件工程中使用的一种设计模式，旨在“将抽象与其实现分离开，以便二者可以独立地变化”\n\n**编程示例**\n\n从上面翻译我们的武器示例。这里我们有`Weapon`层次结构\n\n```java\npublic interface Weapon {\n  void wield();\n  void swing();\n  void unwield();\n  Enchantment getEnchantment();\n}\n\npublic class Sword implements Weapon {\n\n  private final Enchantment enchantment;\n\n  public Sword(Enchantment enchantment) {\n    this.enchantment = enchantment;\n  }\n\n  @Override\n  public void wield() {\n    LOGGER.info(\"The sword is wielded.\");\n    enchantment.onActivate();\n  }\n\n  @Override\n  public void swing() {\n    LOGGER.info(\"The sword is swinged.\");\n    enchantment.apply();\n  }\n\n  @Override\n  public void unwield() {\n    LOGGER.info(\"The sword is unwielded.\");\n    enchantment.onDeactivate();\n  }\n\n  @Override\n  public Enchantment getEnchantment() {\n    return enchantment;\n  }\n}\n\npublic class Hammer implements Weapon {\n\n  private final Enchantment enchantment;\n\n  public Hammer(Enchantment enchantment) {\n    this.enchantment = enchantment;\n  }\n\n  @Override\n  public void wield() {\n    LOGGER.info(\"The hammer is wielded.\");\n    enchantment.onActivate();\n  }\n\n  @Override\n  public void swing() {\n    LOGGER.info(\"The hammer is swinged.\");\n    enchantment.apply();\n  }\n\n  @Override\n  public void unwield() {\n    LOGGER.info(\"The hammer is unwielded.\");\n    enchantment.onDeactivate();\n  }\n\n  @Override\n  public Enchantment getEnchantment() {\n    return enchantment;\n  }\n}\n```\n\n和单独的结界层次\n\n```java\npublic interface Enchantment {\n  void onActivate();\n  void apply();\n  void onDeactivate();\n}\n\npublic class FlyingEnchantment implements Enchantment {\n\n  @Override\n  public void onActivate() {\n    LOGGER.info(\"The item begins to glow faintly.\");\n  }\n\n  @Override\n  public void apply() {\n    LOGGER.info(\"The item flies and strikes the enemies finally returning to owner's hand.\");\n  }\n\n  @Override\n  public void onDeactivate() {\n    LOGGER.info(\"The item's glow fades.\");\n  }\n}\n\npublic class SoulEatingEnchantment implements Enchantment {\n\n  @Override\n  public void onActivate() {\n    LOGGER.info(\"The item spreads bloodlust.\");\n  }\n\n  @Override\n  public void apply() {\n    LOGGER.info(\"The item eats the soul of enemies.\");\n  }\n\n  @Override\n  public void onDeactivate() {\n    LOGGER.info(\"Bloodlust slowly disappears.\");\n  }\n}\n```\n\n而且这两个行动层次\n\n```java\nSword enchantedSword = new Sword(new SoulEatingEnchantment());\nenchantedSword.wield();\nenchantedSword.swing();\nenchantedSword.unwield();\n// The sword is wielded.\n// The item spreads bloodlust.\n// The sword is swinged.\n// The item eats the soul of enemies.\n// The sword is unwielded.\n// Bloodlust slowly disappears.\n\nHammer hammer = new Hammer(new FlyingEnchantment());\nhammer.wield();\nhammer.swing();\nhammer.unwield();\n// The hammer is wielded.\n// The item begins to glow faintly.\n// The hammer is swinged.\n// The item flies and strikes the enemies finally returning to owner's hand.\n// The hammer is unwielded.\n// The item's glow fades.\n```\n\n## 适用性\n使用桥梁模式时\n\n* 您想避免抽象与其实现之间的永久绑定。例如，当实现必须在运行时被选择或切换时，情况可能如此。\n* 抽象和它们的实现都应该通过子类来扩展。在这种情况下，Bridge模式可以让您将不同的抽象和实现组合起来，并将其独立扩展\n* 抽象的实施变化不应该对客户产生影响;也就是说，他们的代码不应该被重新编译。\n* 你有一个类扩散。这样的类层次结构表示需要将对象分成两部分。 Rumbaugh使用术语“嵌套概括”来指代这样的类层次结构\n* 您想要在多个对象之间共享一个实现（可能使用引用计数），这个事实应该隐藏在客户端。一个简单的例子是Coplien的String类，其中多个对象可以共享相同的字符串表示。\n\n## 参考\n\n* [Design Patterns: Elements of Reusable Object-Oriented Software](http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612)\n","slug":"bridge","published":1,"updated":"2017-12-09T05:23:13.901Z","_id":"cjayvjb0j00094kvnkdeh1opg","comments":1,"layout":"post","link":"","content":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/06_bridge\" target=\"_blank\" rel=\"external\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/06_bridge</a></p>\n<h2 id=\"也被称为\"><a href=\"#也被称为\" class=\"headerlink\" title=\"也被称为\"></a>也被称为</h2><p>手柄/身体</p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>将一个抽象与其实现分离开来，以使两者可以独立地变化。</p>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>真实世界的例子</p>\n<blockquote>\n<p>考虑你有一个不同的附魔武器，你应该允许混合不同的武器和不同的附魔。你会怎么做？为每个附魔创建每个武器的多个副本，或者你会创建单独的附魔，并根据需要将其设置为武器？桥梁模式可以让你做第二个。</p>\n</blockquote>\n<p>用普通话说</p>\n<p>桥梁模式是关于比继承更喜欢构图。实现细节从一个层次结构推送到另一个具有单独层次结构的对象。</p>\n<p>维基百科说</p>\n<blockquote>\n<p>桥梁模式是软件工程中使用的一种设计模式，旨在“将抽象与其实现分离开，以便二者可以独立地变化”</p>\n</blockquote>\n<p><strong>编程示例</strong></p>\n<p>从上面翻译我们的武器示例。这里我们有<code>Weapon</code>层次结构</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Weapon</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">wield</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">swing</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">unwield</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\">Enchantment <span class=\"title\">getEnchantment</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sword</span> <span class=\"keyword\">implements</span> <span class=\"title\">Weapon</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Enchantment enchantment;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Sword</span><span class=\"params\">(Enchantment enchantment)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.enchantment = enchantment;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">wield</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The sword is wielded.\"</span>);</div><div class=\"line\">    enchantment.onActivate();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">swing</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The sword is swinged.\"</span>);</div><div class=\"line\">    enchantment.apply();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">unwield</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The sword is unwielded.\"</span>);</div><div class=\"line\">    enchantment.onDeactivate();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Enchantment <span class=\"title\">getEnchantment</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> enchantment;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Hammer</span> <span class=\"keyword\">implements</span> <span class=\"title\">Weapon</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Enchantment enchantment;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Hammer</span><span class=\"params\">(Enchantment enchantment)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.enchantment = enchantment;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">wield</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The hammer is wielded.\"</span>);</div><div class=\"line\">    enchantment.onActivate();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">swing</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The hammer is swinged.\"</span>);</div><div class=\"line\">    enchantment.apply();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">unwield</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The hammer is unwielded.\"</span>);</div><div class=\"line\">    enchantment.onDeactivate();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Enchantment <span class=\"title\">getEnchantment</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> enchantment;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>和单独的结界层次</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Enchantment</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onActivate</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">apply</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onDeactivate</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FlyingEnchantment</span> <span class=\"keyword\">implements</span> <span class=\"title\">Enchantment</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivate</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The item begins to glow faintly.\"</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">apply</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The item flies and strikes the enemies finally returning to owner's hand.\"</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDeactivate</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The item's glow fades.\"</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoulEatingEnchantment</span> <span class=\"keyword\">implements</span> <span class=\"title\">Enchantment</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivate</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The item spreads bloodlust.\"</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">apply</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The item eats the soul of enemies.\"</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDeactivate</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"Bloodlust slowly disappears.\"</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>而且这两个行动层次</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">Sword enchantedSword = <span class=\"keyword\">new</span> Sword(<span class=\"keyword\">new</span> SoulEatingEnchantment());</div><div class=\"line\">enchantedSword.wield();</div><div class=\"line\">enchantedSword.swing();</div><div class=\"line\">enchantedSword.unwield();</div><div class=\"line\"><span class=\"comment\">// The sword is wielded.</span></div><div class=\"line\"><span class=\"comment\">// The item spreads bloodlust.</span></div><div class=\"line\"><span class=\"comment\">// The sword is swinged.</span></div><div class=\"line\"><span class=\"comment\">// The item eats the soul of enemies.</span></div><div class=\"line\"><span class=\"comment\">// The sword is unwielded.</span></div><div class=\"line\"><span class=\"comment\">// Bloodlust slowly disappears.</span></div><div class=\"line\"></div><div class=\"line\">Hammer hammer = <span class=\"keyword\">new</span> Hammer(<span class=\"keyword\">new</span> FlyingEnchantment());</div><div class=\"line\">hammer.wield();</div><div class=\"line\">hammer.swing();</div><div class=\"line\">hammer.unwield();</div><div class=\"line\"><span class=\"comment\">// The hammer is wielded.</span></div><div class=\"line\"><span class=\"comment\">// The item begins to glow faintly.</span></div><div class=\"line\"><span class=\"comment\">// The hammer is swinged.</span></div><div class=\"line\"><span class=\"comment\">// The item flies and strikes the enemies finally returning to owner's hand.</span></div><div class=\"line\"><span class=\"comment\">// The hammer is unwielded.</span></div><div class=\"line\"><span class=\"comment\">// The item's glow fades.</span></div></pre></td></tr></table></figure>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用桥梁模式时</p>\n<ul>\n<li>您想避免抽象与其实现之间的永久绑定。例如，当实现必须在运行时被选择或切换时，情况可能如此。</li>\n<li>抽象和它们的实现都应该通过子类来扩展。在这种情况下，Bridge模式可以让您将不同的抽象和实现组合起来，并将其独立扩展</li>\n<li>抽象的实施变化不应该对客户产生影响;也就是说，他们的代码不应该被重新编译。</li>\n<li>你有一个类扩散。这样的类层次结构表示需要将对象分成两部分。 Rumbaugh使用术语“嵌套概括”来指代这样的类层次结构</li>\n<li>您想要在多个对象之间共享一个实现（可能使用引用计数），这个事实应该隐藏在客户端。一个简单的例子是Coplien的String类，其中多个对象可以共享相同的字符串表示。</li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612\" target=\"_blank\" rel=\"external\">Design Patterns: Elements of Reusable Object-Oriented Software</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/06_bridge\" target=\"_blank\" rel=\"external\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/06_bridge</a></p>\n<h2 id=\"也被称为\"><a href=\"#也被称为\" class=\"headerlink\" title=\"也被称为\"></a>也被称为</h2><p>手柄/身体</p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>将一个抽象与其实现分离开来，以使两者可以独立地变化。</p>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>真实世界的例子</p>\n<blockquote>\n<p>考虑你有一个不同的附魔武器，你应该允许混合不同的武器和不同的附魔。你会怎么做？为每个附魔创建每个武器的多个副本，或者你会创建单独的附魔，并根据需要将其设置为武器？桥梁模式可以让你做第二个。</p>\n</blockquote>\n<p>用普通话说</p>\n<p>桥梁模式是关于比继承更喜欢构图。实现细节从一个层次结构推送到另一个具有单独层次结构的对象。</p>\n<p>维基百科说</p>\n<blockquote>\n<p>桥梁模式是软件工程中使用的一种设计模式，旨在“将抽象与其实现分离开，以便二者可以独立地变化”</p>\n</blockquote>\n<p><strong>编程示例</strong></p>\n<p>从上面翻译我们的武器示例。这里我们有<code>Weapon</code>层次结构</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Weapon</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">wield</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">swing</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">unwield</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\">Enchantment <span class=\"title\">getEnchantment</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Sword</span> <span class=\"keyword\">implements</span> <span class=\"title\">Weapon</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Enchantment enchantment;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Sword</span><span class=\"params\">(Enchantment enchantment)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.enchantment = enchantment;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">wield</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The sword is wielded.\"</span>);</div><div class=\"line\">    enchantment.onActivate();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">swing</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The sword is swinged.\"</span>);</div><div class=\"line\">    enchantment.apply();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">unwield</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The sword is unwielded.\"</span>);</div><div class=\"line\">    enchantment.onDeactivate();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Enchantment <span class=\"title\">getEnchantment</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> enchantment;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Hammer</span> <span class=\"keyword\">implements</span> <span class=\"title\">Weapon</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Enchantment enchantment;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Hammer</span><span class=\"params\">(Enchantment enchantment)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.enchantment = enchantment;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">wield</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The hammer is wielded.\"</span>);</div><div class=\"line\">    enchantment.onActivate();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">swing</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The hammer is swinged.\"</span>);</div><div class=\"line\">    enchantment.apply();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">unwield</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The hammer is unwielded.\"</span>);</div><div class=\"line\">    enchantment.onDeactivate();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Enchantment <span class=\"title\">getEnchantment</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> enchantment;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>和单独的结界层次</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Enchantment</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onActivate</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">apply</span><span class=\"params\">()</span></span>;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onDeactivate</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FlyingEnchantment</span> <span class=\"keyword\">implements</span> <span class=\"title\">Enchantment</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivate</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The item begins to glow faintly.\"</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">apply</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The item flies and strikes the enemies finally returning to owner's hand.\"</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDeactivate</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The item's glow fades.\"</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SoulEatingEnchantment</span> <span class=\"keyword\">implements</span> <span class=\"title\">Enchantment</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivate</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The item spreads bloodlust.\"</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">apply</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The item eats the soul of enemies.\"</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDeactivate</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"Bloodlust slowly disappears.\"</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>而且这两个行动层次</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">Sword enchantedSword = <span class=\"keyword\">new</span> Sword(<span class=\"keyword\">new</span> SoulEatingEnchantment());</div><div class=\"line\">enchantedSword.wield();</div><div class=\"line\">enchantedSword.swing();</div><div class=\"line\">enchantedSword.unwield();</div><div class=\"line\"><span class=\"comment\">// The sword is wielded.</span></div><div class=\"line\"><span class=\"comment\">// The item spreads bloodlust.</span></div><div class=\"line\"><span class=\"comment\">// The sword is swinged.</span></div><div class=\"line\"><span class=\"comment\">// The item eats the soul of enemies.</span></div><div class=\"line\"><span class=\"comment\">// The sword is unwielded.</span></div><div class=\"line\"><span class=\"comment\">// Bloodlust slowly disappears.</span></div><div class=\"line\"></div><div class=\"line\">Hammer hammer = <span class=\"keyword\">new</span> Hammer(<span class=\"keyword\">new</span> FlyingEnchantment());</div><div class=\"line\">hammer.wield();</div><div class=\"line\">hammer.swing();</div><div class=\"line\">hammer.unwield();</div><div class=\"line\"><span class=\"comment\">// The hammer is wielded.</span></div><div class=\"line\"><span class=\"comment\">// The item begins to glow faintly.</span></div><div class=\"line\"><span class=\"comment\">// The hammer is swinged.</span></div><div class=\"line\"><span class=\"comment\">// The item flies and strikes the enemies finally returning to owner's hand.</span></div><div class=\"line\"><span class=\"comment\">// The hammer is unwielded.</span></div><div class=\"line\"><span class=\"comment\">// The item's glow fades.</span></div></pre></td></tr></table></figure>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用桥梁模式时</p>\n<ul>\n<li>您想避免抽象与其实现之间的永久绑定。例如，当实现必须在运行时被选择或切换时，情况可能如此。</li>\n<li>抽象和它们的实现都应该通过子类来扩展。在这种情况下，Bridge模式可以让您将不同的抽象和实现组合起来，并将其独立扩展</li>\n<li>抽象的实施变化不应该对客户产生影响;也就是说，他们的代码不应该被重新编译。</li>\n<li>你有一个类扩散。这样的类层次结构表示需要将对象分成两部分。 Rumbaugh使用术语“嵌套概括”来指代这样的类层次结构</li>\n<li>您想要在多个对象之间共享一个实现（可能使用引用计数），这个事实应该隐藏在客户端。一个简单的例子是Coplien的String类，其中多个对象可以共享相同的字符串表示。</li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612\" target=\"_blank\" rel=\"external\">Design Patterns: Elements of Reusable Object-Oriented Software</a></li>\n</ul>\n"},{"title":"builder","date":"2017-12-09T04:59:38.000Z","photos":["http://static.zuul.top/java-design-patterns-doc-cn/07_builder.png"],"_content":"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/07_builder\n\n## 意图\n分离复杂的对象从它的结构\n代表性，使相同的施工过程可以创造不同的\n表示。\n\n## 说明\n\n真实世界的例子\n\n> 想象一下角色扮演游戏的角色生成器。最简单的选择是让电脑为你创造角色。但是如果你想选择职业，性别，发色等字符细节，字符的生成就成了一个循序渐进的过程，当所有的选择都准备好的时候就完成了。\n\n用简单的话来说\n\n> 允许您创建不同的对象风格，同时避免构造器污染。当可能有几种风格的对象时很有用。或者当创建对象时涉及很多步骤。\n\n维基百科说\n\n> 构建器模式是一种对象创建软件设计模式，旨在寻找伸缩构造器反模式的解决方案。\n\n话虽如此，让我加一些关于什么伸缩构造反模式。在某一点或其他我们都看到了如下构造函数：\n```java\npublic Hero(Profession profession, String name, HairType hairType, HairColor hairColor, Armor armor, Weapon weapon) {\n}\n```\n\n正如你所看到的，构造函数参数的数量可能会很快失去控制，并且可能很难理解参数的排列。 再加上这个参数列表可以继续增长，如果你想在将来添加更多的选项。 这被称为伸缩构造反模式。\n\n**编程示例**\n\n理智的选择是使用Builder模式。 首先我们有我们想要创造的英雄\n\n```java\npublic final class Hero {\n  private final Profession profession;\n  private final String name;\n  private final HairType hairType;\n  private final HairColor hairColor;\n  private final Armor armor;\n  private final Weapon weapon;\n\n  private Hero(Builder builder) {\n    this.profession = builder.profession;\n    this.name = builder.name;\n    this.hairColor = builder.hairColor;\n    this.hairType = builder.hairType;\n    this.weapon = builder.weapon;\n    this.armor = builder.armor;\n  }\n}\n```\n\n然后我们有建设者\n\n```java\n  public static class Builder {\n    private final Profession profession;\n    private final String name;\n    private HairType hairType;\n    private HairColor hairColor;\n    private Armor armor;\n    private Weapon weapon;\n\n    public Builder(Profession profession, String name) {\n      if (profession == null || name == null) {\n        throw new IllegalArgumentException(\"profession and name can not be null\");\n      }\n      this.profession = profession;\n      this.name = name;\n    }\n\n    public Builder withHairType(HairType hairType) {\n      this.hairType = hairType;\n      return this;\n    }\n\n    public Builder withHairColor(HairColor hairColor) {\n      this.hairColor = hairColor;\n      return this;\n    }\n\n    public Builder withArmor(Armor armor) {\n      this.armor = armor;\n      return this;\n    }\n\n    public Builder withWeapon(Weapon weapon) {\n      this.weapon = weapon;\n      return this;\n    }\n\n    public Hero build() {\n      return new Hero(this);\n    }\n  }\n```\n\n然后它可以用作：\n\n```java\nHero mage = new Hero.Builder(Profession.MAGE, \"Riobard\").withHairColor(HairColor.BLACK).withWeapon(Weapon.DAGGER).build();\n```\n## 适用性\n使用Builder模式时\n\n* 创建复杂对象的算法应该独立于组成对象的部分以及如何组装\n* 施工过程必须允许对构建的对象进行不同的表示\n\n## 示例\n\n* [java.lang.StringBuilder](http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html)\n* [java.nio.ByteBuffer](http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html#put-byte-) as well as similar buffers such as FloatBuffer, IntBuffer and so on.\n* [java.lang.StringBuffer](http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuffer.html#append-boolean-)\n* All implementations of [java.lang.Appendable](http://docs.oracle.com/javase/8/docs/api/java/lang/Appendable.html)\n* [Apache Camel builders](https://github.com/apache/camel/tree/0e195428ee04531be27a0b659005e3aa8d159d23/camel-core/src/main/java/org/apache/camel/builder)\n\n## 参考\n\n* [Design Patterns: Elements of Reusable Object-Oriented Software](http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612)\n* [Effective Java (2nd Edition)](http://www.amazon.com/Effective-Java-Edition-Joshua-Bloch/dp/0321356683)\n","source":"_posts/07_builder.md","raw":"---\ntitle: builder\npermalink: builder\ndate: 2017-12-09 12:59:38\ncategories: 设计模式\ntags:\n - Java\n - 中级难度\nphotos:\n - http://static.zuul.top/java-design-patterns-doc-cn/07_builder.png\n---\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/07_builder\n\n## 意图\n分离复杂的对象从它的结构\n代表性，使相同的施工过程可以创造不同的\n表示。\n\n## 说明\n\n真实世界的例子\n\n> 想象一下角色扮演游戏的角色生成器。最简单的选择是让电脑为你创造角色。但是如果你想选择职业，性别，发色等字符细节，字符的生成就成了一个循序渐进的过程，当所有的选择都准备好的时候就完成了。\n\n用简单的话来说\n\n> 允许您创建不同的对象风格，同时避免构造器污染。当可能有几种风格的对象时很有用。或者当创建对象时涉及很多步骤。\n\n维基百科说\n\n> 构建器模式是一种对象创建软件设计模式，旨在寻找伸缩构造器反模式的解决方案。\n\n话虽如此，让我加一些关于什么伸缩构造反模式。在某一点或其他我们都看到了如下构造函数：\n```java\npublic Hero(Profession profession, String name, HairType hairType, HairColor hairColor, Armor armor, Weapon weapon) {\n}\n```\n\n正如你所看到的，构造函数参数的数量可能会很快失去控制，并且可能很难理解参数的排列。 再加上这个参数列表可以继续增长，如果你想在将来添加更多的选项。 这被称为伸缩构造反模式。\n\n**编程示例**\n\n理智的选择是使用Builder模式。 首先我们有我们想要创造的英雄\n\n```java\npublic final class Hero {\n  private final Profession profession;\n  private final String name;\n  private final HairType hairType;\n  private final HairColor hairColor;\n  private final Armor armor;\n  private final Weapon weapon;\n\n  private Hero(Builder builder) {\n    this.profession = builder.profession;\n    this.name = builder.name;\n    this.hairColor = builder.hairColor;\n    this.hairType = builder.hairType;\n    this.weapon = builder.weapon;\n    this.armor = builder.armor;\n  }\n}\n```\n\n然后我们有建设者\n\n```java\n  public static class Builder {\n    private final Profession profession;\n    private final String name;\n    private HairType hairType;\n    private HairColor hairColor;\n    private Armor armor;\n    private Weapon weapon;\n\n    public Builder(Profession profession, String name) {\n      if (profession == null || name == null) {\n        throw new IllegalArgumentException(\"profession and name can not be null\");\n      }\n      this.profession = profession;\n      this.name = name;\n    }\n\n    public Builder withHairType(HairType hairType) {\n      this.hairType = hairType;\n      return this;\n    }\n\n    public Builder withHairColor(HairColor hairColor) {\n      this.hairColor = hairColor;\n      return this;\n    }\n\n    public Builder withArmor(Armor armor) {\n      this.armor = armor;\n      return this;\n    }\n\n    public Builder withWeapon(Weapon weapon) {\n      this.weapon = weapon;\n      return this;\n    }\n\n    public Hero build() {\n      return new Hero(this);\n    }\n  }\n```\n\n然后它可以用作：\n\n```java\nHero mage = new Hero.Builder(Profession.MAGE, \"Riobard\").withHairColor(HairColor.BLACK).withWeapon(Weapon.DAGGER).build();\n```\n## 适用性\n使用Builder模式时\n\n* 创建复杂对象的算法应该独立于组成对象的部分以及如何组装\n* 施工过程必须允许对构建的对象进行不同的表示\n\n## 示例\n\n* [java.lang.StringBuilder](http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html)\n* [java.nio.ByteBuffer](http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html#put-byte-) as well as similar buffers such as FloatBuffer, IntBuffer and so on.\n* [java.lang.StringBuffer](http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuffer.html#append-boolean-)\n* All implementations of [java.lang.Appendable](http://docs.oracle.com/javase/8/docs/api/java/lang/Appendable.html)\n* [Apache Camel builders](https://github.com/apache/camel/tree/0e195428ee04531be27a0b659005e3aa8d159d23/camel-core/src/main/java/org/apache/camel/builder)\n\n## 参考\n\n* [Design Patterns: Elements of Reusable Object-Oriented Software](http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612)\n* [Effective Java (2nd Edition)](http://www.amazon.com/Effective-Java-Edition-Joshua-Bloch/dp/0321356683)\n","slug":"builder","published":1,"updated":"2017-12-09T05:23:16.686Z","_id":"cjayvjb0n000c4kvnhtm3hwf3","comments":1,"layout":"post","link":"","content":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/07_builder\" target=\"_blank\" rel=\"external\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/07_builder</a></p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>分离复杂的对象从它的结构<br>代表性，使相同的施工过程可以创造不同的<br>表示。</p>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>真实世界的例子</p>\n<blockquote>\n<p>想象一下角色扮演游戏的角色生成器。最简单的选择是让电脑为你创造角色。但是如果你想选择职业，性别，发色等字符细节，字符的生成就成了一个循序渐进的过程，当所有的选择都准备好的时候就完成了。</p>\n</blockquote>\n<p>用简单的话来说</p>\n<blockquote>\n<p>允许您创建不同的对象风格，同时避免构造器污染。当可能有几种风格的对象时很有用。或者当创建对象时涉及很多步骤。</p>\n</blockquote>\n<p>维基百科说</p>\n<blockquote>\n<p>构建器模式是一种对象创建软件设计模式，旨在寻找伸缩构造器反模式的解决方案。</p>\n</blockquote>\n<p>话虽如此，让我加一些关于什么伸缩构造反模式。在某一点或其他我们都看到了如下构造函数：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Hero</span><span class=\"params\">(Profession profession, String name, HairType hairType, HairColor hairColor, Armor armor, Weapon weapon)</span> </span>&#123;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>正如你所看到的，构造函数参数的数量可能会很快失去控制，并且可能很难理解参数的排列。 再加上这个参数列表可以继续增长，如果你想在将来添加更多的选项。 这被称为伸缩构造反模式。</p>\n<p><strong>编程示例</strong></p>\n<p>理智的选择是使用Builder模式。 首先我们有我们想要创造的英雄</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Hero</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Profession profession;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> String name;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> HairType hairType;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> HairColor hairColor;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Armor armor;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Weapon weapon;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Hero</span><span class=\"params\">(Builder builder)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.profession = builder.profession;</div><div class=\"line\">    <span class=\"keyword\">this</span>.name = builder.name;</div><div class=\"line\">    <span class=\"keyword\">this</span>.hairColor = builder.hairColor;</div><div class=\"line\">    <span class=\"keyword\">this</span>.hairType = builder.hairType;</div><div class=\"line\">    <span class=\"keyword\">this</span>.weapon = builder.weapon;</div><div class=\"line\">    <span class=\"keyword\">this</span>.armor = builder.armor;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>然后我们有建设者</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Profession profession;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> String name;</div><div class=\"line\">  <span class=\"keyword\">private</span> HairType hairType;</div><div class=\"line\">  <span class=\"keyword\">private</span> HairColor hairColor;</div><div class=\"line\">  <span class=\"keyword\">private</span> Armor armor;</div><div class=\"line\">  <span class=\"keyword\">private</span> Weapon weapon;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Builder</span><span class=\"params\">(Profession profession, String name)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (profession == <span class=\"keyword\">null</span> || name == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"profession and name can not be null\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">this</span>.profession = profession;</div><div class=\"line\">    <span class=\"keyword\">this</span>.name = name;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">withHairType</span><span class=\"params\">(HairType hairType)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.hairType = hairType;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">withHairColor</span><span class=\"params\">(HairColor hairColor)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.hairColor = hairColor;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">withArmor</span><span class=\"params\">(Armor armor)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.armor = armor;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">withWeapon</span><span class=\"params\">(Weapon weapon)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.weapon = weapon;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Hero <span class=\"title\">build</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Hero(<span class=\"keyword\">this</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>然后它可以用作：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Hero mage = <span class=\"keyword\">new</span> Hero.Builder(Profession.MAGE, <span class=\"string\">\"Riobard\"</span>).withHairColor(HairColor.BLACK).withWeapon(Weapon.DAGGER).build();</div></pre></td></tr></table></figure>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用Builder模式时</p>\n<ul>\n<li>创建复杂对象的算法应该独立于组成对象的部分以及如何组装</li>\n<li>施工过程必须允许对构建的对象进行不同的表示</li>\n</ul>\n<h2 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h2><ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html\" target=\"_blank\" rel=\"external\">java.lang.StringBuilder</a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html#put-byte-\" target=\"_blank\" rel=\"external\">java.nio.ByteBuffer</a> as well as similar buffers such as FloatBuffer, IntBuffer and so on.</li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuffer.html#append-boolean-\" target=\"_blank\" rel=\"external\">java.lang.StringBuffer</a></li>\n<li>All implementations of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Appendable.html\" target=\"_blank\" rel=\"external\">java.lang.Appendable</a></li>\n<li><a href=\"https://github.com/apache/camel/tree/0e195428ee04531be27a0b659005e3aa8d159d23/camel-core/src/main/java/org/apache/camel/builder\" target=\"_blank\" rel=\"external\">Apache Camel builders</a></li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612\" target=\"_blank\" rel=\"external\">Design Patterns: Elements of Reusable Object-Oriented Software</a></li>\n<li><a href=\"http://www.amazon.com/Effective-Java-Edition-Joshua-Bloch/dp/0321356683\" target=\"_blank\" rel=\"external\">Effective Java (2nd Edition)</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/07_builder\" target=\"_blank\" rel=\"external\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/07_builder</a></p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>分离复杂的对象从它的结构<br>代表性，使相同的施工过程可以创造不同的<br>表示。</p>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>真实世界的例子</p>\n<blockquote>\n<p>想象一下角色扮演游戏的角色生成器。最简单的选择是让电脑为你创造角色。但是如果你想选择职业，性别，发色等字符细节，字符的生成就成了一个循序渐进的过程，当所有的选择都准备好的时候就完成了。</p>\n</blockquote>\n<p>用简单的话来说</p>\n<blockquote>\n<p>允许您创建不同的对象风格，同时避免构造器污染。当可能有几种风格的对象时很有用。或者当创建对象时涉及很多步骤。</p>\n</blockquote>\n<p>维基百科说</p>\n<blockquote>\n<p>构建器模式是一种对象创建软件设计模式，旨在寻找伸缩构造器反模式的解决方案。</p>\n</blockquote>\n<p>话虽如此，让我加一些关于什么伸缩构造反模式。在某一点或其他我们都看到了如下构造函数：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Hero</span><span class=\"params\">(Profession profession, String name, HairType hairType, HairColor hairColor, Armor armor, Weapon weapon)</span> </span>&#123;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>正如你所看到的，构造函数参数的数量可能会很快失去控制，并且可能很难理解参数的排列。 再加上这个参数列表可以继续增长，如果你想在将来添加更多的选项。 这被称为伸缩构造反模式。</p>\n<p><strong>编程示例</strong></p>\n<p>理智的选择是使用Builder模式。 首先我们有我们想要创造的英雄</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Hero</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Profession profession;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> String name;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> HairType hairType;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> HairColor hairColor;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Armor armor;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Weapon weapon;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Hero</span><span class=\"params\">(Builder builder)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.profession = builder.profession;</div><div class=\"line\">    <span class=\"keyword\">this</span>.name = builder.name;</div><div class=\"line\">    <span class=\"keyword\">this</span>.hairColor = builder.hairColor;</div><div class=\"line\">    <span class=\"keyword\">this</span>.hairType = builder.hairType;</div><div class=\"line\">    <span class=\"keyword\">this</span>.weapon = builder.weapon;</div><div class=\"line\">    <span class=\"keyword\">this</span>.armor = builder.armor;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>然后我们有建设者</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Profession profession;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> String name;</div><div class=\"line\">  <span class=\"keyword\">private</span> HairType hairType;</div><div class=\"line\">  <span class=\"keyword\">private</span> HairColor hairColor;</div><div class=\"line\">  <span class=\"keyword\">private</span> Armor armor;</div><div class=\"line\">  <span class=\"keyword\">private</span> Weapon weapon;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Builder</span><span class=\"params\">(Profession profession, String name)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (profession == <span class=\"keyword\">null</span> || name == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"profession and name can not be null\"</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">this</span>.profession = profession;</div><div class=\"line\">    <span class=\"keyword\">this</span>.name = name;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">withHairType</span><span class=\"params\">(HairType hairType)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.hairType = hairType;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">withHairColor</span><span class=\"params\">(HairColor hairColor)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.hairColor = hairColor;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">withArmor</span><span class=\"params\">(Armor armor)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.armor = armor;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">withWeapon</span><span class=\"params\">(Weapon weapon)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.weapon = weapon;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Hero <span class=\"title\">build</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Hero(<span class=\"keyword\">this</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>然后它可以用作：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">Hero mage = <span class=\"keyword\">new</span> Hero.Builder(Profession.MAGE, <span class=\"string\">\"Riobard\"</span>).withHairColor(HairColor.BLACK).withWeapon(Weapon.DAGGER).build();</div></pre></td></tr></table></figure>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用Builder模式时</p>\n<ul>\n<li>创建复杂对象的算法应该独立于组成对象的部分以及如何组装</li>\n<li>施工过程必须允许对构建的对象进行不同的表示</li>\n</ul>\n<h2 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h2><ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html\" target=\"_blank\" rel=\"external\">java.lang.StringBuilder</a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html#put-byte-\" target=\"_blank\" rel=\"external\">java.nio.ByteBuffer</a> as well as similar buffers such as FloatBuffer, IntBuffer and so on.</li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuffer.html#append-boolean-\" target=\"_blank\" rel=\"external\">java.lang.StringBuffer</a></li>\n<li>All implementations of <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Appendable.html\" target=\"_blank\" rel=\"external\">java.lang.Appendable</a></li>\n<li><a href=\"https://github.com/apache/camel/tree/0e195428ee04531be27a0b659005e3aa8d159d23/camel-core/src/main/java/org/apache/camel/builder\" target=\"_blank\" rel=\"external\">Apache Camel builders</a></li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612\" target=\"_blank\" rel=\"external\">Design Patterns: Elements of Reusable Object-Oriented Software</a></li>\n<li><a href=\"http://www.amazon.com/Effective-Java-Edition-Joshua-Bloch/dp/0321356683\" target=\"_blank\" rel=\"external\">Effective Java (2nd Edition)</a></li>\n</ul>\n"},{"title":"Adapter","photos":["https://static.zuul.top/java-design-patterns-doc-cn/03_adapter.png"],"_content":"\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/03_adapter\n\n## 也被称为\n包装纸\n\n## 意图\n将类的接口转换为客户端的另一个接口\n期望。适配器让班级一起工作，否则不能因为\n不兼容的接口。\n\n## 说明\n\n真实世界的例子\n\n>请考虑您的存储卡中有一些照片，并且需要将它们传输到您的计算机上。为了传输它们，您需要一些与计算机端口兼容的适配器，以便您可以将存储卡连接到计算机。在这种情况下，读卡器是一个适配器。\n>另一个例子是着名的电源适配器;一个三脚插头不能连接到双叉插座上，需要使用一个电源适配器，使其与双叉插座兼容。\n>又一个例子是翻译者将一个人所说的话翻译成另一个人\n\n用简单的话来说\n\n>适配器模式可让您将适配器中另外的不兼容对象包装在一起，以使其与另一个类兼容。\n\n维基百科说\n\n>在软件工程中，适配器模式是一种软件设计模式，它允许将现有类的接口用作另一个接口。它通常用于使现有类与其他类一起工作而不修改其源代码。\n\n**编程示例**\n\n考虑一个只能使用划艇的船长，根本不能航行。\n\n首先我们有界面`RowingBoat`和`FishingBoat`\n\n```java\npublic interface RowingBoat {\n  void row();\n}\n\npublic class FishingBoat {\n  private static final Logger LOGGER = LoggerFactory.getLogger(FishingBoat.class);\n  public void sail() {\n    LOGGER.info(\"The fishing boat is sailing\");\n  }\n}\n```\n\nAnd captain expects an implementation of `RowingBoat` interface to be able to move\n\n```java\npublic class Captain implements RowingBoat {\n\n  private RowingBoat rowingBoat;\n\n  public Captain(RowingBoat rowingBoat) {\n    this.rowingBoat = rowingBoat;\n  }\n\n  @Override\n  public void row() {\n    rowingBoat.row();\n  }\n}\n```\n\n现在让我们说，海盗来了，我们的船长需要逃跑，但只有渔船可用。 我们需要创建一个适配器，允许船长用他的划船技能来操作渔船。\n\n```java\npublic class FishingBoatAdapter implements RowingBoat {\n\n  private static final Logger LOGGER = LoggerFactory.getLogger(FishingBoatAdapter.class);\n\n  private FishingBoat boat;\n\n  public FishingBoatAdapter() {\n    boat = new FishingBoat();\n  }\n\n  @Override\n  public void row() {\n    boat.sail();\n  }\n}\n```\n\n现在“船长”可以用“渔船”逃出海盗。\n\n```java\nCaptain captain = new Captain(new FishingBoatAdapter());\ncaptain.row();\n```\n\n## 适用性\n使用适配器模式时\n\n* 你想使用一个现有的类，它的接口不符合你所需要的\n* 你想创建一个可重用的类，与不相关或不可预见的类进行合作，也就是说，不需要兼容接口的类\n* 您需要使用几个现有的子类，但是通过继承每个子类来调整它们的接口是不切实际的。对象适配器可以调整其父类的接口。\n* 大多数使用第三方库的应用程序使用适配器作为应用程序和第三方库之间的中间层，以将应用程序与库分离。如果必须使用另一个库，则只需要用于新库的适配器而不必更改应用程序代码。\n\n## 后果：\n类和对象适配器有不同的权衡。类适配器\n\n* 通过承诺一个具体的适应类来适应目标。因此，当我们想调整一个类及其所有子类时，类适配器将不起作用。\n* 让我们的Adapter重写一些Adaptee的行为，因为Adapter是Adaptee的一个子类。\n* 只引入一个对象，并且不需要额外的指针间接寻找适配器。\n\n一个对象适配器\n\n让我们一个适配器与许多适配器一起工作 - 即适配器本身及其所有子类（如果有的话）。适配器也可以一次为所有的适配器添加功能。\n* 使覆盖`Adaptee`行为变得更加困难。这将需要子类`Adaptee`和使适配器指的是子类而不是适配器本身。\n\n\n## 示例\n\n* [java.util.Arrays#asList()](http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#asList%28T...%29)\n* [java.util.Collections#list()](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#list-java.util.Enumeration-)\n* [java.util.Collections#enumeration()](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#enumeration-java.util.Collection-)\n* [javax.xml.bind.annotation.adapters.XMLAdapter](http://docs.oracle.com/javase/8/docs/api/javax/xml/bind/annotation/adapters/XmlAdapter.html#marshal-BoundType-)\n\n\n## 参考\n\n* [Design Patterns: Elements of Reusable Object-Oriented Software](http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612)\n* [J2EE Design Patterns](http://www.amazon.com/J2EE-Design-Patterns-William-Crawford/dp/0596004273/ref=sr_1_2)\n\n## 原项目地址:https://github.com/iluwatar/java-design-patterns","source":"_posts/03_adapter.md","raw":"---\ntitle: Adapter\npermalink: /adapter\ncategories: 设计模式\ntags:\n - Java\n - 中级难度\n - 译文\nphotos:\n - https://static.zuul.top/java-design-patterns-doc-cn/03_adapter.png\n---\n\nhttps://github.com/mask-dmrs/java-design-patterns/tree/my-master/03_adapter\n\n## 也被称为\n包装纸\n\n## 意图\n将类的接口转换为客户端的另一个接口\n期望。适配器让班级一起工作，否则不能因为\n不兼容的接口。\n\n## 说明\n\n真实世界的例子\n\n>请考虑您的存储卡中有一些照片，并且需要将它们传输到您的计算机上。为了传输它们，您需要一些与计算机端口兼容的适配器，以便您可以将存储卡连接到计算机。在这种情况下，读卡器是一个适配器。\n>另一个例子是着名的电源适配器;一个三脚插头不能连接到双叉插座上，需要使用一个电源适配器，使其与双叉插座兼容。\n>又一个例子是翻译者将一个人所说的话翻译成另一个人\n\n用简单的话来说\n\n>适配器模式可让您将适配器中另外的不兼容对象包装在一起，以使其与另一个类兼容。\n\n维基百科说\n\n>在软件工程中，适配器模式是一种软件设计模式，它允许将现有类的接口用作另一个接口。它通常用于使现有类与其他类一起工作而不修改其源代码。\n\n**编程示例**\n\n考虑一个只能使用划艇的船长，根本不能航行。\n\n首先我们有界面`RowingBoat`和`FishingBoat`\n\n```java\npublic interface RowingBoat {\n  void row();\n}\n\npublic class FishingBoat {\n  private static final Logger LOGGER = LoggerFactory.getLogger(FishingBoat.class);\n  public void sail() {\n    LOGGER.info(\"The fishing boat is sailing\");\n  }\n}\n```\n\nAnd captain expects an implementation of `RowingBoat` interface to be able to move\n\n```java\npublic class Captain implements RowingBoat {\n\n  private RowingBoat rowingBoat;\n\n  public Captain(RowingBoat rowingBoat) {\n    this.rowingBoat = rowingBoat;\n  }\n\n  @Override\n  public void row() {\n    rowingBoat.row();\n  }\n}\n```\n\n现在让我们说，海盗来了，我们的船长需要逃跑，但只有渔船可用。 我们需要创建一个适配器，允许船长用他的划船技能来操作渔船。\n\n```java\npublic class FishingBoatAdapter implements RowingBoat {\n\n  private static final Logger LOGGER = LoggerFactory.getLogger(FishingBoatAdapter.class);\n\n  private FishingBoat boat;\n\n  public FishingBoatAdapter() {\n    boat = new FishingBoat();\n  }\n\n  @Override\n  public void row() {\n    boat.sail();\n  }\n}\n```\n\n现在“船长”可以用“渔船”逃出海盗。\n\n```java\nCaptain captain = new Captain(new FishingBoatAdapter());\ncaptain.row();\n```\n\n## 适用性\n使用适配器模式时\n\n* 你想使用一个现有的类，它的接口不符合你所需要的\n* 你想创建一个可重用的类，与不相关或不可预见的类进行合作，也就是说，不需要兼容接口的类\n* 您需要使用几个现有的子类，但是通过继承每个子类来调整它们的接口是不切实际的。对象适配器可以调整其父类的接口。\n* 大多数使用第三方库的应用程序使用适配器作为应用程序和第三方库之间的中间层，以将应用程序与库分离。如果必须使用另一个库，则只需要用于新库的适配器而不必更改应用程序代码。\n\n## 后果：\n类和对象适配器有不同的权衡。类适配器\n\n* 通过承诺一个具体的适应类来适应目标。因此，当我们想调整一个类及其所有子类时，类适配器将不起作用。\n* 让我们的Adapter重写一些Adaptee的行为，因为Adapter是Adaptee的一个子类。\n* 只引入一个对象，并且不需要额外的指针间接寻找适配器。\n\n一个对象适配器\n\n让我们一个适配器与许多适配器一起工作 - 即适配器本身及其所有子类（如果有的话）。适配器也可以一次为所有的适配器添加功能。\n* 使覆盖`Adaptee`行为变得更加困难。这将需要子类`Adaptee`和使适配器指的是子类而不是适配器本身。\n\n\n## 示例\n\n* [java.util.Arrays#asList()](http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#asList%28T...%29)\n* [java.util.Collections#list()](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#list-java.util.Enumeration-)\n* [java.util.Collections#enumeration()](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#enumeration-java.util.Collection-)\n* [javax.xml.bind.annotation.adapters.XMLAdapter](http://docs.oracle.com/javase/8/docs/api/javax/xml/bind/annotation/adapters/XmlAdapter.html#marshal-BoundType-)\n\n\n## 参考\n\n* [Design Patterns: Elements of Reusable Object-Oriented Software](http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612)\n* [J2EE Design Patterns](http://www.amazon.com/J2EE-Design-Patterns-William-Crawford/dp/0596004273/ref=sr_1_2)\n\n## 原项目地址:https://github.com/iluwatar/java-design-patterns","slug":"/adapter","published":1,"date":"2017-12-06T15:05:06.708Z","updated":"2017-12-09T04:03:05.159Z","comments":1,"layout":"post","link":"","_id":"cjayvjb0p000d4kvnfpavldmb","content":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/03_adapter\" target=\"_blank\" rel=\"external\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/03_adapter</a></p>\n<h2 id=\"也被称为\"><a href=\"#也被称为\" class=\"headerlink\" title=\"也被称为\"></a>也被称为</h2><p>包装纸</p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>将类的接口转换为客户端的另一个接口<br>期望。适配器让班级一起工作，否则不能因为<br>不兼容的接口。</p>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>真实世界的例子</p>\n<blockquote>\n<p>请考虑您的存储卡中有一些照片，并且需要将它们传输到您的计算机上。为了传输它们，您需要一些与计算机端口兼容的适配器，以便您可以将存储卡连接到计算机。在这种情况下，读卡器是一个适配器。<br>另一个例子是着名的电源适配器;一个三脚插头不能连接到双叉插座上，需要使用一个电源适配器，使其与双叉插座兼容。<br>又一个例子是翻译者将一个人所说的话翻译成另一个人</p>\n</blockquote>\n<p>用简单的话来说</p>\n<blockquote>\n<p>适配器模式可让您将适配器中另外的不兼容对象包装在一起，以使其与另一个类兼容。</p>\n</blockquote>\n<p>维基百科说</p>\n<blockquote>\n<p>在软件工程中，适配器模式是一种软件设计模式，它允许将现有类的接口用作另一个接口。它通常用于使现有类与其他类一起工作而不修改其源代码。</p>\n</blockquote>\n<p><strong>编程示例</strong></p>\n<p>考虑一个只能使用划艇的船长，根本不能航行。</p>\n<p>首先我们有界面<code>RowingBoat</code>和<code>FishingBoat</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">RowingBoat</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">row</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FishingBoat</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger LOGGER = LoggerFactory.getLogger(FishingBoat.class);</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">sail</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The fishing boat is sailing\"</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>And captain expects an implementation of <code>RowingBoat</code> interface to be able to move</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Captain</span> <span class=\"keyword\">implements</span> <span class=\"title\">RowingBoat</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">private</span> RowingBoat rowingBoat;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Captain</span><span class=\"params\">(RowingBoat rowingBoat)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.rowingBoat = rowingBoat;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">row</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    rowingBoat.row();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>现在让我们说，海盗来了，我们的船长需要逃跑，但只有渔船可用。 我们需要创建一个适配器，允许船长用他的划船技能来操作渔船。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FishingBoatAdapter</span> <span class=\"keyword\">implements</span> <span class=\"title\">RowingBoat</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger LOGGER = LoggerFactory.getLogger(FishingBoatAdapter.class);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">private</span> FishingBoat boat;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">FishingBoatAdapter</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    boat = <span class=\"keyword\">new</span> FishingBoat();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">row</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    boat.sail();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>现在“船长”可以用“渔船”逃出海盗。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">Captain captain = <span class=\"keyword\">new</span> Captain(<span class=\"keyword\">new</span> FishingBoatAdapter());</div><div class=\"line\">captain.row();</div></pre></td></tr></table></figure>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用适配器模式时</p>\n<ul>\n<li>你想使用一个现有的类，它的接口不符合你所需要的</li>\n<li>你想创建一个可重用的类，与不相关或不可预见的类进行合作，也就是说，不需要兼容接口的类</li>\n<li>您需要使用几个现有的子类，但是通过继承每个子类来调整它们的接口是不切实际的。对象适配器可以调整其父类的接口。</li>\n<li>大多数使用第三方库的应用程序使用适配器作为应用程序和第三方库之间的中间层，以将应用程序与库分离。如果必须使用另一个库，则只需要用于新库的适配器而不必更改应用程序代码。</li>\n</ul>\n<h2 id=\"后果：\"><a href=\"#后果：\" class=\"headerlink\" title=\"后果：\"></a>后果：</h2><p>类和对象适配器有不同的权衡。类适配器</p>\n<ul>\n<li>通过承诺一个具体的适应类来适应目标。因此，当我们想调整一个类及其所有子类时，类适配器将不起作用。</li>\n<li>让我们的Adapter重写一些Adaptee的行为，因为Adapter是Adaptee的一个子类。</li>\n<li>只引入一个对象，并且不需要额外的指针间接寻找适配器。</li>\n</ul>\n<p>一个对象适配器</p>\n<p>让我们一个适配器与许多适配器一起工作 - 即适配器本身及其所有子类（如果有的话）。适配器也可以一次为所有的适配器添加功能。</p>\n<ul>\n<li>使覆盖<code>Adaptee</code>行为变得更加困难。这将需要子类<code>Adaptee</code>和使适配器指的是子类而不是适配器本身。</li>\n</ul>\n<h2 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h2><ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#asList%28T...%29\" target=\"_blank\" rel=\"external\">java.util.Arrays#asList()</a></li>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#list-java.util.Enumeration-\" target=\"_blank\" rel=\"external\">java.util.Collections#list()</a></li>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#enumeration-java.util.Collection-\" target=\"_blank\" rel=\"external\">java.util.Collections#enumeration()</a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/javax/xml/bind/annotation/adapters/XmlAdapter.html#marshal-BoundType-\" target=\"_blank\" rel=\"external\">javax.xml.bind.annotation.adapters.XMLAdapter</a></li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612\" target=\"_blank\" rel=\"external\">Design Patterns: Elements of Reusable Object-Oriented Software</a></li>\n<li><a href=\"http://www.amazon.com/J2EE-Design-Patterns-William-Crawford/dp/0596004273/ref=sr_1_2\" target=\"_blank\" rel=\"external\">J2EE Design Patterns</a></li>\n</ul>\n<h2 id=\"原项目地址-https-github-com-iluwatar-java-design-patterns\"><a href=\"#原项目地址-https-github-com-iluwatar-java-design-patterns\" class=\"headerlink\" title=\"原项目地址:https://github.com/iluwatar/java-design-patterns\"></a>原项目地址:<a href=\"https://github.com/iluwatar/java-design-patterns\" target=\"_blank\" rel=\"external\">https://github.com/iluwatar/java-design-patterns</a></h2>","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/mask-dmrs/java-design-patterns/tree/my-master/03_adapter\" target=\"_blank\" rel=\"external\">https://github.com/mask-dmrs/java-design-patterns/tree/my-master/03_adapter</a></p>\n<h2 id=\"也被称为\"><a href=\"#也被称为\" class=\"headerlink\" title=\"也被称为\"></a>也被称为</h2><p>包装纸</p>\n<h2 id=\"意图\"><a href=\"#意图\" class=\"headerlink\" title=\"意图\"></a>意图</h2><p>将类的接口转换为客户端的另一个接口<br>期望。适配器让班级一起工作，否则不能因为<br>不兼容的接口。</p>\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>真实世界的例子</p>\n<blockquote>\n<p>请考虑您的存储卡中有一些照片，并且需要将它们传输到您的计算机上。为了传输它们，您需要一些与计算机端口兼容的适配器，以便您可以将存储卡连接到计算机。在这种情况下，读卡器是一个适配器。<br>另一个例子是着名的电源适配器;一个三脚插头不能连接到双叉插座上，需要使用一个电源适配器，使其与双叉插座兼容。<br>又一个例子是翻译者将一个人所说的话翻译成另一个人</p>\n</blockquote>\n<p>用简单的话来说</p>\n<blockquote>\n<p>适配器模式可让您将适配器中另外的不兼容对象包装在一起，以使其与另一个类兼容。</p>\n</blockquote>\n<p>维基百科说</p>\n<blockquote>\n<p>在软件工程中，适配器模式是一种软件设计模式，它允许将现有类的接口用作另一个接口。它通常用于使现有类与其他类一起工作而不修改其源代码。</p>\n</blockquote>\n<p><strong>编程示例</strong></p>\n<p>考虑一个只能使用划艇的船长，根本不能航行。</p>\n<p>首先我们有界面<code>RowingBoat</code>和<code>FishingBoat</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">RowingBoat</span> </span>&#123;</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">row</span><span class=\"params\">()</span></span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FishingBoat</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger LOGGER = LoggerFactory.getLogger(FishingBoat.class);</div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">sail</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    LOGGER.info(<span class=\"string\">\"The fishing boat is sailing\"</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>And captain expects an implementation of <code>RowingBoat</code> interface to be able to move</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Captain</span> <span class=\"keyword\">implements</span> <span class=\"title\">RowingBoat</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">private</span> RowingBoat rowingBoat;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Captain</span><span class=\"params\">(RowingBoat rowingBoat)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.rowingBoat = rowingBoat;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">row</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    rowingBoat.row();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>现在让我们说，海盗来了，我们的船长需要逃跑，但只有渔船可用。 我们需要创建一个适配器，允许船长用他的划船技能来操作渔船。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FishingBoatAdapter</span> <span class=\"keyword\">implements</span> <span class=\"title\">RowingBoat</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Logger LOGGER = LoggerFactory.getLogger(FishingBoatAdapter.class);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">private</span> FishingBoat boat;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">FishingBoatAdapter</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    boat = <span class=\"keyword\">new</span> FishingBoat();</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"meta\">@Override</span></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">row</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    boat.sail();</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>现在“船长”可以用“渔船”逃出海盗。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">Captain captain = <span class=\"keyword\">new</span> Captain(<span class=\"keyword\">new</span> FishingBoatAdapter());</div><div class=\"line\">captain.row();</div></pre></td></tr></table></figure>\n<h2 id=\"适用性\"><a href=\"#适用性\" class=\"headerlink\" title=\"适用性\"></a>适用性</h2><p>使用适配器模式时</p>\n<ul>\n<li>你想使用一个现有的类，它的接口不符合你所需要的</li>\n<li>你想创建一个可重用的类，与不相关或不可预见的类进行合作，也就是说，不需要兼容接口的类</li>\n<li>您需要使用几个现有的子类，但是通过继承每个子类来调整它们的接口是不切实际的。对象适配器可以调整其父类的接口。</li>\n<li>大多数使用第三方库的应用程序使用适配器作为应用程序和第三方库之间的中间层，以将应用程序与库分离。如果必须使用另一个库，则只需要用于新库的适配器而不必更改应用程序代码。</li>\n</ul>\n<h2 id=\"后果：\"><a href=\"#后果：\" class=\"headerlink\" title=\"后果：\"></a>后果：</h2><p>类和对象适配器有不同的权衡。类适配器</p>\n<ul>\n<li>通过承诺一个具体的适应类来适应目标。因此，当我们想调整一个类及其所有子类时，类适配器将不起作用。</li>\n<li>让我们的Adapter重写一些Adaptee的行为，因为Adapter是Adaptee的一个子类。</li>\n<li>只引入一个对象，并且不需要额外的指针间接寻找适配器。</li>\n</ul>\n<p>一个对象适配器</p>\n<p>让我们一个适配器与许多适配器一起工作 - 即适配器本身及其所有子类（如果有的话）。适配器也可以一次为所有的适配器添加功能。</p>\n<ul>\n<li>使覆盖<code>Adaptee</code>行为变得更加困难。这将需要子类<code>Adaptee</code>和使适配器指的是子类而不是适配器本身。</li>\n</ul>\n<h2 id=\"示例\"><a href=\"#示例\" class=\"headerlink\" title=\"示例\"></a>示例</h2><ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#asList%28T...%29\" target=\"_blank\" rel=\"external\">java.util.Arrays#asList()</a></li>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#list-java.util.Enumeration-\" target=\"_blank\" rel=\"external\">java.util.Collections#list()</a></li>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#enumeration-java.util.Collection-\" target=\"_blank\" rel=\"external\">java.util.Collections#enumeration()</a></li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/javax/xml/bind/annotation/adapters/XmlAdapter.html#marshal-BoundType-\" target=\"_blank\" rel=\"external\">javax.xml.bind.annotation.adapters.XMLAdapter</a></li>\n</ul>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><ul>\n<li><a href=\"http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612\" target=\"_blank\" rel=\"external\">Design Patterns: Elements of Reusable Object-Oriented Software</a></li>\n<li><a href=\"http://www.amazon.com/J2EE-Design-Patterns-William-Crawford/dp/0596004273/ref=sr_1_2\" target=\"_blank\" rel=\"external\">J2EE Design Patterns</a></li>\n</ul>\n<h2 id=\"原项目地址-https-github-com-iluwatar-java-design-patterns\"><a href=\"#原项目地址-https-github-com-iluwatar-java-design-patterns\" class=\"headerlink\" title=\"原项目地址:https://github.com/iluwatar/java-design-patterns\"></a>原项目地址:<a href=\"https://github.com/iluwatar/java-design-patterns\" target=\"_blank\" rel=\"external\">https://github.com/iluwatar/java-design-patterns</a></h2>"},{"title":"APP扫描二维码登陆流程","date":"2017-11-14T12:27:57.000Z","_content":"![image](https://static.zuul.top/dmrs-me/20171114/APP-scanning-two-dimensional-code-login.png)\n#### 流程\n1. 客户端页面请求二维码(带有客户端标识和操作标识),这个二维码实际上来自安全中心的后台生成.(二维码状态:`待扫描`),此时信息需要放在`redis`里面保存起来\n2. 客户端页面获取到二维码之后,轮询客户端后台,查看这个标识的状态.\n3. 安全中心APP(已登录)扫描客户端前台生成的二维码,然后将识别出来的信息获取后访问安全中心后台,安全中心后台将当前APP用户的唯一标示和当前的二维码信息绑定,回调客户端后台.(二维码状态:`已扫描`)\n4. 安全中心APP上操作是否确认,然后改变当前二维码标示(二维码状态:`已同意`或`已拒绝`)\n5. 客户端前台轮询到`已扫描`可以提示用户确认,轮询到`已同意`可直接系统自动登录(通过绑定的用户唯一标识获取到用户加密的密码,走正常的登录流程,).成功之后注意`清空密码信息`.\n\n\n#### 二维码生成工具\n```xml\n<dependency>\n    <groupId>com.google.zxing</groupId>\n    <artifactId>core</artifactId>\n    <version>3.0.0</version>\n</dependency>\n<dependency>\n    <groupId>com.google.zxing</groupId>\n    <artifactId>javase</artifactId>\n    <version>3.0.0</version>\n</dependency>\n```\n\n#### 图片由[ProcessOn](https://www.processon.com/)生成\n\n","source":"_posts/APP扫描二维码登陆流程.md","raw":"---\ntitle: APP扫描二维码登陆流程\ntags:\n  - 二维码\n  - 登陆\n  - APP\n  - 流程\ncategories: Java相关\npermalink: ap-scan-two-dimensional-code-landing-proces\ndate: 2017-11-14 20:27:57\n---\n![image](https://static.zuul.top/dmrs-me/20171114/APP-scanning-two-dimensional-code-login.png)\n#### 流程\n1. 客户端页面请求二维码(带有客户端标识和操作标识),这个二维码实际上来自安全中心的后台生成.(二维码状态:`待扫描`),此时信息需要放在`redis`里面保存起来\n2. 客户端页面获取到二维码之后,轮询客户端后台,查看这个标识的状态.\n3. 安全中心APP(已登录)扫描客户端前台生成的二维码,然后将识别出来的信息获取后访问安全中心后台,安全中心后台将当前APP用户的唯一标示和当前的二维码信息绑定,回调客户端后台.(二维码状态:`已扫描`)\n4. 安全中心APP上操作是否确认,然后改变当前二维码标示(二维码状态:`已同意`或`已拒绝`)\n5. 客户端前台轮询到`已扫描`可以提示用户确认,轮询到`已同意`可直接系统自动登录(通过绑定的用户唯一标识获取到用户加密的密码,走正常的登录流程,).成功之后注意`清空密码信息`.\n\n\n#### 二维码生成工具\n```xml\n<dependency>\n    <groupId>com.google.zxing</groupId>\n    <artifactId>core</artifactId>\n    <version>3.0.0</version>\n</dependency>\n<dependency>\n    <groupId>com.google.zxing</groupId>\n    <artifactId>javase</artifactId>\n    <version>3.0.0</version>\n</dependency>\n```\n\n#### 图片由[ProcessOn](https://www.processon.com/)生成\n\n","slug":"ap-scan-two-dimensional-code-landing-proces","published":1,"updated":"2017-11-30T15:45:07.461Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjayvjb0s000i4kvn09ukthjj","content":"<p><img src=\"https://static.zuul.top/dmrs-me/20171114/APP-scanning-two-dimensional-code-login.png\" alt=\"image\"></p>\n<h4 id=\"流程\"><a href=\"#流程\" class=\"headerlink\" title=\"流程\"></a>流程</h4><ol>\n<li>客户端页面请求二维码(带有客户端标识和操作标识),这个二维码实际上来自安全中心的后台生成.(二维码状态:<code>待扫描</code>),此时信息需要放在<code>redis</code>里面保存起来</li>\n<li>客户端页面获取到二维码之后,轮询客户端后台,查看这个标识的状态.</li>\n<li>安全中心APP(已登录)扫描客户端前台生成的二维码,然后将识别出来的信息获取后访问安全中心后台,安全中心后台将当前APP用户的唯一标示和当前的二维码信息绑定,回调客户端后台.(二维码状态:<code>已扫描</code>)</li>\n<li>安全中心APP上操作是否确认,然后改变当前二维码标示(二维码状态:<code>已同意</code>或<code>已拒绝</code>)</li>\n<li>客户端前台轮询到<code>已扫描</code>可以提示用户确认,轮询到<code>已同意</code>可直接系统自动登录(通过绑定的用户唯一标识获取到用户加密的密码,走正常的登录流程,).成功之后注意<code>清空密码信息</code>.</li>\n</ol>\n<h4 id=\"二维码生成工具\"><a href=\"#二维码生成工具\" class=\"headerlink\" title=\"二维码生成工具\"></a>二维码生成工具</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.zxing<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.zxing<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javase<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div></pre></td></tr></table></figure>\n<h4 id=\"图片由ProcessOn生成\"><a href=\"#图片由ProcessOn生成\" class=\"headerlink\" title=\"图片由ProcessOn生成\"></a>图片由<a href=\"https://www.processon.com/\" target=\"_blank\" rel=\"external\">ProcessOn</a>生成</h4>","site":{"data":{}},"excerpt":"","more":"<p><img src=\"https://static.zuul.top/dmrs-me/20171114/APP-scanning-two-dimensional-code-login.png\" alt=\"image\"></p>\n<h4 id=\"流程\"><a href=\"#流程\" class=\"headerlink\" title=\"流程\"></a>流程</h4><ol>\n<li>客户端页面请求二维码(带有客户端标识和操作标识),这个二维码实际上来自安全中心的后台生成.(二维码状态:<code>待扫描</code>),此时信息需要放在<code>redis</code>里面保存起来</li>\n<li>客户端页面获取到二维码之后,轮询客户端后台,查看这个标识的状态.</li>\n<li>安全中心APP(已登录)扫描客户端前台生成的二维码,然后将识别出来的信息获取后访问安全中心后台,安全中心后台将当前APP用户的唯一标示和当前的二维码信息绑定,回调客户端后台.(二维码状态:<code>已扫描</code>)</li>\n<li>安全中心APP上操作是否确认,然后改变当前二维码标示(二维码状态:<code>已同意</code>或<code>已拒绝</code>)</li>\n<li>客户端前台轮询到<code>已扫描</code>可以提示用户确认,轮询到<code>已同意</code>可直接系统自动登录(通过绑定的用户唯一标识获取到用户加密的密码,走正常的登录流程,).成功之后注意<code>清空密码信息</code>.</li>\n</ol>\n<h4 id=\"二维码生成工具\"><a href=\"#二维码生成工具\" class=\"headerlink\" title=\"二维码生成工具\"></a>二维码生成工具</h4><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.zxing<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.zxing<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javase<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div></pre></td></tr></table></figure>\n<h4 id=\"图片由ProcessOn生成\"><a href=\"#图片由ProcessOn生成\" class=\"headerlink\" title=\"图片由ProcessOn生成\"></a>图片由<a href=\"https://www.processon.com/\" target=\"_blank\" rel=\"external\">ProcessOn</a>生成</h4>"},{"title":"Hexo集成gitment异常处理","date":"2017-11-08T16:27:57.000Z","_content":"#### 问题\n集成`Gitment`按照官方的文档配置报错`Cannot read property 'firstChild' of null`\n#### 查找\n-  通过页面的异常进入js发现是获取某个对象为空`gitment-container`\n-  讲这个关键词在插件里面搜索发现,这个一个装载留言内容的div,于是在异常的页面查看源码搜索,没有找到这个div.\n-  通过查看源码发现`themes\\next\\layout\\_third-party\\comments`是一个留言的插件集合,包含多种留言插件`js`文件\n```javascript\n{% include 'duoshuo.swig' %}\n{% include 'disqus.swig' %}\n{% include 'hypercomments.swig' %}\n{% include 'youyan.swig' %}\n{% include 'livere.swig' %}\n{% include 'changyan.swig' %}\n{% include 'gitment.swig' %}\n{% include 'valine.swig' %}\n```\n`themes\\next\\layout\\_partials`是留言插件`html`文件`comments.swig`\n有一段代码引起我的注意\n```javascript\n{% elseif theme.changyan.appid and theme.changyan.appkey %}\n    <div class=\"comments\" id=\"comments\">\n      <div id=\"SOHUCS\"></div>\n    </div>\n\n  {% elseif theme.gitment.enable %}\n    <div class=\"comments\" id=\"comments\">\n      {% if theme.gitment.lazy %}\n        <div onclick=\"showGitment()\" id=\"gitment-display-button\">{{ __('gitmentbutton') }}</div>\n        <div id=\"gitment-container\" style=\"display:none\"></div>\n      {% else %}\n        <div id=\"gitment-container\"></div>\n      {% endif %}\n    </div>\n```\n对照`themes\\next\\_config.yml`文件\n```yml\nchangyan:\n  enable: false\n  appid: XX\n  appkey: XX\ngitment:\n  enable: true\n  # RECOMMEND, A mint on Gitment, to support count, language and proxy_gateway\n  mint: false \n```\n要命的是之前是用畅言测试过,但是这里不是根据`changyan.enable`去判断,于是导致`ifelse`进入了畅言这个留言插件的div判断.\n#### 解决\n>清空`themes\\next\\_config.yml`文件中的`changyan.appid`和`changyan.appkey`,\n>`themes\\next\\layout\\_partials\\comments.swig`文中,`theme.changyan.appid and theme.changyan.appkey`修改为`theme.changyan.enable`\n\n#### 总结\n- 规范开发\n- 善于关键词查找分析解决问题\n","source":"_posts/Hexo集成gitment异常处理.md","raw":"---\ntitle: Hexo集成gitment异常处理\ntags:\n  - 插件\n  - gitment\n  - Hexo\n  - 规范\ncategories: Hexo\npermalink: hexo-integrated-gitment-exception-handling\ndate: 2017-11-09 00:27:57\n---\n#### 问题\n集成`Gitment`按照官方的文档配置报错`Cannot read property 'firstChild' of null`\n#### 查找\n-  通过页面的异常进入js发现是获取某个对象为空`gitment-container`\n-  讲这个关键词在插件里面搜索发现,这个一个装载留言内容的div,于是在异常的页面查看源码搜索,没有找到这个div.\n-  通过查看源码发现`themes\\next\\layout\\_third-party\\comments`是一个留言的插件集合,包含多种留言插件`js`文件\n```javascript\n{% include 'duoshuo.swig' %}\n{% include 'disqus.swig' %}\n{% include 'hypercomments.swig' %}\n{% include 'youyan.swig' %}\n{% include 'livere.swig' %}\n{% include 'changyan.swig' %}\n{% include 'gitment.swig' %}\n{% include 'valine.swig' %}\n```\n`themes\\next\\layout\\_partials`是留言插件`html`文件`comments.swig`\n有一段代码引起我的注意\n```javascript\n{% elseif theme.changyan.appid and theme.changyan.appkey %}\n    <div class=\"comments\" id=\"comments\">\n      <div id=\"SOHUCS\"></div>\n    </div>\n\n  {% elseif theme.gitment.enable %}\n    <div class=\"comments\" id=\"comments\">\n      {% if theme.gitment.lazy %}\n        <div onclick=\"showGitment()\" id=\"gitment-display-button\">{{ __('gitmentbutton') }}</div>\n        <div id=\"gitment-container\" style=\"display:none\"></div>\n      {% else %}\n        <div id=\"gitment-container\"></div>\n      {% endif %}\n    </div>\n```\n对照`themes\\next\\_config.yml`文件\n```yml\nchangyan:\n  enable: false\n  appid: XX\n  appkey: XX\ngitment:\n  enable: true\n  # RECOMMEND, A mint on Gitment, to support count, language and proxy_gateway\n  mint: false \n```\n要命的是之前是用畅言测试过,但是这里不是根据`changyan.enable`去判断,于是导致`ifelse`进入了畅言这个留言插件的div判断.\n#### 解决\n>清空`themes\\next\\_config.yml`文件中的`changyan.appid`和`changyan.appkey`,\n>`themes\\next\\layout\\_partials\\comments.swig`文中,`theme.changyan.appid and theme.changyan.appkey`修改为`theme.changyan.enable`\n\n#### 总结\n- 规范开发\n- 善于关键词查找分析解决问题\n","slug":"hexo-integrated-gitment-exception-handling","published":1,"updated":"2017-12-09T07:24:38.851Z","_id":"cjayvjb0u000k4kvnpnl9py0z","comments":1,"layout":"post","photos":[],"link":"","content":"<h4 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h4><p>集成<code>Gitment</code>按照官方的文档配置报错<code>Cannot read property &#39;firstChild&#39; of null</code></p>\n<h4 id=\"查找\"><a href=\"#查找\" class=\"headerlink\" title=\"查找\"></a>查找</h4><ul>\n<li>通过页面的异常进入js发现是获取某个对象为空<code>gitment-container</code></li>\n<li>讲这个关键词在插件里面搜索发现,这个一个装载留言内容的div,于是在异常的页面查看源码搜索,没有找到这个div.</li>\n<li>通过查看源码发现<code>themes\\next\\layout\\_third-party\\comments</code>是一个留言的插件集合,包含多种留言插件<code>js</code>文件<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;% include <span class=\"string\">'duoshuo.swig'</span> %&#125;</div><div class=\"line\">&#123;% include <span class=\"string\">'disqus.swig'</span> %&#125;</div><div class=\"line\">&#123;% include <span class=\"string\">'hypercomments.swig'</span> %&#125;</div><div class=\"line\">&#123;% include <span class=\"string\">'youyan.swig'</span> %&#125;</div><div class=\"line\">&#123;% include <span class=\"string\">'livere.swig'</span> %&#125;</div><div class=\"line\">&#123;% include <span class=\"string\">'changyan.swig'</span> %&#125;</div><div class=\"line\">&#123;% include <span class=\"string\">'gitment.swig'</span> %&#125;</div><div class=\"line\">&#123;% include <span class=\"string\">'valine.swig'</span> %&#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><code>themes\\next\\layout\\_partials</code>是留言插件<code>html</code>文件<code>comments.swig</code><br>有一段代码引起我的注意<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;% elseif theme.changyan.appid and theme.changyan.appkey %&#125;</div><div class=\"line\">    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"comments\"</span> id=<span class=\"string\">\"comments\"</span>&gt;</div><div class=\"line\">      &lt;div id=<span class=\"string\">\"SOHUCS\"</span>&gt;&lt;/div&gt;</div><div class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></div><div class=\"line\"><span class=\"regexp\"></span></div><div class=\"line\"><span class=\"regexp\">  &#123;% elseif theme.gitment.enable %&#125;</span></div><div class=\"line\"><span class=\"regexp\">    &lt;div class=\"comments\" id=\"comments\"&gt;</span></div><div class=\"line\"><span class=\"regexp\">      &#123;% if theme.gitment.lazy %&#125;</span></div><div class=\"line\"><span class=\"regexp\">        &lt;div onclick=\"showGitment()\" id=\"gitment-display-button\"&gt;&#123;&#123; __('gitmentbutton') &#125;&#125;&lt;/</span>div&gt;</div><div class=\"line\">        &lt;div id=<span class=\"string\">\"gitment-container\"</span> style=<span class=\"string\">\"display:none\"</span>&gt;&lt;/div&gt;</div><div class=\"line\">      &#123;% <span class=\"keyword\">else</span> %&#125;</div><div class=\"line\">        &lt;div id=<span class=\"string\">\"gitment-container\"</span>&gt;&lt;/div&gt;</div><div class=\"line\">      &#123;% endif %&#125;</div><div class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></div></pre></td></tr></table></figure></p>\n<p>对照<code>themes\\next\\_config.yml</code>文件<br><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">changyan:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  appid:</span> <span class=\"string\">XX</span></div><div class=\"line\"><span class=\"attr\">  appkey:</span> <span class=\"string\">XX</span></div><div class=\"line\"><span class=\"attr\">gitment:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\">  <span class=\"comment\"># RECOMMEND, A mint on Gitment, to support count, language and proxy_gateway</span></div><div class=\"line\"><span class=\"attr\">  mint:</span> <span class=\"literal\">false</span></div></pre></td></tr></table></figure></p>\n<p>要命的是之前是用畅言测试过,但是这里不是根据<code>changyan.enable</code>去判断,于是导致<code>ifelse</code>进入了畅言这个留言插件的div判断.</p>\n<h4 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h4><blockquote>\n<p>清空<code>themes\\next\\_config.yml</code>文件中的<code>changyan.appid</code>和<code>changyan.appkey</code>,<br><code>themes\\next\\layout\\_partials\\comments.swig</code>文中,<code>theme.changyan.appid and theme.changyan.appkey</code>修改为<code>theme.changyan.enable</code></p>\n</blockquote>\n<h4 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h4><ul>\n<li>规范开发</li>\n<li>善于关键词查找分析解决问题</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h4 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h4><p>集成<code>Gitment</code>按照官方的文档配置报错<code>Cannot read property &#39;firstChild&#39; of null</code></p>\n<h4 id=\"查找\"><a href=\"#查找\" class=\"headerlink\" title=\"查找\"></a>查找</h4><ul>\n<li>通过页面的异常进入js发现是获取某个对象为空<code>gitment-container</code></li>\n<li>讲这个关键词在插件里面搜索发现,这个一个装载留言内容的div,于是在异常的页面查看源码搜索,没有找到这个div.</li>\n<li>通过查看源码发现<code>themes\\next\\layout\\_third-party\\comments</code>是一个留言的插件集合,包含多种留言插件<code>js</code>文件<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;% include <span class=\"string\">'duoshuo.swig'</span> %&#125;</div><div class=\"line\">&#123;% include <span class=\"string\">'disqus.swig'</span> %&#125;</div><div class=\"line\">&#123;% include <span class=\"string\">'hypercomments.swig'</span> %&#125;</div><div class=\"line\">&#123;% include <span class=\"string\">'youyan.swig'</span> %&#125;</div><div class=\"line\">&#123;% include <span class=\"string\">'livere.swig'</span> %&#125;</div><div class=\"line\">&#123;% include <span class=\"string\">'changyan.swig'</span> %&#125;</div><div class=\"line\">&#123;% include <span class=\"string\">'gitment.swig'</span> %&#125;</div><div class=\"line\">&#123;% include <span class=\"string\">'valine.swig'</span> %&#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><code>themes\\next\\layout\\_partials</code>是留言插件<code>html</code>文件<code>comments.swig</code><br>有一段代码引起我的注意<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;% elseif theme.changyan.appid and theme.changyan.appkey %&#125;</div><div class=\"line\">    &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"comments\"</span> id=<span class=\"string\">\"comments\"</span>&gt;</div><div class=\"line\">      &lt;div id=<span class=\"string\">\"SOHUCS\"</span>&gt;&lt;/div&gt;</div><div class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></div><div class=\"line\"><span class=\"regexp\"></span></div><div class=\"line\"><span class=\"regexp\">  &#123;% elseif theme.gitment.enable %&#125;</span></div><div class=\"line\"><span class=\"regexp\">    &lt;div class=\"comments\" id=\"comments\"&gt;</span></div><div class=\"line\"><span class=\"regexp\">      &#123;% if theme.gitment.lazy %&#125;</span></div><div class=\"line\"><span class=\"regexp\">        &lt;div onclick=\"showGitment()\" id=\"gitment-display-button\"&gt;&#123;&#123; __('gitmentbutton') &#125;&#125;&lt;/</span>div&gt;</div><div class=\"line\">        &lt;div id=<span class=\"string\">\"gitment-container\"</span> style=<span class=\"string\">\"display:none\"</span>&gt;&lt;/div&gt;</div><div class=\"line\">      &#123;% <span class=\"keyword\">else</span> %&#125;</div><div class=\"line\">        &lt;div id=<span class=\"string\">\"gitment-container\"</span>&gt;&lt;/div&gt;</div><div class=\"line\">      &#123;% endif %&#125;</div><div class=\"line\">    &lt;<span class=\"regexp\">/div&gt;</span></div></pre></td></tr></table></figure></p>\n<p>对照<code>themes\\next\\_config.yml</code>文件<br><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">changyan:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">false</span></div><div class=\"line\"><span class=\"attr\">  appid:</span> <span class=\"string\">XX</span></div><div class=\"line\"><span class=\"attr\">  appkey:</span> <span class=\"string\">XX</span></div><div class=\"line\"><span class=\"attr\">gitment:</span></div><div class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></div><div class=\"line\">  <span class=\"comment\"># RECOMMEND, A mint on Gitment, to support count, language and proxy_gateway</span></div><div class=\"line\"><span class=\"attr\">  mint:</span> <span class=\"literal\">false</span></div></pre></td></tr></table></figure></p>\n<p>要命的是之前是用畅言测试过,但是这里不是根据<code>changyan.enable</code>去判断,于是导致<code>ifelse</code>进入了畅言这个留言插件的div判断.</p>\n<h4 id=\"解决\"><a href=\"#解决\" class=\"headerlink\" title=\"解决\"></a>解决</h4><blockquote>\n<p>清空<code>themes\\next\\_config.yml</code>文件中的<code>changyan.appid</code>和<code>changyan.appkey</code>,<br><code>themes\\next\\layout\\_partials\\comments.swig</code>文中,<code>theme.changyan.appid and theme.changyan.appkey</code>修改为<code>theme.changyan.enable</code></p>\n</blockquote>\n<h4 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h4><ul>\n<li>规范开发</li>\n<li>善于关键词查找分析解决问题</li>\n</ul>\n"},{"title":"InvalidClassException","date":"2017-10-31T13:53:44.000Z","_content":"### InvalidClassException\n#### 背景\n项目使用的`SpringBoot`架构,使用的是默认的`Redis`存储登陆信息\n#### 过程\n添加了一个有关于`UsUser`的接口,需要把当前登录信息返回给前端。\n#### 结果\n访问时`InvalidClassException`异常\n```java\norg.springframework.data.redis.serializer.SerializationException: Cannot deserialize; nested exception is org.springframework.core.serializer.support.SerializationFailedException: Failed to deserialize payload. Is the byte array a result of corresponding serialization for DefaultDeserializer?; nested exception is java.io.InvalidClassException: com.usc.core.model.UsUser; local class incompatible: stream classdesc serialVersionUID = -4391106051528831723, local class serialVersionUID = -3047559744731102659\n\tat org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.deserialize(JdkSerializationRedisSerializer.java:82)\n```\n#### 思考&总结\n看到这个的第一反应是有人修改了`serialVersionUID`,然后发现这个类并没有这个字段.然后联想到这个信息是从`redis`获取的然后清理了`redis`中的登陆信息,异常不再出现.最后注意到这个\n`org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.deserialize`,已证明联想正确,出现问题到解决5分钟不到.\n#### 相关知识\n`serialVersionUID`适用于`Java`的序列化机制。简单来说，`Java`的序列化机制是通过判断类的`serialVersionUID`来验证版本一致性的。在进行反序列化时，JVM会把传来的字节流中的`serialVersionUID`与本地相应实体类的`serialVersionUID`进行比较，如果相同就认为是一致的，可以进行反序列化，否则就会出现序列化版本不一致的异常，即是`InvalidCastException。`","source":"_posts/InvalidClassException.md","raw":"---\ntitle: InvalidClassException\npermalink: invalidclasexception\ntags:\n  - Java\n  - Spring Boot\n  - Exception\ncategories:\n  - Java相关\ndate: 2017-10-31 21:53:44\n---\n### InvalidClassException\n#### 背景\n项目使用的`SpringBoot`架构,使用的是默认的`Redis`存储登陆信息\n#### 过程\n添加了一个有关于`UsUser`的接口,需要把当前登录信息返回给前端。\n#### 结果\n访问时`InvalidClassException`异常\n```java\norg.springframework.data.redis.serializer.SerializationException: Cannot deserialize; nested exception is org.springframework.core.serializer.support.SerializationFailedException: Failed to deserialize payload. Is the byte array a result of corresponding serialization for DefaultDeserializer?; nested exception is java.io.InvalidClassException: com.usc.core.model.UsUser; local class incompatible: stream classdesc serialVersionUID = -4391106051528831723, local class serialVersionUID = -3047559744731102659\n\tat org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.deserialize(JdkSerializationRedisSerializer.java:82)\n```\n#### 思考&总结\n看到这个的第一反应是有人修改了`serialVersionUID`,然后发现这个类并没有这个字段.然后联想到这个信息是从`redis`获取的然后清理了`redis`中的登陆信息,异常不再出现.最后注意到这个\n`org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.deserialize`,已证明联想正确,出现问题到解决5分钟不到.\n#### 相关知识\n`serialVersionUID`适用于`Java`的序列化机制。简单来说，`Java`的序列化机制是通过判断类的`serialVersionUID`来验证版本一致性的。在进行反序列化时，JVM会把传来的字节流中的`serialVersionUID`与本地相应实体类的`serialVersionUID`进行比较，如果相同就认为是一致的，可以进行反序列化，否则就会出现序列化版本不一致的异常，即是`InvalidCastException。`","slug":"invalidclasexception","published":1,"updated":"2017-11-30T15:45:07.466Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjayvjb0w000o4kvncfvhkrdf","content":"<h3 id=\"InvalidClassException\"><a href=\"#InvalidClassException\" class=\"headerlink\" title=\"InvalidClassException\"></a>InvalidClassException</h3><h4 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h4><p>项目使用的<code>SpringBoot</code>架构,使用的是默认的<code>Redis</code>存储登陆信息</p>\n<h4 id=\"过程\"><a href=\"#过程\" class=\"headerlink\" title=\"过程\"></a>过程</h4><p>添加了一个有关于<code>UsUser</code>的接口,需要把当前登录信息返回给前端。</p>\n<h4 id=\"结果\"><a href=\"#结果\" class=\"headerlink\" title=\"结果\"></a>结果</h4><p>访问时<code>InvalidClassException</code>异常<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">org.springframework.data.redis.serializer.SerializationException: Cannot deserialize; nested exception is org.springframework.core.serializer.support.SerializationFailedException: Failed to deserialize payload. Is the byte array a result of corresponding serialization for DefaultDeserializer?; nested exception is java.io.InvalidClassException: com.usc.core.model.UsUser; local class incompatible: stream classdesc serialVersionUID = -4391106051528831723, local class serialVersionUID = -3047559744731102659</div><div class=\"line\">\tat org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.deserialize(JdkSerializationRedisSerializer.java:<span class=\"number\">82</span>)</div></pre></td></tr></table></figure></p>\n<h4 id=\"思考-amp-总结\"><a href=\"#思考-amp-总结\" class=\"headerlink\" title=\"思考&amp;总结\"></a>思考&amp;总结</h4><p>看到这个的第一反应是有人修改了<code>serialVersionUID</code>,然后发现这个类并没有这个字段.然后联想到这个信息是从<code>redis</code>获取的然后清理了<code>redis</code>中的登陆信息,异常不再出现.最后注意到这个<br><code>org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.deserialize</code>,已证明联想正确,出现问题到解决5分钟不到.</p>\n<h4 id=\"相关知识\"><a href=\"#相关知识\" class=\"headerlink\" title=\"相关知识\"></a>相关知识</h4><p><code>serialVersionUID</code>适用于<code>Java</code>的序列化机制。简单来说，<code>Java</code>的序列化机制是通过判断类的<code>serialVersionUID</code>来验证版本一致性的。在进行反序列化时，JVM会把传来的字节流中的<code>serialVersionUID</code>与本地相应实体类的<code>serialVersionUID</code>进行比较，如果相同就认为是一致的，可以进行反序列化，否则就会出现序列化版本不一致的异常，即是<code>InvalidCastException。</code></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"InvalidClassException\"><a href=\"#InvalidClassException\" class=\"headerlink\" title=\"InvalidClassException\"></a>InvalidClassException</h3><h4 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h4><p>项目使用的<code>SpringBoot</code>架构,使用的是默认的<code>Redis</code>存储登陆信息</p>\n<h4 id=\"过程\"><a href=\"#过程\" class=\"headerlink\" title=\"过程\"></a>过程</h4><p>添加了一个有关于<code>UsUser</code>的接口,需要把当前登录信息返回给前端。</p>\n<h4 id=\"结果\"><a href=\"#结果\" class=\"headerlink\" title=\"结果\"></a>结果</h4><p>访问时<code>InvalidClassException</code>异常<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">org.springframework.data.redis.serializer.SerializationException: Cannot deserialize; nested exception is org.springframework.core.serializer.support.SerializationFailedException: Failed to deserialize payload. Is the byte array a result of corresponding serialization for DefaultDeserializer?; nested exception is java.io.InvalidClassException: com.usc.core.model.UsUser; local class incompatible: stream classdesc serialVersionUID = -4391106051528831723, local class serialVersionUID = -3047559744731102659</div><div class=\"line\">\tat org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.deserialize(JdkSerializationRedisSerializer.java:<span class=\"number\">82</span>)</div></pre></td></tr></table></figure></p>\n<h4 id=\"思考-amp-总结\"><a href=\"#思考-amp-总结\" class=\"headerlink\" title=\"思考&amp;总结\"></a>思考&amp;总结</h4><p>看到这个的第一反应是有人修改了<code>serialVersionUID</code>,然后发现这个类并没有这个字段.然后联想到这个信息是从<code>redis</code>获取的然后清理了<code>redis</code>中的登陆信息,异常不再出现.最后注意到这个<br><code>org.springframework.data.redis.serializer.JdkSerializationRedisSerializer.deserialize</code>,已证明联想正确,出现问题到解决5分钟不到.</p>\n<h4 id=\"相关知识\"><a href=\"#相关知识\" class=\"headerlink\" title=\"相关知识\"></a>相关知识</h4><p><code>serialVersionUID</code>适用于<code>Java</code>的序列化机制。简单来说，<code>Java</code>的序列化机制是通过判断类的<code>serialVersionUID</code>来验证版本一致性的。在进行反序列化时，JVM会把传来的字节流中的<code>serialVersionUID</code>与本地相应实体类的<code>serialVersionUID</code>进行比较，如果相同就认为是一致的，可以进行反序列化，否则就会出现序列化版本不一致的异常，即是<code>InvalidCastException。</code></p>\n"},{"title":"ali-api-util","date":"2017-12-06T15:45:02.000Z","_content":"\n```java\n@Component\n@NotThreadSafe\npublic class AliApiClientUtil implements InitializingBean {\n\n    @Value(\"${aliapi.appKey:no_config}\")\n    private String appKey;\n\n    @Value(\"${aliapi.appSecret:no_config}\")\n    private String appSecret;\n\n    @Value(\"${aliapi.enable:false}\")\n    private boolean enable;\n\n    private AliApiClient asyncClient;\n\n    @Override\n    public void afterPropertiesSet() throws Exception {\n        if (enable && (Constant.DEF_CONFIG.equals(appKey) || Constant.DEF_CONFIG.equals(appSecret))) {\n            throw new RuntimeException(String.format(\"阿里云第三方API初始化,缺失参数appKey:{0},appSecret{1}\", new Object[]{appKey, appSecret}));\n        }\n        asyncClient = AliApiClient.newBuilder()\n                .appKey(appKey)\n                .appSecret(appSecret)\n                .build();\n    }\n\n    public static class Builder extends BaseApiClientBuilder<Builder, AliApiClient> {\n\n        @Override\n        protected AliApiClient build(BuilderParams params) {\n            return new AliApiClient(params);\n        }\n    }\n\n    public static class AliApiClient extends BaseApiClient {\n\n        private AliApiClient(BuilderParams builderParams) {\n            super(builderParams);\n        }\n\n        public static Builder newBuilder() {\n            return new Builder();\n        }\n\n        public static AliApiClient getInstance() {\n            return getApiClassInstance(AliApiClient.class);\n        }\n\n        public void asyncInvoke0(ApiRequest apiRequest, ApiCallBack callBack) {\n            asyncInvoke(apiRequest, callBack);\n        }\n\n        public ApiResponse syncInvoke0(ApiRequest apiRequest) {\n            return syncInvoke(apiRequest);\n        }\n    }\n\n    /**\n     *{\n     *\"resp\":{\n     *  \"code\":0,\n     *  \"desc\":\"OK\"\n     *  } ,\n     *  \"data\":{},\n     * }\n     * 银行卡二、三、四元素实名认证\n     * https://market.aliyun.com/products/57000002/cmapi014429.html?spm=5176.2020520132.101.5.2lTTNI#sku=yuncode842900008\n     * @see AliHttpStatusEm\n     * @see com.dotnar.usc.common.util.aliapi.bankcardverifi.BankCardVerifiStatusEm\n     * @param bankCardVerifiVo\n     * @return\n     */\n    public ApiResponse syncBankCardVerifi(BankCardVerifiVo bankCardVerifiVo) {\n        ApiRequest apiRequest = new ApiRequest(Scheme.HTTP, Method.GET, Constant.BANK_CARD_VERIFI_HOST, Constant.BANK_CARD_VERIFI_API_PATH);\n        apiRequest.addParam(\"acct_name\", bankCardVerifiVo.getAcctName(), ParamPosition.QUERY, false);\n        apiRequest.addParam(\"acct_pan\", bankCardVerifiVo.getAcctPan(), ParamPosition.QUERY, true);\n        apiRequest.addParam(\"cert_id\", bankCardVerifiVo.getCertId(), ParamPosition.QUERY, false);\n        apiRequest.addParam(\"phone_num\", bankCardVerifiVo.getPhoneNum(), ParamPosition.QUERY, false);\n        return asyncClient.syncInvoke0(apiRequest);\n    }\n\n    /**\n     * {\n     * \"resp\": {\n     *      \"code\": 0,\n     *      \"desc\": \"匹配\"\n     * },\n     * \"data\": {\n     *    \"photo\": \"/9j/4AAQSkZJRgABAgAAAQAzb0a9jtkMbHG/o3+19P89K28x...\",\n     *    \"address\": \"四川省雅安地区荥经县\",\n     *    \"sex\": \"M\",\n     *    \"birthday\": \"1989-9-28\"\n     *   }\n     * }\n     *\n     * 身份证实名认证--返照片\n     * https://market.aliyun.com/products/57000002/cmapi015194.html?spm=5176.2020520132.101.10.2lTTNI#sku=yuncode919400000\n     * @param idPhotoVo\n     * @see AliHttpStatusEm\n     * @see com.dotnar.usc.common.util.aliapi.idphoto.IdPhotoStatusEm\n     * @return\n     */\n    public ApiResponse syncIdphoto(IdPhotoVo idPhotoVo) {\n        ApiRequest apiRequest = new ApiRequest(Scheme.HTTP, Method.GET, Constant.ID_PHOTO_HOST, Constant.ID_PHOTO_API_PATH);\n        apiRequest.addParam(\"cardno\", idPhotoVo.getCardno(), ParamPosition.QUERY, true);\n        apiRequest.addParam(\"name\", idPhotoVo.getName(), ParamPosition.QUERY, true);\n        return asyncClient.syncInvoke0(apiRequest);\n    }\n\n}\n```\n \n常见的错误\n```java\n/**\n * @Date 2017/12/5 16:42\n * <p>\n * https://help.aliyun.com/document_detail/43906.html\n */\n\npublic enum AliHttpStatusEm {\n\n    OK(\"OK\", 200, \"成功\"),\n\n    THROTTLED_BY_USER_FLOW_CONTROL(\"Throttled by USER Flow Control\", 403, \"因用户流控被限制\"),\n\n    THROTTLED_BY_APP_FLOW_CONTROL(\"Throttled by APP Flow Control\", 403, \"因APP流控被限制\"),\n\n    THROTTLED_BY_API_FLOW_CONTROL(\"Throttled by API Flow Control\", 403, \"因 API 流控被限制\"),\n\n    THROTTLED_BY_DOMAIN_FLOW_CONTROL(\"Throttled by DOMAIN Flow Control\", 403, \"因二级域名流控被限制，或因分组流控被限制\"),\n\n    QUOTA_EXHAUSTED(\"Quota Exhausted\", 403, \"调用次数已用完\"),\n\n    QUOTA_EXPIRED(\"Quota Expired\", 403, \"购买次数已过期\"),\n\n    USER_ARREARS(\"User Arrears\", 403, \"用户已欠费\"),\n\n    INVALID_ACCESS_KEY_ID_NOT_FOUND(\"InvalidAccessKeyId.NotFound\", 404, \"AccessKeyId 找不到\"),\n\n    INVALID_ACCESS_KEY_ID_INACTIVE(\"InvalidAccessKeyId.Inactive\", 400, \"AccessKeyId 被禁用。\"),\n\n    INVALID_TIME_STAMP_FORMAT(\"InvalidTimeStamp.Format\", 400, \"时间戳格式不对( Date 和 Timestamp)。\"),\n\n    INVALID_TIME_STAMP_EXPIRED(\"InvalidTimeStamp.Expired\", 400, \"用户时间和服务器时间超过15分钟。\"),\n\n    INVALID_SIGNATURE_METHOD(\"InvalidSignatureMethod\", 400, \"签名方法不支持。\"),\n\n    SIGNATURE_DOES_NOT_MATCH(\"SignatureDoesNotMatch\", 400, \"签名不通过。\"),\n\n    THROTTLING_USER(\"Throttling.User\", 400, \"用户调用频率超限。\"),\n\n    THROTTLING_API(\"Throttling.API\", 400, \"API 访问频率超限。\");\n\n    /**\n     * 错误码\n     */\n    private String code;\n    /**\n     * http 状态码\n     */\n    private int statusCode;\n    /**\n     * 中文描述\n     */\n    private String desc;\n\n    private final static Map<String, AliHttpStatusEm> ID_MAP = Arrays.stream(AliHttpStatusEm.values())\n            .collect(Collectors.toMap(AliHttpStatusEm::getCode, Function.identity()));\n\n    AliHttpStatusEm(String code, int statusCode, String desc) {\n        this.code = code;\n        this.statusCode = statusCode;\n        this.desc = desc;\n    }\n\n    public String getCode() {\n        return code;\n    }\n\n    public int getStatusCode() {\n        return statusCode;\n    }\n\n    public String getDesc() {\n        return desc;\n    }\n\n    public static AliHttpStatusEm getAliHttpStatusEmByStatusCode(String code) {\n        return ID_MAP.get(code);\n    }\n}\n\n```\n\n银行卡验证错误状态\n```java\n/**\n * 银行卡验证状态码\n *\n * @author \n * @Date 2017/12/5 17:31\n * <p>\n * https://market.aliyun.com/products/57000002/cmapi014429.html?spm=5176.2020520132.101.5.2lTTNI#sku=yuncode842900008\n */\n\npublic enum BankCardVerifiStatusEm {\n\n    OK((short) 0, \"OK\"),\n\n    CARD_IS_FORFEITED((short) 4, \"此卡被没收，请于发卡方联系\"),\n\n    CARDHOLDER_AUTHENTICATION_FAILED((short) 5, \"持卡人认证失败\"),\n\n    INVALID_CARD_NUMBER((short) 14, \"无效卡号\"),\n\n    CARD_DOES_NOT_CORRESPOND_ISSUER((short) 15, \"此卡无对应发卡方\"),\n\n    CARD_IS_NOT_INITIALIZED_OR_SLEEPS((short) 21, \"该卡未初始化或睡眠卡\"),\n\n    CHEAT_TUNKA((short) 34, \"作弊卡，吞卡\"),\n\n    ISSUER_DOES_NOT_SUPPORT_TRANSACTION((short) 40, \"发卡方不支持的交易\"),\n\n    CARD_HAS__REPORTED((short) 41, \"此卡已经挂失\"),\n\n    CARD_IS_FORFEITED_2((short) 43, \"此卡被没收\"),\n\n    CARD_HAS_EXPIRED((short) 54, \"该卡已过期\"),\n\n    CARD_ISSUER_DOES_NOT_ALLOW_THIS_TRANSACTION((short) 57, \"发卡方不允许此交易\"),\n\n    RESTRICTED_CARD((short) 62, \"受限制的卡\"),\n\n    WRONG_NUMBER_OF_PASSWORDS((short) 75, \"密码错误次数超限\"),\n\n    FAILED((short) 96, \"交易失败，请稍后重试\");\n\n    private short code;\n\n    private String desc;\n\n    private final static Map<Short, BankCardVerifiStatusEm> ID_MAP = Arrays.stream(BankCardVerifiStatusEm.values())\n            .collect(Collectors.toMap(BankCardVerifiStatusEm::getCode, Function.identity()));\n\n    BankCardVerifiStatusEm(short code, String desc) {\n        this.code = code;\n        this.desc = desc;\n    }\n\n    public short getCode() {\n        return code;\n    }\n\n    public String getDesc() {\n        return desc;\n    }\n\n    public static BankCardVerifiStatusEm getBankCardVerifiStatusEmByCode(short code) {\n        return ID_MAP.get(code);\n    }\n}\n```\n \n获取 身份证照片\n```java\n/**\n * @author \n * @Date 2017/12/5 19:05\n * https://market.aliyun.com/products/57000002/cmapi015194.html?spm=5176.2020520132.101.10.2lTTNI#sku=yuncode919400000\n */\n\npublic enum IdPhotoStatusEm {\n\n    OK((short) 0, \"匹配\"),\n\n    MISMATCH((short) 5, \"不匹配\"),\n\n    NOT_EXIST((short) 14, \"无此身份证号码\"),\n\n    FAILED((short) 96, \"交易失败，请稍后重试\");\n\n    private short code;\n\n    private String desc;\n\n    private final static Map<Short, IdPhotoStatusEm> ID_MAP = Arrays.stream(IdPhotoStatusEm.values())\n            .collect(Collectors.toMap(IdPhotoStatusEm::getCode, Function.identity()));\n\n    IdPhotoStatusEm(short code, String desc) {\n        this.code = code;\n        this.desc = desc;\n    }\n\n    public short getCode() {\n        return code;\n    }\n\n    public String getDesc() {\n        return desc;\n    }\n\n    public static IdPhotoStatusEm getIdPhotoStatusEmByCode(short code) {\n        return ID_MAP.get(code);\n    }\n}\n\n```\n\n\n","source":"_posts/ali-api.md","raw":"---\ntitle: ali-api-util\ndate: 2017-12-06 23:45:02\npermalink: ali-api-util\ncategories: Gists\ntags:\n - java\n---\n\n```java\n@Component\n@NotThreadSafe\npublic class AliApiClientUtil implements InitializingBean {\n\n    @Value(\"${aliapi.appKey:no_config}\")\n    private String appKey;\n\n    @Value(\"${aliapi.appSecret:no_config}\")\n    private String appSecret;\n\n    @Value(\"${aliapi.enable:false}\")\n    private boolean enable;\n\n    private AliApiClient asyncClient;\n\n    @Override\n    public void afterPropertiesSet() throws Exception {\n        if (enable && (Constant.DEF_CONFIG.equals(appKey) || Constant.DEF_CONFIG.equals(appSecret))) {\n            throw new RuntimeException(String.format(\"阿里云第三方API初始化,缺失参数appKey:{0},appSecret{1}\", new Object[]{appKey, appSecret}));\n        }\n        asyncClient = AliApiClient.newBuilder()\n                .appKey(appKey)\n                .appSecret(appSecret)\n                .build();\n    }\n\n    public static class Builder extends BaseApiClientBuilder<Builder, AliApiClient> {\n\n        @Override\n        protected AliApiClient build(BuilderParams params) {\n            return new AliApiClient(params);\n        }\n    }\n\n    public static class AliApiClient extends BaseApiClient {\n\n        private AliApiClient(BuilderParams builderParams) {\n            super(builderParams);\n        }\n\n        public static Builder newBuilder() {\n            return new Builder();\n        }\n\n        public static AliApiClient getInstance() {\n            return getApiClassInstance(AliApiClient.class);\n        }\n\n        public void asyncInvoke0(ApiRequest apiRequest, ApiCallBack callBack) {\n            asyncInvoke(apiRequest, callBack);\n        }\n\n        public ApiResponse syncInvoke0(ApiRequest apiRequest) {\n            return syncInvoke(apiRequest);\n        }\n    }\n\n    /**\n     *{\n     *\"resp\":{\n     *  \"code\":0,\n     *  \"desc\":\"OK\"\n     *  } ,\n     *  \"data\":{},\n     * }\n     * 银行卡二、三、四元素实名认证\n     * https://market.aliyun.com/products/57000002/cmapi014429.html?spm=5176.2020520132.101.5.2lTTNI#sku=yuncode842900008\n     * @see AliHttpStatusEm\n     * @see com.dotnar.usc.common.util.aliapi.bankcardverifi.BankCardVerifiStatusEm\n     * @param bankCardVerifiVo\n     * @return\n     */\n    public ApiResponse syncBankCardVerifi(BankCardVerifiVo bankCardVerifiVo) {\n        ApiRequest apiRequest = new ApiRequest(Scheme.HTTP, Method.GET, Constant.BANK_CARD_VERIFI_HOST, Constant.BANK_CARD_VERIFI_API_PATH);\n        apiRequest.addParam(\"acct_name\", bankCardVerifiVo.getAcctName(), ParamPosition.QUERY, false);\n        apiRequest.addParam(\"acct_pan\", bankCardVerifiVo.getAcctPan(), ParamPosition.QUERY, true);\n        apiRequest.addParam(\"cert_id\", bankCardVerifiVo.getCertId(), ParamPosition.QUERY, false);\n        apiRequest.addParam(\"phone_num\", bankCardVerifiVo.getPhoneNum(), ParamPosition.QUERY, false);\n        return asyncClient.syncInvoke0(apiRequest);\n    }\n\n    /**\n     * {\n     * \"resp\": {\n     *      \"code\": 0,\n     *      \"desc\": \"匹配\"\n     * },\n     * \"data\": {\n     *    \"photo\": \"/9j/4AAQSkZJRgABAgAAAQAzb0a9jtkMbHG/o3+19P89K28x...\",\n     *    \"address\": \"四川省雅安地区荥经县\",\n     *    \"sex\": \"M\",\n     *    \"birthday\": \"1989-9-28\"\n     *   }\n     * }\n     *\n     * 身份证实名认证--返照片\n     * https://market.aliyun.com/products/57000002/cmapi015194.html?spm=5176.2020520132.101.10.2lTTNI#sku=yuncode919400000\n     * @param idPhotoVo\n     * @see AliHttpStatusEm\n     * @see com.dotnar.usc.common.util.aliapi.idphoto.IdPhotoStatusEm\n     * @return\n     */\n    public ApiResponse syncIdphoto(IdPhotoVo idPhotoVo) {\n        ApiRequest apiRequest = new ApiRequest(Scheme.HTTP, Method.GET, Constant.ID_PHOTO_HOST, Constant.ID_PHOTO_API_PATH);\n        apiRequest.addParam(\"cardno\", idPhotoVo.getCardno(), ParamPosition.QUERY, true);\n        apiRequest.addParam(\"name\", idPhotoVo.getName(), ParamPosition.QUERY, true);\n        return asyncClient.syncInvoke0(apiRequest);\n    }\n\n}\n```\n \n常见的错误\n```java\n/**\n * @Date 2017/12/5 16:42\n * <p>\n * https://help.aliyun.com/document_detail/43906.html\n */\n\npublic enum AliHttpStatusEm {\n\n    OK(\"OK\", 200, \"成功\"),\n\n    THROTTLED_BY_USER_FLOW_CONTROL(\"Throttled by USER Flow Control\", 403, \"因用户流控被限制\"),\n\n    THROTTLED_BY_APP_FLOW_CONTROL(\"Throttled by APP Flow Control\", 403, \"因APP流控被限制\"),\n\n    THROTTLED_BY_API_FLOW_CONTROL(\"Throttled by API Flow Control\", 403, \"因 API 流控被限制\"),\n\n    THROTTLED_BY_DOMAIN_FLOW_CONTROL(\"Throttled by DOMAIN Flow Control\", 403, \"因二级域名流控被限制，或因分组流控被限制\"),\n\n    QUOTA_EXHAUSTED(\"Quota Exhausted\", 403, \"调用次数已用完\"),\n\n    QUOTA_EXPIRED(\"Quota Expired\", 403, \"购买次数已过期\"),\n\n    USER_ARREARS(\"User Arrears\", 403, \"用户已欠费\"),\n\n    INVALID_ACCESS_KEY_ID_NOT_FOUND(\"InvalidAccessKeyId.NotFound\", 404, \"AccessKeyId 找不到\"),\n\n    INVALID_ACCESS_KEY_ID_INACTIVE(\"InvalidAccessKeyId.Inactive\", 400, \"AccessKeyId 被禁用。\"),\n\n    INVALID_TIME_STAMP_FORMAT(\"InvalidTimeStamp.Format\", 400, \"时间戳格式不对( Date 和 Timestamp)。\"),\n\n    INVALID_TIME_STAMP_EXPIRED(\"InvalidTimeStamp.Expired\", 400, \"用户时间和服务器时间超过15分钟。\"),\n\n    INVALID_SIGNATURE_METHOD(\"InvalidSignatureMethod\", 400, \"签名方法不支持。\"),\n\n    SIGNATURE_DOES_NOT_MATCH(\"SignatureDoesNotMatch\", 400, \"签名不通过。\"),\n\n    THROTTLING_USER(\"Throttling.User\", 400, \"用户调用频率超限。\"),\n\n    THROTTLING_API(\"Throttling.API\", 400, \"API 访问频率超限。\");\n\n    /**\n     * 错误码\n     */\n    private String code;\n    /**\n     * http 状态码\n     */\n    private int statusCode;\n    /**\n     * 中文描述\n     */\n    private String desc;\n\n    private final static Map<String, AliHttpStatusEm> ID_MAP = Arrays.stream(AliHttpStatusEm.values())\n            .collect(Collectors.toMap(AliHttpStatusEm::getCode, Function.identity()));\n\n    AliHttpStatusEm(String code, int statusCode, String desc) {\n        this.code = code;\n        this.statusCode = statusCode;\n        this.desc = desc;\n    }\n\n    public String getCode() {\n        return code;\n    }\n\n    public int getStatusCode() {\n        return statusCode;\n    }\n\n    public String getDesc() {\n        return desc;\n    }\n\n    public static AliHttpStatusEm getAliHttpStatusEmByStatusCode(String code) {\n        return ID_MAP.get(code);\n    }\n}\n\n```\n\n银行卡验证错误状态\n```java\n/**\n * 银行卡验证状态码\n *\n * @author \n * @Date 2017/12/5 17:31\n * <p>\n * https://market.aliyun.com/products/57000002/cmapi014429.html?spm=5176.2020520132.101.5.2lTTNI#sku=yuncode842900008\n */\n\npublic enum BankCardVerifiStatusEm {\n\n    OK((short) 0, \"OK\"),\n\n    CARD_IS_FORFEITED((short) 4, \"此卡被没收，请于发卡方联系\"),\n\n    CARDHOLDER_AUTHENTICATION_FAILED((short) 5, \"持卡人认证失败\"),\n\n    INVALID_CARD_NUMBER((short) 14, \"无效卡号\"),\n\n    CARD_DOES_NOT_CORRESPOND_ISSUER((short) 15, \"此卡无对应发卡方\"),\n\n    CARD_IS_NOT_INITIALIZED_OR_SLEEPS((short) 21, \"该卡未初始化或睡眠卡\"),\n\n    CHEAT_TUNKA((short) 34, \"作弊卡，吞卡\"),\n\n    ISSUER_DOES_NOT_SUPPORT_TRANSACTION((short) 40, \"发卡方不支持的交易\"),\n\n    CARD_HAS__REPORTED((short) 41, \"此卡已经挂失\"),\n\n    CARD_IS_FORFEITED_2((short) 43, \"此卡被没收\"),\n\n    CARD_HAS_EXPIRED((short) 54, \"该卡已过期\"),\n\n    CARD_ISSUER_DOES_NOT_ALLOW_THIS_TRANSACTION((short) 57, \"发卡方不允许此交易\"),\n\n    RESTRICTED_CARD((short) 62, \"受限制的卡\"),\n\n    WRONG_NUMBER_OF_PASSWORDS((short) 75, \"密码错误次数超限\"),\n\n    FAILED((short) 96, \"交易失败，请稍后重试\");\n\n    private short code;\n\n    private String desc;\n\n    private final static Map<Short, BankCardVerifiStatusEm> ID_MAP = Arrays.stream(BankCardVerifiStatusEm.values())\n            .collect(Collectors.toMap(BankCardVerifiStatusEm::getCode, Function.identity()));\n\n    BankCardVerifiStatusEm(short code, String desc) {\n        this.code = code;\n        this.desc = desc;\n    }\n\n    public short getCode() {\n        return code;\n    }\n\n    public String getDesc() {\n        return desc;\n    }\n\n    public static BankCardVerifiStatusEm getBankCardVerifiStatusEmByCode(short code) {\n        return ID_MAP.get(code);\n    }\n}\n```\n \n获取 身份证照片\n```java\n/**\n * @author \n * @Date 2017/12/5 19:05\n * https://market.aliyun.com/products/57000002/cmapi015194.html?spm=5176.2020520132.101.10.2lTTNI#sku=yuncode919400000\n */\n\npublic enum IdPhotoStatusEm {\n\n    OK((short) 0, \"匹配\"),\n\n    MISMATCH((short) 5, \"不匹配\"),\n\n    NOT_EXIST((short) 14, \"无此身份证号码\"),\n\n    FAILED((short) 96, \"交易失败，请稍后重试\");\n\n    private short code;\n\n    private String desc;\n\n    private final static Map<Short, IdPhotoStatusEm> ID_MAP = Arrays.stream(IdPhotoStatusEm.values())\n            .collect(Collectors.toMap(IdPhotoStatusEm::getCode, Function.identity()));\n\n    IdPhotoStatusEm(short code, String desc) {\n        this.code = code;\n        this.desc = desc;\n    }\n\n    public short getCode() {\n        return code;\n    }\n\n    public String getDesc() {\n        return desc;\n    }\n\n    public static IdPhotoStatusEm getIdPhotoStatusEmByCode(short code) {\n        return ID_MAP.get(code);\n    }\n}\n\n```\n\n\n","slug":"ali-api-util","published":1,"updated":"2017-12-06T15:57:13.096Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjayvjb0y000r4kvnf9qaltzf","content":"<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Component</span></div><div class=\"line\"><span class=\"meta\">@NotThreadSafe</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AliApiClientUtil</span> <span class=\"keyword\">implements</span> <span class=\"title\">InitializingBean</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;aliapi.appKey:no_config&#125;\"</span>)</div><div class=\"line\">    <span class=\"keyword\">private</span> String appKey;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;aliapi.appSecret:no_config&#125;\"</span>)</div><div class=\"line\">    <span class=\"keyword\">private</span> String appSecret;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;aliapi.enable:false&#125;\"</span>)</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> enable;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> AliApiClient asyncClient;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">afterPropertiesSet</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (enable &amp;&amp; (Constant.DEF_CONFIG.equals(appKey) || Constant.DEF_CONFIG.equals(appSecret))) &#123;</div><div class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(String.format(<span class=\"string\">\"阿里云第三方API初始化,缺失参数appKey:&#123;0&#125;,appSecret&#123;1&#125;\"</span>, <span class=\"keyword\">new</span> Object[]&#123;appKey, appSecret&#125;));</div><div class=\"line\">        &#125;</div><div class=\"line\">        asyncClient = AliApiClient.newBuilder()</div><div class=\"line\">                .appKey(appKey)</div><div class=\"line\">                .appSecret(appSecret)</div><div class=\"line\">                .build();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseApiClientBuilder</span>&lt;<span class=\"title\">Builder</span>, <span class=\"title\">AliApiClient</span>&gt; </span>&#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">protected</span> AliApiClient <span class=\"title\">build</span><span class=\"params\">(BuilderParams params)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> AliApiClient(params);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AliApiClient</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseApiClient</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">AliApiClient</span><span class=\"params\">(BuilderParams builderParams)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">super</span>(builderParams);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Builder <span class=\"title\">newBuilder</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Builder();</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> AliApiClient <span class=\"title\">getInstance</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> getApiClassInstance(AliApiClient.class);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">asyncInvoke0</span><span class=\"params\">(ApiRequest apiRequest, ApiCallBack callBack)</span> </span>&#123;</div><div class=\"line\">            asyncInvoke(apiRequest, callBack);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> ApiResponse <span class=\"title\">syncInvoke0</span><span class=\"params\">(ApiRequest apiRequest)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> syncInvoke(apiRequest);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\">     *&#123;</span></div><div class=\"line\"><span class=\"comment\">     *\"resp\":&#123;</span></div><div class=\"line\"><span class=\"comment\">     *  \"code\":0,</span></div><div class=\"line\"><span class=\"comment\">     *  \"desc\":\"OK\"</span></div><div class=\"line\"><span class=\"comment\">     *  &#125; ,</span></div><div class=\"line\"><span class=\"comment\">     *  \"data\":&#123;&#125;,</span></div><div class=\"line\"><span class=\"comment\">     * &#125;</span></div><div class=\"line\"><span class=\"comment\">     * 银行卡二、三、四元素实名认证</span></div><div class=\"line\"><span class=\"comment\">     * https://market.aliyun.com/products/57000002/cmapi014429.html?spm=5176.2020520132.101.5.2lTTNI#sku=yuncode842900008</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> AliHttpStatusEm</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> com.dotnar.usc.common.util.aliapi.bankcardverifi.BankCardVerifiStatusEm</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> bankCardVerifiVo</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ApiResponse <span class=\"title\">syncBankCardVerifi</span><span class=\"params\">(BankCardVerifiVo bankCardVerifiVo)</span> </span>&#123;</div><div class=\"line\">        ApiRequest apiRequest = <span class=\"keyword\">new</span> ApiRequest(Scheme.HTTP, Method.GET, Constant.BANK_CARD_VERIFI_HOST, Constant.BANK_CARD_VERIFI_API_PATH);</div><div class=\"line\">        apiRequest.addParam(<span class=\"string\">\"acct_name\"</span>, bankCardVerifiVo.getAcctName(), ParamPosition.QUERY, <span class=\"keyword\">false</span>);</div><div class=\"line\">        apiRequest.addParam(<span class=\"string\">\"acct_pan\"</span>, bankCardVerifiVo.getAcctPan(), ParamPosition.QUERY, <span class=\"keyword\">true</span>);</div><div class=\"line\">        apiRequest.addParam(<span class=\"string\">\"cert_id\"</span>, bankCardVerifiVo.getCertId(), ParamPosition.QUERY, <span class=\"keyword\">false</span>);</div><div class=\"line\">        apiRequest.addParam(<span class=\"string\">\"phone_num\"</span>, bankCardVerifiVo.getPhoneNum(), ParamPosition.QUERY, <span class=\"keyword\">false</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> asyncClient.syncInvoke0(apiRequest);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\">     * &#123;</span></div><div class=\"line\"><span class=\"comment\">     * \"resp\": &#123;</span></div><div class=\"line\"><span class=\"comment\">     *      \"code\": 0,</span></div><div class=\"line\"><span class=\"comment\">     *      \"desc\": \"匹配\"</span></div><div class=\"line\"><span class=\"comment\">     * &#125;,</span></div><div class=\"line\"><span class=\"comment\">     * \"data\": &#123;</span></div><div class=\"line\"><span class=\"comment\">     *    \"photo\": \"/9j/4AAQSkZJRgABAgAAAQAzb0a9jtkMbHG/o3+19P89K28x...\",</span></div><div class=\"line\"><span class=\"comment\">     *    \"address\": \"四川省雅安地区荥经县\",</span></div><div class=\"line\"><span class=\"comment\">     *    \"sex\": \"M\",</span></div><div class=\"line\"><span class=\"comment\">     *    \"birthday\": \"1989-9-28\"</span></div><div class=\"line\"><span class=\"comment\">     *   &#125;</span></div><div class=\"line\"><span class=\"comment\">     * &#125;</span></div><div class=\"line\"><span class=\"comment\">     *</span></div><div class=\"line\"><span class=\"comment\">     * 身份证实名认证--返照片</span></div><div class=\"line\"><span class=\"comment\">     * https://market.aliyun.com/products/57000002/cmapi015194.html?spm=5176.2020520132.101.10.2lTTNI#sku=yuncode919400000</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> idPhotoVo</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> AliHttpStatusEm</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> com.dotnar.usc.common.util.aliapi.idphoto.IdPhotoStatusEm</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ApiResponse <span class=\"title\">syncIdphoto</span><span class=\"params\">(IdPhotoVo idPhotoVo)</span> </span>&#123;</div><div class=\"line\">        ApiRequest apiRequest = <span class=\"keyword\">new</span> ApiRequest(Scheme.HTTP, Method.GET, Constant.ID_PHOTO_HOST, Constant.ID_PHOTO_API_PATH);</div><div class=\"line\">        apiRequest.addParam(<span class=\"string\">\"cardno\"</span>, idPhotoVo.getCardno(), ParamPosition.QUERY, <span class=\"keyword\">true</span>);</div><div class=\"line\">        apiRequest.addParam(<span class=\"string\">\"name\"</span>, idPhotoVo.getName(), ParamPosition.QUERY, <span class=\"keyword\">true</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> asyncClient.syncInvoke0(apiRequest);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>常见的错误<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Date</span> 2017/12/5 16:42</span></div><div class=\"line\"><span class=\"comment\"> * &lt;p&gt;</span></div><div class=\"line\"><span class=\"comment\"> * https://help.aliyun.com/document_detail/43906.html</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> AliHttpStatusEm &#123;</div><div class=\"line\"></div><div class=\"line\">    OK(<span class=\"string\">\"OK\"</span>, <span class=\"number\">200</span>, <span class=\"string\">\"成功\"</span>),</div><div class=\"line\"></div><div class=\"line\">    THROTTLED_BY_USER_FLOW_CONTROL(<span class=\"string\">\"Throttled by USER Flow Control\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"因用户流控被限制\"</span>),</div><div class=\"line\"></div><div class=\"line\">    THROTTLED_BY_APP_FLOW_CONTROL(<span class=\"string\">\"Throttled by APP Flow Control\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"因APP流控被限制\"</span>),</div><div class=\"line\"></div><div class=\"line\">    THROTTLED_BY_API_FLOW_CONTROL(<span class=\"string\">\"Throttled by API Flow Control\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"因 API 流控被限制\"</span>),</div><div class=\"line\"></div><div class=\"line\">    THROTTLED_BY_DOMAIN_FLOW_CONTROL(<span class=\"string\">\"Throttled by DOMAIN Flow Control\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"因二级域名流控被限制，或因分组流控被限制\"</span>),</div><div class=\"line\"></div><div class=\"line\">    QUOTA_EXHAUSTED(<span class=\"string\">\"Quota Exhausted\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"调用次数已用完\"</span>),</div><div class=\"line\"></div><div class=\"line\">    QUOTA_EXPIRED(<span class=\"string\">\"Quota Expired\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"购买次数已过期\"</span>),</div><div class=\"line\"></div><div class=\"line\">    USER_ARREARS(<span class=\"string\">\"User Arrears\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"用户已欠费\"</span>),</div><div class=\"line\"></div><div class=\"line\">    INVALID_ACCESS_KEY_ID_NOT_FOUND(<span class=\"string\">\"InvalidAccessKeyId.NotFound\"</span>, <span class=\"number\">404</span>, <span class=\"string\">\"AccessKeyId 找不到\"</span>),</div><div class=\"line\"></div><div class=\"line\">    INVALID_ACCESS_KEY_ID_INACTIVE(<span class=\"string\">\"InvalidAccessKeyId.Inactive\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"AccessKeyId 被禁用。\"</span>),</div><div class=\"line\"></div><div class=\"line\">    INVALID_TIME_STAMP_FORMAT(<span class=\"string\">\"InvalidTimeStamp.Format\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"时间戳格式不对( Date 和 Timestamp)。\"</span>),</div><div class=\"line\"></div><div class=\"line\">    INVALID_TIME_STAMP_EXPIRED(<span class=\"string\">\"InvalidTimeStamp.Expired\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"用户时间和服务器时间超过15分钟。\"</span>),</div><div class=\"line\"></div><div class=\"line\">    INVALID_SIGNATURE_METHOD(<span class=\"string\">\"InvalidSignatureMethod\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"签名方法不支持。\"</span>),</div><div class=\"line\"></div><div class=\"line\">    SIGNATURE_DOES_NOT_MATCH(<span class=\"string\">\"SignatureDoesNotMatch\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"签名不通过。\"</span>),</div><div class=\"line\"></div><div class=\"line\">    THROTTLING_USER(<span class=\"string\">\"Throttling.User\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"用户调用频率超限。\"</span>),</div><div class=\"line\"></div><div class=\"line\">    THROTTLING_API(<span class=\"string\">\"Throttling.API\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"API 访问频率超限。\"</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\">     * 错误码</span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    <span class=\"keyword\">private</span> String code;</div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\">     * http 状态码</span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> statusCode;</div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\">     * 中文描述</span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    <span class=\"keyword\">private</span> String desc;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> Map&lt;String, AliHttpStatusEm&gt; ID_MAP = Arrays.stream(AliHttpStatusEm.values())</div><div class=\"line\">            .collect(Collectors.toMap(AliHttpStatusEm::getCode, Function.identity()));</div><div class=\"line\"></div><div class=\"line\">    AliHttpStatusEm(String code, <span class=\"keyword\">int</span> statusCode, String desc) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.code = code;</div><div class=\"line\">        <span class=\"keyword\">this</span>.statusCode = statusCode;</div><div class=\"line\">        <span class=\"keyword\">this</span>.desc = desc;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getCode</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> code;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getStatusCode</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> statusCode;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDesc</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> desc;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> AliHttpStatusEm <span class=\"title\">getAliHttpStatusEmByStatusCode</span><span class=\"params\">(String code)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> ID_MAP.get(code);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>银行卡验证错误状态<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * 银行卡验证状态码</span></div><div class=\"line\"><span class=\"comment\"> *</span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> </span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Date</span> 2017/12/5 17:31</span></div><div class=\"line\"><span class=\"comment\"> * &lt;p&gt;</span></div><div class=\"line\"><span class=\"comment\"> * https://market.aliyun.com/products/57000002/cmapi014429.html?spm=5176.2020520132.101.5.2lTTNI#sku=yuncode842900008</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> BankCardVerifiStatusEm &#123;</div><div class=\"line\"></div><div class=\"line\">    OK((<span class=\"keyword\">short</span>) <span class=\"number\">0</span>, <span class=\"string\">\"OK\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CARD_IS_FORFEITED((<span class=\"keyword\">short</span>) <span class=\"number\">4</span>, <span class=\"string\">\"此卡被没收，请于发卡方联系\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CARDHOLDER_AUTHENTICATION_FAILED((<span class=\"keyword\">short</span>) <span class=\"number\">5</span>, <span class=\"string\">\"持卡人认证失败\"</span>),</div><div class=\"line\"></div><div class=\"line\">    INVALID_CARD_NUMBER((<span class=\"keyword\">short</span>) <span class=\"number\">14</span>, <span class=\"string\">\"无效卡号\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CARD_DOES_NOT_CORRESPOND_ISSUER((<span class=\"keyword\">short</span>) <span class=\"number\">15</span>, <span class=\"string\">\"此卡无对应发卡方\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CARD_IS_NOT_INITIALIZED_OR_SLEEPS((<span class=\"keyword\">short</span>) <span class=\"number\">21</span>, <span class=\"string\">\"该卡未初始化或睡眠卡\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CHEAT_TUNKA((<span class=\"keyword\">short</span>) <span class=\"number\">34</span>, <span class=\"string\">\"作弊卡，吞卡\"</span>),</div><div class=\"line\"></div><div class=\"line\">    ISSUER_DOES_NOT_SUPPORT_TRANSACTION((<span class=\"keyword\">short</span>) <span class=\"number\">40</span>, <span class=\"string\">\"发卡方不支持的交易\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CARD_HAS__REPORTED((<span class=\"keyword\">short</span>) <span class=\"number\">41</span>, <span class=\"string\">\"此卡已经挂失\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CARD_IS_FORFEITED_2((<span class=\"keyword\">short</span>) <span class=\"number\">43</span>, <span class=\"string\">\"此卡被没收\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CARD_HAS_EXPIRED((<span class=\"keyword\">short</span>) <span class=\"number\">54</span>, <span class=\"string\">\"该卡已过期\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CARD_ISSUER_DOES_NOT_ALLOW_THIS_TRANSACTION((<span class=\"keyword\">short</span>) <span class=\"number\">57</span>, <span class=\"string\">\"发卡方不允许此交易\"</span>),</div><div class=\"line\"></div><div class=\"line\">    RESTRICTED_CARD((<span class=\"keyword\">short</span>) <span class=\"number\">62</span>, <span class=\"string\">\"受限制的卡\"</span>),</div><div class=\"line\"></div><div class=\"line\">    WRONG_NUMBER_OF_PASSWORDS((<span class=\"keyword\">short</span>) <span class=\"number\">75</span>, <span class=\"string\">\"密码错误次数超限\"</span>),</div><div class=\"line\"></div><div class=\"line\">    FAILED((<span class=\"keyword\">short</span>) <span class=\"number\">96</span>, <span class=\"string\">\"交易失败，请稍后重试\"</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">short</span> code;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> String desc;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> Map&lt;Short, BankCardVerifiStatusEm&gt; ID_MAP = Arrays.stream(BankCardVerifiStatusEm.values())</div><div class=\"line\">            .collect(Collectors.toMap(BankCardVerifiStatusEm::getCode, Function.identity()));</div><div class=\"line\"></div><div class=\"line\">    BankCardVerifiStatusEm(<span class=\"keyword\">short</span> code, String desc) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.code = code;</div><div class=\"line\">        <span class=\"keyword\">this</span>.desc = desc;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">short</span> <span class=\"title\">getCode</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> code;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDesc</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> desc;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> BankCardVerifiStatusEm <span class=\"title\">getBankCardVerifiStatusEmByCode</span><span class=\"params\">(<span class=\"keyword\">short</span> code)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> ID_MAP.get(code);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>获取 身份证照片<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> </span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Date</span> 2017/12/5 19:05</span></div><div class=\"line\"><span class=\"comment\"> * https://market.aliyun.com/products/57000002/cmapi015194.html?spm=5176.2020520132.101.10.2lTTNI#sku=yuncode919400000</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> IdPhotoStatusEm &#123;</div><div class=\"line\"></div><div class=\"line\">    OK((<span class=\"keyword\">short</span>) <span class=\"number\">0</span>, <span class=\"string\">\"匹配\"</span>),</div><div class=\"line\"></div><div class=\"line\">    MISMATCH((<span class=\"keyword\">short</span>) <span class=\"number\">5</span>, <span class=\"string\">\"不匹配\"</span>),</div><div class=\"line\"></div><div class=\"line\">    NOT_EXIST((<span class=\"keyword\">short</span>) <span class=\"number\">14</span>, <span class=\"string\">\"无此身份证号码\"</span>),</div><div class=\"line\"></div><div class=\"line\">    FAILED((<span class=\"keyword\">short</span>) <span class=\"number\">96</span>, <span class=\"string\">\"交易失败，请稍后重试\"</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">short</span> code;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> String desc;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> Map&lt;Short, IdPhotoStatusEm&gt; ID_MAP = Arrays.stream(IdPhotoStatusEm.values())</div><div class=\"line\">            .collect(Collectors.toMap(IdPhotoStatusEm::getCode, Function.identity()));</div><div class=\"line\"></div><div class=\"line\">    IdPhotoStatusEm(<span class=\"keyword\">short</span> code, String desc) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.code = code;</div><div class=\"line\">        <span class=\"keyword\">this</span>.desc = desc;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">short</span> <span class=\"title\">getCode</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> code;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDesc</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> desc;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> IdPhotoStatusEm <span class=\"title\">getIdPhotoStatusEmByCode</span><span class=\"params\">(<span class=\"keyword\">short</span> code)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> ID_MAP.get(code);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">@Component</span></div><div class=\"line\"><span class=\"meta\">@NotThreadSafe</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AliApiClientUtil</span> <span class=\"keyword\">implements</span> <span class=\"title\">InitializingBean</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;aliapi.appKey:no_config&#125;\"</span>)</div><div class=\"line\">    <span class=\"keyword\">private</span> String appKey;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;aliapi.appSecret:no_config&#125;\"</span>)</div><div class=\"line\">    <span class=\"keyword\">private</span> String appSecret;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Value</span>(<span class=\"string\">\"$&#123;aliapi.enable:false&#125;\"</span>)</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> enable;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> AliApiClient asyncClient;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">afterPropertiesSet</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> Exception </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (enable &amp;&amp; (Constant.DEF_CONFIG.equals(appKey) || Constant.DEF_CONFIG.equals(appSecret))) &#123;</div><div class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(String.format(<span class=\"string\">\"阿里云第三方API初始化,缺失参数appKey:&#123;0&#125;,appSecret&#123;1&#125;\"</span>, <span class=\"keyword\">new</span> Object[]&#123;appKey, appSecret&#125;));</div><div class=\"line\">        &#125;</div><div class=\"line\">        asyncClient = AliApiClient.newBuilder()</div><div class=\"line\">                .appKey(appKey)</div><div class=\"line\">                .appSecret(appSecret)</div><div class=\"line\">                .build();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseApiClientBuilder</span>&lt;<span class=\"title\">Builder</span>, <span class=\"title\">AliApiClient</span>&gt; </span>&#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">protected</span> AliApiClient <span class=\"title\">build</span><span class=\"params\">(BuilderParams params)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> AliApiClient(params);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AliApiClient</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseApiClient</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">AliApiClient</span><span class=\"params\">(BuilderParams builderParams)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">super</span>(builderParams);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Builder <span class=\"title\">newBuilder</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Builder();</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> AliApiClient <span class=\"title\">getInstance</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> getApiClassInstance(AliApiClient.class);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">asyncInvoke0</span><span class=\"params\">(ApiRequest apiRequest, ApiCallBack callBack)</span> </span>&#123;</div><div class=\"line\">            asyncInvoke(apiRequest, callBack);</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> ApiResponse <span class=\"title\">syncInvoke0</span><span class=\"params\">(ApiRequest apiRequest)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> syncInvoke(apiRequest);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\">     *&#123;</span></div><div class=\"line\"><span class=\"comment\">     *\"resp\":&#123;</span></div><div class=\"line\"><span class=\"comment\">     *  \"code\":0,</span></div><div class=\"line\"><span class=\"comment\">     *  \"desc\":\"OK\"</span></div><div class=\"line\"><span class=\"comment\">     *  &#125; ,</span></div><div class=\"line\"><span class=\"comment\">     *  \"data\":&#123;&#125;,</span></div><div class=\"line\"><span class=\"comment\">     * &#125;</span></div><div class=\"line\"><span class=\"comment\">     * 银行卡二、三、四元素实名认证</span></div><div class=\"line\"><span class=\"comment\">     * https://market.aliyun.com/products/57000002/cmapi014429.html?spm=5176.2020520132.101.5.2lTTNI#sku=yuncode842900008</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> AliHttpStatusEm</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> com.dotnar.usc.common.util.aliapi.bankcardverifi.BankCardVerifiStatusEm</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> bankCardVerifiVo</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ApiResponse <span class=\"title\">syncBankCardVerifi</span><span class=\"params\">(BankCardVerifiVo bankCardVerifiVo)</span> </span>&#123;</div><div class=\"line\">        ApiRequest apiRequest = <span class=\"keyword\">new</span> ApiRequest(Scheme.HTTP, Method.GET, Constant.BANK_CARD_VERIFI_HOST, Constant.BANK_CARD_VERIFI_API_PATH);</div><div class=\"line\">        apiRequest.addParam(<span class=\"string\">\"acct_name\"</span>, bankCardVerifiVo.getAcctName(), ParamPosition.QUERY, <span class=\"keyword\">false</span>);</div><div class=\"line\">        apiRequest.addParam(<span class=\"string\">\"acct_pan\"</span>, bankCardVerifiVo.getAcctPan(), ParamPosition.QUERY, <span class=\"keyword\">true</span>);</div><div class=\"line\">        apiRequest.addParam(<span class=\"string\">\"cert_id\"</span>, bankCardVerifiVo.getCertId(), ParamPosition.QUERY, <span class=\"keyword\">false</span>);</div><div class=\"line\">        apiRequest.addParam(<span class=\"string\">\"phone_num\"</span>, bankCardVerifiVo.getPhoneNum(), ParamPosition.QUERY, <span class=\"keyword\">false</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> asyncClient.syncInvoke0(apiRequest);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\">     * &#123;</span></div><div class=\"line\"><span class=\"comment\">     * \"resp\": &#123;</span></div><div class=\"line\"><span class=\"comment\">     *      \"code\": 0,</span></div><div class=\"line\"><span class=\"comment\">     *      \"desc\": \"匹配\"</span></div><div class=\"line\"><span class=\"comment\">     * &#125;,</span></div><div class=\"line\"><span class=\"comment\">     * \"data\": &#123;</span></div><div class=\"line\"><span class=\"comment\">     *    \"photo\": \"/9j/4AAQSkZJRgABAgAAAQAzb0a9jtkMbHG/o3+19P89K28x...\",</span></div><div class=\"line\"><span class=\"comment\">     *    \"address\": \"四川省雅安地区荥经县\",</span></div><div class=\"line\"><span class=\"comment\">     *    \"sex\": \"M\",</span></div><div class=\"line\"><span class=\"comment\">     *    \"birthday\": \"1989-9-28\"</span></div><div class=\"line\"><span class=\"comment\">     *   &#125;</span></div><div class=\"line\"><span class=\"comment\">     * &#125;</span></div><div class=\"line\"><span class=\"comment\">     *</span></div><div class=\"line\"><span class=\"comment\">     * 身份证实名认证--返照片</span></div><div class=\"line\"><span class=\"comment\">     * https://market.aliyun.com/products/57000002/cmapi015194.html?spm=5176.2020520132.101.10.2lTTNI#sku=yuncode919400000</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> idPhotoVo</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> AliHttpStatusEm</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@see</span> com.dotnar.usc.common.util.aliapi.idphoto.IdPhotoStatusEm</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ApiResponse <span class=\"title\">syncIdphoto</span><span class=\"params\">(IdPhotoVo idPhotoVo)</span> </span>&#123;</div><div class=\"line\">        ApiRequest apiRequest = <span class=\"keyword\">new</span> ApiRequest(Scheme.HTTP, Method.GET, Constant.ID_PHOTO_HOST, Constant.ID_PHOTO_API_PATH);</div><div class=\"line\">        apiRequest.addParam(<span class=\"string\">\"cardno\"</span>, idPhotoVo.getCardno(), ParamPosition.QUERY, <span class=\"keyword\">true</span>);</div><div class=\"line\">        apiRequest.addParam(<span class=\"string\">\"name\"</span>, idPhotoVo.getName(), ParamPosition.QUERY, <span class=\"keyword\">true</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> asyncClient.syncInvoke0(apiRequest);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>常见的错误<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Date</span> 2017/12/5 16:42</span></div><div class=\"line\"><span class=\"comment\"> * &lt;p&gt;</span></div><div class=\"line\"><span class=\"comment\"> * https://help.aliyun.com/document_detail/43906.html</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> AliHttpStatusEm &#123;</div><div class=\"line\"></div><div class=\"line\">    OK(<span class=\"string\">\"OK\"</span>, <span class=\"number\">200</span>, <span class=\"string\">\"成功\"</span>),</div><div class=\"line\"></div><div class=\"line\">    THROTTLED_BY_USER_FLOW_CONTROL(<span class=\"string\">\"Throttled by USER Flow Control\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"因用户流控被限制\"</span>),</div><div class=\"line\"></div><div class=\"line\">    THROTTLED_BY_APP_FLOW_CONTROL(<span class=\"string\">\"Throttled by APP Flow Control\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"因APP流控被限制\"</span>),</div><div class=\"line\"></div><div class=\"line\">    THROTTLED_BY_API_FLOW_CONTROL(<span class=\"string\">\"Throttled by API Flow Control\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"因 API 流控被限制\"</span>),</div><div class=\"line\"></div><div class=\"line\">    THROTTLED_BY_DOMAIN_FLOW_CONTROL(<span class=\"string\">\"Throttled by DOMAIN Flow Control\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"因二级域名流控被限制，或因分组流控被限制\"</span>),</div><div class=\"line\"></div><div class=\"line\">    QUOTA_EXHAUSTED(<span class=\"string\">\"Quota Exhausted\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"调用次数已用完\"</span>),</div><div class=\"line\"></div><div class=\"line\">    QUOTA_EXPIRED(<span class=\"string\">\"Quota Expired\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"购买次数已过期\"</span>),</div><div class=\"line\"></div><div class=\"line\">    USER_ARREARS(<span class=\"string\">\"User Arrears\"</span>, <span class=\"number\">403</span>, <span class=\"string\">\"用户已欠费\"</span>),</div><div class=\"line\"></div><div class=\"line\">    INVALID_ACCESS_KEY_ID_NOT_FOUND(<span class=\"string\">\"InvalidAccessKeyId.NotFound\"</span>, <span class=\"number\">404</span>, <span class=\"string\">\"AccessKeyId 找不到\"</span>),</div><div class=\"line\"></div><div class=\"line\">    INVALID_ACCESS_KEY_ID_INACTIVE(<span class=\"string\">\"InvalidAccessKeyId.Inactive\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"AccessKeyId 被禁用。\"</span>),</div><div class=\"line\"></div><div class=\"line\">    INVALID_TIME_STAMP_FORMAT(<span class=\"string\">\"InvalidTimeStamp.Format\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"时间戳格式不对( Date 和 Timestamp)。\"</span>),</div><div class=\"line\"></div><div class=\"line\">    INVALID_TIME_STAMP_EXPIRED(<span class=\"string\">\"InvalidTimeStamp.Expired\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"用户时间和服务器时间超过15分钟。\"</span>),</div><div class=\"line\"></div><div class=\"line\">    INVALID_SIGNATURE_METHOD(<span class=\"string\">\"InvalidSignatureMethod\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"签名方法不支持。\"</span>),</div><div class=\"line\"></div><div class=\"line\">    SIGNATURE_DOES_NOT_MATCH(<span class=\"string\">\"SignatureDoesNotMatch\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"签名不通过。\"</span>),</div><div class=\"line\"></div><div class=\"line\">    THROTTLING_USER(<span class=\"string\">\"Throttling.User\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"用户调用频率超限。\"</span>),</div><div class=\"line\"></div><div class=\"line\">    THROTTLING_API(<span class=\"string\">\"Throttling.API\"</span>, <span class=\"number\">400</span>, <span class=\"string\">\"API 访问频率超限。\"</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\">     * 错误码</span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    <span class=\"keyword\">private</span> String code;</div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\">     * http 状态码</span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> statusCode;</div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\">     * 中文描述</span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    <span class=\"keyword\">private</span> String desc;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> Map&lt;String, AliHttpStatusEm&gt; ID_MAP = Arrays.stream(AliHttpStatusEm.values())</div><div class=\"line\">            .collect(Collectors.toMap(AliHttpStatusEm::getCode, Function.identity()));</div><div class=\"line\"></div><div class=\"line\">    AliHttpStatusEm(String code, <span class=\"keyword\">int</span> statusCode, String desc) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.code = code;</div><div class=\"line\">        <span class=\"keyword\">this</span>.statusCode = statusCode;</div><div class=\"line\">        <span class=\"keyword\">this</span>.desc = desc;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getCode</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> code;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getStatusCode</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> statusCode;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDesc</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> desc;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> AliHttpStatusEm <span class=\"title\">getAliHttpStatusEmByStatusCode</span><span class=\"params\">(String code)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> ID_MAP.get(code);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>银行卡验证错误状态<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * 银行卡验证状态码</span></div><div class=\"line\"><span class=\"comment\"> *</span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> </span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Date</span> 2017/12/5 17:31</span></div><div class=\"line\"><span class=\"comment\"> * &lt;p&gt;</span></div><div class=\"line\"><span class=\"comment\"> * https://market.aliyun.com/products/57000002/cmapi014429.html?spm=5176.2020520132.101.5.2lTTNI#sku=yuncode842900008</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> BankCardVerifiStatusEm &#123;</div><div class=\"line\"></div><div class=\"line\">    OK((<span class=\"keyword\">short</span>) <span class=\"number\">0</span>, <span class=\"string\">\"OK\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CARD_IS_FORFEITED((<span class=\"keyword\">short</span>) <span class=\"number\">4</span>, <span class=\"string\">\"此卡被没收，请于发卡方联系\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CARDHOLDER_AUTHENTICATION_FAILED((<span class=\"keyword\">short</span>) <span class=\"number\">5</span>, <span class=\"string\">\"持卡人认证失败\"</span>),</div><div class=\"line\"></div><div class=\"line\">    INVALID_CARD_NUMBER((<span class=\"keyword\">short</span>) <span class=\"number\">14</span>, <span class=\"string\">\"无效卡号\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CARD_DOES_NOT_CORRESPOND_ISSUER((<span class=\"keyword\">short</span>) <span class=\"number\">15</span>, <span class=\"string\">\"此卡无对应发卡方\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CARD_IS_NOT_INITIALIZED_OR_SLEEPS((<span class=\"keyword\">short</span>) <span class=\"number\">21</span>, <span class=\"string\">\"该卡未初始化或睡眠卡\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CHEAT_TUNKA((<span class=\"keyword\">short</span>) <span class=\"number\">34</span>, <span class=\"string\">\"作弊卡，吞卡\"</span>),</div><div class=\"line\"></div><div class=\"line\">    ISSUER_DOES_NOT_SUPPORT_TRANSACTION((<span class=\"keyword\">short</span>) <span class=\"number\">40</span>, <span class=\"string\">\"发卡方不支持的交易\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CARD_HAS__REPORTED((<span class=\"keyword\">short</span>) <span class=\"number\">41</span>, <span class=\"string\">\"此卡已经挂失\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CARD_IS_FORFEITED_2((<span class=\"keyword\">short</span>) <span class=\"number\">43</span>, <span class=\"string\">\"此卡被没收\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CARD_HAS_EXPIRED((<span class=\"keyword\">short</span>) <span class=\"number\">54</span>, <span class=\"string\">\"该卡已过期\"</span>),</div><div class=\"line\"></div><div class=\"line\">    CARD_ISSUER_DOES_NOT_ALLOW_THIS_TRANSACTION((<span class=\"keyword\">short</span>) <span class=\"number\">57</span>, <span class=\"string\">\"发卡方不允许此交易\"</span>),</div><div class=\"line\"></div><div class=\"line\">    RESTRICTED_CARD((<span class=\"keyword\">short</span>) <span class=\"number\">62</span>, <span class=\"string\">\"受限制的卡\"</span>),</div><div class=\"line\"></div><div class=\"line\">    WRONG_NUMBER_OF_PASSWORDS((<span class=\"keyword\">short</span>) <span class=\"number\">75</span>, <span class=\"string\">\"密码错误次数超限\"</span>),</div><div class=\"line\"></div><div class=\"line\">    FAILED((<span class=\"keyword\">short</span>) <span class=\"number\">96</span>, <span class=\"string\">\"交易失败，请稍后重试\"</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">short</span> code;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> String desc;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> Map&lt;Short, BankCardVerifiStatusEm&gt; ID_MAP = Arrays.stream(BankCardVerifiStatusEm.values())</div><div class=\"line\">            .collect(Collectors.toMap(BankCardVerifiStatusEm::getCode, Function.identity()));</div><div class=\"line\"></div><div class=\"line\">    BankCardVerifiStatusEm(<span class=\"keyword\">short</span> code, String desc) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.code = code;</div><div class=\"line\">        <span class=\"keyword\">this</span>.desc = desc;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">short</span> <span class=\"title\">getCode</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> code;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDesc</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> desc;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> BankCardVerifiStatusEm <span class=\"title\">getBankCardVerifiStatusEmByCode</span><span class=\"params\">(<span class=\"keyword\">short</span> code)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> ID_MAP.get(code);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>获取 身份证照片<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> </span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@Date</span> 2017/12/5 19:05</span></div><div class=\"line\"><span class=\"comment\"> * https://market.aliyun.com/products/57000002/cmapi015194.html?spm=5176.2020520132.101.10.2lTTNI#sku=yuncode919400000</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> IdPhotoStatusEm &#123;</div><div class=\"line\"></div><div class=\"line\">    OK((<span class=\"keyword\">short</span>) <span class=\"number\">0</span>, <span class=\"string\">\"匹配\"</span>),</div><div class=\"line\"></div><div class=\"line\">    MISMATCH((<span class=\"keyword\">short</span>) <span class=\"number\">5</span>, <span class=\"string\">\"不匹配\"</span>),</div><div class=\"line\"></div><div class=\"line\">    NOT_EXIST((<span class=\"keyword\">short</span>) <span class=\"number\">14</span>, <span class=\"string\">\"无此身份证号码\"</span>),</div><div class=\"line\"></div><div class=\"line\">    FAILED((<span class=\"keyword\">short</span>) <span class=\"number\">96</span>, <span class=\"string\">\"交易失败，请稍后重试\"</span>);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">short</span> code;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> String desc;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">static</span> Map&lt;Short, IdPhotoStatusEm&gt; ID_MAP = Arrays.stream(IdPhotoStatusEm.values())</div><div class=\"line\">            .collect(Collectors.toMap(IdPhotoStatusEm::getCode, Function.identity()));</div><div class=\"line\"></div><div class=\"line\">    IdPhotoStatusEm(<span class=\"keyword\">short</span> code, String desc) &#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.code = code;</div><div class=\"line\">        <span class=\"keyword\">this</span>.desc = desc;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">short</span> <span class=\"title\">getCode</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> code;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getDesc</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> desc;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> IdPhotoStatusEm <span class=\"title\">getIdPhotoStatusEmByCode</span><span class=\"params\">(<span class=\"keyword\">short</span> code)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> ID_MAP.get(code);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n"},{"title":"java生成md5","date":"2017-12-06T15:45:02.000Z","_content":"\n```java\npublic static String md5(String source){\n    try {\n        MessageDigest md5 = MessageDigest.getInstance(\"MD5\");\n        return bytesConvertToHexString(md5.digest(source.getBytes()));\n    }catch (Exception e){\n    }\n    return null;\n}\n\n/**\n * 把字节数组转化成字符串返回\n * @param bytes\n * @return\n */\npublic static String bytesConvertToHexString(byte [] bytes) {\n    StringBuffer sb = new StringBuffer();\n    for (byte aByte : bytes) {\n        String s= Integer.toHexString(0xff & aByte);\n        if(s.length()==1){\n            sb.append(\"0\"+s);\n        }else{\n            sb.append(s);\n        }\n    }\n    return sb.toString();\n}\n```\n","source":"_posts/java-generate-md5.md","raw":"---\ntitle: java生成md5\ndate: 2017-12-06 23:45:02\npermalink: java-generate-md5\ncategories: Gists\ntags:\n - java\n---\n\n```java\npublic static String md5(String source){\n    try {\n        MessageDigest md5 = MessageDigest.getInstance(\"MD5\");\n        return bytesConvertToHexString(md5.digest(source.getBytes()));\n    }catch (Exception e){\n    }\n    return null;\n}\n\n/**\n * 把字节数组转化成字符串返回\n * @param bytes\n * @return\n */\npublic static String bytesConvertToHexString(byte [] bytes) {\n    StringBuffer sb = new StringBuffer();\n    for (byte aByte : bytes) {\n        String s= Integer.toHexString(0xff & aByte);\n        if(s.length()==1){\n            sb.append(\"0\"+s);\n        }else{\n            sb.append(s);\n        }\n    }\n    return sb.toString();\n}\n```\n","slug":"java-generate-md5","published":1,"updated":"2017-12-06T16:02:37.655Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjayvjb10000v4kvn3pq7cs06","content":"<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">md5</span><span class=\"params\">(String source)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">        MessageDigest md5 = MessageDigest.getInstance(<span class=\"string\">\"MD5\"</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> bytesConvertToHexString(md5.digest(source.getBytes()));</div><div class=\"line\">    &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * 把字节数组转化成字符串返回</span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> bytes</span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span></span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">bytesConvertToHexString</span><span class=\"params\">(<span class=\"keyword\">byte</span> [] bytes)</span> </span>&#123;</div><div class=\"line\">    StringBuffer sb = <span class=\"keyword\">new</span> StringBuffer();</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">byte</span> aByte : bytes) &#123;</div><div class=\"line\">        String s= Integer.toHexString(<span class=\"number\">0xff</span> &amp; aByte);</div><div class=\"line\">        <span class=\"keyword\">if</span>(s.length()==<span class=\"number\">1</span>)&#123;</div><div class=\"line\">            sb.append(<span class=\"string\">\"0\"</span>+s);</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            sb.append(s);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> sb.toString();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">md5</span><span class=\"params\">(String source)</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">        MessageDigest md5 = MessageDigest.getInstance(<span class=\"string\">\"MD5\"</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> bytesConvertToHexString(md5.digest(source.getBytes()));</div><div class=\"line\">    &#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * 把字节数组转化成字符串返回</span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> bytes</span></div><div class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span></span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">bytesConvertToHexString</span><span class=\"params\">(<span class=\"keyword\">byte</span> [] bytes)</span> </span>&#123;</div><div class=\"line\">    StringBuffer sb = <span class=\"keyword\">new</span> StringBuffer();</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">byte</span> aByte : bytes) &#123;</div><div class=\"line\">        String s= Integer.toHexString(<span class=\"number\">0xff</span> &amp; aByte);</div><div class=\"line\">        <span class=\"keyword\">if</span>(s.length()==<span class=\"number\">1</span>)&#123;</div><div class=\"line\">            sb.append(<span class=\"string\">\"0\"</span>+s);</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            sb.append(s);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">return</span> sb.toString();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n"},{"title":"java生成二维码","date":"2017-12-06T16:04:32.000Z","_content":"\n```java\nimport java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.util.Hashtable;\n\nimport javax.imageio.ImageIO;\n\nimport com.google.zxing.BarcodeFormat;\nimport com.google.zxing.BinaryBitmap;\nimport com.google.zxing.EncodeHintType;\nimport com.google.zxing.LuminanceSource;\nimport com.google.zxing.ReaderException;\nimport com.google.zxing.Result;\nimport com.google.zxing.WriterException;\nimport com.google.zxing.client.j2se.BufferedImageLuminanceSource;\nimport com.google.zxing.common.BitMatrix;\nimport com.google.zxing.common.HybridBinarizer;\nimport com.google.zxing.qrcode.QRCodeReader;\nimport com.google.zxing.qrcode.QRCodeWriter;\nimport com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;\n\n/**\n * 二维码生成和读的工具类\n */\npublic class QrCodeCreateUtil {\n\n    /**\n     * 生成包含字符串信息的二维码图片\n     *\n     * @param outputStream 文件输出流路径\n     * @param content      二维码携带信息\n     * @param qrCodeSize   二维码图片大小\n     * @param imageFormat  二维码的格式\n     * @throws WriterException\n     * @throws IOException\n     */\n    public static boolean createQrCode(OutputStream outputStream, String content, int qrCodeSize, String imageFormat) throws WriterException, IOException {\n        //设置二维码纠错级别ＭＡＰ\n        Hashtable<EncodeHintType, ErrorCorrectionLevel> hintMap = new Hashtable<EncodeHintType, ErrorCorrectionLevel>();\n        hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);  // 矫错级别\n        QRCodeWriter qrCodeWriter = new QRCodeWriter();\n        //创建比特矩阵(位矩阵)的QR码编码的字符串\n        BitMatrix byteMatrix = qrCodeWriter.encode(content, BarcodeFormat.QR_CODE, qrCodeSize, qrCodeSize, hintMap);\n        // 使BufferedImage勾画QRCode  (matrixWidth 是行二维码像素点)\n        int matrixWidth = byteMatrix.getWidth();\n        BufferedImage image = new BufferedImage(matrixWidth - 200, matrixWidth - 200, BufferedImage.TYPE_INT_RGB);\n        image.createGraphics();\n        Graphics2D graphics = (Graphics2D) image.getGraphics();\n        graphics.setColor(Color.WHITE);\n        graphics.fillRect(0, 0, matrixWidth, matrixWidth);\n        // 使用比特矩阵画并保存图像\n        graphics.setColor(Color.BLACK);\n        for (int i = 0; i < matrixWidth; i++) {\n            for (int j = 0; j < matrixWidth; j++) {\n                if (byteMatrix.get(i, j)) {\n                    graphics.fillRect(i - 100, j - 100, 1, 1);\n                }\n            }\n        }\n        return ImageIO.write(image, imageFormat, outputStream);\n    }\n\n    /**\n     * 读二维码并输出携带的信息\n     */\n    public static void readQrCode(InputStream inputStream) throws IOException {\n        //从输入流中获取字符串信息\n        BufferedImage image = ImageIO.read(inputStream);\n        //将图像转换为二进制位图源\n        LuminanceSource source = new BufferedImageLuminanceSource(image);\n        BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));\n        QRCodeReader reader = new QRCodeReader();\n        Result result = null;\n        try {\n            result = reader.decode(bitmap);\n        } catch (ReaderException e) {\n            e.printStackTrace();\n        }\n        System.out.println(result.getText());\n    }\n\n    /**\n     * 测试代码\n     *\n     * @throws WriterException\n     */\n    public static void main(String[] args) throws IOException, WriterException {\n        createQrCode(new FileOutputStream(new File(\"d:\\\\qrcode.jpg\")), \"http://dmrs.me\", 900, \"JPEG\");\n        readQrCode(new FileInputStream(new File(\"d:\\\\qrcode.jpg\")));\n    }\n\n}\n```\n\n```xml\n<dependency>\n    <groupId>com.google.zxing</groupId>\n    <artifactId>core</artifactId>\n    <version>3.0.0</version>\n</dependency>\n<dependency>\n    <groupId>com.google.zxing</groupId>\n    <artifactId>javase</artifactId>\n    <version>3.0.0</version>\n</dependency>\n```","source":"_posts/java生成二维码.md","raw":"---\ntitle: java生成二维码\ndate: 2017-12-07 00:04:32\npermalink: java-generate-qr-code\ncategories: Gists\ntags:\n - java\n---\n\n```java\nimport java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.util.Hashtable;\n\nimport javax.imageio.ImageIO;\n\nimport com.google.zxing.BarcodeFormat;\nimport com.google.zxing.BinaryBitmap;\nimport com.google.zxing.EncodeHintType;\nimport com.google.zxing.LuminanceSource;\nimport com.google.zxing.ReaderException;\nimport com.google.zxing.Result;\nimport com.google.zxing.WriterException;\nimport com.google.zxing.client.j2se.BufferedImageLuminanceSource;\nimport com.google.zxing.common.BitMatrix;\nimport com.google.zxing.common.HybridBinarizer;\nimport com.google.zxing.qrcode.QRCodeReader;\nimport com.google.zxing.qrcode.QRCodeWriter;\nimport com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;\n\n/**\n * 二维码生成和读的工具类\n */\npublic class QrCodeCreateUtil {\n\n    /**\n     * 生成包含字符串信息的二维码图片\n     *\n     * @param outputStream 文件输出流路径\n     * @param content      二维码携带信息\n     * @param qrCodeSize   二维码图片大小\n     * @param imageFormat  二维码的格式\n     * @throws WriterException\n     * @throws IOException\n     */\n    public static boolean createQrCode(OutputStream outputStream, String content, int qrCodeSize, String imageFormat) throws WriterException, IOException {\n        //设置二维码纠错级别ＭＡＰ\n        Hashtable<EncodeHintType, ErrorCorrectionLevel> hintMap = new Hashtable<EncodeHintType, ErrorCorrectionLevel>();\n        hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);  // 矫错级别\n        QRCodeWriter qrCodeWriter = new QRCodeWriter();\n        //创建比特矩阵(位矩阵)的QR码编码的字符串\n        BitMatrix byteMatrix = qrCodeWriter.encode(content, BarcodeFormat.QR_CODE, qrCodeSize, qrCodeSize, hintMap);\n        // 使BufferedImage勾画QRCode  (matrixWidth 是行二维码像素点)\n        int matrixWidth = byteMatrix.getWidth();\n        BufferedImage image = new BufferedImage(matrixWidth - 200, matrixWidth - 200, BufferedImage.TYPE_INT_RGB);\n        image.createGraphics();\n        Graphics2D graphics = (Graphics2D) image.getGraphics();\n        graphics.setColor(Color.WHITE);\n        graphics.fillRect(0, 0, matrixWidth, matrixWidth);\n        // 使用比特矩阵画并保存图像\n        graphics.setColor(Color.BLACK);\n        for (int i = 0; i < matrixWidth; i++) {\n            for (int j = 0; j < matrixWidth; j++) {\n                if (byteMatrix.get(i, j)) {\n                    graphics.fillRect(i - 100, j - 100, 1, 1);\n                }\n            }\n        }\n        return ImageIO.write(image, imageFormat, outputStream);\n    }\n\n    /**\n     * 读二维码并输出携带的信息\n     */\n    public static void readQrCode(InputStream inputStream) throws IOException {\n        //从输入流中获取字符串信息\n        BufferedImage image = ImageIO.read(inputStream);\n        //将图像转换为二进制位图源\n        LuminanceSource source = new BufferedImageLuminanceSource(image);\n        BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));\n        QRCodeReader reader = new QRCodeReader();\n        Result result = null;\n        try {\n            result = reader.decode(bitmap);\n        } catch (ReaderException e) {\n            e.printStackTrace();\n        }\n        System.out.println(result.getText());\n    }\n\n    /**\n     * 测试代码\n     *\n     * @throws WriterException\n     */\n    public static void main(String[] args) throws IOException, WriterException {\n        createQrCode(new FileOutputStream(new File(\"d:\\\\qrcode.jpg\")), \"http://dmrs.me\", 900, \"JPEG\");\n        readQrCode(new FileInputStream(new File(\"d:\\\\qrcode.jpg\")));\n    }\n\n}\n```\n\n```xml\n<dependency>\n    <groupId>com.google.zxing</groupId>\n    <artifactId>core</artifactId>\n    <version>3.0.0</version>\n</dependency>\n<dependency>\n    <groupId>com.google.zxing</groupId>\n    <artifactId>javase</artifactId>\n    <version>3.0.0</version>\n</dependency>\n```","slug":"java-generate-qr-code","published":1,"updated":"2017-12-06T16:05:57.335Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjayvjb12000y4kvnn11pbbob","content":"<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> java.awt.Color;</div><div class=\"line\"><span class=\"keyword\">import</span> java.awt.Graphics2D;</div><div class=\"line\"><span class=\"keyword\">import</span> java.awt.image.BufferedImage;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.File;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.FileInputStream;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.OutputStream;</div><div class=\"line\"><span class=\"keyword\">import</span> java.util.Hashtable;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> javax.imageio.ImageIO;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.BarcodeFormat;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.BinaryBitmap;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.EncodeHintType;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.LuminanceSource;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.ReaderException;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.Result;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.WriterException;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.client.j2se.BufferedImageLuminanceSource;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.common.BitMatrix;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.common.HybridBinarizer;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.qrcode.QRCodeReader;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.qrcode.QRCodeWriter;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * 二维码生成和读的工具类</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">QrCodeCreateUtil</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\">     * 生成包含字符串信息的二维码图片</span></div><div class=\"line\"><span class=\"comment\">     *</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> outputStream 文件输出流路径</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> content      二维码携带信息</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> qrCodeSize   二维码图片大小</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> imageFormat  二维码的格式</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> WriterException</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> IOException</span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">createQrCode</span><span class=\"params\">(OutputStream outputStream, String content, <span class=\"keyword\">int</span> qrCodeSize, String imageFormat)</span> <span class=\"keyword\">throws</span> WriterException, IOException </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//设置二维码纠错级别ＭＡＰ</span></div><div class=\"line\">        Hashtable&lt;EncodeHintType, ErrorCorrectionLevel&gt; hintMap = <span class=\"keyword\">new</span> Hashtable&lt;EncodeHintType, ErrorCorrectionLevel&gt;();</div><div class=\"line\">        hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);  <span class=\"comment\">// 矫错级别</span></div><div class=\"line\">        QRCodeWriter qrCodeWriter = <span class=\"keyword\">new</span> QRCodeWriter();</div><div class=\"line\">        <span class=\"comment\">//创建比特矩阵(位矩阵)的QR码编码的字符串</span></div><div class=\"line\">        BitMatrix byteMatrix = qrCodeWriter.encode(content, BarcodeFormat.QR_CODE, qrCodeSize, qrCodeSize, hintMap);</div><div class=\"line\">        <span class=\"comment\">// 使BufferedImage勾画QRCode  (matrixWidth 是行二维码像素点)</span></div><div class=\"line\">        <span class=\"keyword\">int</span> matrixWidth = byteMatrix.getWidth();</div><div class=\"line\">        BufferedImage image = <span class=\"keyword\">new</span> BufferedImage(matrixWidth - <span class=\"number\">200</span>, matrixWidth - <span class=\"number\">200</span>, BufferedImage.TYPE_INT_RGB);</div><div class=\"line\">        image.createGraphics();</div><div class=\"line\">        Graphics2D graphics = (Graphics2D) image.getGraphics();</div><div class=\"line\">        graphics.setColor(Color.WHITE);</div><div class=\"line\">        graphics.fillRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, matrixWidth, matrixWidth);</div><div class=\"line\">        <span class=\"comment\">// 使用比特矩阵画并保存图像</span></div><div class=\"line\">        graphics.setColor(Color.BLACK);</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; matrixWidth; i++) &#123;</div><div class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; matrixWidth; j++) &#123;</div><div class=\"line\">                <span class=\"keyword\">if</span> (byteMatrix.get(i, j)) &#123;</div><div class=\"line\">                    graphics.fillRect(i - <span class=\"number\">100</span>, j - <span class=\"number\">100</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>);</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span> ImageIO.write(image, imageFormat, outputStream);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\">     * 读二维码并输出携带的信息</span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">readQrCode</span><span class=\"params\">(InputStream inputStream)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//从输入流中获取字符串信息</span></div><div class=\"line\">        BufferedImage image = ImageIO.read(inputStream);</div><div class=\"line\">        <span class=\"comment\">//将图像转换为二进制位图源</span></div><div class=\"line\">        LuminanceSource source = <span class=\"keyword\">new</span> BufferedImageLuminanceSource(image);</div><div class=\"line\">        BinaryBitmap bitmap = <span class=\"keyword\">new</span> BinaryBitmap(<span class=\"keyword\">new</span> HybridBinarizer(source));</div><div class=\"line\">        QRCodeReader reader = <span class=\"keyword\">new</span> QRCodeReader();</div><div class=\"line\">        Result result = <span class=\"keyword\">null</span>;</div><div class=\"line\">        <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">            result = reader.decode(bitmap);</div><div class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ReaderException e) &#123;</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        &#125;</div><div class=\"line\">        System.out.println(result.getText());</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\">     * 测试代码</span></div><div class=\"line\"><span class=\"comment\">     *</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> WriterException</span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> IOException, WriterException </span>&#123;</div><div class=\"line\">        createQrCode(<span class=\"keyword\">new</span> FileOutputStream(<span class=\"keyword\">new</span> File(<span class=\"string\">\"d:\\\\qrcode.jpg\"</span>)), <span class=\"string\">\"http://dmrs.me\"</span>, <span class=\"number\">900</span>, <span class=\"string\">\"JPEG\"</span>);</div><div class=\"line\">        readQrCode(<span class=\"keyword\">new</span> FileInputStream(<span class=\"keyword\">new</span> File(<span class=\"string\">\"d:\\\\qrcode.jpg\"</span>)));</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.zxing<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.zxing<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javase<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">import</span> java.awt.Color;</div><div class=\"line\"><span class=\"keyword\">import</span> java.awt.Graphics2D;</div><div class=\"line\"><span class=\"keyword\">import</span> java.awt.image.BufferedImage;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.File;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.FileInputStream;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.FileOutputStream;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.InputStream;</div><div class=\"line\"><span class=\"keyword\">import</span> java.io.OutputStream;</div><div class=\"line\"><span class=\"keyword\">import</span> java.util.Hashtable;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> javax.imageio.ImageIO;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.BarcodeFormat;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.BinaryBitmap;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.EncodeHintType;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.LuminanceSource;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.ReaderException;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.Result;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.WriterException;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.client.j2se.BufferedImageLuminanceSource;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.common.BitMatrix;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.common.HybridBinarizer;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.qrcode.QRCodeReader;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.qrcode.QRCodeWriter;</div><div class=\"line\"><span class=\"keyword\">import</span> com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\"> * 二维码生成和读的工具类</span></div><div class=\"line\"><span class=\"comment\"> */</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">QrCodeCreateUtil</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\">     * 生成包含字符串信息的二维码图片</span></div><div class=\"line\"><span class=\"comment\">     *</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> outputStream 文件输出流路径</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> content      二维码携带信息</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> qrCodeSize   二维码图片大小</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> imageFormat  二维码的格式</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> WriterException</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> IOException</span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">createQrCode</span><span class=\"params\">(OutputStream outputStream, String content, <span class=\"keyword\">int</span> qrCodeSize, String imageFormat)</span> <span class=\"keyword\">throws</span> WriterException, IOException </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//设置二维码纠错级别ＭＡＰ</span></div><div class=\"line\">        Hashtable&lt;EncodeHintType, ErrorCorrectionLevel&gt; hintMap = <span class=\"keyword\">new</span> Hashtable&lt;EncodeHintType, ErrorCorrectionLevel&gt;();</div><div class=\"line\">        hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);  <span class=\"comment\">// 矫错级别</span></div><div class=\"line\">        QRCodeWriter qrCodeWriter = <span class=\"keyword\">new</span> QRCodeWriter();</div><div class=\"line\">        <span class=\"comment\">//创建比特矩阵(位矩阵)的QR码编码的字符串</span></div><div class=\"line\">        BitMatrix byteMatrix = qrCodeWriter.encode(content, BarcodeFormat.QR_CODE, qrCodeSize, qrCodeSize, hintMap);</div><div class=\"line\">        <span class=\"comment\">// 使BufferedImage勾画QRCode  (matrixWidth 是行二维码像素点)</span></div><div class=\"line\">        <span class=\"keyword\">int</span> matrixWidth = byteMatrix.getWidth();</div><div class=\"line\">        BufferedImage image = <span class=\"keyword\">new</span> BufferedImage(matrixWidth - <span class=\"number\">200</span>, matrixWidth - <span class=\"number\">200</span>, BufferedImage.TYPE_INT_RGB);</div><div class=\"line\">        image.createGraphics();</div><div class=\"line\">        Graphics2D graphics = (Graphics2D) image.getGraphics();</div><div class=\"line\">        graphics.setColor(Color.WHITE);</div><div class=\"line\">        graphics.fillRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, matrixWidth, matrixWidth);</div><div class=\"line\">        <span class=\"comment\">// 使用比特矩阵画并保存图像</span></div><div class=\"line\">        graphics.setColor(Color.BLACK);</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; matrixWidth; i++) &#123;</div><div class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> j = <span class=\"number\">0</span>; j &lt; matrixWidth; j++) &#123;</div><div class=\"line\">                <span class=\"keyword\">if</span> (byteMatrix.get(i, j)) &#123;</div><div class=\"line\">                    graphics.fillRect(i - <span class=\"number\">100</span>, j - <span class=\"number\">100</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>);</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span> ImageIO.write(image, imageFormat, outputStream);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\">     * 读二维码并输出携带的信息</span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">readQrCode</span><span class=\"params\">(InputStream inputStream)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//从输入流中获取字符串信息</span></div><div class=\"line\">        BufferedImage image = ImageIO.read(inputStream);</div><div class=\"line\">        <span class=\"comment\">//将图像转换为二进制位图源</span></div><div class=\"line\">        LuminanceSource source = <span class=\"keyword\">new</span> BufferedImageLuminanceSource(image);</div><div class=\"line\">        BinaryBitmap bitmap = <span class=\"keyword\">new</span> BinaryBitmap(<span class=\"keyword\">new</span> HybridBinarizer(source));</div><div class=\"line\">        QRCodeReader reader = <span class=\"keyword\">new</span> QRCodeReader();</div><div class=\"line\">        Result result = <span class=\"keyword\">null</span>;</div><div class=\"line\">        <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">            result = reader.decode(bitmap);</div><div class=\"line\">        &#125; <span class=\"keyword\">catch</span> (ReaderException e) &#123;</div><div class=\"line\">            e.printStackTrace();</div><div class=\"line\">        &#125;</div><div class=\"line\">        System.out.println(result.getText());</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\"><span class=\"comment\">     * 测试代码</span></div><div class=\"line\"><span class=\"comment\">     *</span></div><div class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> WriterException</span></div><div class=\"line\"><span class=\"comment\">     */</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> <span class=\"keyword\">throws</span> IOException, WriterException </span>&#123;</div><div class=\"line\">        createQrCode(<span class=\"keyword\">new</span> FileOutputStream(<span class=\"keyword\">new</span> File(<span class=\"string\">\"d:\\\\qrcode.jpg\"</span>)), <span class=\"string\">\"http://dmrs.me\"</span>, <span class=\"number\">900</span>, <span class=\"string\">\"JPEG\"</span>);</div><div class=\"line\">        readQrCode(<span class=\"keyword\">new</span> FileInputStream(<span class=\"keyword\">new</span> File(<span class=\"string\">\"d:\\\\qrcode.jpg\"</span>)));</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.zxing<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.google.zxing<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>javase<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div></pre></td></tr></table></figure>"},{"title":"SpringCloud-config client不能连接server","date":"2017-10-30T13:01:24.000Z","_content":"[错误详情](https://github.com/spring-cloud/spring-cloud-config/issues/830)\n\n### config client\n### java代码\n```java\nnew SpringApplicationBuilder(Application.class).properties(\"spring.cloud.config.enabled:true\").web(true).run(args);\n```\n### yml配置\n```yml\nspring:\n  application:\n    name: masque\n  cloud:\n    config:\n      uri: http://localhost:8888\n      profile: dev\n      label: final\n      enabled: true\n```\n### 依赖\n```xml\n<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-web</artifactId>\n    </dependency>\n\n    <dependency>\n        <groupId>org.springframework.cloud</groupId>\n        <artifactId>spring-cloud-starter-config</artifactId>\n    </dependency>\n\n    <dependency>\n        <groupId>org.springframework.cloud</groupId>\n        <artifactId>spring-cloud-config-server</artifactId>\n    </dependency>\n</dependencies>\n```\n### 出现的问题\n官方示例中不需要配置 `spring.cloud.config.enabled`默认是`true`现在的情况是必须配置这两个`enabled`,否则`client`不会去找`server`  项目正常启动,没有**任何异常**\n\n### 解决办法\n在对照了所有的java代码,翻阅了网上的一些博客发现,`client`多了一个依赖`spring-cloud-config-server` 去掉这个就正常了\n\n","source":"_posts/SpringCloud-config-client不能连接server.md","raw":"---\ntitle: SpringCloud-config client不能连接server\npermalink: springcloud-config-client-canot-conect-to-server\ntags:\n  - Java\n  - Spring Boot\n  - Spring Cloud\ncategories: Java相关\ndate: 2017-10-30 21:01:24\n---\n[错误详情](https://github.com/spring-cloud/spring-cloud-config/issues/830)\n\n### config client\n### java代码\n```java\nnew SpringApplicationBuilder(Application.class).properties(\"spring.cloud.config.enabled:true\").web(true).run(args);\n```\n### yml配置\n```yml\nspring:\n  application:\n    name: masque\n  cloud:\n    config:\n      uri: http://localhost:8888\n      profile: dev\n      label: final\n      enabled: true\n```\n### 依赖\n```xml\n<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-web</artifactId>\n    </dependency>\n\n    <dependency>\n        <groupId>org.springframework.cloud</groupId>\n        <artifactId>spring-cloud-starter-config</artifactId>\n    </dependency>\n\n    <dependency>\n        <groupId>org.springframework.cloud</groupId>\n        <artifactId>spring-cloud-config-server</artifactId>\n    </dependency>\n</dependencies>\n```\n### 出现的问题\n官方示例中不需要配置 `spring.cloud.config.enabled`默认是`true`现在的情况是必须配置这两个`enabled`,否则`client`不会去找`server`  项目正常启动,没有**任何异常**\n\n### 解决办法\n在对照了所有的java代码,翻阅了网上的一些博客发现,`client`多了一个依赖`spring-cloud-config-server` 去掉这个就正常了\n\n","slug":"springcloud-config-client-canot-conect-to-server","published":1,"updated":"2017-11-30T15:45:07.460Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjayvjb1400104kvnywm3xsz3","content":"<p><a href=\"https://github.com/spring-cloud/spring-cloud-config/issues/830\" target=\"_blank\" rel=\"external\">错误详情</a></p>\n<h3 id=\"config-client\"><a href=\"#config-client\" class=\"headerlink\" title=\"config client\"></a>config client</h3><h3 id=\"java代码\"><a href=\"#java代码\" class=\"headerlink\" title=\"java代码\"></a>java代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> SpringApplicationBuilder(Application.class).properties(<span class=\"string\">\"spring.cloud.config.enabled:true\"</span>).web(<span class=\"keyword\">true</span>).run(args);</div></pre></td></tr></table></figure>\n<h3 id=\"yml配置\"><a href=\"#yml配置\" class=\"headerlink\" title=\"yml配置\"></a>yml配置</h3><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">spring:</span></div><div class=\"line\"><span class=\"attr\">  application:</span></div><div class=\"line\"><span class=\"attr\">    name:</span> <span class=\"string\">masque</span></div><div class=\"line\"><span class=\"attr\">  cloud:</span></div><div class=\"line\"><span class=\"attr\">    config:</span></div><div class=\"line\"><span class=\"attr\">      uri:</span> <span class=\"attr\">http://localhost:8888</span></div><div class=\"line\"><span class=\"attr\">      profile:</span> <span class=\"string\">dev</span></div><div class=\"line\"><span class=\"attr\">      label:</span> <span class=\"string\">final</span></div><div class=\"line\"><span class=\"attr\">      enabled:</span> <span class=\"literal\">true</span></div></pre></td></tr></table></figure>\n<h3 id=\"依赖\"><a href=\"#依赖\" class=\"headerlink\" title=\"依赖\"></a>依赖</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-starter-config<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-config-server<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"出现的问题\"><a href=\"#出现的问题\" class=\"headerlink\" title=\"出现的问题\"></a>出现的问题</h3><p>官方示例中不需要配置 <code>spring.cloud.config.enabled</code>默认是<code>true</code>现在的情况是必须配置这两个<code>enabled</code>,否则<code>client</code>不会去找<code>server</code>  项目正常启动,没有<strong>任何异常</strong></p>\n<h3 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法\"></a>解决办法</h3><p>在对照了所有的java代码,翻阅了网上的一些博客发现,<code>client</code>多了一个依赖<code>spring-cloud-config-server</code> 去掉这个就正常了</p>\n","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://github.com/spring-cloud/spring-cloud-config/issues/830\" target=\"_blank\" rel=\"external\">错误详情</a></p>\n<h3 id=\"config-client\"><a href=\"#config-client\" class=\"headerlink\" title=\"config client\"></a>config client</h3><h3 id=\"java代码\"><a href=\"#java代码\" class=\"headerlink\" title=\"java代码\"></a>java代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> SpringApplicationBuilder(Application.class).properties(<span class=\"string\">\"spring.cloud.config.enabled:true\"</span>).web(<span class=\"keyword\">true</span>).run(args);</div></pre></td></tr></table></figure>\n<h3 id=\"yml配置\"><a href=\"#yml配置\" class=\"headerlink\" title=\"yml配置\"></a>yml配置</h3><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">spring:</span></div><div class=\"line\"><span class=\"attr\">  application:</span></div><div class=\"line\"><span class=\"attr\">    name:</span> <span class=\"string\">masque</span></div><div class=\"line\"><span class=\"attr\">  cloud:</span></div><div class=\"line\"><span class=\"attr\">    config:</span></div><div class=\"line\"><span class=\"attr\">      uri:</span> <span class=\"attr\">http://localhost:8888</span></div><div class=\"line\"><span class=\"attr\">      profile:</span> <span class=\"string\">dev</span></div><div class=\"line\"><span class=\"attr\">      label:</span> <span class=\"string\">final</span></div><div class=\"line\"><span class=\"attr\">      enabled:</span> <span class=\"literal\">true</span></div></pre></td></tr></table></figure>\n<h3 id=\"依赖\"><a href=\"#依赖\" class=\"headerlink\" title=\"依赖\"></a>依赖</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-starter-config<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.cloud<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-cloud-config-server<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"出现的问题\"><a href=\"#出现的问题\" class=\"headerlink\" title=\"出现的问题\"></a>出现的问题</h3><p>官方示例中不需要配置 <code>spring.cloud.config.enabled</code>默认是<code>true</code>现在的情况是必须配置这两个<code>enabled</code>,否则<code>client</code>不会去找<code>server</code>  项目正常启动,没有<strong>任何异常</strong></p>\n<h3 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法\"></a>解决办法</h3><p>在对照了所有的java代码,翻阅了网上的一些博客发现,<code>client</code>多了一个依赖<code>spring-cloud-config-server</code> 去掉这个就正常了</p>\n"},{"title":"website","date":"2017-12-06T15:45:02.000Z","_content":"\n- [python自动上色](http://paintstransfer.com/)\n- [google翻译](https://translate.google.cn/)\n- [自动部署](https://travis-ci.org/)\n- [自动部署帮助文档](https://docs.travis-ci.com/user/encryption-keys/)\n  - (http://notes.iissnan.com/2016/publishing-github-pages-with-travis-ci/)\n- [阿里图标库](http://www.iconfont.cn/)\n  - (http://588ku.com)\n  - (http://www.iconpng.com)\n- [小图标](http://fontawesome.io/3.2.1/icons/)\n- [进度条&勋章](http://shields.io/)\n- [图标生成](https://poser.pugx.org/)\n- [在线编辑](https://www.zybuluo.com/mdeditor)\n","source":"_posts/website.md","raw":"---\ntitle: website\ndate: 2017-12-06 23:45:02\npermalink: website\ncategories: 其他\ntags:\n - 其他\n---\n\n- [python自动上色](http://paintstransfer.com/)\n- [google翻译](https://translate.google.cn/)\n- [自动部署](https://travis-ci.org/)\n- [自动部署帮助文档](https://docs.travis-ci.com/user/encryption-keys/)\n  - (http://notes.iissnan.com/2016/publishing-github-pages-with-travis-ci/)\n- [阿里图标库](http://www.iconfont.cn/)\n  - (http://588ku.com)\n  - (http://www.iconpng.com)\n- [小图标](http://fontawesome.io/3.2.1/icons/)\n- [进度条&勋章](http://shields.io/)\n- [图标生成](https://poser.pugx.org/)\n- [在线编辑](https://www.zybuluo.com/mdeditor)\n","slug":"website","published":1,"updated":"2017-12-06T16:28:27.905Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjayvjb1600134kvnuvni5hmh","content":"<ul>\n<li><a href=\"http://paintstransfer.com/\" target=\"_blank\" rel=\"external\">python自动上色</a></li>\n<li><a href=\"https://translate.google.cn/\" target=\"_blank\" rel=\"external\">google翻译</a></li>\n<li><a href=\"https://travis-ci.org/\" target=\"_blank\" rel=\"external\">自动部署</a></li>\n<li><a href=\"https://docs.travis-ci.com/user/encryption-keys/\" target=\"_blank\" rel=\"external\">自动部署帮助文档</a><ul>\n<li>(<a href=\"http://notes.iissnan.com/2016/publishing-github-pages-with-travis-ci/\" target=\"_blank\" rel=\"external\">http://notes.iissnan.com/2016/publishing-github-pages-with-travis-ci/</a>)</li>\n</ul>\n</li>\n<li><a href=\"http://www.iconfont.cn/\" target=\"_blank\" rel=\"external\">阿里图标库</a><ul>\n<li>(<a href=\"http://588ku.com\" target=\"_blank\" rel=\"external\">http://588ku.com</a>)</li>\n<li>(<a href=\"http://www.iconpng.com\" target=\"_blank\" rel=\"external\">http://www.iconpng.com</a>)</li>\n</ul>\n</li>\n<li><a href=\"http://fontawesome.io/3.2.1/icons/\" target=\"_blank\" rel=\"external\">小图标</a></li>\n<li><a href=\"http://shields.io/\" target=\"_blank\" rel=\"external\">进度条&amp;勋章</a></li>\n<li><a href=\"https://poser.pugx.org/\" target=\"_blank\" rel=\"external\">图标生成</a></li>\n<li><a href=\"https://www.zybuluo.com/mdeditor\" target=\"_blank\" rel=\"external\">在线编辑</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li><a href=\"http://paintstransfer.com/\" target=\"_blank\" rel=\"external\">python自动上色</a></li>\n<li><a href=\"https://translate.google.cn/\" target=\"_blank\" rel=\"external\">google翻译</a></li>\n<li><a href=\"https://travis-ci.org/\" target=\"_blank\" rel=\"external\">自动部署</a></li>\n<li><a href=\"https://docs.travis-ci.com/user/encryption-keys/\" target=\"_blank\" rel=\"external\">自动部署帮助文档</a><ul>\n<li>(<a href=\"http://notes.iissnan.com/2016/publishing-github-pages-with-travis-ci/\" target=\"_blank\" rel=\"external\">http://notes.iissnan.com/2016/publishing-github-pages-with-travis-ci/</a>)</li>\n</ul>\n</li>\n<li><a href=\"http://www.iconfont.cn/\" target=\"_blank\" rel=\"external\">阿里图标库</a><ul>\n<li>(<a href=\"http://588ku.com\" target=\"_blank\" rel=\"external\">http://588ku.com</a>)</li>\n<li>(<a href=\"http://www.iconpng.com\" target=\"_blank\" rel=\"external\">http://www.iconpng.com</a>)</li>\n</ul>\n</li>\n<li><a href=\"http://fontawesome.io/3.2.1/icons/\" target=\"_blank\" rel=\"external\">小图标</a></li>\n<li><a href=\"http://shields.io/\" target=\"_blank\" rel=\"external\">进度条&amp;勋章</a></li>\n<li><a href=\"https://poser.pugx.org/\" target=\"_blank\" rel=\"external\">图标生成</a></li>\n<li><a href=\"https://www.zybuluo.com/mdeditor\" target=\"_blank\" rel=\"external\">在线编辑</a></li>\n</ul>\n"},{"title":"二进制位运算实例","date":"2017-10-31T15:10:42.000Z","_content":"### 二进制位运算实例\n#### 问题\n设计多选题的选项问题,一道题有多个选项ABCD,可能有更多如何设计更有效存储识别?\n#### 分析\n选项只有选与不选的区别,而且总的个数固定,而且判定2个结果是否存在(答案是否正确),二进制完全满足条件.\n#### 结果\n##### 单个选项\n```\nA：1        1\nB: 1 << 1   2\nC: 1 << 2   4\nD: 1 << 3   8\n...\n```\n##### 组合选项\n```\nAB：  1|2\nBC:   2|4\nABCD: 1|2|4|8\n```\n##### 比较答案\n正确答案 `ABC : 1|2|4 --> 7` </br>\n\n---\n\n用户选择 `AB  : 1|2 --> 3`  </br>\n运算  `3!=7 && 3|7=7`  说明部分答对 \n\n---\n\n用户选择 `BD  : 2|8 --> 10`  </br>\n运算  `10!=7 && 10|7=!7 ` 说明有错误选项\n#### 相关知识 \n[Java位运算(移位、位与、或、异或、非）](http://blog.csdn.net/xiaochunyong/article/details/7748713)","source":"_posts/二进制位运算实例.md","raw":"---\ntitle: 二进制位运算实例\npermalink: binary-bit-operation-example\ntags:\n  - 二进制\n  - Java\n  - Java基础\n  - 位运算\ncategories: Java相关\ndate: 2017-10-31 23:10:42\n---\n### 二进制位运算实例\n#### 问题\n设计多选题的选项问题,一道题有多个选项ABCD,可能有更多如何设计更有效存储识别?\n#### 分析\n选项只有选与不选的区别,而且总的个数固定,而且判定2个结果是否存在(答案是否正确),二进制完全满足条件.\n#### 结果\n##### 单个选项\n```\nA：1        1\nB: 1 << 1   2\nC: 1 << 2   4\nD: 1 << 3   8\n...\n```\n##### 组合选项\n```\nAB：  1|2\nBC:   2|4\nABCD: 1|2|4|8\n```\n##### 比较答案\n正确答案 `ABC : 1|2|4 --> 7` </br>\n\n---\n\n用户选择 `AB  : 1|2 --> 3`  </br>\n运算  `3!=7 && 3|7=7`  说明部分答对 \n\n---\n\n用户选择 `BD  : 2|8 --> 10`  </br>\n运算  `10!=7 && 10|7=!7 ` 说明有错误选项\n#### 相关知识 \n[Java位运算(移位、位与、或、异或、非）](http://blog.csdn.net/xiaochunyong/article/details/7748713)","slug":"binary-bit-operation-example","published":1,"updated":"2017-11-30T15:45:07.468Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjayvjb1800154kvnhgrag0ba","content":"<h3 id=\"二进制位运算实例\"><a href=\"#二进制位运算实例\" class=\"headerlink\" title=\"二进制位运算实例\"></a>二进制位运算实例</h3><h4 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h4><p>设计多选题的选项问题,一道题有多个选项ABCD,可能有更多如何设计更有效存储识别?</p>\n<h4 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h4><p>选项只有选与不选的区别,而且总的个数固定,而且判定2个结果是否存在(答案是否正确),二进制完全满足条件.</p>\n<h4 id=\"结果\"><a href=\"#结果\" class=\"headerlink\" title=\"结果\"></a>结果</h4><h5 id=\"单个选项\"><a href=\"#单个选项\" class=\"headerlink\" title=\"单个选项\"></a>单个选项</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">A：1        1</div><div class=\"line\">B: 1 &lt;&lt; 1   2</div><div class=\"line\">C: 1 &lt;&lt; 2   4</div><div class=\"line\">D: 1 &lt;&lt; 3   8</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<h5 id=\"组合选项\"><a href=\"#组合选项\" class=\"headerlink\" title=\"组合选项\"></a>组合选项</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">AB：  1|2</div><div class=\"line\">BC:   2|4</div><div class=\"line\">ABCD: 1|2|4|8</div></pre></td></tr></table></figure>\n<h5 id=\"比较答案\"><a href=\"#比较答案\" class=\"headerlink\" title=\"比较答案\"></a>比较答案</h5><p>正确答案 <code>ABC : 1|2|4 --&gt; 7</code> <br></p>\n<hr>\n<p>用户选择 <code>AB  : 1|2 --&gt; 3</code>  <br><br>运算  <code>3!=7 &amp;&amp; 3|7=7</code>  说明部分答对 </p>\n<hr>\n<p>用户选择 <code>BD  : 2|8 --&gt; 10</code>  <br><br>运算  <code>10!=7 &amp;&amp; 10|7=!7</code> 说明有错误选项</p>\n<h4 id=\"相关知识\"><a href=\"#相关知识\" class=\"headerlink\" title=\"相关知识\"></a>相关知识</h4><p><a href=\"http://blog.csdn.net/xiaochunyong/article/details/7748713\" target=\"_blank\" rel=\"external\">Java位运算(移位、位与、或、异或、非）</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"二进制位运算实例\"><a href=\"#二进制位运算实例\" class=\"headerlink\" title=\"二进制位运算实例\"></a>二进制位运算实例</h3><h4 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h4><p>设计多选题的选项问题,一道题有多个选项ABCD,可能有更多如何设计更有效存储识别?</p>\n<h4 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h4><p>选项只有选与不选的区别,而且总的个数固定,而且判定2个结果是否存在(答案是否正确),二进制完全满足条件.</p>\n<h4 id=\"结果\"><a href=\"#结果\" class=\"headerlink\" title=\"结果\"></a>结果</h4><h5 id=\"单个选项\"><a href=\"#单个选项\" class=\"headerlink\" title=\"单个选项\"></a>单个选项</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">A：1        1</div><div class=\"line\">B: 1 &lt;&lt; 1   2</div><div class=\"line\">C: 1 &lt;&lt; 2   4</div><div class=\"line\">D: 1 &lt;&lt; 3   8</div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<h5 id=\"组合选项\"><a href=\"#组合选项\" class=\"headerlink\" title=\"组合选项\"></a>组合选项</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">AB：  1|2</div><div class=\"line\">BC:   2|4</div><div class=\"line\">ABCD: 1|2|4|8</div></pre></td></tr></table></figure>\n<h5 id=\"比较答案\"><a href=\"#比较答案\" class=\"headerlink\" title=\"比较答案\"></a>比较答案</h5><p>正确答案 <code>ABC : 1|2|4 --&gt; 7</code> <br></p>\n<hr>\n<p>用户选择 <code>AB  : 1|2 --&gt; 3</code>  <br><br>运算  <code>3!=7 &amp;&amp; 3|7=7</code>  说明部分答对 </p>\n<hr>\n<p>用户选择 <code>BD  : 2|8 --&gt; 10</code>  <br><br>运算  <code>10!=7 &amp;&amp; 10|7=!7</code> 说明有错误选项</p>\n<h4 id=\"相关知识\"><a href=\"#相关知识\" class=\"headerlink\" title=\"相关知识\"></a>相关知识</h4><p><a href=\"http://blog.csdn.net/xiaochunyong/article/details/7748713\" target=\"_blank\" rel=\"external\">Java位运算(移位、位与、或、异或、非）</a></p>\n"},{"title":"插件或主题修改记录","date":"2017-11-06T12:57:12.000Z","_content":"- 短路径利于Seo\n>修改文章默认路径原来是`YYYY`改为`YY`文件路径`%HEXO_HOME%lib\\plugins\\filter\\post_permalink.js`,方法`postPermalinkFilter`中的`meta`的`year`属性.\n- 代码块颜色不够显眼\n>修改默认的灰色为红色,文件路径`\\themes\\next\\source\\css\\_variables\\base.styl`中前几行颜色定义`$red`变量改为`#ff2a2a`\n- 持续更新中...","source":"_posts/插件或主题修改记录.md","raw":"---\ntitle: 插件或主题修改记录\ntags:\n  - 插件\n  - 主题\n  - Hexo\ncategories: Hexo\npermalink: plug-in-or-topic-modification-records\ndate: 2017-11-06 20:57:12\n---\n- 短路径利于Seo\n>修改文章默认路径原来是`YYYY`改为`YY`文件路径`%HEXO_HOME%lib\\plugins\\filter\\post_permalink.js`,方法`postPermalinkFilter`中的`meta`的`year`属性.\n- 代码块颜色不够显眼\n>修改默认的灰色为红色,文件路径`\\themes\\next\\source\\css\\_variables\\base.styl`中前几行颜色定义`$red`变量改为`#ff2a2a`\n- 持续更新中...","slug":"plug-in-or-topic-modification-records","published":1,"updated":"2017-11-30T15:45:07.469Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjayvjb1a00194kvn003u80tk","content":"<ul>\n<li>短路径利于Seo<blockquote>\n<p>修改文章默认路径原来是<code>YYYY</code>改为<code>YY</code>文件路径<code>%HEXO_HOME%lib\\plugins\\filter\\post_permalink.js</code>,方法<code>postPermalinkFilter</code>中的<code>meta</code>的<code>year</code>属性.</p>\n</blockquote>\n</li>\n<li>代码块颜色不够显眼<blockquote>\n<p>修改默认的灰色为红色,文件路径<code>\\themes\\next\\source\\css\\_variables\\base.styl</code>中前几行颜色定义<code>$red</code>变量改为<code>#ff2a2a</code></p>\n</blockquote>\n</li>\n<li>持续更新中…</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<ul>\n<li>短路径利于Seo<blockquote>\n<p>修改文章默认路径原来是<code>YYYY</code>改为<code>YY</code>文件路径<code>%HEXO_HOME%lib\\plugins\\filter\\post_permalink.js</code>,方法<code>postPermalinkFilter</code>中的<code>meta</code>的<code>year</code>属性.</p>\n</blockquote>\n</li>\n<li>代码块颜色不够显眼<blockquote>\n<p>修改默认的灰色为红色,文件路径<code>\\themes\\next\\source\\css\\_variables\\base.styl</code>中前几行颜色定义<code>$red</code>变量改为<code>#ff2a2a</code></p>\n</blockquote>\n</li>\n<li>持续更新中…</li>\n</ul>\n"},{"title":"程序员","date":"2017-10-22T03:09:07.000Z","_content":"&ensp;&ensp;&ensp;&ensp;公司最值钱的东西是产品，如果要问比产品更有价值的是什么？我认为是实实在在做事情的程序员们。\n\n&ensp;&ensp;&ensp;&ensp;他们虽然工资不高，每天坐在位置上敲着代码，在很多人眼中被称为“屌丝”或“宅男”，但我认为恰恰就是这些人，他们才是公司最有价值的人。\n\n&ensp;&ensp;&ensp;&ensp;他们有自己的理想，希望能够通过自己的努力，从中得到那一点点所谓的成就感。\n他们需要理解产品经理真正的意图，把想法变成现实，让产品真正落地。\n他们更容易把握细节，而这些细节往往决定着产品的命运与成败。\n他们突如其来的跳槽，对我们的项目的交付有直接的影响。\n他们在一起工作的气氛，能体现技术公司的文化与底蕴。\n由此看来，对程序员的重视是相当有必要的，我们需要关心每一位程序员的职业发展，让他们在团队里能够充分地发挥出自己的能力。\n\n&ensp;&ensp;&ensp;&ensp;我们也需要对他们倍加关注，挖掘出有能力、肯吃苦、敢担当的人，给他们更多的机会，让他们成为技术领袖。\n\n&ensp;&ensp;&ensp;&ensp;互联网技术公司需要大量这样的程序员：\n\n- 他们是一群有着技术信仰的人，他们是一群热爱编程的人，他们是一群不解决问题睡不好觉的人。\n- 他们不是打杂的，不是外包，更不是工具。\n- 他们不喜欢被忽悠，不喜欢被冷落，更不喜欢被驱动。\n- 他们需要尊重，需要培养，更需要激情！\n\n转载自 [开源社区](https://www.oschina.net/) [黄勇](https://my.oschina.net/huangyong/blog/387709)的博客\n","source":"_posts/程序员.md","raw":"---\ntitle: 程序员\npermalink: programer\ntags:\n  - 程序员\n  - 转载\ncategories: 其他\ndate: 2017-10-22 11:09:07\n---\n&ensp;&ensp;&ensp;&ensp;公司最值钱的东西是产品，如果要问比产品更有价值的是什么？我认为是实实在在做事情的程序员们。\n\n&ensp;&ensp;&ensp;&ensp;他们虽然工资不高，每天坐在位置上敲着代码，在很多人眼中被称为“屌丝”或“宅男”，但我认为恰恰就是这些人，他们才是公司最有价值的人。\n\n&ensp;&ensp;&ensp;&ensp;他们有自己的理想，希望能够通过自己的努力，从中得到那一点点所谓的成就感。\n他们需要理解产品经理真正的意图，把想法变成现实，让产品真正落地。\n他们更容易把握细节，而这些细节往往决定着产品的命运与成败。\n他们突如其来的跳槽，对我们的项目的交付有直接的影响。\n他们在一起工作的气氛，能体现技术公司的文化与底蕴。\n由此看来，对程序员的重视是相当有必要的，我们需要关心每一位程序员的职业发展，让他们在团队里能够充分地发挥出自己的能力。\n\n&ensp;&ensp;&ensp;&ensp;我们也需要对他们倍加关注，挖掘出有能力、肯吃苦、敢担当的人，给他们更多的机会，让他们成为技术领袖。\n\n&ensp;&ensp;&ensp;&ensp;互联网技术公司需要大量这样的程序员：\n\n- 他们是一群有着技术信仰的人，他们是一群热爱编程的人，他们是一群不解决问题睡不好觉的人。\n- 他们不是打杂的，不是外包，更不是工具。\n- 他们不喜欢被忽悠，不喜欢被冷落，更不喜欢被驱动。\n- 他们需要尊重，需要培养，更需要激情！\n\n转载自 [开源社区](https://www.oschina.net/) [黄勇](https://my.oschina.net/huangyong/blog/387709)的博客\n","slug":"programer","published":1,"updated":"2017-11-30T15:45:07.463Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjayvjb1d001d4kvnepl3h77o","content":"<p>&ensp;&ensp;&ensp;&ensp;公司最值钱的东西是产品，如果要问比产品更有价值的是什么？我认为是实实在在做事情的程序员们。</p>\n<p>&ensp;&ensp;&ensp;&ensp;他们虽然工资不高，每天坐在位置上敲着代码，在很多人眼中被称为“屌丝”或“宅男”，但我认为恰恰就是这些人，他们才是公司最有价值的人。</p>\n<p>&ensp;&ensp;&ensp;&ensp;他们有自己的理想，希望能够通过自己的努力，从中得到那一点点所谓的成就感。<br>他们需要理解产品经理真正的意图，把想法变成现实，让产品真正落地。<br>他们更容易把握细节，而这些细节往往决定着产品的命运与成败。<br>他们突如其来的跳槽，对我们的项目的交付有直接的影响。<br>他们在一起工作的气氛，能体现技术公司的文化与底蕴。<br>由此看来，对程序员的重视是相当有必要的，我们需要关心每一位程序员的职业发展，让他们在团队里能够充分地发挥出自己的能力。</p>\n<p>&ensp;&ensp;&ensp;&ensp;我们也需要对他们倍加关注，挖掘出有能力、肯吃苦、敢担当的人，给他们更多的机会，让他们成为技术领袖。</p>\n<p>&ensp;&ensp;&ensp;&ensp;互联网技术公司需要大量这样的程序员：</p>\n<ul>\n<li>他们是一群有着技术信仰的人，他们是一群热爱编程的人，他们是一群不解决问题睡不好觉的人。</li>\n<li>他们不是打杂的，不是外包，更不是工具。</li>\n<li>他们不喜欢被忽悠，不喜欢被冷落，更不喜欢被驱动。</li>\n<li>他们需要尊重，需要培养，更需要激情！</li>\n</ul>\n<p>转载自 <a href=\"https://www.oschina.net/\" target=\"_blank\" rel=\"external\">开源社区</a> <a href=\"https://my.oschina.net/huangyong/blog/387709\" target=\"_blank\" rel=\"external\">黄勇</a>的博客</p>\n","site":{"data":{}},"excerpt":"","more":"<p>&ensp;&ensp;&ensp;&ensp;公司最值钱的东西是产品，如果要问比产品更有价值的是什么？我认为是实实在在做事情的程序员们。</p>\n<p>&ensp;&ensp;&ensp;&ensp;他们虽然工资不高，每天坐在位置上敲着代码，在很多人眼中被称为“屌丝”或“宅男”，但我认为恰恰就是这些人，他们才是公司最有价值的人。</p>\n<p>&ensp;&ensp;&ensp;&ensp;他们有自己的理想，希望能够通过自己的努力，从中得到那一点点所谓的成就感。<br>他们需要理解产品经理真正的意图，把想法变成现实，让产品真正落地。<br>他们更容易把握细节，而这些细节往往决定着产品的命运与成败。<br>他们突如其来的跳槽，对我们的项目的交付有直接的影响。<br>他们在一起工作的气氛，能体现技术公司的文化与底蕴。<br>由此看来，对程序员的重视是相当有必要的，我们需要关心每一位程序员的职业发展，让他们在团队里能够充分地发挥出自己的能力。</p>\n<p>&ensp;&ensp;&ensp;&ensp;我们也需要对他们倍加关注，挖掘出有能力、肯吃苦、敢担当的人，给他们更多的机会，让他们成为技术领袖。</p>\n<p>&ensp;&ensp;&ensp;&ensp;互联网技术公司需要大量这样的程序员：</p>\n<ul>\n<li>他们是一群有着技术信仰的人，他们是一群热爱编程的人，他们是一群不解决问题睡不好觉的人。</li>\n<li>他们不是打杂的，不是外包，更不是工具。</li>\n<li>他们不喜欢被忽悠，不喜欢被冷落，更不喜欢被驱动。</li>\n<li>他们需要尊重，需要培养，更需要激情！</li>\n</ul>\n<p>转载自 <a href=\"https://www.oschina.net/\" target=\"_blank\" rel=\"external\">开源社区</a> <a href=\"https://my.oschina.net/huangyong/blog/387709\" target=\"_blank\" rel=\"external\">黄勇</a>的博客</p>\n"},{"title":"高房价背后的真实逻辑（深度长篇分析）","date":"2017-11-05T06:21:58.000Z","_content":"![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_01.jpg)\n>这篇文章不做好和坏的价值判断，只谈现象背后的逻辑和规律。\n>我会向你表达我真实的看法，但文章的结论可能会有点残酷。\n>要不要往下读，取决于你自己。\n>但我相信，尽早看清现实，早做打算，能够帮助你在人生的关键路口做出正确的判断。\n#### 01\n马太效应（强者愈强，弱者愈弱）是世间最冰冷的规则，却又无处不在。\n2015年，公众号“城市数据团”发表了一篇爆文《逃离你终将衰落的家乡》。文章以各省人口流动的大数据（2005年-2010年）为依据，得出了一个残酷的结论：\n\n**大都市就像抽水机，不停地从落后省份抽取劳动力，或许将来的某一天，我们就会像今天的日本一样，无数村庄和城镇凋零衰败，但东京和大阪都市圈繁华依旧。**\n\n大都市将毫不留情地吸干周边地区的血液，以便自己能够生存。残酷吗？不，因为这是年轻劳动力自己用脚（投票）投出的结果。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_02.jpg)\n（图片来自“城市数据团”）\n\n而由人口迁徙引申出来的推论，则更加触目惊心：\n\n你还能在这些选择（逃离北上广还是逃回北上广）中犹豫，说明你无比幸福，因为你们的下一代和下下一代可能不会再有任何选择的机会。假如你最终选择留在了一个生活安逸风景如画的小城镇上，你也许会幸福地过完一生；但在你的子女到了你这个年纪的时候，很可能他们有且只有一个选择，那就是——逃离他们终将衰落的家乡。\n\n我曾在《社会即将分层，你将会在第几层？》一文中引用了“城市数据团”的分析结论。\n\n当时有一些人对结论持怀疑和反对态度，因为他们相信政府调控的力量。\n\n政府一边限定了特大城市的常驻人口指标，一边强调要引导中心城市人口向周边转移（如某部委印发了《全国国土规划纲要》）。\n\n控制特大城市规模，让各个区域平衡发展是政府调控的目标。\n\n那么，现实情况又是怎样？\n\n揭开答案前，先来看看日本的情况。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_03.jpg)\n日本有三个地方GDP特别高，那就是东京、名古屋和大阪，这三个地方的GDP加起来，占全日本GDP总量的80%以上，所以这三个地方又被称为日本的三大都市圈。\n\n根据日本总务省2014年公布的数据，三大都市圈人口总数高达6439.33万人，占日本全国总人口的50.93%，\n\n到了2017年，这个数据变成了6453.26万人，人口数占比达到了51.38%。\n\n也就是说，哪怕是在人口负增长的国家，人们依然在源源不断地向发达地区聚集。\n\n这就是人口的聚集效应。\n\n中国聚集效应则更加明显。\n\n今年年初，“城市数据团”发布了文章《曾经熟悉的家乡终将成为倍感孤独的地方》。文章根据2014年-2016年春运大数据，再次揭示了这个残酷的事实：\n\n**相比于2005-2010年期间的数据，最近3年全国人口流动的集聚程度仍然在进一步地提高。**\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_04.jpg)\n\n**大城市的人口抽血能力并没有减缓，反而在持续地加强。**\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_05.jpg)\n\n**更多地方的人们愿意跋涉更远的距离，承担更高的成本，以逃离他们的家乡。**\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_06.jpg)\n\n（一线城市从全国人口抽血盛况）\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_07.jpg)\n\n（准一线城市抽血地图）\n\n为什么会这样？\n\n有网友给出了这样的答案：\n\n人向大城市集中，因为大城市有更多的就业机会，有更好的发展，比如做IT的，就要往北上杭深走；但是，很少有大城市的人走向小城市去，因为小城市有的，大城市基本也有。另外，交通的发展也导致了大城市对小城市人员的吸引，在前些年高铁热的时候，基本所有的地方政府都认为高铁来了，钱就到了，但更多的是，高铁来了，人就走了。具体到我们家来说，县里只有几家大企业，能做的是制造业、商业这些，但这些需要的工人较多，走出去的大学生很少去做这个；另一方面，你在外读书期间习惯了大城市的生活，读书馆、电影院、博物馆、书店、游乐场，县里没有啊。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_08.jpg)\n\n很多人误以为政府的调控是无所不能的，他们错了。\n\n社会运行自有其内在规律。\n\n**人口迁移遵循聚集效应，社会发展遵循马太效应。**\n\n大都市拥有优质的政治资源、商业资源、教育资源、人力资源……这些优质资源吸引着无数优秀的年轻人，而优秀的年轻人将推动大都市的繁荣发展，从而让大都市获取更多的资源，于是形成了一个优势迭代的良性循环，这就是马太效应中的强者愈强。\n\n然而，大都市在攫取优秀人才的同时，也在用高额的房价和户籍制度将千千万万的普通人挤到繁华都市的边缘，将他们赶到逼仄的地下室，脏乱的出租房，直到他们梦碎的那一天，收起行囊，滚回家乡，然后他们的下一代再背起行囊，逃离家乡。\n\n这就是马太效应的另一面，弱者愈弱。\n\n这听起来非常残酷，却又无比现实。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_09.jpg)\n\n#### 02\n前几天我发起了关于房价的意见征集，有一位读者给我留言说：\n\n我们在北京的时候年收入近50万买不起房子，后果就是举家撤离，再也无法享受北京的生活便利、以及包括医疗和教育在内的各种资源。离开北京一年了，和其他地方相比，感觉北京除了房子贵，其他都是相当便宜的！现在后悔得很，买不起房直接导致我和孩子们命运轨迹的改变！所以，在北京，只要有预估能力，就应该贷款买房！\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_10.jpg)\n\n这条留言指出了房子的真正价值。\n\n**当你买房的时候，买的并不仅仅是一个遮风避雨的居住场所，还包括周边提供的医疗、教育、交通、娱乐、公用服务以及发展机遇。**\n\n比如说，北大的很多课程都是对外开放的，如果你住在北大边上，你可以免费享受中国最顶尖的教育资源。\n\n再拿学区房为例。\n\n很多人说，天价学区房是国人的焦虑感和功利性心态造就的，但他们不知道，学区房的概念其实起源于美国。\n\n吴军老师在他的专栏写过一篇文章《怎么看名校毕业生在北京买不起学区房》，里面有这样一段介绍：\n\n美国好学区的房价和差学区的房价差别比中国要厉害得多，很多时候，隔着一条街，房价可以差几倍。在硅谷中心的帕罗阿图市（Palo Alto虽然叫做城市，但它只有两万人，相当于中国的一个小镇），处于中值水平的独栋房房价在300万美元以上，而和它只隔着一条马路的东帕罗阿图中位数房价只有60-80万美元左右。\n\n这两个区的差别有多大呢？一边住着拉里·佩奇、扎克伯格，以及很多斯坦福的教授，过去乔布斯也在那里，另一边是很多中低收入的墨西哥裔居民，包括不少非法移民。\n\n在美国，没有人觉得这种划分学区的方法有什么不好，因为大家习惯了。但是久而久之，学区好的地方聚集着比较体面、富有的一些家庭，不好的学区，整个条件都比较差，这是一个事实，而且很长时间几乎没有改变过。\n\n万维钢老师在《美国教育各阶层分析》一文中也提到了类似的观点：\n\n美国是个有严重阶层区分的国家，各社区按房价自然分开，在某种意义上是事实上的种族和贫富隔离。公立中小学的经费主要由所在学区的房产税而来，这意味着两点：第一，富人区的学校更有钱，可以请更好的老师、用更好的设备、有更高的教学水平；第二，学生们其实是在跟自己同阶层的人一起上学。\n\n教育资源不是标注品，必定有高下之分，而优质的教育资源永远是稀缺的。\n\n**学区房的出现，本质上是一种教育资源的分配方案。**\n\n当你买下学区房的时候，买的是下一代接受良好教育的入场券。\n\n\n\n#### 03\n\n**“房子是用来住的，不是用来炒的。”**\n\n今年的大会，这句话非常鼓舞人心。\n\n但有太多人误解了这句话。\n\n其完全的表述是：\n\n“坚持房子是用来住的、不是用来炒的定位，加快建立多主体供给、多渠道保障、租购并举的住房制度，让全体人民住有所居。”\n\n什么叫多渠道保障？\n\n什么叫租购并举？\n\n什么叫让你住有所居？\n\n**大会只承诺了房子的居住功能，并没有承诺你可以轻易地拥有房屋的产权，更没有承诺你能拥有房子背后的隐性价值。**\n\n其实早在去年3月的时候，发改委主任就曾提出：现在我国租房比例太低，购和租要并举。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_11.jpg)\n\n政策的大方向是要推广房屋租赁，而不是让你买得起房。\n\n是政府不重视民生问题吗？\n\n并不是。\n\n先来看看国外的情况。\n\n根据欧盟统计局2014年的数据，欧盟28国的所有人口中，有近三成(29.9%)的人是租房子住的，其中德国的租房比例达到了47.5%，仅52.5%的人居住在自有住房内。\n\n也就是说，将近一半的德国人都是租房的。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_12.jpg)\n\n美国的情况也是类似。\n\n根据皮尤研究中心的一项调查显示，2006年，57%的35岁以下家庭是租房子居住的。到了2016年，这个比例已经提高到了65%\n\n把年龄放宽一点，35至44岁的美国家庭中，租房的比例依然高达41%。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_13.jpg)\n\n这还只是平均数据，如果把目光聚焦到全球范围内的一线城市，当地人拥有住房的比例更低。\n\n比如德国的首都柏林，住房拥有率只有15.6%，有将近85%的人都只能租房子住。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_14.jpg)\n\n（图片来自公众号“财经连环话”）\n\n再来看看我们的春运人口迁移图你就会明白：\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_15.jpg)\n\n中国的人口基数太大了，但大城市的土地资源是有限的。\n\n在有限的土地上，怎么可能满足所有人在大城市买房的需求？\n\n唯有加快推广租赁。\n\n从这一点来讲，租售并举的政策大方向是没错的。\n\n但连带提出的“租售同权”则纯粹是在画大饼了。\n\n\n\n#### 04\n\n今年7月，一篇名为《突发，楼市巨变！广州宣布：租售同权》的文章突然刷屏了，原因是广州出台了《关于印发广州市加快发展住房租赁市场工作方案的通知》，通知里有这么一句话：\n\n“赋予符合条件的承租人子女享有就近入学等公共服务权益，保障租购同权。”\n\n于是那篇爆文的作者这样解读道：\n\n从今天开始，中国的买房终于和教育资源脱钩了，没有房，小孩照样可以上学了。\n\n这绝对是一次历史创举，具体未来的影响可能远超我们的想象，但绝对是我们现在无法估量的。\n\n但就像我在前面说了，**学区房的本质是一种教育资源的分配方案。**\n\n在教育资源没有变多，而大城市人口还在不断聚集的情况下，“租售同权”完全是个伪概念。\n\n当适龄的报名儿童超过学校招生计划时，学校会怎么做？\n\n杭州就有关于“一表生”、“二表生”的录取规则。\n\n即学校应该根据学龄儿童户籍和家庭住宅情况，按照“住、户一致”优先原则，按下面四种先后顺序录取：\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_16.jpg)\n\n#### 05\n\n楼市有泡沫吗？\n\n有啊，但不在一线城市，而是在三四五六线城市。\n\n2016年和2017年经历了两波房价的暴涨，但这两波的性质是不同的。\n\n**2016年的那波暴涨，是因为实业资本转移到了一二线城市的楼市，推高了房价，随后炒房团涌入，再次推高房价，但钱都是流向大城市的。**\n\n但2017年这一波就不一样了。\n\n因为2016年的这波暴涨，政府开始调控了。\n\n42个大城市（截止9月23日）先后出台了限售、限购等政策，炒房团买不了房了，于是纷纷涌向了三四线城市。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_17.jpg)\n\n但是，在三四线城市：\n\n有优质的教育资源吗？\n\n有优质的医疗服务吗？\n\n有丰富的娱乐场所吗？\n\n有良好的公共服务吗？\n\n有广阔的发展机遇吗？\n\n都没有。\n\n这不过是一场击鼓传花的游戏。\n\n最后接盘的那些投机客，他们将会为自己炒高房价的行为付出代价。\n\n\n\n#### 06\n\n经济学家马光远提出过楼市的后视镜原理：\n\n从房价的基本规律看，在一个国家城市的人口净增加，一个国家的人口转折点没有到来，以及一个国家的人均GDP尚未超越中等收入水平的情况下，资产价格长期的趋势仍然是向上的，无一例外。今天看到的资产价格的高点，明天很可能只是半山腰而已。\n\n回顾过去20年中国房价，站在当时的时空下，每年都觉得房价很高，但回过头看，那些以前认为高不可攀的价格，现在看起来是不是很便宜？\n\n这就是房价的“后视镜”原理。\n\n只要中国的经济持续向前发展，大城市的房子就依然会升值。\n\n**这里的大城市，是指四个一线城市及杭州、南京、苏州等几个重点二线城市。**\n\n这些大城市的房价中，包含了教育、医疗、交通、娱乐、公共服务、发展机遇等隐性价值，正是这些隐性价值支撑着其高昂的房价。\n\n要记住一点：**优质的资源永远是稀缺的，稀缺的资源永远是昂贵的。**\n\n土地的总量是有限的，而想要定居大城市的人是源源不断的。\n\n大城市好地段的房子是有形且有限的资源，买房的本质就是占有资源。\n\n还要记住的一点是：**财富是以家庭为单位的。**\n\n我以前写过这么一段话：\n\n年轻人可以不靠父母在大城市买房吗？\n\n对于70后而言，这样的想法叫志气；对于80后而言，想要实现靠机遇；对于90后而言，如果还抱着这样的想法，只能说是学生气。\n\n如果你的家庭有足够的实力，我强烈建议你们尽早在一线城市买房。\n\n如果负担太大，也可以退而求其次，在重点二线城市买。\n\n**中国未来的房价地图也会围绕三大都市圈和个别的交通枢纽城市展开。或许短期内房价会波动，但从长期看，依然会升值。**\n\n这是我的判断，并且我对自己的判断很有信心。\n\n如果你的家庭无法支撑起你在一二线城市买房，你也可以有两种选择：\n\n在大城市租房打拼，我知道这样会很辛苦，但多少会给你带来改一点变命运的机会。\n\n回到你的家乡，那里有你童年的记忆和年迈的父母亲戚，但可能没有你孩子的未来（原因见人口的流动）。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_18.jpg)\n\n（有网友说，这就像一群没核的红细胞从肢体末端蜂拥至心脏）\n\n**这两个选择没有对错，但每种选择都有其代价，而人生，则是一个又一个选择叠加起来的总和。**\n\n十年后你所站立的地方，你下一代所站立的起点，都是你今天的选择所带来的结果。\n\n\n\nP.s\n\n关于房价，其实还有很多因素可以讲，比如土地供应、货币超发等等，但这些都不是决定性因素，而且这篇文章已经快6000字了，就不再多说了。\n\n关于中国的三大都市圈和个别的交通枢纽城市，我会另写一篇。\n\n再P.s\n\n**总有人问，为什么每次越调控房价涨得越快。\n\n其实他们是把因果关系搞反了。\n\n并不是因为调控导致房价上涨，而是房价本来就要往上涨，但政府通过各种手段（限价、限售等）强行暂停了房价的上涨。所以一旦调控放开之后，房价立即就会补涨。**\n\n对于房价的管制，北大的薛兆丰老师有一个比喻：\n\n你仅仅按住价格，并不能改变价格背后的现实。这好比你管不住温度，却非要去管温度计一样荒唐。\n\n再再P.s\n\n《魔鬼经济学》中有一句话我印象非常深刻：\n\n“如果说伦理道德代表了我们心目中理想的社会运行模式的话，那么经济学就是在向我们描述这个社会到底是如何运行的。”\n\n很多时候，我们乐于相信生活应该是什么样子的，但沉溺在自己的理想世界并不能解决任何问题，看清现实，早做打算，才是对自己的人生负责。\n\n这篇文章虽然一点也不温暖，甚至有点冷漠，但我相信看完后它会对你有所帮助。\n\n转载自 [雪球](https://xueqiu.com/) [资本x时代](https://xueqiu.com/3862764140/94861157?from=timeline&isappinstalled=0)","source":"_posts/高房价背后的真实逻辑（深度长篇分析）.md","raw":"---\ntitle: 高房价背后的真实逻辑（深度长篇分析）\npermalink: the-real-logic-behind-the-high-house-price-(a-long-analysis-of-the-depth)\ntags:\n  - 生活\n  - 房子\n  - 转载\ncategories: 其他\ndate: 2017-11-05 14:21:58\n---\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_01.jpg)\n>这篇文章不做好和坏的价值判断，只谈现象背后的逻辑和规律。\n>我会向你表达我真实的看法，但文章的结论可能会有点残酷。\n>要不要往下读，取决于你自己。\n>但我相信，尽早看清现实，早做打算，能够帮助你在人生的关键路口做出正确的判断。\n#### 01\n马太效应（强者愈强，弱者愈弱）是世间最冰冷的规则，却又无处不在。\n2015年，公众号“城市数据团”发表了一篇爆文《逃离你终将衰落的家乡》。文章以各省人口流动的大数据（2005年-2010年）为依据，得出了一个残酷的结论：\n\n**大都市就像抽水机，不停地从落后省份抽取劳动力，或许将来的某一天，我们就会像今天的日本一样，无数村庄和城镇凋零衰败，但东京和大阪都市圈繁华依旧。**\n\n大都市将毫不留情地吸干周边地区的血液，以便自己能够生存。残酷吗？不，因为这是年轻劳动力自己用脚（投票）投出的结果。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_02.jpg)\n（图片来自“城市数据团”）\n\n而由人口迁徙引申出来的推论，则更加触目惊心：\n\n你还能在这些选择（逃离北上广还是逃回北上广）中犹豫，说明你无比幸福，因为你们的下一代和下下一代可能不会再有任何选择的机会。假如你最终选择留在了一个生活安逸风景如画的小城镇上，你也许会幸福地过完一生；但在你的子女到了你这个年纪的时候，很可能他们有且只有一个选择，那就是——逃离他们终将衰落的家乡。\n\n我曾在《社会即将分层，你将会在第几层？》一文中引用了“城市数据团”的分析结论。\n\n当时有一些人对结论持怀疑和反对态度，因为他们相信政府调控的力量。\n\n政府一边限定了特大城市的常驻人口指标，一边强调要引导中心城市人口向周边转移（如某部委印发了《全国国土规划纲要》）。\n\n控制特大城市规模，让各个区域平衡发展是政府调控的目标。\n\n那么，现实情况又是怎样？\n\n揭开答案前，先来看看日本的情况。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_03.jpg)\n日本有三个地方GDP特别高，那就是东京、名古屋和大阪，这三个地方的GDP加起来，占全日本GDP总量的80%以上，所以这三个地方又被称为日本的三大都市圈。\n\n根据日本总务省2014年公布的数据，三大都市圈人口总数高达6439.33万人，占日本全国总人口的50.93%，\n\n到了2017年，这个数据变成了6453.26万人，人口数占比达到了51.38%。\n\n也就是说，哪怕是在人口负增长的国家，人们依然在源源不断地向发达地区聚集。\n\n这就是人口的聚集效应。\n\n中国聚集效应则更加明显。\n\n今年年初，“城市数据团”发布了文章《曾经熟悉的家乡终将成为倍感孤独的地方》。文章根据2014年-2016年春运大数据，再次揭示了这个残酷的事实：\n\n**相比于2005-2010年期间的数据，最近3年全国人口流动的集聚程度仍然在进一步地提高。**\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_04.jpg)\n\n**大城市的人口抽血能力并没有减缓，反而在持续地加强。**\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_05.jpg)\n\n**更多地方的人们愿意跋涉更远的距离，承担更高的成本，以逃离他们的家乡。**\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_06.jpg)\n\n（一线城市从全国人口抽血盛况）\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_07.jpg)\n\n（准一线城市抽血地图）\n\n为什么会这样？\n\n有网友给出了这样的答案：\n\n人向大城市集中，因为大城市有更多的就业机会，有更好的发展，比如做IT的，就要往北上杭深走；但是，很少有大城市的人走向小城市去，因为小城市有的，大城市基本也有。另外，交通的发展也导致了大城市对小城市人员的吸引，在前些年高铁热的时候，基本所有的地方政府都认为高铁来了，钱就到了，但更多的是，高铁来了，人就走了。具体到我们家来说，县里只有几家大企业，能做的是制造业、商业这些，但这些需要的工人较多，走出去的大学生很少去做这个；另一方面，你在外读书期间习惯了大城市的生活，读书馆、电影院、博物馆、书店、游乐场，县里没有啊。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_08.jpg)\n\n很多人误以为政府的调控是无所不能的，他们错了。\n\n社会运行自有其内在规律。\n\n**人口迁移遵循聚集效应，社会发展遵循马太效应。**\n\n大都市拥有优质的政治资源、商业资源、教育资源、人力资源……这些优质资源吸引着无数优秀的年轻人，而优秀的年轻人将推动大都市的繁荣发展，从而让大都市获取更多的资源，于是形成了一个优势迭代的良性循环，这就是马太效应中的强者愈强。\n\n然而，大都市在攫取优秀人才的同时，也在用高额的房价和户籍制度将千千万万的普通人挤到繁华都市的边缘，将他们赶到逼仄的地下室，脏乱的出租房，直到他们梦碎的那一天，收起行囊，滚回家乡，然后他们的下一代再背起行囊，逃离家乡。\n\n这就是马太效应的另一面，弱者愈弱。\n\n这听起来非常残酷，却又无比现实。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_09.jpg)\n\n#### 02\n前几天我发起了关于房价的意见征集，有一位读者给我留言说：\n\n我们在北京的时候年收入近50万买不起房子，后果就是举家撤离，再也无法享受北京的生活便利、以及包括医疗和教育在内的各种资源。离开北京一年了，和其他地方相比，感觉北京除了房子贵，其他都是相当便宜的！现在后悔得很，买不起房直接导致我和孩子们命运轨迹的改变！所以，在北京，只要有预估能力，就应该贷款买房！\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_10.jpg)\n\n这条留言指出了房子的真正价值。\n\n**当你买房的时候，买的并不仅仅是一个遮风避雨的居住场所，还包括周边提供的医疗、教育、交通、娱乐、公用服务以及发展机遇。**\n\n比如说，北大的很多课程都是对外开放的，如果你住在北大边上，你可以免费享受中国最顶尖的教育资源。\n\n再拿学区房为例。\n\n很多人说，天价学区房是国人的焦虑感和功利性心态造就的，但他们不知道，学区房的概念其实起源于美国。\n\n吴军老师在他的专栏写过一篇文章《怎么看名校毕业生在北京买不起学区房》，里面有这样一段介绍：\n\n美国好学区的房价和差学区的房价差别比中国要厉害得多，很多时候，隔着一条街，房价可以差几倍。在硅谷中心的帕罗阿图市（Palo Alto虽然叫做城市，但它只有两万人，相当于中国的一个小镇），处于中值水平的独栋房房价在300万美元以上，而和它只隔着一条马路的东帕罗阿图中位数房价只有60-80万美元左右。\n\n这两个区的差别有多大呢？一边住着拉里·佩奇、扎克伯格，以及很多斯坦福的教授，过去乔布斯也在那里，另一边是很多中低收入的墨西哥裔居民，包括不少非法移民。\n\n在美国，没有人觉得这种划分学区的方法有什么不好，因为大家习惯了。但是久而久之，学区好的地方聚集着比较体面、富有的一些家庭，不好的学区，整个条件都比较差，这是一个事实，而且很长时间几乎没有改变过。\n\n万维钢老师在《美国教育各阶层分析》一文中也提到了类似的观点：\n\n美国是个有严重阶层区分的国家，各社区按房价自然分开，在某种意义上是事实上的种族和贫富隔离。公立中小学的经费主要由所在学区的房产税而来，这意味着两点：第一，富人区的学校更有钱，可以请更好的老师、用更好的设备、有更高的教学水平；第二，学生们其实是在跟自己同阶层的人一起上学。\n\n教育资源不是标注品，必定有高下之分，而优质的教育资源永远是稀缺的。\n\n**学区房的出现，本质上是一种教育资源的分配方案。**\n\n当你买下学区房的时候，买的是下一代接受良好教育的入场券。\n\n\n\n#### 03\n\n**“房子是用来住的，不是用来炒的。”**\n\n今年的大会，这句话非常鼓舞人心。\n\n但有太多人误解了这句话。\n\n其完全的表述是：\n\n“坚持房子是用来住的、不是用来炒的定位，加快建立多主体供给、多渠道保障、租购并举的住房制度，让全体人民住有所居。”\n\n什么叫多渠道保障？\n\n什么叫租购并举？\n\n什么叫让你住有所居？\n\n**大会只承诺了房子的居住功能，并没有承诺你可以轻易地拥有房屋的产权，更没有承诺你能拥有房子背后的隐性价值。**\n\n其实早在去年3月的时候，发改委主任就曾提出：现在我国租房比例太低，购和租要并举。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_11.jpg)\n\n政策的大方向是要推广房屋租赁，而不是让你买得起房。\n\n是政府不重视民生问题吗？\n\n并不是。\n\n先来看看国外的情况。\n\n根据欧盟统计局2014年的数据，欧盟28国的所有人口中，有近三成(29.9%)的人是租房子住的，其中德国的租房比例达到了47.5%，仅52.5%的人居住在自有住房内。\n\n也就是说，将近一半的德国人都是租房的。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_12.jpg)\n\n美国的情况也是类似。\n\n根据皮尤研究中心的一项调查显示，2006年，57%的35岁以下家庭是租房子居住的。到了2016年，这个比例已经提高到了65%\n\n把年龄放宽一点，35至44岁的美国家庭中，租房的比例依然高达41%。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_13.jpg)\n\n这还只是平均数据，如果把目光聚焦到全球范围内的一线城市，当地人拥有住房的比例更低。\n\n比如德国的首都柏林，住房拥有率只有15.6%，有将近85%的人都只能租房子住。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_14.jpg)\n\n（图片来自公众号“财经连环话”）\n\n再来看看我们的春运人口迁移图你就会明白：\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_15.jpg)\n\n中国的人口基数太大了，但大城市的土地资源是有限的。\n\n在有限的土地上，怎么可能满足所有人在大城市买房的需求？\n\n唯有加快推广租赁。\n\n从这一点来讲，租售并举的政策大方向是没错的。\n\n但连带提出的“租售同权”则纯粹是在画大饼了。\n\n\n\n#### 04\n\n今年7月，一篇名为《突发，楼市巨变！广州宣布：租售同权》的文章突然刷屏了，原因是广州出台了《关于印发广州市加快发展住房租赁市场工作方案的通知》，通知里有这么一句话：\n\n“赋予符合条件的承租人子女享有就近入学等公共服务权益，保障租购同权。”\n\n于是那篇爆文的作者这样解读道：\n\n从今天开始，中国的买房终于和教育资源脱钩了，没有房，小孩照样可以上学了。\n\n这绝对是一次历史创举，具体未来的影响可能远超我们的想象，但绝对是我们现在无法估量的。\n\n但就像我在前面说了，**学区房的本质是一种教育资源的分配方案。**\n\n在教育资源没有变多，而大城市人口还在不断聚集的情况下，“租售同权”完全是个伪概念。\n\n当适龄的报名儿童超过学校招生计划时，学校会怎么做？\n\n杭州就有关于“一表生”、“二表生”的录取规则。\n\n即学校应该根据学龄儿童户籍和家庭住宅情况，按照“住、户一致”优先原则，按下面四种先后顺序录取：\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_16.jpg)\n\n#### 05\n\n楼市有泡沫吗？\n\n有啊，但不在一线城市，而是在三四五六线城市。\n\n2016年和2017年经历了两波房价的暴涨，但这两波的性质是不同的。\n\n**2016年的那波暴涨，是因为实业资本转移到了一二线城市的楼市，推高了房价，随后炒房团涌入，再次推高房价，但钱都是流向大城市的。**\n\n但2017年这一波就不一样了。\n\n因为2016年的这波暴涨，政府开始调控了。\n\n42个大城市（截止9月23日）先后出台了限售、限购等政策，炒房团买不了房了，于是纷纷涌向了三四线城市。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_17.jpg)\n\n但是，在三四线城市：\n\n有优质的教育资源吗？\n\n有优质的医疗服务吗？\n\n有丰富的娱乐场所吗？\n\n有良好的公共服务吗？\n\n有广阔的发展机遇吗？\n\n都没有。\n\n这不过是一场击鼓传花的游戏。\n\n最后接盘的那些投机客，他们将会为自己炒高房价的行为付出代价。\n\n\n\n#### 06\n\n经济学家马光远提出过楼市的后视镜原理：\n\n从房价的基本规律看，在一个国家城市的人口净增加，一个国家的人口转折点没有到来，以及一个国家的人均GDP尚未超越中等收入水平的情况下，资产价格长期的趋势仍然是向上的，无一例外。今天看到的资产价格的高点，明天很可能只是半山腰而已。\n\n回顾过去20年中国房价，站在当时的时空下，每年都觉得房价很高，但回过头看，那些以前认为高不可攀的价格，现在看起来是不是很便宜？\n\n这就是房价的“后视镜”原理。\n\n只要中国的经济持续向前发展，大城市的房子就依然会升值。\n\n**这里的大城市，是指四个一线城市及杭州、南京、苏州等几个重点二线城市。**\n\n这些大城市的房价中，包含了教育、医疗、交通、娱乐、公共服务、发展机遇等隐性价值，正是这些隐性价值支撑着其高昂的房价。\n\n要记住一点：**优质的资源永远是稀缺的，稀缺的资源永远是昂贵的。**\n\n土地的总量是有限的，而想要定居大城市的人是源源不断的。\n\n大城市好地段的房子是有形且有限的资源，买房的本质就是占有资源。\n\n还要记住的一点是：**财富是以家庭为单位的。**\n\n我以前写过这么一段话：\n\n年轻人可以不靠父母在大城市买房吗？\n\n对于70后而言，这样的想法叫志气；对于80后而言，想要实现靠机遇；对于90后而言，如果还抱着这样的想法，只能说是学生气。\n\n如果你的家庭有足够的实力，我强烈建议你们尽早在一线城市买房。\n\n如果负担太大，也可以退而求其次，在重点二线城市买。\n\n**中国未来的房价地图也会围绕三大都市圈和个别的交通枢纽城市展开。或许短期内房价会波动，但从长期看，依然会升值。**\n\n这是我的判断，并且我对自己的判断很有信心。\n\n如果你的家庭无法支撑起你在一二线城市买房，你也可以有两种选择：\n\n在大城市租房打拼，我知道这样会很辛苦，但多少会给你带来改一点变命运的机会。\n\n回到你的家乡，那里有你童年的记忆和年迈的父母亲戚，但可能没有你孩子的未来（原因见人口的流动）。\n\n![image](https://static.zuul.top/dmrs-me/20171105/2017_11_05_18.jpg)\n\n（有网友说，这就像一群没核的红细胞从肢体末端蜂拥至心脏）\n\n**这两个选择没有对错，但每种选择都有其代价，而人生，则是一个又一个选择叠加起来的总和。**\n\n十年后你所站立的地方，你下一代所站立的起点，都是你今天的选择所带来的结果。\n\n\n\nP.s\n\n关于房价，其实还有很多因素可以讲，比如土地供应、货币超发等等，但这些都不是决定性因素，而且这篇文章已经快6000字了，就不再多说了。\n\n关于中国的三大都市圈和个别的交通枢纽城市，我会另写一篇。\n\n再P.s\n\n**总有人问，为什么每次越调控房价涨得越快。\n\n其实他们是把因果关系搞反了。\n\n并不是因为调控导致房价上涨，而是房价本来就要往上涨，但政府通过各种手段（限价、限售等）强行暂停了房价的上涨。所以一旦调控放开之后，房价立即就会补涨。**\n\n对于房价的管制，北大的薛兆丰老师有一个比喻：\n\n你仅仅按住价格，并不能改变价格背后的现实。这好比你管不住温度，却非要去管温度计一样荒唐。\n\n再再P.s\n\n《魔鬼经济学》中有一句话我印象非常深刻：\n\n“如果说伦理道德代表了我们心目中理想的社会运行模式的话，那么经济学就是在向我们描述这个社会到底是如何运行的。”\n\n很多时候，我们乐于相信生活应该是什么样子的，但沉溺在自己的理想世界并不能解决任何问题，看清现实，早做打算，才是对自己的人生负责。\n\n这篇文章虽然一点也不温暖，甚至有点冷漠，但我相信看完后它会对你有所帮助。\n\n转载自 [雪球](https://xueqiu.com/) [资本x时代](https://xueqiu.com/3862764140/94861157?from=timeline&isappinstalled=0)","slug":"the-real-logic-behind-the-high-house-price-(a-long-analysis-of-the-depth)","published":1,"updated":"2017-11-30T15:45:07.465Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjayvjb1f001h4kvnb4l4v9dj","content":"<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_01.jpg\" alt=\"image\"></p>\n<blockquote>\n<p>这篇文章不做好和坏的价值判断，只谈现象背后的逻辑和规律。<br>我会向你表达我真实的看法，但文章的结论可能会有点残酷。<br>要不要往下读，取决于你自己。<br>但我相信，尽早看清现实，早做打算，能够帮助你在人生的关键路口做出正确的判断。</p>\n<h4 id=\"01\"><a href=\"#01\" class=\"headerlink\" title=\"01\"></a>01</h4><p>马太效应（强者愈强，弱者愈弱）是世间最冰冷的规则，却又无处不在。<br>2015年，公众号“城市数据团”发表了一篇爆文《逃离你终将衰落的家乡》。文章以各省人口流动的大数据（2005年-2010年）为依据，得出了一个残酷的结论：</p>\n</blockquote>\n<p><strong>大都市就像抽水机，不停地从落后省份抽取劳动力，或许将来的某一天，我们就会像今天的日本一样，无数村庄和城镇凋零衰败，但东京和大阪都市圈繁华依旧。</strong></p>\n<p>大都市将毫不留情地吸干周边地区的血液，以便自己能够生存。残酷吗？不，因为这是年轻劳动力自己用脚（投票）投出的结果。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_02.jpg\" alt=\"image\"><br>（图片来自“城市数据团”）</p>\n<p>而由人口迁徙引申出来的推论，则更加触目惊心：</p>\n<p>你还能在这些选择（逃离北上广还是逃回北上广）中犹豫，说明你无比幸福，因为你们的下一代和下下一代可能不会再有任何选择的机会。假如你最终选择留在了一个生活安逸风景如画的小城镇上，你也许会幸福地过完一生；但在你的子女到了你这个年纪的时候，很可能他们有且只有一个选择，那就是——逃离他们终将衰落的家乡。</p>\n<p>我曾在《社会即将分层，你将会在第几层？》一文中引用了“城市数据团”的分析结论。</p>\n<p>当时有一些人对结论持怀疑和反对态度，因为他们相信政府调控的力量。</p>\n<p>政府一边限定了特大城市的常驻人口指标，一边强调要引导中心城市人口向周边转移（如某部委印发了《全国国土规划纲要》）。</p>\n<p>控制特大城市规模，让各个区域平衡发展是政府调控的目标。</p>\n<p>那么，现实情况又是怎样？</p>\n<p>揭开答案前，先来看看日本的情况。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_03.jpg\" alt=\"image\"><br>日本有三个地方GDP特别高，那就是东京、名古屋和大阪，这三个地方的GDP加起来，占全日本GDP总量的80%以上，所以这三个地方又被称为日本的三大都市圈。</p>\n<p>根据日本总务省2014年公布的数据，三大都市圈人口总数高达6439.33万人，占日本全国总人口的50.93%，</p>\n<p>到了2017年，这个数据变成了6453.26万人，人口数占比达到了51.38%。</p>\n<p>也就是说，哪怕是在人口负增长的国家，人们依然在源源不断地向发达地区聚集。</p>\n<p>这就是人口的聚集效应。</p>\n<p>中国聚集效应则更加明显。</p>\n<p>今年年初，“城市数据团”发布了文章《曾经熟悉的家乡终将成为倍感孤独的地方》。文章根据2014年-2016年春运大数据，再次揭示了这个残酷的事实：</p>\n<p><strong>相比于2005-2010年期间的数据，最近3年全国人口流动的集聚程度仍然在进一步地提高。</strong></p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_04.jpg\" alt=\"image\"></p>\n<p><strong>大城市的人口抽血能力并没有减缓，反而在持续地加强。</strong></p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_05.jpg\" alt=\"image\"></p>\n<p><strong>更多地方的人们愿意跋涉更远的距离，承担更高的成本，以逃离他们的家乡。</strong></p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_06.jpg\" alt=\"image\"></p>\n<p>（一线城市从全国人口抽血盛况）</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_07.jpg\" alt=\"image\"></p>\n<p>（准一线城市抽血地图）</p>\n<p>为什么会这样？</p>\n<p>有网友给出了这样的答案：</p>\n<p>人向大城市集中，因为大城市有更多的就业机会，有更好的发展，比如做IT的，就要往北上杭深走；但是，很少有大城市的人走向小城市去，因为小城市有的，大城市基本也有。另外，交通的发展也导致了大城市对小城市人员的吸引，在前些年高铁热的时候，基本所有的地方政府都认为高铁来了，钱就到了，但更多的是，高铁来了，人就走了。具体到我们家来说，县里只有几家大企业，能做的是制造业、商业这些，但这些需要的工人较多，走出去的大学生很少去做这个；另一方面，你在外读书期间习惯了大城市的生活，读书馆、电影院、博物馆、书店、游乐场，县里没有啊。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_08.jpg\" alt=\"image\"></p>\n<p>很多人误以为政府的调控是无所不能的，他们错了。</p>\n<p>社会运行自有其内在规律。</p>\n<p><strong>人口迁移遵循聚集效应，社会发展遵循马太效应。</strong></p>\n<p>大都市拥有优质的政治资源、商业资源、教育资源、人力资源……这些优质资源吸引着无数优秀的年轻人，而优秀的年轻人将推动大都市的繁荣发展，从而让大都市获取更多的资源，于是形成了一个优势迭代的良性循环，这就是马太效应中的强者愈强。</p>\n<p>然而，大都市在攫取优秀人才的同时，也在用高额的房价和户籍制度将千千万万的普通人挤到繁华都市的边缘，将他们赶到逼仄的地下室，脏乱的出租房，直到他们梦碎的那一天，收起行囊，滚回家乡，然后他们的下一代再背起行囊，逃离家乡。</p>\n<p>这就是马太效应的另一面，弱者愈弱。</p>\n<p>这听起来非常残酷，却又无比现实。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_09.jpg\" alt=\"image\"></p>\n<h4 id=\"02\"><a href=\"#02\" class=\"headerlink\" title=\"02\"></a>02</h4><p>前几天我发起了关于房价的意见征集，有一位读者给我留言说：</p>\n<p>我们在北京的时候年收入近50万买不起房子，后果就是举家撤离，再也无法享受北京的生活便利、以及包括医疗和教育在内的各种资源。离开北京一年了，和其他地方相比，感觉北京除了房子贵，其他都是相当便宜的！现在后悔得很，买不起房直接导致我和孩子们命运轨迹的改变！所以，在北京，只要有预估能力，就应该贷款买房！</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_10.jpg\" alt=\"image\"></p>\n<p>这条留言指出了房子的真正价值。</p>\n<p><strong>当你买房的时候，买的并不仅仅是一个遮风避雨的居住场所，还包括周边提供的医疗、教育、交通、娱乐、公用服务以及发展机遇。</strong></p>\n<p>比如说，北大的很多课程都是对外开放的，如果你住在北大边上，你可以免费享受中国最顶尖的教育资源。</p>\n<p>再拿学区房为例。</p>\n<p>很多人说，天价学区房是国人的焦虑感和功利性心态造就的，但他们不知道，学区房的概念其实起源于美国。</p>\n<p>吴军老师在他的专栏写过一篇文章《怎么看名校毕业生在北京买不起学区房》，里面有这样一段介绍：</p>\n<p>美国好学区的房价和差学区的房价差别比中国要厉害得多，很多时候，隔着一条街，房价可以差几倍。在硅谷中心的帕罗阿图市（Palo Alto虽然叫做城市，但它只有两万人，相当于中国的一个小镇），处于中值水平的独栋房房价在300万美元以上，而和它只隔着一条马路的东帕罗阿图中位数房价只有60-80万美元左右。</p>\n<p>这两个区的差别有多大呢？一边住着拉里·佩奇、扎克伯格，以及很多斯坦福的教授，过去乔布斯也在那里，另一边是很多中低收入的墨西哥裔居民，包括不少非法移民。</p>\n<p>在美国，没有人觉得这种划分学区的方法有什么不好，因为大家习惯了。但是久而久之，学区好的地方聚集着比较体面、富有的一些家庭，不好的学区，整个条件都比较差，这是一个事实，而且很长时间几乎没有改变过。</p>\n<p>万维钢老师在《美国教育各阶层分析》一文中也提到了类似的观点：</p>\n<p>美国是个有严重阶层区分的国家，各社区按房价自然分开，在某种意义上是事实上的种族和贫富隔离。公立中小学的经费主要由所在学区的房产税而来，这意味着两点：第一，富人区的学校更有钱，可以请更好的老师、用更好的设备、有更高的教学水平；第二，学生们其实是在跟自己同阶层的人一起上学。</p>\n<p>教育资源不是标注品，必定有高下之分，而优质的教育资源永远是稀缺的。</p>\n<p><strong>学区房的出现，本质上是一种教育资源的分配方案。</strong></p>\n<p>当你买下学区房的时候，买的是下一代接受良好教育的入场券。</p>\n<h4 id=\"03\"><a href=\"#03\" class=\"headerlink\" title=\"03\"></a>03</h4><p><strong>“房子是用来住的，不是用来炒的。”</strong></p>\n<p>今年的大会，这句话非常鼓舞人心。</p>\n<p>但有太多人误解了这句话。</p>\n<p>其完全的表述是：</p>\n<p>“坚持房子是用来住的、不是用来炒的定位，加快建立多主体供给、多渠道保障、租购并举的住房制度，让全体人民住有所居。”</p>\n<p>什么叫多渠道保障？</p>\n<p>什么叫租购并举？</p>\n<p>什么叫让你住有所居？</p>\n<p><strong>大会只承诺了房子的居住功能，并没有承诺你可以轻易地拥有房屋的产权，更没有承诺你能拥有房子背后的隐性价值。</strong></p>\n<p>其实早在去年3月的时候，发改委主任就曾提出：现在我国租房比例太低，购和租要并举。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_11.jpg\" alt=\"image\"></p>\n<p>政策的大方向是要推广房屋租赁，而不是让你买得起房。</p>\n<p>是政府不重视民生问题吗？</p>\n<p>并不是。</p>\n<p>先来看看国外的情况。</p>\n<p>根据欧盟统计局2014年的数据，欧盟28国的所有人口中，有近三成(29.9%)的人是租房子住的，其中德国的租房比例达到了47.5%，仅52.5%的人居住在自有住房内。</p>\n<p>也就是说，将近一半的德国人都是租房的。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_12.jpg\" alt=\"image\"></p>\n<p>美国的情况也是类似。</p>\n<p>根据皮尤研究中心的一项调查显示，2006年，57%的35岁以下家庭是租房子居住的。到了2016年，这个比例已经提高到了65%</p>\n<p>把年龄放宽一点，35至44岁的美国家庭中，租房的比例依然高达41%。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_13.jpg\" alt=\"image\"></p>\n<p>这还只是平均数据，如果把目光聚焦到全球范围内的一线城市，当地人拥有住房的比例更低。</p>\n<p>比如德国的首都柏林，住房拥有率只有15.6%，有将近85%的人都只能租房子住。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_14.jpg\" alt=\"image\"></p>\n<p>（图片来自公众号“财经连环话”）</p>\n<p>再来看看我们的春运人口迁移图你就会明白：</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_15.jpg\" alt=\"image\"></p>\n<p>中国的人口基数太大了，但大城市的土地资源是有限的。</p>\n<p>在有限的土地上，怎么可能满足所有人在大城市买房的需求？</p>\n<p>唯有加快推广租赁。</p>\n<p>从这一点来讲，租售并举的政策大方向是没错的。</p>\n<p>但连带提出的“租售同权”则纯粹是在画大饼了。</p>\n<h4 id=\"04\"><a href=\"#04\" class=\"headerlink\" title=\"04\"></a>04</h4><p>今年7月，一篇名为《突发，楼市巨变！广州宣布：租售同权》的文章突然刷屏了，原因是广州出台了《关于印发广州市加快发展住房租赁市场工作方案的通知》，通知里有这么一句话：</p>\n<p>“赋予符合条件的承租人子女享有就近入学等公共服务权益，保障租购同权。”</p>\n<p>于是那篇爆文的作者这样解读道：</p>\n<p>从今天开始，中国的买房终于和教育资源脱钩了，没有房，小孩照样可以上学了。</p>\n<p>这绝对是一次历史创举，具体未来的影响可能远超我们的想象，但绝对是我们现在无法估量的。</p>\n<p>但就像我在前面说了，<strong>学区房的本质是一种教育资源的分配方案。</strong></p>\n<p>在教育资源没有变多，而大城市人口还在不断聚集的情况下，“租售同权”完全是个伪概念。</p>\n<p>当适龄的报名儿童超过学校招生计划时，学校会怎么做？</p>\n<p>杭州就有关于“一表生”、“二表生”的录取规则。</p>\n<p>即学校应该根据学龄儿童户籍和家庭住宅情况，按照“住、户一致”优先原则，按下面四种先后顺序录取：</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_16.jpg\" alt=\"image\"></p>\n<h4 id=\"05\"><a href=\"#05\" class=\"headerlink\" title=\"05\"></a>05</h4><p>楼市有泡沫吗？</p>\n<p>有啊，但不在一线城市，而是在三四五六线城市。</p>\n<p>2016年和2017年经历了两波房价的暴涨，但这两波的性质是不同的。</p>\n<p><strong>2016年的那波暴涨，是因为实业资本转移到了一二线城市的楼市，推高了房价，随后炒房团涌入，再次推高房价，但钱都是流向大城市的。</strong></p>\n<p>但2017年这一波就不一样了。</p>\n<p>因为2016年的这波暴涨，政府开始调控了。</p>\n<p>42个大城市（截止9月23日）先后出台了限售、限购等政策，炒房团买不了房了，于是纷纷涌向了三四线城市。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_17.jpg\" alt=\"image\"></p>\n<p>但是，在三四线城市：</p>\n<p>有优质的教育资源吗？</p>\n<p>有优质的医疗服务吗？</p>\n<p>有丰富的娱乐场所吗？</p>\n<p>有良好的公共服务吗？</p>\n<p>有广阔的发展机遇吗？</p>\n<p>都没有。</p>\n<p>这不过是一场击鼓传花的游戏。</p>\n<p>最后接盘的那些投机客，他们将会为自己炒高房价的行为付出代价。</p>\n<h4 id=\"06\"><a href=\"#06\" class=\"headerlink\" title=\"06\"></a>06</h4><p>经济学家马光远提出过楼市的后视镜原理：</p>\n<p>从房价的基本规律看，在一个国家城市的人口净增加，一个国家的人口转折点没有到来，以及一个国家的人均GDP尚未超越中等收入水平的情况下，资产价格长期的趋势仍然是向上的，无一例外。今天看到的资产价格的高点，明天很可能只是半山腰而已。</p>\n<p>回顾过去20年中国房价，站在当时的时空下，每年都觉得房价很高，但回过头看，那些以前认为高不可攀的价格，现在看起来是不是很便宜？</p>\n<p>这就是房价的“后视镜”原理。</p>\n<p>只要中国的经济持续向前发展，大城市的房子就依然会升值。</p>\n<p><strong>这里的大城市，是指四个一线城市及杭州、南京、苏州等几个重点二线城市。</strong></p>\n<p>这些大城市的房价中，包含了教育、医疗、交通、娱乐、公共服务、发展机遇等隐性价值，正是这些隐性价值支撑着其高昂的房价。</p>\n<p>要记住一点：<strong>优质的资源永远是稀缺的，稀缺的资源永远是昂贵的。</strong></p>\n<p>土地的总量是有限的，而想要定居大城市的人是源源不断的。</p>\n<p>大城市好地段的房子是有形且有限的资源，买房的本质就是占有资源。</p>\n<p>还要记住的一点是：<strong>财富是以家庭为单位的。</strong></p>\n<p>我以前写过这么一段话：</p>\n<p>年轻人可以不靠父母在大城市买房吗？</p>\n<p>对于70后而言，这样的想法叫志气；对于80后而言，想要实现靠机遇；对于90后而言，如果还抱着这样的想法，只能说是学生气。</p>\n<p>如果你的家庭有足够的实力，我强烈建议你们尽早在一线城市买房。</p>\n<p>如果负担太大，也可以退而求其次，在重点二线城市买。</p>\n<p><strong>中国未来的房价地图也会围绕三大都市圈和个别的交通枢纽城市展开。或许短期内房价会波动，但从长期看，依然会升值。</strong></p>\n<p>这是我的判断，并且我对自己的判断很有信心。</p>\n<p>如果你的家庭无法支撑起你在一二线城市买房，你也可以有两种选择：</p>\n<p>在大城市租房打拼，我知道这样会很辛苦，但多少会给你带来改一点变命运的机会。</p>\n<p>回到你的家乡，那里有你童年的记忆和年迈的父母亲戚，但可能没有你孩子的未来（原因见人口的流动）。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_18.jpg\" alt=\"image\"></p>\n<p>（有网友说，这就像一群没核的红细胞从肢体末端蜂拥至心脏）</p>\n<p><strong>这两个选择没有对错，但每种选择都有其代价，而人生，则是一个又一个选择叠加起来的总和。</strong></p>\n<p>十年后你所站立的地方，你下一代所站立的起点，都是你今天的选择所带来的结果。</p>\n<p>P.s</p>\n<p>关于房价，其实还有很多因素可以讲，比如土地供应、货币超发等等，但这些都不是决定性因素，而且这篇文章已经快6000字了，就不再多说了。</p>\n<p>关于中国的三大都市圈和个别的交通枢纽城市，我会另写一篇。</p>\n<p>再P.s</p>\n<p>**总有人问，为什么每次越调控房价涨得越快。</p>\n<p>其实他们是把因果关系搞反了。</p>\n<p>并不是因为调控导致房价上涨，而是房价本来就要往上涨，但政府通过各种手段（限价、限售等）强行暂停了房价的上涨。所以一旦调控放开之后，房价立即就会补涨。**</p>\n<p>对于房价的管制，北大的薛兆丰老师有一个比喻：</p>\n<p>你仅仅按住价格，并不能改变价格背后的现实。这好比你管不住温度，却非要去管温度计一样荒唐。</p>\n<p>再再P.s</p>\n<p>《魔鬼经济学》中有一句话我印象非常深刻：</p>\n<p>“如果说伦理道德代表了我们心目中理想的社会运行模式的话，那么经济学就是在向我们描述这个社会到底是如何运行的。”</p>\n<p>很多时候，我们乐于相信生活应该是什么样子的，但沉溺在自己的理想世界并不能解决任何问题，看清现实，早做打算，才是对自己的人生负责。</p>\n<p>这篇文章虽然一点也不温暖，甚至有点冷漠，但我相信看完后它会对你有所帮助。</p>\n<p>转载自 <a href=\"https://xueqiu.com/\" target=\"_blank\" rel=\"external\">雪球</a> <a href=\"https://xueqiu.com/3862764140/94861157?from=timeline&amp;isappinstalled=0\" target=\"_blank\" rel=\"external\">资本x时代</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_01.jpg\" alt=\"image\"></p>\n<blockquote>\n<p>这篇文章不做好和坏的价值判断，只谈现象背后的逻辑和规律。<br>我会向你表达我真实的看法，但文章的结论可能会有点残酷。<br>要不要往下读，取决于你自己。<br>但我相信，尽早看清现实，早做打算，能够帮助你在人生的关键路口做出正确的判断。</p>\n<h4 id=\"01\"><a href=\"#01\" class=\"headerlink\" title=\"01\"></a>01</h4><p>马太效应（强者愈强，弱者愈弱）是世间最冰冷的规则，却又无处不在。<br>2015年，公众号“城市数据团”发表了一篇爆文《逃离你终将衰落的家乡》。文章以各省人口流动的大数据（2005年-2010年）为依据，得出了一个残酷的结论：</p>\n</blockquote>\n<p><strong>大都市就像抽水机，不停地从落后省份抽取劳动力，或许将来的某一天，我们就会像今天的日本一样，无数村庄和城镇凋零衰败，但东京和大阪都市圈繁华依旧。</strong></p>\n<p>大都市将毫不留情地吸干周边地区的血液，以便自己能够生存。残酷吗？不，因为这是年轻劳动力自己用脚（投票）投出的结果。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_02.jpg\" alt=\"image\"><br>（图片来自“城市数据团”）</p>\n<p>而由人口迁徙引申出来的推论，则更加触目惊心：</p>\n<p>你还能在这些选择（逃离北上广还是逃回北上广）中犹豫，说明你无比幸福，因为你们的下一代和下下一代可能不会再有任何选择的机会。假如你最终选择留在了一个生活安逸风景如画的小城镇上，你也许会幸福地过完一生；但在你的子女到了你这个年纪的时候，很可能他们有且只有一个选择，那就是——逃离他们终将衰落的家乡。</p>\n<p>我曾在《社会即将分层，你将会在第几层？》一文中引用了“城市数据团”的分析结论。</p>\n<p>当时有一些人对结论持怀疑和反对态度，因为他们相信政府调控的力量。</p>\n<p>政府一边限定了特大城市的常驻人口指标，一边强调要引导中心城市人口向周边转移（如某部委印发了《全国国土规划纲要》）。</p>\n<p>控制特大城市规模，让各个区域平衡发展是政府调控的目标。</p>\n<p>那么，现实情况又是怎样？</p>\n<p>揭开答案前，先来看看日本的情况。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_03.jpg\" alt=\"image\"><br>日本有三个地方GDP特别高，那就是东京、名古屋和大阪，这三个地方的GDP加起来，占全日本GDP总量的80%以上，所以这三个地方又被称为日本的三大都市圈。</p>\n<p>根据日本总务省2014年公布的数据，三大都市圈人口总数高达6439.33万人，占日本全国总人口的50.93%，</p>\n<p>到了2017年，这个数据变成了6453.26万人，人口数占比达到了51.38%。</p>\n<p>也就是说，哪怕是在人口负增长的国家，人们依然在源源不断地向发达地区聚集。</p>\n<p>这就是人口的聚集效应。</p>\n<p>中国聚集效应则更加明显。</p>\n<p>今年年初，“城市数据团”发布了文章《曾经熟悉的家乡终将成为倍感孤独的地方》。文章根据2014年-2016年春运大数据，再次揭示了这个残酷的事实：</p>\n<p><strong>相比于2005-2010年期间的数据，最近3年全国人口流动的集聚程度仍然在进一步地提高。</strong></p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_04.jpg\" alt=\"image\"></p>\n<p><strong>大城市的人口抽血能力并没有减缓，反而在持续地加强。</strong></p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_05.jpg\" alt=\"image\"></p>\n<p><strong>更多地方的人们愿意跋涉更远的距离，承担更高的成本，以逃离他们的家乡。</strong></p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_06.jpg\" alt=\"image\"></p>\n<p>（一线城市从全国人口抽血盛况）</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_07.jpg\" alt=\"image\"></p>\n<p>（准一线城市抽血地图）</p>\n<p>为什么会这样？</p>\n<p>有网友给出了这样的答案：</p>\n<p>人向大城市集中，因为大城市有更多的就业机会，有更好的发展，比如做IT的，就要往北上杭深走；但是，很少有大城市的人走向小城市去，因为小城市有的，大城市基本也有。另外，交通的发展也导致了大城市对小城市人员的吸引，在前些年高铁热的时候，基本所有的地方政府都认为高铁来了，钱就到了，但更多的是，高铁来了，人就走了。具体到我们家来说，县里只有几家大企业，能做的是制造业、商业这些，但这些需要的工人较多，走出去的大学生很少去做这个；另一方面，你在外读书期间习惯了大城市的生活，读书馆、电影院、博物馆、书店、游乐场，县里没有啊。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_08.jpg\" alt=\"image\"></p>\n<p>很多人误以为政府的调控是无所不能的，他们错了。</p>\n<p>社会运行自有其内在规律。</p>\n<p><strong>人口迁移遵循聚集效应，社会发展遵循马太效应。</strong></p>\n<p>大都市拥有优质的政治资源、商业资源、教育资源、人力资源……这些优质资源吸引着无数优秀的年轻人，而优秀的年轻人将推动大都市的繁荣发展，从而让大都市获取更多的资源，于是形成了一个优势迭代的良性循环，这就是马太效应中的强者愈强。</p>\n<p>然而，大都市在攫取优秀人才的同时，也在用高额的房价和户籍制度将千千万万的普通人挤到繁华都市的边缘，将他们赶到逼仄的地下室，脏乱的出租房，直到他们梦碎的那一天，收起行囊，滚回家乡，然后他们的下一代再背起行囊，逃离家乡。</p>\n<p>这就是马太效应的另一面，弱者愈弱。</p>\n<p>这听起来非常残酷，却又无比现实。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_09.jpg\" alt=\"image\"></p>\n<h4 id=\"02\"><a href=\"#02\" class=\"headerlink\" title=\"02\"></a>02</h4><p>前几天我发起了关于房价的意见征集，有一位读者给我留言说：</p>\n<p>我们在北京的时候年收入近50万买不起房子，后果就是举家撤离，再也无法享受北京的生活便利、以及包括医疗和教育在内的各种资源。离开北京一年了，和其他地方相比，感觉北京除了房子贵，其他都是相当便宜的！现在后悔得很，买不起房直接导致我和孩子们命运轨迹的改变！所以，在北京，只要有预估能力，就应该贷款买房！</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_10.jpg\" alt=\"image\"></p>\n<p>这条留言指出了房子的真正价值。</p>\n<p><strong>当你买房的时候，买的并不仅仅是一个遮风避雨的居住场所，还包括周边提供的医疗、教育、交通、娱乐、公用服务以及发展机遇。</strong></p>\n<p>比如说，北大的很多课程都是对外开放的，如果你住在北大边上，你可以免费享受中国最顶尖的教育资源。</p>\n<p>再拿学区房为例。</p>\n<p>很多人说，天价学区房是国人的焦虑感和功利性心态造就的，但他们不知道，学区房的概念其实起源于美国。</p>\n<p>吴军老师在他的专栏写过一篇文章《怎么看名校毕业生在北京买不起学区房》，里面有这样一段介绍：</p>\n<p>美国好学区的房价和差学区的房价差别比中国要厉害得多，很多时候，隔着一条街，房价可以差几倍。在硅谷中心的帕罗阿图市（Palo Alto虽然叫做城市，但它只有两万人，相当于中国的一个小镇），处于中值水平的独栋房房价在300万美元以上，而和它只隔着一条马路的东帕罗阿图中位数房价只有60-80万美元左右。</p>\n<p>这两个区的差别有多大呢？一边住着拉里·佩奇、扎克伯格，以及很多斯坦福的教授，过去乔布斯也在那里，另一边是很多中低收入的墨西哥裔居民，包括不少非法移民。</p>\n<p>在美国，没有人觉得这种划分学区的方法有什么不好，因为大家习惯了。但是久而久之，学区好的地方聚集着比较体面、富有的一些家庭，不好的学区，整个条件都比较差，这是一个事实，而且很长时间几乎没有改变过。</p>\n<p>万维钢老师在《美国教育各阶层分析》一文中也提到了类似的观点：</p>\n<p>美国是个有严重阶层区分的国家，各社区按房价自然分开，在某种意义上是事实上的种族和贫富隔离。公立中小学的经费主要由所在学区的房产税而来，这意味着两点：第一，富人区的学校更有钱，可以请更好的老师、用更好的设备、有更高的教学水平；第二，学生们其实是在跟自己同阶层的人一起上学。</p>\n<p>教育资源不是标注品，必定有高下之分，而优质的教育资源永远是稀缺的。</p>\n<p><strong>学区房的出现，本质上是一种教育资源的分配方案。</strong></p>\n<p>当你买下学区房的时候，买的是下一代接受良好教育的入场券。</p>\n<h4 id=\"03\"><a href=\"#03\" class=\"headerlink\" title=\"03\"></a>03</h4><p><strong>“房子是用来住的，不是用来炒的。”</strong></p>\n<p>今年的大会，这句话非常鼓舞人心。</p>\n<p>但有太多人误解了这句话。</p>\n<p>其完全的表述是：</p>\n<p>“坚持房子是用来住的、不是用来炒的定位，加快建立多主体供给、多渠道保障、租购并举的住房制度，让全体人民住有所居。”</p>\n<p>什么叫多渠道保障？</p>\n<p>什么叫租购并举？</p>\n<p>什么叫让你住有所居？</p>\n<p><strong>大会只承诺了房子的居住功能，并没有承诺你可以轻易地拥有房屋的产权，更没有承诺你能拥有房子背后的隐性价值。</strong></p>\n<p>其实早在去年3月的时候，发改委主任就曾提出：现在我国租房比例太低，购和租要并举。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_11.jpg\" alt=\"image\"></p>\n<p>政策的大方向是要推广房屋租赁，而不是让你买得起房。</p>\n<p>是政府不重视民生问题吗？</p>\n<p>并不是。</p>\n<p>先来看看国外的情况。</p>\n<p>根据欧盟统计局2014年的数据，欧盟28国的所有人口中，有近三成(29.9%)的人是租房子住的，其中德国的租房比例达到了47.5%，仅52.5%的人居住在自有住房内。</p>\n<p>也就是说，将近一半的德国人都是租房的。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_12.jpg\" alt=\"image\"></p>\n<p>美国的情况也是类似。</p>\n<p>根据皮尤研究中心的一项调查显示，2006年，57%的35岁以下家庭是租房子居住的。到了2016年，这个比例已经提高到了65%</p>\n<p>把年龄放宽一点，35至44岁的美国家庭中，租房的比例依然高达41%。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_13.jpg\" alt=\"image\"></p>\n<p>这还只是平均数据，如果把目光聚焦到全球范围内的一线城市，当地人拥有住房的比例更低。</p>\n<p>比如德国的首都柏林，住房拥有率只有15.6%，有将近85%的人都只能租房子住。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_14.jpg\" alt=\"image\"></p>\n<p>（图片来自公众号“财经连环话”）</p>\n<p>再来看看我们的春运人口迁移图你就会明白：</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_15.jpg\" alt=\"image\"></p>\n<p>中国的人口基数太大了，但大城市的土地资源是有限的。</p>\n<p>在有限的土地上，怎么可能满足所有人在大城市买房的需求？</p>\n<p>唯有加快推广租赁。</p>\n<p>从这一点来讲，租售并举的政策大方向是没错的。</p>\n<p>但连带提出的“租售同权”则纯粹是在画大饼了。</p>\n<h4 id=\"04\"><a href=\"#04\" class=\"headerlink\" title=\"04\"></a>04</h4><p>今年7月，一篇名为《突发，楼市巨变！广州宣布：租售同权》的文章突然刷屏了，原因是广州出台了《关于印发广州市加快发展住房租赁市场工作方案的通知》，通知里有这么一句话：</p>\n<p>“赋予符合条件的承租人子女享有就近入学等公共服务权益，保障租购同权。”</p>\n<p>于是那篇爆文的作者这样解读道：</p>\n<p>从今天开始，中国的买房终于和教育资源脱钩了，没有房，小孩照样可以上学了。</p>\n<p>这绝对是一次历史创举，具体未来的影响可能远超我们的想象，但绝对是我们现在无法估量的。</p>\n<p>但就像我在前面说了，<strong>学区房的本质是一种教育资源的分配方案。</strong></p>\n<p>在教育资源没有变多，而大城市人口还在不断聚集的情况下，“租售同权”完全是个伪概念。</p>\n<p>当适龄的报名儿童超过学校招生计划时，学校会怎么做？</p>\n<p>杭州就有关于“一表生”、“二表生”的录取规则。</p>\n<p>即学校应该根据学龄儿童户籍和家庭住宅情况，按照“住、户一致”优先原则，按下面四种先后顺序录取：</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_16.jpg\" alt=\"image\"></p>\n<h4 id=\"05\"><a href=\"#05\" class=\"headerlink\" title=\"05\"></a>05</h4><p>楼市有泡沫吗？</p>\n<p>有啊，但不在一线城市，而是在三四五六线城市。</p>\n<p>2016年和2017年经历了两波房价的暴涨，但这两波的性质是不同的。</p>\n<p><strong>2016年的那波暴涨，是因为实业资本转移到了一二线城市的楼市，推高了房价，随后炒房团涌入，再次推高房价，但钱都是流向大城市的。</strong></p>\n<p>但2017年这一波就不一样了。</p>\n<p>因为2016年的这波暴涨，政府开始调控了。</p>\n<p>42个大城市（截止9月23日）先后出台了限售、限购等政策，炒房团买不了房了，于是纷纷涌向了三四线城市。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_17.jpg\" alt=\"image\"></p>\n<p>但是，在三四线城市：</p>\n<p>有优质的教育资源吗？</p>\n<p>有优质的医疗服务吗？</p>\n<p>有丰富的娱乐场所吗？</p>\n<p>有良好的公共服务吗？</p>\n<p>有广阔的发展机遇吗？</p>\n<p>都没有。</p>\n<p>这不过是一场击鼓传花的游戏。</p>\n<p>最后接盘的那些投机客，他们将会为自己炒高房价的行为付出代价。</p>\n<h4 id=\"06\"><a href=\"#06\" class=\"headerlink\" title=\"06\"></a>06</h4><p>经济学家马光远提出过楼市的后视镜原理：</p>\n<p>从房价的基本规律看，在一个国家城市的人口净增加，一个国家的人口转折点没有到来，以及一个国家的人均GDP尚未超越中等收入水平的情况下，资产价格长期的趋势仍然是向上的，无一例外。今天看到的资产价格的高点，明天很可能只是半山腰而已。</p>\n<p>回顾过去20年中国房价，站在当时的时空下，每年都觉得房价很高，但回过头看，那些以前认为高不可攀的价格，现在看起来是不是很便宜？</p>\n<p>这就是房价的“后视镜”原理。</p>\n<p>只要中国的经济持续向前发展，大城市的房子就依然会升值。</p>\n<p><strong>这里的大城市，是指四个一线城市及杭州、南京、苏州等几个重点二线城市。</strong></p>\n<p>这些大城市的房价中，包含了教育、医疗、交通、娱乐、公共服务、发展机遇等隐性价值，正是这些隐性价值支撑着其高昂的房价。</p>\n<p>要记住一点：<strong>优质的资源永远是稀缺的，稀缺的资源永远是昂贵的。</strong></p>\n<p>土地的总量是有限的，而想要定居大城市的人是源源不断的。</p>\n<p>大城市好地段的房子是有形且有限的资源，买房的本质就是占有资源。</p>\n<p>还要记住的一点是：<strong>财富是以家庭为单位的。</strong></p>\n<p>我以前写过这么一段话：</p>\n<p>年轻人可以不靠父母在大城市买房吗？</p>\n<p>对于70后而言，这样的想法叫志气；对于80后而言，想要实现靠机遇；对于90后而言，如果还抱着这样的想法，只能说是学生气。</p>\n<p>如果你的家庭有足够的实力，我强烈建议你们尽早在一线城市买房。</p>\n<p>如果负担太大，也可以退而求其次，在重点二线城市买。</p>\n<p><strong>中国未来的房价地图也会围绕三大都市圈和个别的交通枢纽城市展开。或许短期内房价会波动，但从长期看，依然会升值。</strong></p>\n<p>这是我的判断，并且我对自己的判断很有信心。</p>\n<p>如果你的家庭无法支撑起你在一二线城市买房，你也可以有两种选择：</p>\n<p>在大城市租房打拼，我知道这样会很辛苦，但多少会给你带来改一点变命运的机会。</p>\n<p>回到你的家乡，那里有你童年的记忆和年迈的父母亲戚，但可能没有你孩子的未来（原因见人口的流动）。</p>\n<p><img src=\"https://static.zuul.top/dmrs-me/20171105/2017_11_05_18.jpg\" alt=\"image\"></p>\n<p>（有网友说，这就像一群没核的红细胞从肢体末端蜂拥至心脏）</p>\n<p><strong>这两个选择没有对错，但每种选择都有其代价，而人生，则是一个又一个选择叠加起来的总和。</strong></p>\n<p>十年后你所站立的地方，你下一代所站立的起点，都是你今天的选择所带来的结果。</p>\n<p>P.s</p>\n<p>关于房价，其实还有很多因素可以讲，比如土地供应、货币超发等等，但这些都不是决定性因素，而且这篇文章已经快6000字了，就不再多说了。</p>\n<p>关于中国的三大都市圈和个别的交通枢纽城市，我会另写一篇。</p>\n<p>再P.s</p>\n<p>**总有人问，为什么每次越调控房价涨得越快。</p>\n<p>其实他们是把因果关系搞反了。</p>\n<p>并不是因为调控导致房价上涨，而是房价本来就要往上涨，但政府通过各种手段（限价、限售等）强行暂停了房价的上涨。所以一旦调控放开之后，房价立即就会补涨。**</p>\n<p>对于房价的管制，北大的薛兆丰老师有一个比喻：</p>\n<p>你仅仅按住价格，并不能改变价格背后的现实。这好比你管不住温度，却非要去管温度计一样荒唐。</p>\n<p>再再P.s</p>\n<p>《魔鬼经济学》中有一句话我印象非常深刻：</p>\n<p>“如果说伦理道德代表了我们心目中理想的社会运行模式的话，那么经济学就是在向我们描述这个社会到底是如何运行的。”</p>\n<p>很多时候，我们乐于相信生活应该是什么样子的，但沉溺在自己的理想世界并不能解决任何问题，看清现实，早做打算，才是对自己的人生负责。</p>\n<p>这篇文章虽然一点也不温暖，甚至有点冷漠，但我相信看完后它会对你有所帮助。</p>\n<p>转载自 <a href=\"https://xueqiu.com/\" target=\"_blank\" rel=\"external\">雪球</a> <a href=\"https://xueqiu.com/3862764140/94861157?from=timeline&amp;isappinstalled=0\" target=\"_blank\" rel=\"external\">资本x时代</a></p>\n"},{"title":"属性的处理","date":"2017-11-30T15:22:20.000Z","_content":"\n# 属性的处理(初步校对)\n---\n*Martin Fowler* (《重构：改善既有代码的设计》作者)  <P>\nfowler@acm.org\n\n---\n[<span id=\"1\">你创建的每个对象几乎都需要属性：关于对象的一些声明。一个人可能有一个身高属性，一个公司可能有一个CEO，一个航班可能有一个航班号。有很多方法来创建属性。在这篇文章中，我将探讨其中一些你经常需要用到的方法。我经常看到涉及到这个话题的图案，但他们通常只涉及一部分。在这里，我想更广泛地讨论这个问题，以便更好地讨论这些选项。</span>](#1 \"Almost every object you create needs properties: some statement about the object. A person may have a height, a company may have a CEO, a flight may have a flight number. There are a number of ways to model properties. In this article I will explore some of these ways and when you may want to use them. I’ve often seen patterns touch on  this subject, but they usually only cover part of the picture. Here I want to cover the issue  more broadly to give a better discussion of the options.\")\n\n[<span id=\"2\">最常见和最简单的情况是使用`固定属性`，即只声明类的属性。在绝大多数情况下，你只需要使用`固定属性`。在有大量固定属性或者需要频繁修改时，使用`固定属性`容易出错。这种情况下你可能会使用`动态属性`。所有的`动态属性`都有一个参数化属性的特性：你需要一个带参的方法来查询一个属性。当参数只是一个字符串,最简单的是`灵活的动态属性`。这样定义和使用属性会比较容易，但难以控制。如果你需要使用`动态属性`，在你的参数必须是一个类的实例的情况下。使用类型`动态属性`来增强对`动态属性`的控制。</span>](#2 \"The most common, and the simplest case is to use a Fixed Property , that is just declare the attribute on the class. In the vast majority of cases that is all you need to do. Fixed properties begin to fail when you have a large amount of them, or you need to change them frequently, possibly at run time. These forces lead you to the varieties of Dynamic Property . All dynamic properties have the quality of a parameterized attribute where to query a property you need to use a query method with a parameter. The simplest of these is the Flexible Dynamic Property where the parameter is just a string. This makes it easy to define and use properties, but is difficult to control. If you need that control you can use a Defined  Dynamic  Property  where  your parameters must be instances of some class. A further step of control allows you to strongly type your dynamic property with a Typed Dynamic Property .\")\n\n[<span id=\"3\">随着您的属性结构变得越来越复杂，您应该考虑将它们设置为“单独属性”，把一些属性综合起来创建一个对象。如果你需要多值属性，你可以考虑集合。在这篇文章中最复杂的例子是你想要规则来控制什么类型的对象具有什么样的属性 - 这需要一定的`动态属性`知识水平。</span>](#3 \"As your property structures get more involved, you should consider making them Separate Properties , which makes the property an object in its own right. If you need multi-valued properties you can consider a Typed Relationship . The most complex example in this theme is where you want rules to control what kinds of objects have what kinds of properties – this needs a Dynamic Property Knowledge Level .\")\n\n[<span id=\"4\">另一种属性完全是`外部属性`（Extrinsic Property），如果你想使用接口给一个对象创建一个属性，那么这就是你需要使用的一种模式。<span>](#4 \"Another variety of property entirely is the Extrinsic Property , a pattern you use if you want to give an object a property, but not alter its interface to support it.\")\n\n[<span id=\"5\">问题</span>](#5 \"Problem\")\t|[<span id=\"5\">答案</span>](#5 \"Solution\")\t|[<span id=\"5\">名称</span>](#5 \"name\")\t|[<span id=\"5\">页码</span>](#5 \"page\")\n--- | --- | --- | ---\n &nbsp;  |[<span id=\"6\">在编程语言里，当使用一个特定的属性，它需要查询或者更新。<span>](#6 \"Give it a specific attribute for that fact. This will translate to a query method and probably an update method in a programming language.\")|[`固定属性`](#固定属性 \"Fixed Property\")|4\n &nbsp;  |[<span id=\"7\">提供可参数化的属性，可以根据参数表示不同的属性</span>](#7 \"Provide a parameterizable attribute which can represent different properties depending on the parameter\")|[`动态属性`](#动态属性 \"Dynamic Property\")|4\n &nbsp;  |[<span id=\"8\">提供一个用字符串参数化的属性。声明一个属性只是使用字符串.](#8 \"Provide an attribute parameterized with a string. To declare a property just use the string.\")|[`灵活的动态属性`](#灵活的动态属性 \"Flexible Dynamic Property\")|5\n &nbsp;  |[<span id=\"9\">提供用某种类型的实例参数化的属性。要声明属性，请创建该类型的新实例</span>](#9 \"Provide an attribute parameterized with an instance of some type. To declare a property create a new instance of that type\")|[`定义动态属性`](#定义动态属性 \"Defined Dynamic Property\")|7\n &nbsp;  |[<span id=\"10\">提供使用某种类型的实例进行参数化的属性。要声明属性，请创建该类型的新实例并指定该属性的值类型.</span>](#10 \"Provide an attribute parameterized with a instance of some type. To declare a property create a new instance of the type and specify the value type of the property.\")|[`类型动态属性`](#类型动态属性 \"Typed Dynamic Property\")|9\n[<span id=\"11\">你如何表示一个对象的属性，并允许对象的属性也具有属性</span>](#11 \"How do you represent a fact about an object, and allow facts to be recorded about that fact\")|[<span id=\"11\">为每个属性创建一个单独的对象。 关于那个属性的详细可以作为这个对象的的属性.<span>](#11 \"Create a separate object for each property. Facts about that property can then be made properties of that object.\")|[`分离属性`](#分离属性 \"Separate Properties\")\t|10\n[<span id=\"12\">你如何表示两个对象之间的关系（如何表示多个值动态属性？）</span>](#12 \"How do you represent a relationship between two objects?(How do you represent multi-valued dynamic properties?)\")|[<span id=\"12\">为两个对象之间的每个链接创建一个关系对象。 给关系对象一个类型对象来表示关系的含义。 （类型对象是多值属性的名称。）<span>](#12 \"Create a relationship object for each link between the two objects. Give the relationship object a type object to indicate the meaning of the relationship. (The type object is the name of the multi-valued property.)\")|[`类型关系`](#类型关系 \"Typed Relationship\")| 14\n[<span id=\"13\">当你使用动态属性时，你如何强制某些类型的对象具有某些属性？</span>](#13 \"How do you enforce that certain kinds of objects have certain properties when you use dynamic properties?\") |[<span id=\"13\">创建知识级别以包含哪些类型的对象使用哪些类型的属性的规则](#13 \"Create a knowledge level to contain the rules of what types of objects use which types of properties\") |[`动态属性知识水平`](#动态属性知识水平 \"Dynamic Property Knowledge Level\")| 16\n[<span id=\"14\">你如何给一个对象新增一个属性而不改变它的接口？</span>](#14 \"How do you give an object a property without changing its interface?\")|[使用另一个对象负责属性](#14  \"Make another object responsible for knowing about the property\")| [`外在性质`](#外在性质 \"Extrinsic Property\")| 18\n\n\n---\n## 什么是属性\n\n\n[<span id=\"15\">这不是一个愚蠢的问题。当人们使用“属性”这个词时，他们可能有很多不同的含义。对某些属性来说，是一个类的实例变量或数据成员。对于其他人来说，它们就像`UML`图中的一个盒子一样。所以在我开始这篇文章之前，我必须定义这个词的用法。</span>](#15 \"This is not a silly question. When people bandy around the term ‘property’ they can mean many different things. To some a property is an instance variable or data member of a class. To others they are kind of thing that goes in a box in a UML diagram. So before I start this article I have to define my usage of the word.\")\n\n\n[<span id=\"16\">为了我的目的，一个属性是关于一个可以通过查询方法获得的对象的一些信息。它可能是一个值类型（如`Java`中的`int`）或一个类的实例。您可能能够修改该属性，但不一定。您可以在创建对象时设置属性，但不一定。该属性可以作为实例变量或数据成员存储，但不一定是。班级可能会从另一个班级获得值，或者经过一些进一步的计算。因此，我采用属性的接口视图而不是实现视图。这是我在设计中经常使用的习惯：对于我来说，面向对象的本质是将接口与实现分开，并使接口更加重要。</span>](#16 \"For my purposes a property is some information about an object that you can obtain by a query method. It may be a value type (such as int in Java) or an instance of a class. You may be able to update the property, but not necessarily. You may set the property when you create the object, but again not necessarily. The property may be stored as an instance variable or data member, but it does not have to be. The class may get the value from another class, or go through some further calculation. I am, therefore, taking an interface view of properties rather than an implementation view. This is a regular habit of mine in design: for me the essence of object-orientation is that you separate interface from implementation, and make interface more important.\")\n\n---\n\n## <span id = \"固定属性\">固定属性</span>\n[<span id=\"17\">`固定属性`是我们使用的最常见的属性。 固定属性在类型的接口中声明。 它给出了属性的名称和返回类型。 图1显示了使用`UML`建模的属性，示例1显示了这些属性的查询方法如何在`Java`中使用。 我已经选择了这个例子来说明这个讨论同样适用于`UML`属性和`UML`关联。 它也适用于计算值（年龄）以及那些合理存储的数据（出生日期）。](#17 \"Fixed properties are by far the most common kind of properties that we use. A Fixed Property is declared in the interface of the type. It gives the name and the return type for the property. Figure 1 shows properties modeled in UML, Listing 1 shows how the query methods for these properties would show up in Java. I’ve picked the example to show that this discussion applies equally well to UML attributes as well as UML associations. It also applies to calculated values (age) as well as those that are reasonably stored data (date of birth).\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/3_1.png)\n> 图1.使用`固定属性`建模的人员\n```java\nclass Person {\n    public Date getDateOfBirth();\n    public int getAge();\n    public Quantity getHeight();\n    public Company getEmployer();\n    public void setDateOfBirth (Date newDateOfBirth);\n    public void setEmployer (Company newEmployer);\n```\n> 列举,图1的`java`操作\n\n[<span id=\"18\">查询操作通常遵循一些命名约定。在`程序语言`中，您总是在属性名称（`dateOfBirth`）之后命名查询。 `C++`从来没有一个固定的约定，有些人只是在属性后面命名，而另一些人则使用`get`约定（`getDateOfBirth`）。 `Java`从没有特别的约定开始，但现在大多数人都采用`get`约定。就我个人而言，当您阅读代码时，我发现`get`令人恼火，所以我宁愿忽略它，但`Java`风格是使用`get`，所以现在就使用它。无论您使用的是存储值还是派生值，都应确保遵循相同的约定。使用`Person`的客户端不应该知道或关心年龄是否存储或派生。](#18 \"Query operations usually follow some naming convention. In smalltalk you always name the query after the name of the property (dateOfBirth). C++ never had a fixed convention, some people just named it after the property, others used the 'get' convention (getDateOfBirth). Java started with no particular convention but now most people adopt the get convention. Personally I find the ‘get’ irritating when you read code so I would prefer to leave it out, but the Java style is to use the get, so I use it now. You should ensure that you follow the same convention whether you are using stored or derived values. Clients of the person class should not know or care whether age is stored or derived.\")\n\n[<span id=\"19\">`修饰符`操作的存在取决于您是否希望直接修改值。如果你这样做，那么你会根据一些命名方案，例如`setDateOfBirth`（`Date`）提供一个修饰符操作。对于`返回值`存在不同的约定。你可以返回属性的新值（`Date`），被修改的对象（`Person`），或者什么都没有（`void`）。我更愿意在修饰符上返回`void`，以帮助明确修饰符和查询之间的区别。](#19 \"The presence of modifier operations depends on whether you want the values to be directly modified. If you do then you will provide a modifier operation according to some naming scheme, eg setDateOfBirth(Date). Different conventions exist as to the return value. You can return the new value of the property (Date), the object being modified (Person), or nothing (void). I prefer to return void on modifiers, to help make clear the difference between a modifier and a query.\")\n\n---\n### 固定属性\n  [<span id=\"20\">你如何代表一个对象的事实？</span>](#20 \"How do you represent a fact about an object?\")\n  -  [<span id=\"20\">给它一个这个事实的特定属性。这将转化为查询方法，并可能是一种编程语言的更新方法。</span>](#20 \"Give it a specific attribute for that fact. This will translate to a query method and probably an update method in a programming language.\")</br>\n    [<span id=\"20\">接口很清晰明确</span>](#20 \"Clear and explicit interface\")</br>\n    [<span id=\"20\"><font color=\"red\">只能在设计时添加属性</font></span>](#20 \"Can only add properties at design time\")</br>\n---\n  \n[<span id=\"21\">您可能希望为属性的`构造函数`提供参数。通常，您要在`构造函数`中设置足够的属性，以便构建格式良好的类。</span>](#21 \"You may wish to provide arguments to the constructor for properties. Typically you want to set enough properties in the constructor so that you construct a well-formed class.\")\n\n[<span id=\"22\">不想直接修改的属性不应该有`修饰符`操作。如果您只希望从出生之日起计算，那么年龄属性可能就是这种情况。对于一个不可改变的`属性`也是如此：一个在类的生命周期中不会改变的`属性`。当你想使`属性`不可改变时，请记住考虑到人为错误。虽然出生日期对于现实世界中的人类来说是不可改变的`属性`，但是您可能会在输入到计算机系统时出现错误，从而使其变得可变。软件常常模拟我们所知道的世界，而不是世界本身。</span>](#22 \"Properties that you don’t want to be modified directly should not have a modifier operation.This might be the case for the age property, if you only want that determined by calculation from the date of birth. It also would be the case for an immutable property: one that does not change for the lifetime of the class. When you think of making a property immutable, remember to take human error into account. While the date of birth is an immutable property for humans in the real world, you might make a mistake typing into a computer system, and thus make it mutable. Software often models what we know of the world, rather than the world itself.\")\n\n[<span id=\"23\">`固定属性`是迄今为止您将遇到的最常见的`属性`形式。他们这样做是有原因的：他们使用简单方便。您应该使用固定属性作为表示属性的第一个也是最常见的选择。在本文中，我将给出许多固定属性的替代方案。在某些情况下，这些替代品更好，但大多数情况下不是。请记住，当我们经历的选择。我99％的时间使用固定的属性。其他品种更为复杂，这就是为什么我把这篇论文的大部分花费在他们身上 - 也是为什么我不愿意使用它们！</span>](#23 \"Fixed properties are by far the most common form of properties that you will come across.They are that way for good reasons: they are simple and convenient to use. You should use fixed properties as your first and most common choice for representing properties. In this paper I am going to give a lot of alternatives to fixed properties. For certain situations these alternatives are better, but most of the time they are not. Remember that as we go through the alternatives. I use fixed properties 99% of the time. Other varieties are more complex, which is why I'm spending most of this paper on them — and also why I prefer not to use them!\")\n\n## <span id = \"动态属性\">动态属性</span>\n[<span id=\"24\">`固定属性`的关键在于您在设计时修复了这些属性，并且所有实例在运行时都必须遵循该决定。 对于一些问题，这是一个尴尬的限制。 想象一下，我们正在建立一个复杂的联络系统。 有一些东西是固定的：家庭住址，家庭和工作电话，电子邮件。 但他们是各种各样的小变化。 对于需要记录父母地址的人，另一个人有白天工作和晚上工作号码。 事先很难预测所有这些事情，每次更改系统时都必须经过编译，测试和分发。 要处理这个问题，你需要使用动态属性。</span>](#24 \"The key thing about fixed properties is that you fix them at design time, and all instances at run time must follow that decision. For some problems this is an awkward restriction. Imagine we are building a sophisticated contact system. There are some things that are fixed: home address, home and work phone, email. But they’re all sorts of little variations. For someone you need to record their parent’s address, another has a day work and evening work numbers.It’s hard to predict all these things in advance, and each time you change the system you have to go through compiling, testing, and distribution. To deal with this you need to use dynamic properties.\")\n\n---\n### 动态属性\n  [<span id=\"25\">你如何代表一个对象的事实？</span>](#25 \"How do you represent a fact about an object?\")</br>\n  [<span id=\"25\">提供可参数化的属性，可以根据参数表示不同的属性</span>](#25 \"Provide a parameterizable attribute which can represent different properties depending on the parameter\") </br>\n   - [<span id=\"25\"> 可以在运行时添加属性</span>](#25 \"Can add properties at run time\")\n   - [<span id=\"25\"><font color=\"red\">接口不清晰</font></span>](#25 \"Unclear interface\")\n---\n  \n[<span id=\"26\">`动态属性`有多种变化，每种变化都会在`灵活性`和`安全性`之间做出不同的选择。 最简单的方法是`灵活动态属性`。 这种模式的本质是为键值为简单值的人（通常是字符串）添加一个合格的关联（参见图2和示例2）。 如果您想为某人Kent添加休假地址，则只需使用清单3中的代码即可。您不需要重新编译人员类。 你甚至可以建立一个图形用户界面（`GUI`）或者文件读取器来添加属性，而不用重新编译客户端。</span>](#26 \"There are several variations on dynamic properties, each of which make different trade-offs between flexibility and safety. The simplest approach is Flexible Dynamic Properties. The essence of this pattern is that you add a qualified association to the person whose key is a simple value, usually a string (see Figure 2 and Listing 2). If you want to add a vacation address to a person Kent, you just use the code in Listing 3. You don’t need to recompile the person class. You could even build a GUI or a file reader that would add properties without recompiling the client either.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/5_1.png)\n> 图2.使用动态属性建模的人员\n```java\nclass Person {\n    public Object getValueOf(String key);\n    public void setValueOf(String key, Object value);\n```\n> 列举2,图2的`java`方法\n```java\nkent.setValueOf(“VacationAddress”, anAddress);\nAddress kentVactation = (Address) kent.getValueOf(“VacationAddress”)\n```\n> 列举3,使用动态属性\n[<span id=\"27\">这样说，你可能想知道为什么有人会使用固定的属性，因为动态的像这样的属性给了你更多的灵活性。当然有一个成本，它在于软件各部分之间依赖关系的清晰度降低。这一切都非常好给一个人增加一个度假地址属性，但是你怎么知道把它重新取回呢？有了固定的属性，你可以看看人的界面，看看属性。该编译器可以检查不要求对象做不理解的事情。 用一个动态属性，你不能做任何设计时检查。此外的界面人很难看。不只是你看`Person`的声明接口 -你也必须找到不会出现在类接口中的动态属性。你必须找到那些设置属性的代码部分（通常不会在`Person`类中）提现出来。</span>](# \"Said like that, you might wonder why anyone would ever use fixed properties, since dynamic properties such as this give you so much more flexibility. Of course there is a cost, and it lies in the reduction of the clarity of the dependencies between parts of the software. It is all very well adding a vacation address property to a person, but how do you know to get it back again? With fixed properties you can just look at the interface of person and see the properties. The compiler can check that don’t ask an object to do something it doesn’t understand. With a dynamic property you cannot do any design-time checking. Furthermore the interface of person is harder to see. Not just do you look at Person’s declared interface – you also have to find the dynamic properties, which will not be present in the class interface. You have to find that part of the code that sets the property (which usually will not be in the Person class at all) and dig it out.\")\n\n---\n### 灵活动态属性\n  - [<span id=\"28\">你如何代表一个对象的事实？</span>](#28 \"How do you represent a fact about an object?\")</br>\n  - [<span id=\"28\">提供一个用字符串参数化的属性。只声明一个属性使用字符串。</span>](#28 \"Provide an attribute parameterized with a string. To declare a property just use the string.\") </br> \n---\n\n[<span id=\"30\">不仅是属性很难找到，它的依赖也是一个噩梦。随着固定属性的客户端代码有一个依赖于人类 - 一个依赖是难以跟踪。如果你改变属性的名字，编译器会让你知道，并告诉你需要改变什么代码才能解决问题。但灵活的动态属性创建一个依赖于任意一段代码。它可能是属于一个类的代码甚至不能被客户端看到。如果有人更改密钥字符串会发生什么？如果有人改变他们把键入字符串的对象的类型会发生？不仅仅是编译器没法帮助你，你甚至不知道从哪里开始查找变化。</span>](#30 \"Not just is the property hard to find, it also creates a nightmare dependency. With fixed properties the client code has a dependency to the person class – a dependency that is easy to keep track of. If you change the name of the property the compiler will let you know, and tell you what code you need to change to fix things. But the Flexible Dynamic Property creates a dependency into some arbitrary piece of code. It could be code that belongs to a class that is not even visible to the client. What happens if someone changes the key string? What happens if someone changes the type of object they put into the key string? Not just can the compiler do nothing to help you, you don’t even know where to start looking for potential changes.\")\n\n[<span id=\"31\">`灵活的动态属性`在最极端的情况下显示了这个问题。 该属性可能是`Person`的任何客户端在设计时创建。 如果另一个人的客户端使用同一个属性，那么你就很难找到两个类之间的依赖关系。 此外属性可以在运行时通过读取文件或通过`GUI`添加。 即使在运行时，不可能发现一个人的哪些动态属性是合法的。 当然，你可以问一个人，如果它有一个度假地址的属性 - 但如果没有一个这是否意味着这一点人没有假期地址，或者是否意味着没有这样的度假地址属性？ 而如果现在没有这样的属性，那并不意味着它几秒钟后不会有。</span>](#31 \"Flexible Dynamic Properties show this problem at it’s most extreme. The property could be created at design time by any client of Person. If another client of person uses that same property you have a dependency between two classes that is very hard to find. Furthermore properties can be added at run time by reading a file or by a GUI. It is impossible to find out, even at run time, what are the legal dynamic properties for a person. True you can ask a person if it has a property for vacation address – but if there isn’t one does that mean that that person does not have a vacation address, or does it mean that there is no such property as vacation address? And if it has no such property now, that doesn’t mean it won’t have one a few seconds later.\")\n\n[<span id=\"32\">灵活动态特性的另一个关键缺点是很难替代它们进行操作。封装的一个关键优势是使用属性的客户端无法分辨它是作为对象数据的一部分存储的，还是通过方法来计算的。这是一个对象方法非常重要的一部分。它可以让你不只是一个普通的接口实现，而且在客户端不知情的情况下改变你期望的值。当存在子类型，你甚至可以有一个超类型存储属性和子类计算，反之亦然。但是，如果要使用动态属性，则只能更改存储的数据一个计算就是在通用访问器中为`动态属性`设置一个特定的数值,清单4中的代码。这个代码可能很脆弱，难以维护。</span>](#32 \"Another key disadvantage of flexible dynamic properties is that it is difficult to substitute them for operations. One of the key advantages of encapsulation is that a client that uses a property cannot tell whether it is stored as part of an object’s data, or computed by a method. This is a very important part of the object approach. It allows you not just a regular interface for both purposes, but also to change your mind without the client knowing. In the presence of subtyping you can even have a supertype store the property and subclasses compute or vice versa. However if you want to use dynamic properties the only way you can change stored data to a calculation is to put a specific trap in the general accessor for the dynamic property along the lines of Listing 4. This code is likely to be brittle and awkward to maintain.\")\n\n```java\nclass Person {\n    public Object getValueOf (String key) {\n        if (key = “vacationAddress”) \n            return calculatedVacationAddress();\n        if (key = “vacationPhone”) \n            return getVacationPhone();\n        // else return stored value…\n```\n> 列举4,用操作替换`动态属性`\n\n[<span id=\"33\">其他形式的动态属性可以帮助您解决其中一些问题，但不是全部。该`动态属性`的最大的缺点是：你失去了清晰的接口和所有的设计时间检查。`动态属性`的不同方法会让你额外写不同的检查方法。如果你需要`动态属性`，并且当然有确定的情况你这样做，那么你只需要放弃设计时间检查和明确的设计时间接口。唯一的问题是如何明确接口和有多少运行时检查。使用灵活的动态属性也会有同样的问题。</span>](#33 \"Other forms of dynamic property help you solve some of these problems but not all. The essential disadvantage of a dynamic property is that you lose the clear interface and all designtime checking. Different approaches to dynamic properties give you different abilities to do run-time checking. If you need dynamic properties, and there are certainly situations when you do, then you just have to give up design time checking and a explicit design time interface. The only question is how explicit an interface and how much checking you can do at run time. With Flexible Dynamic Properties you don’t get any of either.\")\n\n[<span id=\"34\">你经常在数据库中发现动态属性，因为改变它通常是一个痛苦数据库模式，特别是如果有大量的数据迁移。分布式的接口例如在`CORBA`中的组件也经常因为相似的原因而使用动态属性。那里是很多使用界面的远程客户，所以你不愿意改变它。在这两种情况下，编译时和运行时间之间的区别并不是设计时和生产之间的区别。</span>](#34 \"You find dynamic properties often in databases because it is often a pain to change the database schema, especially if there would be a lot of data to migrate. Interfaces of distributed components, such as in CORBA, also often use dynamic properties for a similar reason. There are a lot of distant clients using the interface, so you are reluctant to change it. In both of these cases it is not so much a distinction between compile-time and run-time, as much as a distinction between design-time and production.\") \n\n[<span id=\"35\">如果你正在做的是通过`GUI`显示和更新信息，而代码永远不会对键进行固定的引用（即，你永远不会看到像清单3那样的代码），那么使用灵活`动态属性`就非常安全。这是因为你没有设置一个任意字符串作为一个关键的讨厌的依赖。 否则，你应该考虑`动态属性`的其他方法之一。</span>](#35 \"If all you are doing is displaying and updating information via a GUI, and the code never makes a fixed reference to the keys (i.e. you never see code like Listing 3), then you are pretty safe with a Flexible Dynamic Property. This is because you have not set up a nasty dependency to some arbitrary string as a key. Otherwise you should consider one of the other approaches to dynamic properties.\")\n\n[<span id=\"36\">更多运行时检查的第一步是定义的动态属性。与`灵活动态属性`相反，定义的关键区别在于`动态属性`使用的关键字不再是一些任意的字符串，而是现在某个类的一个实例（图3）。</span>](#36 \"The first step towards more run-time checking is the Defined Dynamic Property. The key difference between a defined as opposed to a flexible dynamic property is that the key used by the dynamic property is no longer some arbitrary string, but is now an instance of some class (Figure 3).\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/7_1.png)\n\n> 图3.定义的`动态属性`\n\n[<span id=\"37\">在它的表面上使用定义的`动态属性`并没有太大的改变。事实上，代码界面几乎完全相同（清单5和清单6）。但是现在，关键字的选择不再是完全随意的，而是受到接触`类型`的限制。当然，这仍然允许您在运行时添加`属性`-只需创建一个新的关联`类型`。不过现在至少在某个地方可以找到一个潜在的`键`列表，而无需浏览程序`代码`。 在设计时添加的任何键都可以在关联类型类的加载程序中收集。您可以轻松地提供服务，以在运行时查找合法的`键`。</span>](#37 \"On the face of it using defined dynamic property does not change much. Indeed the code interface is almost identical (Listing 5 and Listing 6). But now the choice of keys is no longer entirely arbitrary, it is limited by the instances of contact type. Of course this still allows you to add properties at run time – you just create a new contact type. However now there is at least somewhere someone can look to get a list of potential keys without having to trawl through the program text. Any keys added at design time can be collected in a loader routine in the contact type class. You can easily provide services to find out the legal keys at run time.\")\n\n```java\nclass Person {\n    public Object getValueOf(ContactType key);\n    public void setValueOf(ContactType key, Object value);\n```\n> 列举5, 图3的Java接口\n```java\nclass ContactType {\n    public static Enumeration instances();\n    public static boolean hasInstanceNamed(String name);\n    public static ContactType get(String name);\n```\n> 列举6,为定义的属性类型提供的服务\n\n[<span id=\"38\">你现在可以设置一些检查来防止由于某人要求一个不存在的`动态属性`而导致的错误。我在这里抛出一个未经检查的`异常`，因为我认为`get（）`的前提条件是`客户端`为联系人类型提供合法名称。客户端总是可以通过使用`hasInstanceNamed（）`来执行这个检查，但是大多数情况下客户端使用的是类型而不是字符串。</span>](#38 \"In particular you can now set up some checking to prevent errors due to someone asking for a dynamic property that does not exist as in Listing 7. I’m throwing an unchecked exception here because I consider that the precondition for get() is that the client provides a legal name for a contact type. The client can always fulfill this responsibility by using hasInstanceNamed(), but most of the time client software will hang on to contact type objects, not strings.\")\n\n---\n\n### 定义动态属性\n- [<span id=\"39\">你如何代表一个对象的事实？</span>](#39 \"How do you represent a fact about an object?\")\n- [<span id=\"39\">提供用某种类型的实例参数化的属性。声明一个属性创建一个新类型的实例</span>](#39 \"Provide an attribute parameterized with an instance of some type. To declare a property create a new instance of that type\") \n\n---\n\n[<span id=\"40\">通常，联系人类型将保存在字典中，通常由字符串索引。这个字典可能是一个静态的联系人类型的字段，但是我更愿意把它作为注册服务器上的字段。</span>](#40 \"Usually the contact types will be held in a dictionary, usually indexed by a string. This dictionary could be a static field of contact type, but I prefer to make it a field on a Registrar.\")\n\n[<span id=\"41\">删除联系人类型仍然具有尴尬的后果。在`java`中的`动态属性`仍然会出现在那些拥有它们的对象上，除非你写了一些复杂的东西清理代码。我通常会规定永远不要删除动态属性的键。如果你想使用一个新的名字，你可以通过给它一个其他名字，但是把它放置在定义的字典中几次，很容易地为联系类型添加别名。</span>](#41 \"Removing a contact type still has awkward consequences. In java the dynamic properties would still be present on those objects that had them, unless you write some complicated clean up code. I usually make it a rule to never delete the keys for a Defined Dynamic Property. If you want to use a new name you can easily alias the contact type by giving it one name but placing it in the defining dictionary several times.\")\n\n```java\nclass ContactType {\n    public static ContactType get(String name) {\n        if (! hasInstanceNamed (name)) throw new IllegalArgumentException(“No such contact type);\n        // return the contact type\n}\n// use with\nAddress kentVactation = (Address)kent.getValueOf(ContactType.get(“VacationAddress”));\n```\n> 列举7, 检查使用合法合同类型\n\n[<span id=\"42\">在这一点上，您可能想知道这与概念建模有什么关系，毕竟我写了很多代码并讨论了设计的权衡。这是一个重要的概念问题，因为您所做的概念选择会影响您的实现选择。如果你选择在你的概念模型中使用`灵活动态属性`，你很难在你的实现中使用定义的`动态属性`或`固定属性`。你做概念模型的原因之一是探索你的用户的概念是什么固定的，什么是可变的。如果全面的灵活性是我唯一的目标，那么我会总是使用图4.通过这个，我可以模拟世界上的任何情况。但是这个模型不是很有用。它在现实项目中是没用的，它不表示什么是固定的。什么时候你正在做一个概念模型，你需要知道你的选择如何影响项目实施-否则你失去了作为建模者的作用。</span>](#42 \"At this point you might be wondering about what this has to do with conceptual modeling,after all I am writing a lot of code and discussing design trade-offs. This is an important conceptual issue because the conceptual choice you make affects the implementation options you have. If you choose to use flexible dynamic attributes in your conceptual model, you are making it pretty hard to use either defined dynamic attributes or fixed attributes in your implementation. One of the reasons you do conceptual models is to explore what is fixed and what is changeable in your users’ concepts. If total flexibility was my only goal then I would always use Figure 4. With this I can model any situation in the world. But this model is not very useful. Its uselessness comes from the fact that it does not indicate what is fixed. When you are doing a conceptual model you need to be aware of how your choices affect things in implementation – otherwise you are abdicating your responsibility as a modeler.\")\n\n[<span id=\"43\">我经常发现人们发现`动态属性`，然后想要在任何地方使用它们。灵活性如此之大，他们获得了所有的可扩展性。是的，有时候你需要`动态属性`。但永远不会忘记有一个标准。只有当你真的使用它们需要他们才用。毕竟，如果必须使用，以后很容易添加它们。</span>](#43 \"I often find that people discover dynamic properties, and then want to use them everywhere. The flexibility is so great, they get all the extendibility they ever want. Yes sometimes you need dynamic properties. but never forget there is a price. Only use them when you really need them. After all it is easy to add them later if you have to.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/8_1.png)\n> 图4.一个可以无用建模任何域的模型\n\n[<span id=\"44\">`定义动态属性`允许您更多地指出你拥有的属性。这些属性仍然是无类型的。您不能强制图3中休假地址的值是一个地址。 你可以通过使用`类型动态属性`来做些什么。</span>](#44 \"The Defined Dynamic Property allows you to indicate rather more about what properties you have. These properties are still untyped. You cannot enforce that the value of the vacation address in Figure 3 is an address. You can do something about that by using a Typed Dynamic Property.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/9_1.png)\n> 图5.为使用限定关联的类型化动态属性建模\n\n[<span id=\"45\">`类型动态属性`将类型信息添加到定义的`动态属性`（图6和6）图5）。这里的联系人类型的实例不只是指出该人是什么合适的人有，他们也表示每个`属性`的类型。 类型约束的值，沿线清单9。</span>](#45 \"A typed dynamic property adds type information to the defined dynamic property (Figure 6 and Figure 5 ). Here the instances of contact type do not just indicate what properites the person has, they also indicate the type of each property. The type constrains the value, along the lines of Listing 9.\")\n\n```java\nclass Person {\n    public Object getValueOf(ContactType key);\n    public void setValueOf(ContactType key, Object value);\nclass ContactType {\n    public Class getValueType();\n    public ContactType (String name, Class valueType);\n```\n> 列举8, 键入动态属性的操作\n\n```java\nclass Person {\n    public void setValueOf(ContactType key, Object value) {\n        if (! key.getValueType().isInstance(value))\n            throw IllegalArgumentException (“Incorrect type for property”);\n        // set the value\n```\n> 列举9, 做类型检查\n\n[<span id=\"46\">这样做类型检查可以帮助避免错误，但它仍然不像固定属性那样清晰。 检查是在运行时，而不是在设计时，因此不是有效的。但还是比没有检查好，特别是如果你习惯于强类型的环境时。</span>](#46 \"Doing type checking like this can help to avoid errors, but it still is not as clear as fixed properties. The checking is at run time, not at design time, and is therefore not as effective. Still it is better than no checking at all, particularly if you are used to a strongly typed environment.\")\n\n---\n### 类型动态属性\n- [<span id=\"47\">你如何代表一个对象的事实？</span>](#47 \"How do you represent a fact about an object?\")</br>\n- [<span id=\"47\">提供使用某种类型的实例进行参数化的属性。声明一个属性创建一个新类型的实例并指定值的类型属性。</span>](#47 \"\")\n---\n\n[<span id=\"48\">当我们深入研究`动态属性`时，我们会发现更丰富的`反射`示例，这是一种架构模式，当我们获得能够描述自身的运行时对象时，就会出现这种模式。 \\[POSA\\]比我打算在这里更详细地讨论反思。</span>](#48 \"As we delve deeper into dynamic properties, we find richer examples of reflection, an architectural pattern which appears when we get runtime objects that are able to describe themselves. [POSA] discusses reflection in much more detail than I intend to go into here.\")\n\n[<span id=\"49\">动态属性提供反射功能，即使在那些不支持反射的语言中。即使使用了一种能够提供一些反射的语言，`动态属性`的反射也更加集中 - 所以您可以提供更易于使用的接口。</span>](#49 \"Dynamic properties provide a reflective capability, even in those languages that don’t support reflection themselves. Even with a language that does provide some reflection, the reflection of dynamic properties is more focused – so you can provide an easier to use interface.\")\n\n[<span id=\"50\">使用所有这些合格的关联可能会很难遵循。另一种方式提供`类型动态属性`是使用单独的属性模式。独立属性模式的本质是它使属性成为一个对象（图6和清单10）。 你可以获得一个人的属性，然后与每个属性获得值和类型信息。</span>](#50 \"Using all of those qualified associations can get rather hard to follow. Another way of providing typed dynamic properties is to use the separate property pattern. The essence of the separate property pattern is that it makes the property an object in its own right (Figure 6 and Listing 10). You can get hold of the properties of a person, and then with each property get value and type information.\")\n\n\n---\n### 分离属性\n- [<span id=\"51\">你如何代表一个对象的属性，并允许属性记录这个属性<span>](#51 \"How do you represent a fact about an object, and allow facts to be recorded about that fact\")\n- [<span id=\"51\">为每个属性创建一个单独的对象。有关该属性的子属性可以然后被做成那个对象的属性。<span>](#51 \"Create a separate object for each property. Facts about that property can then be made properties of that object.\")\n---\n\n[<span id=\"52\">`独立属性`和限定的关联`动态属性`总是可用的两种选择。 到目前为止，我已经用限定的关联描述了灵活的和定义好的`动态属性`，因为合格的关联提供了一个更容易使用的接口。如果你愿意的话，你可以使用灵活和定义的具有单独属性的`动态属性`，尽管我不打算进入在这里。当我们了解类型化`动态属性`的复杂性时，`分离属性`风格变得更有优势。<span>](#52 \"Separate properties and qualified associations are two alternatives that are always available for dynamic properties. So far I’ve described flexible and defined dynamic properties with qualified associations because the qualified association presents a much easier interface to use.You can use flexible and defined dynamic properties with separate properties if you wish, although I’m not going to go into that here. As we get to the complexity of typed dynamic properties and onwards the separate property style becomes more of an advantage.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/10_1.png)\n> 图6.为分类的动态属性建模，使用单独的属性\n\n```java\nclass Person {\n    public Enumeration getProperties();\nclass ContactProperty {\n    public Object getValue();\n    public Class getType();\n    public ContactType getIndex();\n```\n> 列举10, 使用单独属性的类型化动态属性的操作\n\n[<span id=\"53\">`分离属性`和有限的关联不是相互排斥的。您可以轻松地同时提供两个接口。 这样你就得到了两者的优点。当然这会使接口更加复杂，所以先考虑一下用户的需求。给他们提供他们需要的接口，不要让接口变得复杂。但是，如果他们需要合格的关联和`分离属性`，那么这是一个合理的选择。我通常会使用合格的关联来获得值，但是这种类型可能没有多大意义。<span>](#52 \"Separate properties and qualified associations are not mutually exclusive. You can easily provide both interfaces at the same time. This way you get the advantages of both. Of course that makes the interface more complex, so think first about what the clients of person need.Give them the interface they need, don’t make it over complex. But if they need both qualified associations and separate properties, then that is a reasonable option. I would normally always use qualified associations for the value, but it may not make as much sense for the type.\")\n\n[<span id=\"54\">您也可以在这里考虑接口/实现的差异。在本文中，我想集中在概念上 - 它映射到软件的接口而不是实现。但值得一提的是，您可以在实现中使用单独的对象时提供合格的关联接口。如果人的客户端可以获取联系人属性对象，则只能在接口中使用单独的属性。通常隐藏`分离属性`以简化客户端的接口是有用的。</span>](# \"You can also consider the interface/implementation differences here. In this paper I want to concentrate on the conceptual – which maps to the interface of software rather than its implementation. But it is worth mentioning that you can provide a qualified association interface while using separate object in the implementation. You are only using separate properties in the interface if a client of person can obtain a contact property object. Often it is useful to hide the separate property to simplify the interface for the client.\")\n\n[<span id=\"55\">`分离属性`的一大优势是它可以让你把属性的信息放在属性中。 这些信息可能包括谁确定了属性，什么时候确定了属性等。 \\[Fowler AP§3.5\\]中的观察模式基于这个主题进行了深入的研究。如果您需要单独的属性，我在观察者模式所描述的大部分内容都值得思考。（我将观察模式看作是使用不同的属性。）</span>](#55 \"One of the big advantages of the Separate Properties is that it allows you put information about the property in the property. Such information might include who determined the property, when it was determined, and the like. The Observation pattern in \\[Fowler AP §3.5\\] build upon this theme in some depth. Much of what I’ve described there in terms of observations is worth considering if you need separate properties. \\(I see the observation pattern as a use of separate properties.\\)\")\n\n[<span id=\"56\">您可能想知道`分离属性`（模式）和限定关联（`UML`建模结构）之间的对比。 你也可以把合格的关联看作一种模式，一种联想模式。确实，我在\\[Fowler AP §15.2\\]中做了这个。我发现为设计创建模型考虑是有帮助的，因为它帮助我思考使用它们的权衡。当你将它们的模型比较清楚，如`分离属性`，这是特别有用的。当然，以模式开始的事情可以转化为建模结构，特别是如果使用`UML`构造型。历史映射模式\\[FowlerAP§15.3\\]就是一个很好的例子。我表示使用这种模式非常刻版。这是一个模式或建模？也许这是一个地板蜡和一个沙漠顶部。</span>](#56 \"You might be wondering at the contrast between separate properties \\(a pattern\\) and qualified associations \\(a UML modeling construct\\). You can also think of qualified associations as a pattern, a pattern of association. Indeed I did do this in \\[Fowler AP §15.2\\]. I have found it helpful to think of modeling constructs as patterns, for it helps me think about the trade-offs in using them. This is particularly useful when you are comparing them to something that is more clearly a pattern, such as separate property. Of course things that begin as patterns can be turned into modeling constructs, particularly if you use UML stereotypes. The historic mapping pattern \\[Fowler AP §15.3\\] is a good example of that. I represent that using the «history» stereotype. Is it a pattern or a modeling construction? Maybe it’s a floor wax and a desert topping too.\")\n\n---\n## [<span id=\"57\">具有多值关联的动态属性</span>](#57 \"Dynamic Properties with Multi-valued associations\")\n\n[<span id=\"58\">我上面的例子集中讨论了`动态属性`中每个键都有一个单一值的情况。 但是，您也可以在`动态属性`中有多个事件的情况。与人相处时，你可能会考虑一个多值的友好属性。处理这个问题有两种方法，一种简单而不令人满意，另一种令人满意，但（太）复杂。</span>](#58 \"My examples above have concentrated on cases where there is a single value for each key in the dynamic properties. But you can also have cases where there are multiple items in the dynamic properties. With Person you might consider a friends property which is multi-valued.There are two ways to deal with this, one that is simple and unsatisfying, another that is satisfying but (too) complex.\")\n\n\n[<span id=\"59\">简单的方法就是说`动态属性`的值可以是一个集合。然后我们可以像使用相同接口的其他对象一样操作它（清单11）。这很好，很简单，因为我们不需要对基本的`动态属性`模式做任何事情（这里的例子是一个类型化的`动态属性`，但是它可以和所有的模式一起工作）。然而，这并不令人满意，因为它不是真的是我们想要处理多值属性的方式。如果朋友是一个固定的属性，我们需要一个接口，如清单12所示。我不喜欢在这些情况下暴露集合。通过这样做，人员班级在我们添加或移除元素时就失去了应对的能力。这也消除了我们改变我们正在使用的集合类型的能力。</span>](#59 \"The simple approach is just to say that the value of a dynamic property can be a collection.We can then manipulate it like any other object with the same interface (Listing 11). This is nice and simple, since we don’t have to do anything to the basic dynamic property pattern.(The example here is with a typed dynamic property, but it will work with all of them.) It’s unsatisfying however because it is not really the way we would like to deal with multi-valued properties. If friends were a fixed property, we would want an interface along the lines of Listing 12. I don’t like exposing the vector in these cases. By doing so the person class loses the ability to react when we add or remove elements. It also removes our ability to change the type of collection we are using.\")\n\n```java\nPerson aPerson = new Person();\nContactType friends = new ContactType(“Friends”, Class.forName(“Vector”));\nPerson martin = new Person(“Martin”);\nmartin.setValueOf(“Friends”, new Vector());\nPerson kent = new Person(“Kent”);\nmartin.getValueOf(“Friends”).addElement(“Kent”);\nEnumeration friends = martin.getValueOf(“Friends”).elements();\n```\n> 列举11, 在类型化动态属性中使用集合值\n```java\nclass Person {\n    public Enumeration getFriends();\n    public void addFriend(Person arg);\n    public void removeFriend(Person arg);\n```\n> 列举12, 一个固定的多值属性的运作\n\n[<span id=\"60\">那么当我们有`动态属性`的时候，我们可以按照清单12的方式获得一个接口吗？ 那么，如果我们努力工作，就可以如图7所示。但这是一个复杂的模型。 通过一些巧妙的编码，我们可以隐藏接口（清单13和清单14）背后的大部分复杂性，并且使用起来相当方便（清单15）。但客户端仍然需要知道哪些属性是单值的，哪些属性是多值的，并且只有在运行时才能检查正确的使用情况。所有这些复杂性都是痛苦的-比使用`固定属性`更痛苦。我会非常不愿走这么远。</span>](#60 \"So can we get an interface along the lines of Listing 12, when we have dynamic properties? Well if we try hard enough we can, as you can see in Figure 7. But it is a complex model. With some clever coding we can hide much of that complexity behind the interface (Listing 13 and Listing 14) and make it reasonably convenient to use (Listing 15). But the client still needs to know which properties are single valued and which are multi-valued and all the checking for the right usage can only occur at run time. All this complexity is painful – a lot more painful than using fixed properties. I would be very reluctant to go this far.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/12_1.png)\n\n> 图7.满足对多值动态属性的过度支持\n\n```\nclass Person\n    public Object getValueOf(ContactType key);\n    public Enumeration getValuesOf(ContactType key);\n    public void setValueOf(ContactType key, Object newValue);\n    public void addValueTo(ContactType key, Object newValue);\n    public void removeValueFrom(ContactType key, Object newValue);\n    \nclass ContactType\n    public Class getValueType();\n    public boolean isMultiValued();\n    public boolean isSingleValued();\n    public ContactType(String name, Class valueType, boolean isMultiValued);\n```\n> 列举13, 图7的操作\n\n```java\nclass Person\n    public Object getValueOf(ContactType key) {\n        if (key.isMultiValued())\n            throw IllegalArgumentException(“should use getValuesOf()”)\n        //return the value\n    }\n    \n    public void addValueTo(ContactType key, Object newValue) {\n        if (key.isSingleValued())\n            throw IllegalArgumentException(“should use setValueOf”);\n        if (! key.getValueType().isInstance(newValue))\n            throw IllegalArgumentException (“Incorrect type for property”);\n        //add the value to the collection\n```\n> 列举14, 检查清单13的操作的使用情况\n\n```java\nfax = new ContactType(“fax”, Class.forName(“PhoneNumber”), false);\nPerson martin = new Person(“martin”);\nmartin.setValueOf(“fax”, new PhoneNumber(“123 1234”);\nmartinFax = martin.getValueOf(“fax”);\nfriends = new ContactType (“friends”, Class.forName(“Person”), true);\nmartin.addValueTo(“friends”, new Person(“Kent”));\n```\n> 列举15, 使用清单13的操作\n\n[<span id=\"61\">这种复杂性似乎是因为我们既有多值也有单值的`属性`。处理这些复杂性有一个内在的不同的接口，因此复杂性也是如此。当然，我们可以得到只有多值属性的情况。一个常见的模式是类型关系模式（图8）。在这里，一个人可能与许多不同公司有不同的雇佣关系（甚至与同一家公司有多个）。</span>](#61 \"This complexity appears because we have both multi valued and single-valued properties.There is an inherently different interface to dealing with these, hence the complexity. Of course we can get situations with only multi-valued properties. A common pattern for this is the Typed Relation ship pattern \\(Figure 8\\). Here a person may have number of different employment relationships with a number of different companies \\(or even several with the same company\\).\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/13_1.png)\n> 图8.类型关系的一个例子\n\n```java\nclass Employment {\n    public Employment (Person person, Company company, Employment Type type);\n    public void terminate()\n    …\n}\nclass Person {\n    public Enumeration getEmployments();\n    public void addEmployment (Company company, EmploymentType type);\n```\n> 列举16, 图8的`Java`接口\n\n[<span id=\"62\">正如我们想到的那样，很快就会发现，这与使用多值的`定义动态属性`非常类似，但是使用`分离属性`而不是合适的关联来表示。（或者说这句话太过分了？）实际上，图9显示了在这种情况下如何使用`定义动态属性`接口。这种事物的观点是真实的，所以一个类型化的关系不会添加任何新的模式语言。 但是类型化关系在建模圈子中是一种非常普遍的模式，很多人可能没有意识到它与`动态属性`模式的联系。</span>](#62 \"As we think of this, it should soon occur to you that this is really very similar as using a Defined Dynamic Property that is multi-valued, but expressed using a Separate Property rather than a Qualified Association. (Or is that sentence just too much of a mouthful?) Indeed Figure 9 shows how you can use a Defined Dynamic Property interface in this situation. This view of things is true, and so a typed relationship doesn’t add anything that new to this pattern language. But typed relationship is a very common pattern in modeling circles, and many may not realize its connection with the dynamic properties patterns.\")\n\n---\n### 类型关系\n- [<span id=\"63\">你如何表示两个对象之间的关系？（你如何表示多值动态属性？）</span>](#63 \"How do you represent a relationship between two objects?(How do you represent multi-valued dynamic properties?)\")\n- [<span id=\"63\">为两个对象之间的每个链接创建一个关系对象。 给关系对象一个类型对象来表示关系的含义。（类型对象是多值属性的名称。）</span>](#63 \"Create a relationship object for each link between the two objects. Give the relationship object a type object to indicate the meaning of the relationship.(The type object is the name of the multi-valued property.)\")\n---\n\n[<span id=\"64\">类型化关系的优势在于它可以很好地处理双向关系，并且为关系添加属性提供了一个简单的点。（当然，后者是一个`分离属性`的特征。）你可以在这个模式中添加一个复杂的知识级别，跟类型化的`动态属性`一样。但是，您应该考虑接口的影响。类型化关系迫使用户意识到雇佣对象，因为确实使用`分离属性`。事实上，人们倾向于将属性客体本身看作完全成熟的客体，而不是人（或公司）的一些属性。 但是合格的关联通常可以为许多目的提供更简单的接口。所以每当你看到，或者你正在考虑使用，一个类型的关系;你还应该考虑合格的关联形式。您可以在任何一个方向或两个方向上使用它，也可以将其用于除了键入的关系之外，或者除此之外。。</span>](#64 \"The strengths of typed relationship are that it works well with bi-directional relationships, and that it provides a simple point to add properties to the relationship. (The latter, of course, is a feature of separate properties.) You can add a sophisticated knowledge level to this pattern,along much the same lines as typed dynamic properties. However you should consider the interface implications. Typed relationships force users to be aware of the employment object,as indeed does any use of separate properties. Indeed people tend to see the property object as a full fledged object in its own right, rather as some property of the person (or company). But the qualified association can often provide a simpler interface for many purposes. So whenever you see, or you are considering using, a typed relationship; you should also consider the qualified association form. You can use it in either or both directions, and use it either in addition to the typed relationship, or in addition to it.\")\n\n[<span id=\"65\">但是这两种模式并不完全相同。如果使用图9，则表示雇主只能是某种特定工种的雇主。图8在图表中没有这样的约束，尽管大多数建模者会暗示这样的约束，除非雇用具有附加属性。当然，就业通常具有附加属性。一个常见的例子是日期范围（如问责制\\[Fowler，AP§2.4\\]）。</span>](#65 \"The two models are not quite identical however. If you use Figure 9 you are indicating that an employer can only be an employer once for a particular employment type. Figure 8 has no such constraint in the diagram as it stands, although most modelers would imply such a constraint,unless the employment had additional attributes. Often, of course, the employment does have the additional attributes. A common example is a date range (as in accountability \\[Fowler, AP §2.4\\].\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/14_1.png)\n> 图9.使用与图8相同情况的合格关联\n\n```java\npublic Person {\n    public void addEmployer (Company company, EmploymentType type);\n    public Enumeration getEmployersOfType (EmploymentType type);\n```\n> 列举17, 图9的接口\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/15_1.png)\n> 图10.键入的关系，显示通常假定的约束\n\n---\n## 不同种类的人\n[<span id=\"66\">到目前为止，我们假设我们只有一种人，我们为一个人定义的任何属性都是所有人的有效属性。但是，您确实会遇到不同类型的情况，以及不同类型的不同属性。管理人员可能需要一个管理部门的属性，执行人员可能需要一个属性作为高管卫生间的关键号码（在一个不是90年代的公司）。</span>](# \"So far we are assuming we only have one kind of person, and any properties we define for a person are valid properties for all people. However you do get situations where you have different types, and different properties for different types. A manager may need a property for department managed, an executive may need a property for executive washroom key number (in a not very 90’s company).\")\n\n[<span id=\"67\">别担心，我听到“使用继承愚蠢”的呼声。事实上，这是常用于分类的情况之一。实际上，这个过程比这个要复杂得多，特别是当你开始思考一个人可能扮演的角色时。我已经写了关于建模角色\\[Fowler roles\\]的主题的全文。角色模式考虑了我们对操作变化和`固定属性`变化感兴趣的情况。但在这种情况下，我想探索不同类型的对象与`动态属性`的概念的重叠。这种重叠会导致`动态属性知识级别模式`（一个对我的品味有点太大的名字）。</span>](#67 \"Don’t worry, I hear the cries of “use inheritance stupid”. Indeed this is one of the situations that is often used for subtyping. Actually it gets rather more involved than that, particularly when you start thinking of the various roles a person may play. I’ve written a whole paper on the subject of modeling roles \\[Fowler roles\\]. The roles patterns consider cases where we are interested in variations in operations and in variations of fixed properties. But in this case I want to explore the overlap of different kinds of object with the notion of dynamic properties. This overlap begets the dynamic properties knowledge level pattern \\(a name that is getting a little too large for my taste\\).\")\n\n[<span id=\"68\">为了使用这个模式，我们给`Person`一个`Person`类型的`类型对象`。然后，我们可以说，人物类型与联系人类型的关联指示哪些人物拥有该人物类型可用的属性。 如果我们尝试使用或要求某人的属性，则可以使用人员类型来检查使用情况是否正确。</span>](#68 \"To use the pattern we give the Person a type object of Person Type. We can then say that the person type’s association to contact type indicates which properties are available for people who have that person type. If we try to use, or ask for, a property on a person the person type can be used to check that the usage is correct.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/16_1.png)\n> 图11.动态属性知识水平\n\n```java\nclass Person {\n    public Object getValueOf(ContactProperty key);\n    public boolean hasProperty(ContactProperty key);\n    public void setValueOf(ContactProperty key, Object newValue);\nclass PersonType {\n    public boolean hasProperty(ContactProperty key);\n    public Enumeration getProperties();\n```\n> 列举18, 图11的操作\n```java\nclass Person {\n    public Object getValueOf (ContactProperty key) {\n        if (!hasProperty(key))\n            throw IllegalArgumentException(“Innapropriate key”);\n            //return the value\n```\n> 列举19, 检查具有动态属性知识级别的适当的密钥\n\n[<span id=\"69\">当我们开始使用这样的知识水平时，单独的属性变得越来越重要。 在这种情况下，我们很快就会开始停止将其视为一种属性，而不是把它作为一个对象。 什么是属性和什么是非属性之间的分界线是非常模糊的，这实际上取决于你对事物的看法。</span>](#69 \"As we start to use a knowledge level like this, the separate property becomes more and more important. In this case we soon start to stop thinking of it as a property, rather as some object in its own right. The dividing line between what is a property and what isn’t is very blurred,and it really depends upon your view of things.\")\n\n---\n### 动态属性知识水平\n- [<span id=\"70\">你如何执行某些类型的对象具有某些特性使用动态属性？</span>](#70 \"How do you enforce that certain kinds of objects have certain properties when you use dynamic properties?\")\n- [<span id=\"70\">创建一个知识级别来包含什么类型的对象使用的规则哪些类型的属性</span>](#70 \"Create a knowledge level to contain the rules of what types of objects use which types of properties\")\n---\n\n---\n\n## [<span id=\"71\">动态属性的几个小结</span>](#71 \"Some Summary Points on Dynamic Properties\")\n\n[<span id=\"72\">各种各样的`动态属性`构成了本文的大部分内容。但我必须重申，`动态属性`是我想要尽可能避免的。`动态属性`带来了很大的负担：接口不够清晰，使用操作而不是存储数据的困难。只是有时你别无选择，只能使用它们，在这种情况下，这篇论文应该有用的给你提供一些替代方案和之间的权衡。<span>](#72 \"Various kinds of dynamic properties make up the bulk of this paper. But I have to reiterate that dynamic properties are something I like to avoid if at all possible. Dynamic properties carry a heavy burden of disadvantage: the lack of clarity of the interface, the difficulty in using operations instead of stored data. It is just that sometimes you have little choice but to use them, and it is on these occasions that this paper should come in useful to give you some alternatives and the trade-offs between then.\")\n\n[<span id=\"73\">`动态属性`出现在改变接口有困难的地方。那些使用像他们这样的分布式对象系统的人，至少在原则上是这样，因为它允许他们在不改变客户端的情况下改变接口 - 而在分布式系统中，可能很难找到你的客户端。但是你仍然应该警惕这样做。每当你为`动态属性`添加一个新的键到你的键上，你都在有效地改变接口。所有的`动态属性`都在替换运行时检查的编译时间检查。你仍然有同样的问题保持你的客户端最新。</span>](#73 \"Dynamic properties appear most where there are difficulties in changing the interface. People who work with distributed object systems like them, at least in principle, because it allows them to alter an interface without compromising clients – and in a distributed system it may be very difficult to find who your clients are. But you should still be wary of doing this. Any time you add a new key to your keys for the dynamic properties you are effectively changing the interface. All the dynamic properties are doing is replacing a compile time check for a runtime check. You still have the same issues of keeping your clients up to date.\")\n\n[<span id=\"74\">`动态属性`的另一个常见用途是在数据库中。这里不仅仅是由于接口的问题，而且由于数据迁移的问题（如果不是主要的话）。更改数据库模式不仅会导致对使用该模式的程序进行潜在更改，还可能会强制您执行复杂的数据转换练习。同样，`动态属性`允许您在不更改数据库模式的情况下更改内容，从而不需要进行任何数据转换。在大型数据库中，这可能是一个引人注目的优势。</span>](#74 \"Another common use of dynamic properties is in databases. Here it is not just due to the problem of interface, but also (if not primarily) due to problems of data migration. Changing a database schema does not only cause a potential change to programs using the schema, it also may force you to do a complicated data conversion exercise. Again dynamic properties allow you to change things without changing the database schema, and thus not needing to do any data conversion. In large databases this can be a compelling advantage.\")\n\n---\n\n## [<span id=\"75\">一个你不知道的有关于属性的](#75 \"A property you don’t know about\")\n\n[<span id=\"76\">我想在本文中添加一个最后一个重要的属性。这是一个没有意识到属性的对象的情况。当属性被另一个对象所隐含，以及与有关的方式时，就会发生这种情况。</span>](#76 \"There is a last but important kind of property that I want to add to this paper. This is the case of an object having a property without realizing it. This occurs when the property is implied by another object and the way it relates to you.\")\n\n[<span id=\"77\">考虑一个管理数据库连接的对象。它会创建一堆数据库连接，并在请求时将它们传递给其他对象。当一个客户端连接完成后，可以将其返回给管理员，以供其他人使用。您可以通过向连接添加`isBusy`属性来完成此操作。图12显示了一个使用外部属性的替代方案。连接是空闲的还是繁忙的是由连接管理器中的哪个集合决定的。如果你有一个连接，你不能问它是空闲的还是忙的，而是你必须要求连接管理器是否特定的连接空闲或忙碌。你可以这样说，因为组合关联是一种方式。连接不知道连接管理器。 从某种意义上来说，空闲/忙碌状态根本不是连接的属性。但至少从某种意义上来说，这就是我提到它的原因。</span>](#77 \"Consider an object that manages database connections. It creates a bunch of database connections and hands them out to other objects when requested. When a client is done with the connection it can return it to the manager to be available for someone else. You could do this by adding an isBusy property to the connection. Figure 12 shows an alternative using an extrinsic property. Whether the connection is free or busy is determined by which collection in the connection manager it lies in. If you had a connection, you could not ask it whether it is free or busy, instead you would have to ask the connection manager whether a particular connection is free or busy. You can tell this because the composition associations are one way.The connection has no knowledge of the connection manager. In a sense the free/busy status isn’t a property of connection at all. Yet at least in some sense it is, which is why I mention it.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/17_1.png)\n> 图12.使用外部收集属性\n\n[<span id=\"78\">在纯粹的概念模型意义上，这种模式没有多大意义。但是，为什么你可能想要使用它，有实际的实施原因。如果您希望对此属性进行的所有更改都通过连接管理器进行，则此方法可以清楚地说明这一点。特别是当你想让连接管理器给你一个自由的连接，而你不关心哪一个时，这是一种自然的风格。</span>](#78 \"In a pure conceptual modeling sense this pattern does not make much sense. But there are practical implementation reasons why you may want to use it. If you want all changes to this property to go through a connection manager, then this approach makes this clear. In particular this is a natural style when you want the connection manager to give you a free connection and you don’t care which one.\")。\n\n[<span id=\"79\">使用外部属性的另一个原因是如果连接类是由其他人提供的，并且您不能更改其接口。 你可以添加新的属性而不用改变连接类。</span>](#79 \"Another reason to use an extrinsic property is if the connection class is provided by someone else and you can’t change its interface. You can add the new property without changing the connection class at all.\")\n\n---\n### 外在属性\n- [<span id=\"80\">你如何给对象一个属性而不改变它的接口？</span>](#80 \"How do you give an object a property without changing its interface?\")\n- [<span id=\"80\">让另一个对象负责知道这个属性。</span>](#80 \"Make another object responsible for knowing about the property.\")\n\n---\n[<span id=\"81\">`外在属性`的一个大问题是它会导致一个尴尬和不自然的接口。通常如果你想知道一些东西，你只要找到合适的对象并提出问题。在这里您需要找到保存外部集合的对象，并询问有关适当的对象。在某些情况下，比如这个，似乎是合理的。但大多数情况下，我宁愿让对象了解自己的属性（在这种情况下，我称之为`内在属性`）。</span>](#81 \"The big problem with the extrinsic property is that it leads to an awkward and unnatural interface. Usually if you want to know something, you just find the appropriate object and ask it. Here you need to find the object that holds the external collection, and ask it about the appropriate object. In some circumstances, such as this one, it seems reasonable. But most of the time I would prefer to let objects know about their own properties (in which case I call them intrinsic properties).\")\n\n---\n\n## 最后的想法\n\n[<span id=\"82\">当我完成本文时，我觉得需要再次敦促你不要使用我在这里写的东西，除非你真的需要它。`固定属性`的好处是伟大的。如果你需要别的东西，那么我希望这篇文章能给你一些想法和一些指导。但`固定属性`永远是你的第一选择。</span>](#82 \"As I finish this paper, I feel the need again to urge you not to use what I’ve been writing about here unless you really do need it. The advantages of fixed properties are great. If you need something else, then I hope this paper gives you some ideas and some guidance. But fixed properties are always your first choice.\")\n\n---\n\n## 参考\n\n[Fowler, AP] Fowler, Martin. Analysis Patterns: Reusable Object Models, Addison-1997\n[Fowler, roles] Fowler, Martin. Dealing with Roles,http://www.awl.com/cseng/titles/89542-0/awweb.htm\n[POSA] Buschman et al, Pattern Oriented Software Architecture, Wiley 1997\n\n\n----\n## 原文地址：http://martinfowler.com/apsupp/properties.pdf","source":"_posts/属性的行为.md","raw":"---\ntitle: 属性的处理\ntags:\n  - 属性\n  - 设计\ncategories: 译文\npermalink: dealing-with-properties\ndate: 2017-11-30 23:22:20\n---\n\n# 属性的处理(初步校对)\n---\n*Martin Fowler* (《重构：改善既有代码的设计》作者)  <P>\nfowler@acm.org\n\n---\n[<span id=\"1\">你创建的每个对象几乎都需要属性：关于对象的一些声明。一个人可能有一个身高属性，一个公司可能有一个CEO，一个航班可能有一个航班号。有很多方法来创建属性。在这篇文章中，我将探讨其中一些你经常需要用到的方法。我经常看到涉及到这个话题的图案，但他们通常只涉及一部分。在这里，我想更广泛地讨论这个问题，以便更好地讨论这些选项。</span>](#1 \"Almost every object you create needs properties: some statement about the object. A person may have a height, a company may have a CEO, a flight may have a flight number. There are a number of ways to model properties. In this article I will explore some of these ways and when you may want to use them. I’ve often seen patterns touch on  this subject, but they usually only cover part of the picture. Here I want to cover the issue  more broadly to give a better discussion of the options.\")\n\n[<span id=\"2\">最常见和最简单的情况是使用`固定属性`，即只声明类的属性。在绝大多数情况下，你只需要使用`固定属性`。在有大量固定属性或者需要频繁修改时，使用`固定属性`容易出错。这种情况下你可能会使用`动态属性`。所有的`动态属性`都有一个参数化属性的特性：你需要一个带参的方法来查询一个属性。当参数只是一个字符串,最简单的是`灵活的动态属性`。这样定义和使用属性会比较容易，但难以控制。如果你需要使用`动态属性`，在你的参数必须是一个类的实例的情况下。使用类型`动态属性`来增强对`动态属性`的控制。</span>](#2 \"The most common, and the simplest case is to use a Fixed Property , that is just declare the attribute on the class. In the vast majority of cases that is all you need to do. Fixed properties begin to fail when you have a large amount of them, or you need to change them frequently, possibly at run time. These forces lead you to the varieties of Dynamic Property . All dynamic properties have the quality of a parameterized attribute where to query a property you need to use a query method with a parameter. The simplest of these is the Flexible Dynamic Property where the parameter is just a string. This makes it easy to define and use properties, but is difficult to control. If you need that control you can use a Defined  Dynamic  Property  where  your parameters must be instances of some class. A further step of control allows you to strongly type your dynamic property with a Typed Dynamic Property .\")\n\n[<span id=\"3\">随着您的属性结构变得越来越复杂，您应该考虑将它们设置为“单独属性”，把一些属性综合起来创建一个对象。如果你需要多值属性，你可以考虑集合。在这篇文章中最复杂的例子是你想要规则来控制什么类型的对象具有什么样的属性 - 这需要一定的`动态属性`知识水平。</span>](#3 \"As your property structures get more involved, you should consider making them Separate Properties , which makes the property an object in its own right. If you need multi-valued properties you can consider a Typed Relationship . The most complex example in this theme is where you want rules to control what kinds of objects have what kinds of properties – this needs a Dynamic Property Knowledge Level .\")\n\n[<span id=\"4\">另一种属性完全是`外部属性`（Extrinsic Property），如果你想使用接口给一个对象创建一个属性，那么这就是你需要使用的一种模式。<span>](#4 \"Another variety of property entirely is the Extrinsic Property , a pattern you use if you want to give an object a property, but not alter its interface to support it.\")\n\n[<span id=\"5\">问题</span>](#5 \"Problem\")\t|[<span id=\"5\">答案</span>](#5 \"Solution\")\t|[<span id=\"5\">名称</span>](#5 \"name\")\t|[<span id=\"5\">页码</span>](#5 \"page\")\n--- | --- | --- | ---\n &nbsp;  |[<span id=\"6\">在编程语言里，当使用一个特定的属性，它需要查询或者更新。<span>](#6 \"Give it a specific attribute for that fact. This will translate to a query method and probably an update method in a programming language.\")|[`固定属性`](#固定属性 \"Fixed Property\")|4\n &nbsp;  |[<span id=\"7\">提供可参数化的属性，可以根据参数表示不同的属性</span>](#7 \"Provide a parameterizable attribute which can represent different properties depending on the parameter\")|[`动态属性`](#动态属性 \"Dynamic Property\")|4\n &nbsp;  |[<span id=\"8\">提供一个用字符串参数化的属性。声明一个属性只是使用字符串.](#8 \"Provide an attribute parameterized with a string. To declare a property just use the string.\")|[`灵活的动态属性`](#灵活的动态属性 \"Flexible Dynamic Property\")|5\n &nbsp;  |[<span id=\"9\">提供用某种类型的实例参数化的属性。要声明属性，请创建该类型的新实例</span>](#9 \"Provide an attribute parameterized with an instance of some type. To declare a property create a new instance of that type\")|[`定义动态属性`](#定义动态属性 \"Defined Dynamic Property\")|7\n &nbsp;  |[<span id=\"10\">提供使用某种类型的实例进行参数化的属性。要声明属性，请创建该类型的新实例并指定该属性的值类型.</span>](#10 \"Provide an attribute parameterized with a instance of some type. To declare a property create a new instance of the type and specify the value type of the property.\")|[`类型动态属性`](#类型动态属性 \"Typed Dynamic Property\")|9\n[<span id=\"11\">你如何表示一个对象的属性，并允许对象的属性也具有属性</span>](#11 \"How do you represent a fact about an object, and allow facts to be recorded about that fact\")|[<span id=\"11\">为每个属性创建一个单独的对象。 关于那个属性的详细可以作为这个对象的的属性.<span>](#11 \"Create a separate object for each property. Facts about that property can then be made properties of that object.\")|[`分离属性`](#分离属性 \"Separate Properties\")\t|10\n[<span id=\"12\">你如何表示两个对象之间的关系（如何表示多个值动态属性？）</span>](#12 \"How do you represent a relationship between two objects?(How do you represent multi-valued dynamic properties?)\")|[<span id=\"12\">为两个对象之间的每个链接创建一个关系对象。 给关系对象一个类型对象来表示关系的含义。 （类型对象是多值属性的名称。）<span>](#12 \"Create a relationship object for each link between the two objects. Give the relationship object a type object to indicate the meaning of the relationship. (The type object is the name of the multi-valued property.)\")|[`类型关系`](#类型关系 \"Typed Relationship\")| 14\n[<span id=\"13\">当你使用动态属性时，你如何强制某些类型的对象具有某些属性？</span>](#13 \"How do you enforce that certain kinds of objects have certain properties when you use dynamic properties?\") |[<span id=\"13\">创建知识级别以包含哪些类型的对象使用哪些类型的属性的规则](#13 \"Create a knowledge level to contain the rules of what types of objects use which types of properties\") |[`动态属性知识水平`](#动态属性知识水平 \"Dynamic Property Knowledge Level\")| 16\n[<span id=\"14\">你如何给一个对象新增一个属性而不改变它的接口？</span>](#14 \"How do you give an object a property without changing its interface?\")|[使用另一个对象负责属性](#14  \"Make another object responsible for knowing about the property\")| [`外在性质`](#外在性质 \"Extrinsic Property\")| 18\n\n\n---\n## 什么是属性\n\n\n[<span id=\"15\">这不是一个愚蠢的问题。当人们使用“属性”这个词时，他们可能有很多不同的含义。对某些属性来说，是一个类的实例变量或数据成员。对于其他人来说，它们就像`UML`图中的一个盒子一样。所以在我开始这篇文章之前，我必须定义这个词的用法。</span>](#15 \"This is not a silly question. When people bandy around the term ‘property’ they can mean many different things. To some a property is an instance variable or data member of a class. To others they are kind of thing that goes in a box in a UML diagram. So before I start this article I have to define my usage of the word.\")\n\n\n[<span id=\"16\">为了我的目的，一个属性是关于一个可以通过查询方法获得的对象的一些信息。它可能是一个值类型（如`Java`中的`int`）或一个类的实例。您可能能够修改该属性，但不一定。您可以在创建对象时设置属性，但不一定。该属性可以作为实例变量或数据成员存储，但不一定是。班级可能会从另一个班级获得值，或者经过一些进一步的计算。因此，我采用属性的接口视图而不是实现视图。这是我在设计中经常使用的习惯：对于我来说，面向对象的本质是将接口与实现分开，并使接口更加重要。</span>](#16 \"For my purposes a property is some information about an object that you can obtain by a query method. It may be a value type (such as int in Java) or an instance of a class. You may be able to update the property, but not necessarily. You may set the property when you create the object, but again not necessarily. The property may be stored as an instance variable or data member, but it does not have to be. The class may get the value from another class, or go through some further calculation. I am, therefore, taking an interface view of properties rather than an implementation view. This is a regular habit of mine in design: for me the essence of object-orientation is that you separate interface from implementation, and make interface more important.\")\n\n---\n\n## <span id = \"固定属性\">固定属性</span>\n[<span id=\"17\">`固定属性`是我们使用的最常见的属性。 固定属性在类型的接口中声明。 它给出了属性的名称和返回类型。 图1显示了使用`UML`建模的属性，示例1显示了这些属性的查询方法如何在`Java`中使用。 我已经选择了这个例子来说明这个讨论同样适用于`UML`属性和`UML`关联。 它也适用于计算值（年龄）以及那些合理存储的数据（出生日期）。](#17 \"Fixed properties are by far the most common kind of properties that we use. A Fixed Property is declared in the interface of the type. It gives the name and the return type for the property. Figure 1 shows properties modeled in UML, Listing 1 shows how the query methods for these properties would show up in Java. I’ve picked the example to show that this discussion applies equally well to UML attributes as well as UML associations. It also applies to calculated values (age) as well as those that are reasonably stored data (date of birth).\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/3_1.png)\n> 图1.使用`固定属性`建模的人员\n```java\nclass Person {\n    public Date getDateOfBirth();\n    public int getAge();\n    public Quantity getHeight();\n    public Company getEmployer();\n    public void setDateOfBirth (Date newDateOfBirth);\n    public void setEmployer (Company newEmployer);\n```\n> 列举,图1的`java`操作\n\n[<span id=\"18\">查询操作通常遵循一些命名约定。在`程序语言`中，您总是在属性名称（`dateOfBirth`）之后命名查询。 `C++`从来没有一个固定的约定，有些人只是在属性后面命名，而另一些人则使用`get`约定（`getDateOfBirth`）。 `Java`从没有特别的约定开始，但现在大多数人都采用`get`约定。就我个人而言，当您阅读代码时，我发现`get`令人恼火，所以我宁愿忽略它，但`Java`风格是使用`get`，所以现在就使用它。无论您使用的是存储值还是派生值，都应确保遵循相同的约定。使用`Person`的客户端不应该知道或关心年龄是否存储或派生。](#18 \"Query operations usually follow some naming convention. In smalltalk you always name the query after the name of the property (dateOfBirth). C++ never had a fixed convention, some people just named it after the property, others used the 'get' convention (getDateOfBirth). Java started with no particular convention but now most people adopt the get convention. Personally I find the ‘get’ irritating when you read code so I would prefer to leave it out, but the Java style is to use the get, so I use it now. You should ensure that you follow the same convention whether you are using stored or derived values. Clients of the person class should not know or care whether age is stored or derived.\")\n\n[<span id=\"19\">`修饰符`操作的存在取决于您是否希望直接修改值。如果你这样做，那么你会根据一些命名方案，例如`setDateOfBirth`（`Date`）提供一个修饰符操作。对于`返回值`存在不同的约定。你可以返回属性的新值（`Date`），被修改的对象（`Person`），或者什么都没有（`void`）。我更愿意在修饰符上返回`void`，以帮助明确修饰符和查询之间的区别。](#19 \"The presence of modifier operations depends on whether you want the values to be directly modified. If you do then you will provide a modifier operation according to some naming scheme, eg setDateOfBirth(Date). Different conventions exist as to the return value. You can return the new value of the property (Date), the object being modified (Person), or nothing (void). I prefer to return void on modifiers, to help make clear the difference between a modifier and a query.\")\n\n---\n### 固定属性\n  [<span id=\"20\">你如何代表一个对象的事实？</span>](#20 \"How do you represent a fact about an object?\")\n  -  [<span id=\"20\">给它一个这个事实的特定属性。这将转化为查询方法，并可能是一种编程语言的更新方法。</span>](#20 \"Give it a specific attribute for that fact. This will translate to a query method and probably an update method in a programming language.\")</br>\n    [<span id=\"20\">接口很清晰明确</span>](#20 \"Clear and explicit interface\")</br>\n    [<span id=\"20\"><font color=\"red\">只能在设计时添加属性</font></span>](#20 \"Can only add properties at design time\")</br>\n---\n  \n[<span id=\"21\">您可能希望为属性的`构造函数`提供参数。通常，您要在`构造函数`中设置足够的属性，以便构建格式良好的类。</span>](#21 \"You may wish to provide arguments to the constructor for properties. Typically you want to set enough properties in the constructor so that you construct a well-formed class.\")\n\n[<span id=\"22\">不想直接修改的属性不应该有`修饰符`操作。如果您只希望从出生之日起计算，那么年龄属性可能就是这种情况。对于一个不可改变的`属性`也是如此：一个在类的生命周期中不会改变的`属性`。当你想使`属性`不可改变时，请记住考虑到人为错误。虽然出生日期对于现实世界中的人类来说是不可改变的`属性`，但是您可能会在输入到计算机系统时出现错误，从而使其变得可变。软件常常模拟我们所知道的世界，而不是世界本身。</span>](#22 \"Properties that you don’t want to be modified directly should not have a modifier operation.This might be the case for the age property, if you only want that determined by calculation from the date of birth. It also would be the case for an immutable property: one that does not change for the lifetime of the class. When you think of making a property immutable, remember to take human error into account. While the date of birth is an immutable property for humans in the real world, you might make a mistake typing into a computer system, and thus make it mutable. Software often models what we know of the world, rather than the world itself.\")\n\n[<span id=\"23\">`固定属性`是迄今为止您将遇到的最常见的`属性`形式。他们这样做是有原因的：他们使用简单方便。您应该使用固定属性作为表示属性的第一个也是最常见的选择。在本文中，我将给出许多固定属性的替代方案。在某些情况下，这些替代品更好，但大多数情况下不是。请记住，当我们经历的选择。我99％的时间使用固定的属性。其他品种更为复杂，这就是为什么我把这篇论文的大部分花费在他们身上 - 也是为什么我不愿意使用它们！</span>](#23 \"Fixed properties are by far the most common form of properties that you will come across.They are that way for good reasons: they are simple and convenient to use. You should use fixed properties as your first and most common choice for representing properties. In this paper I am going to give a lot of alternatives to fixed properties. For certain situations these alternatives are better, but most of the time they are not. Remember that as we go through the alternatives. I use fixed properties 99% of the time. Other varieties are more complex, which is why I'm spending most of this paper on them — and also why I prefer not to use them!\")\n\n## <span id = \"动态属性\">动态属性</span>\n[<span id=\"24\">`固定属性`的关键在于您在设计时修复了这些属性，并且所有实例在运行时都必须遵循该决定。 对于一些问题，这是一个尴尬的限制。 想象一下，我们正在建立一个复杂的联络系统。 有一些东西是固定的：家庭住址，家庭和工作电话，电子邮件。 但他们是各种各样的小变化。 对于需要记录父母地址的人，另一个人有白天工作和晚上工作号码。 事先很难预测所有这些事情，每次更改系统时都必须经过编译，测试和分发。 要处理这个问题，你需要使用动态属性。</span>](#24 \"The key thing about fixed properties is that you fix them at design time, and all instances at run time must follow that decision. For some problems this is an awkward restriction. Imagine we are building a sophisticated contact system. There are some things that are fixed: home address, home and work phone, email. But they’re all sorts of little variations. For someone you need to record their parent’s address, another has a day work and evening work numbers.It’s hard to predict all these things in advance, and each time you change the system you have to go through compiling, testing, and distribution. To deal with this you need to use dynamic properties.\")\n\n---\n### 动态属性\n  [<span id=\"25\">你如何代表一个对象的事实？</span>](#25 \"How do you represent a fact about an object?\")</br>\n  [<span id=\"25\">提供可参数化的属性，可以根据参数表示不同的属性</span>](#25 \"Provide a parameterizable attribute which can represent different properties depending on the parameter\") </br>\n   - [<span id=\"25\"> 可以在运行时添加属性</span>](#25 \"Can add properties at run time\")\n   - [<span id=\"25\"><font color=\"red\">接口不清晰</font></span>](#25 \"Unclear interface\")\n---\n  \n[<span id=\"26\">`动态属性`有多种变化，每种变化都会在`灵活性`和`安全性`之间做出不同的选择。 最简单的方法是`灵活动态属性`。 这种模式的本质是为键值为简单值的人（通常是字符串）添加一个合格的关联（参见图2和示例2）。 如果您想为某人Kent添加休假地址，则只需使用清单3中的代码即可。您不需要重新编译人员类。 你甚至可以建立一个图形用户界面（`GUI`）或者文件读取器来添加属性，而不用重新编译客户端。</span>](#26 \"There are several variations on dynamic properties, each of which make different trade-offs between flexibility and safety. The simplest approach is Flexible Dynamic Properties. The essence of this pattern is that you add a qualified association to the person whose key is a simple value, usually a string (see Figure 2 and Listing 2). If you want to add a vacation address to a person Kent, you just use the code in Listing 3. You don’t need to recompile the person class. You could even build a GUI or a file reader that would add properties without recompiling the client either.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/5_1.png)\n> 图2.使用动态属性建模的人员\n```java\nclass Person {\n    public Object getValueOf(String key);\n    public void setValueOf(String key, Object value);\n```\n> 列举2,图2的`java`方法\n```java\nkent.setValueOf(“VacationAddress”, anAddress);\nAddress kentVactation = (Address) kent.getValueOf(“VacationAddress”)\n```\n> 列举3,使用动态属性\n[<span id=\"27\">这样说，你可能想知道为什么有人会使用固定的属性，因为动态的像这样的属性给了你更多的灵活性。当然有一个成本，它在于软件各部分之间依赖关系的清晰度降低。这一切都非常好给一个人增加一个度假地址属性，但是你怎么知道把它重新取回呢？有了固定的属性，你可以看看人的界面，看看属性。该编译器可以检查不要求对象做不理解的事情。 用一个动态属性，你不能做任何设计时检查。此外的界面人很难看。不只是你看`Person`的声明接口 -你也必须找到不会出现在类接口中的动态属性。你必须找到那些设置属性的代码部分（通常不会在`Person`类中）提现出来。</span>](# \"Said like that, you might wonder why anyone would ever use fixed properties, since dynamic properties such as this give you so much more flexibility. Of course there is a cost, and it lies in the reduction of the clarity of the dependencies between parts of the software. It is all very well adding a vacation address property to a person, but how do you know to get it back again? With fixed properties you can just look at the interface of person and see the properties. The compiler can check that don’t ask an object to do something it doesn’t understand. With a dynamic property you cannot do any design-time checking. Furthermore the interface of person is harder to see. Not just do you look at Person’s declared interface – you also have to find the dynamic properties, which will not be present in the class interface. You have to find that part of the code that sets the property (which usually will not be in the Person class at all) and dig it out.\")\n\n---\n### 灵活动态属性\n  - [<span id=\"28\">你如何代表一个对象的事实？</span>](#28 \"How do you represent a fact about an object?\")</br>\n  - [<span id=\"28\">提供一个用字符串参数化的属性。只声明一个属性使用字符串。</span>](#28 \"Provide an attribute parameterized with a string. To declare a property just use the string.\") </br> \n---\n\n[<span id=\"30\">不仅是属性很难找到，它的依赖也是一个噩梦。随着固定属性的客户端代码有一个依赖于人类 - 一个依赖是难以跟踪。如果你改变属性的名字，编译器会让你知道，并告诉你需要改变什么代码才能解决问题。但灵活的动态属性创建一个依赖于任意一段代码。它可能是属于一个类的代码甚至不能被客户端看到。如果有人更改密钥字符串会发生什么？如果有人改变他们把键入字符串的对象的类型会发生？不仅仅是编译器没法帮助你，你甚至不知道从哪里开始查找变化。</span>](#30 \"Not just is the property hard to find, it also creates a nightmare dependency. With fixed properties the client code has a dependency to the person class – a dependency that is easy to keep track of. If you change the name of the property the compiler will let you know, and tell you what code you need to change to fix things. But the Flexible Dynamic Property creates a dependency into some arbitrary piece of code. It could be code that belongs to a class that is not even visible to the client. What happens if someone changes the key string? What happens if someone changes the type of object they put into the key string? Not just can the compiler do nothing to help you, you don’t even know where to start looking for potential changes.\")\n\n[<span id=\"31\">`灵活的动态属性`在最极端的情况下显示了这个问题。 该属性可能是`Person`的任何客户端在设计时创建。 如果另一个人的客户端使用同一个属性，那么你就很难找到两个类之间的依赖关系。 此外属性可以在运行时通过读取文件或通过`GUI`添加。 即使在运行时，不可能发现一个人的哪些动态属性是合法的。 当然，你可以问一个人，如果它有一个度假地址的属性 - 但如果没有一个这是否意味着这一点人没有假期地址，或者是否意味着没有这样的度假地址属性？ 而如果现在没有这样的属性，那并不意味着它几秒钟后不会有。</span>](#31 \"Flexible Dynamic Properties show this problem at it’s most extreme. The property could be created at design time by any client of Person. If another client of person uses that same property you have a dependency between two classes that is very hard to find. Furthermore properties can be added at run time by reading a file or by a GUI. It is impossible to find out, even at run time, what are the legal dynamic properties for a person. True you can ask a person if it has a property for vacation address – but if there isn’t one does that mean that that person does not have a vacation address, or does it mean that there is no such property as vacation address? And if it has no such property now, that doesn’t mean it won’t have one a few seconds later.\")\n\n[<span id=\"32\">灵活动态特性的另一个关键缺点是很难替代它们进行操作。封装的一个关键优势是使用属性的客户端无法分辨它是作为对象数据的一部分存储的，还是通过方法来计算的。这是一个对象方法非常重要的一部分。它可以让你不只是一个普通的接口实现，而且在客户端不知情的情况下改变你期望的值。当存在子类型，你甚至可以有一个超类型存储属性和子类计算，反之亦然。但是，如果要使用动态属性，则只能更改存储的数据一个计算就是在通用访问器中为`动态属性`设置一个特定的数值,清单4中的代码。这个代码可能很脆弱，难以维护。</span>](#32 \"Another key disadvantage of flexible dynamic properties is that it is difficult to substitute them for operations. One of the key advantages of encapsulation is that a client that uses a property cannot tell whether it is stored as part of an object’s data, or computed by a method. This is a very important part of the object approach. It allows you not just a regular interface for both purposes, but also to change your mind without the client knowing. In the presence of subtyping you can even have a supertype store the property and subclasses compute or vice versa. However if you want to use dynamic properties the only way you can change stored data to a calculation is to put a specific trap in the general accessor for the dynamic property along the lines of Listing 4. This code is likely to be brittle and awkward to maintain.\")\n\n```java\nclass Person {\n    public Object getValueOf (String key) {\n        if (key = “vacationAddress”) \n            return calculatedVacationAddress();\n        if (key = “vacationPhone”) \n            return getVacationPhone();\n        // else return stored value…\n```\n> 列举4,用操作替换`动态属性`\n\n[<span id=\"33\">其他形式的动态属性可以帮助您解决其中一些问题，但不是全部。该`动态属性`的最大的缺点是：你失去了清晰的接口和所有的设计时间检查。`动态属性`的不同方法会让你额外写不同的检查方法。如果你需要`动态属性`，并且当然有确定的情况你这样做，那么你只需要放弃设计时间检查和明确的设计时间接口。唯一的问题是如何明确接口和有多少运行时检查。使用灵活的动态属性也会有同样的问题。</span>](#33 \"Other forms of dynamic property help you solve some of these problems but not all. The essential disadvantage of a dynamic property is that you lose the clear interface and all designtime checking. Different approaches to dynamic properties give you different abilities to do run-time checking. If you need dynamic properties, and there are certainly situations when you do, then you just have to give up design time checking and a explicit design time interface. The only question is how explicit an interface and how much checking you can do at run time. With Flexible Dynamic Properties you don’t get any of either.\")\n\n[<span id=\"34\">你经常在数据库中发现动态属性，因为改变它通常是一个痛苦数据库模式，特别是如果有大量的数据迁移。分布式的接口例如在`CORBA`中的组件也经常因为相似的原因而使用动态属性。那里是很多使用界面的远程客户，所以你不愿意改变它。在这两种情况下，编译时和运行时间之间的区别并不是设计时和生产之间的区别。</span>](#34 \"You find dynamic properties often in databases because it is often a pain to change the database schema, especially if there would be a lot of data to migrate. Interfaces of distributed components, such as in CORBA, also often use dynamic properties for a similar reason. There are a lot of distant clients using the interface, so you are reluctant to change it. In both of these cases it is not so much a distinction between compile-time and run-time, as much as a distinction between design-time and production.\") \n\n[<span id=\"35\">如果你正在做的是通过`GUI`显示和更新信息，而代码永远不会对键进行固定的引用（即，你永远不会看到像清单3那样的代码），那么使用灵活`动态属性`就非常安全。这是因为你没有设置一个任意字符串作为一个关键的讨厌的依赖。 否则，你应该考虑`动态属性`的其他方法之一。</span>](#35 \"If all you are doing is displaying and updating information via a GUI, and the code never makes a fixed reference to the keys (i.e. you never see code like Listing 3), then you are pretty safe with a Flexible Dynamic Property. This is because you have not set up a nasty dependency to some arbitrary string as a key. Otherwise you should consider one of the other approaches to dynamic properties.\")\n\n[<span id=\"36\">更多运行时检查的第一步是定义的动态属性。与`灵活动态属性`相反，定义的关键区别在于`动态属性`使用的关键字不再是一些任意的字符串，而是现在某个类的一个实例（图3）。</span>](#36 \"The first step towards more run-time checking is the Defined Dynamic Property. The key difference between a defined as opposed to a flexible dynamic property is that the key used by the dynamic property is no longer some arbitrary string, but is now an instance of some class (Figure 3).\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/7_1.png)\n\n> 图3.定义的`动态属性`\n\n[<span id=\"37\">在它的表面上使用定义的`动态属性`并没有太大的改变。事实上，代码界面几乎完全相同（清单5和清单6）。但是现在，关键字的选择不再是完全随意的，而是受到接触`类型`的限制。当然，这仍然允许您在运行时添加`属性`-只需创建一个新的关联`类型`。不过现在至少在某个地方可以找到一个潜在的`键`列表，而无需浏览程序`代码`。 在设计时添加的任何键都可以在关联类型类的加载程序中收集。您可以轻松地提供服务，以在运行时查找合法的`键`。</span>](#37 \"On the face of it using defined dynamic property does not change much. Indeed the code interface is almost identical (Listing 5 and Listing 6). But now the choice of keys is no longer entirely arbitrary, it is limited by the instances of contact type. Of course this still allows you to add properties at run time – you just create a new contact type. However now there is at least somewhere someone can look to get a list of potential keys without having to trawl through the program text. Any keys added at design time can be collected in a loader routine in the contact type class. You can easily provide services to find out the legal keys at run time.\")\n\n```java\nclass Person {\n    public Object getValueOf(ContactType key);\n    public void setValueOf(ContactType key, Object value);\n```\n> 列举5, 图3的Java接口\n```java\nclass ContactType {\n    public static Enumeration instances();\n    public static boolean hasInstanceNamed(String name);\n    public static ContactType get(String name);\n```\n> 列举6,为定义的属性类型提供的服务\n\n[<span id=\"38\">你现在可以设置一些检查来防止由于某人要求一个不存在的`动态属性`而导致的错误。我在这里抛出一个未经检查的`异常`，因为我认为`get（）`的前提条件是`客户端`为联系人类型提供合法名称。客户端总是可以通过使用`hasInstanceNamed（）`来执行这个检查，但是大多数情况下客户端使用的是类型而不是字符串。</span>](#38 \"In particular you can now set up some checking to prevent errors due to someone asking for a dynamic property that does not exist as in Listing 7. I’m throwing an unchecked exception here because I consider that the precondition for get() is that the client provides a legal name for a contact type. The client can always fulfill this responsibility by using hasInstanceNamed(), but most of the time client software will hang on to contact type objects, not strings.\")\n\n---\n\n### 定义动态属性\n- [<span id=\"39\">你如何代表一个对象的事实？</span>](#39 \"How do you represent a fact about an object?\")\n- [<span id=\"39\">提供用某种类型的实例参数化的属性。声明一个属性创建一个新类型的实例</span>](#39 \"Provide an attribute parameterized with an instance of some type. To declare a property create a new instance of that type\") \n\n---\n\n[<span id=\"40\">通常，联系人类型将保存在字典中，通常由字符串索引。这个字典可能是一个静态的联系人类型的字段，但是我更愿意把它作为注册服务器上的字段。</span>](#40 \"Usually the contact types will be held in a dictionary, usually indexed by a string. This dictionary could be a static field of contact type, but I prefer to make it a field on a Registrar.\")\n\n[<span id=\"41\">删除联系人类型仍然具有尴尬的后果。在`java`中的`动态属性`仍然会出现在那些拥有它们的对象上，除非你写了一些复杂的东西清理代码。我通常会规定永远不要删除动态属性的键。如果你想使用一个新的名字，你可以通过给它一个其他名字，但是把它放置在定义的字典中几次，很容易地为联系类型添加别名。</span>](#41 \"Removing a contact type still has awkward consequences. In java the dynamic properties would still be present on those objects that had them, unless you write some complicated clean up code. I usually make it a rule to never delete the keys for a Defined Dynamic Property. If you want to use a new name you can easily alias the contact type by giving it one name but placing it in the defining dictionary several times.\")\n\n```java\nclass ContactType {\n    public static ContactType get(String name) {\n        if (! hasInstanceNamed (name)) throw new IllegalArgumentException(“No such contact type);\n        // return the contact type\n}\n// use with\nAddress kentVactation = (Address)kent.getValueOf(ContactType.get(“VacationAddress”));\n```\n> 列举7, 检查使用合法合同类型\n\n[<span id=\"42\">在这一点上，您可能想知道这与概念建模有什么关系，毕竟我写了很多代码并讨论了设计的权衡。这是一个重要的概念问题，因为您所做的概念选择会影响您的实现选择。如果你选择在你的概念模型中使用`灵活动态属性`，你很难在你的实现中使用定义的`动态属性`或`固定属性`。你做概念模型的原因之一是探索你的用户的概念是什么固定的，什么是可变的。如果全面的灵活性是我唯一的目标，那么我会总是使用图4.通过这个，我可以模拟世界上的任何情况。但是这个模型不是很有用。它在现实项目中是没用的，它不表示什么是固定的。什么时候你正在做一个概念模型，你需要知道你的选择如何影响项目实施-否则你失去了作为建模者的作用。</span>](#42 \"At this point you might be wondering about what this has to do with conceptual modeling,after all I am writing a lot of code and discussing design trade-offs. This is an important conceptual issue because the conceptual choice you make affects the implementation options you have. If you choose to use flexible dynamic attributes in your conceptual model, you are making it pretty hard to use either defined dynamic attributes or fixed attributes in your implementation. One of the reasons you do conceptual models is to explore what is fixed and what is changeable in your users’ concepts. If total flexibility was my only goal then I would always use Figure 4. With this I can model any situation in the world. But this model is not very useful. Its uselessness comes from the fact that it does not indicate what is fixed. When you are doing a conceptual model you need to be aware of how your choices affect things in implementation – otherwise you are abdicating your responsibility as a modeler.\")\n\n[<span id=\"43\">我经常发现人们发现`动态属性`，然后想要在任何地方使用它们。灵活性如此之大，他们获得了所有的可扩展性。是的，有时候你需要`动态属性`。但永远不会忘记有一个标准。只有当你真的使用它们需要他们才用。毕竟，如果必须使用，以后很容易添加它们。</span>](#43 \"I often find that people discover dynamic properties, and then want to use them everywhere. The flexibility is so great, they get all the extendibility they ever want. Yes sometimes you need dynamic properties. but never forget there is a price. Only use them when you really need them. After all it is easy to add them later if you have to.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/8_1.png)\n> 图4.一个可以无用建模任何域的模型\n\n[<span id=\"44\">`定义动态属性`允许您更多地指出你拥有的属性。这些属性仍然是无类型的。您不能强制图3中休假地址的值是一个地址。 你可以通过使用`类型动态属性`来做些什么。</span>](#44 \"The Defined Dynamic Property allows you to indicate rather more about what properties you have. These properties are still untyped. You cannot enforce that the value of the vacation address in Figure 3 is an address. You can do something about that by using a Typed Dynamic Property.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/9_1.png)\n> 图5.为使用限定关联的类型化动态属性建模\n\n[<span id=\"45\">`类型动态属性`将类型信息添加到定义的`动态属性`（图6和6）图5）。这里的联系人类型的实例不只是指出该人是什么合适的人有，他们也表示每个`属性`的类型。 类型约束的值，沿线清单9。</span>](#45 \"A typed dynamic property adds type information to the defined dynamic property (Figure 6 and Figure 5 ). Here the instances of contact type do not just indicate what properites the person has, they also indicate the type of each property. The type constrains the value, along the lines of Listing 9.\")\n\n```java\nclass Person {\n    public Object getValueOf(ContactType key);\n    public void setValueOf(ContactType key, Object value);\nclass ContactType {\n    public Class getValueType();\n    public ContactType (String name, Class valueType);\n```\n> 列举8, 键入动态属性的操作\n\n```java\nclass Person {\n    public void setValueOf(ContactType key, Object value) {\n        if (! key.getValueType().isInstance(value))\n            throw IllegalArgumentException (“Incorrect type for property”);\n        // set the value\n```\n> 列举9, 做类型检查\n\n[<span id=\"46\">这样做类型检查可以帮助避免错误，但它仍然不像固定属性那样清晰。 检查是在运行时，而不是在设计时，因此不是有效的。但还是比没有检查好，特别是如果你习惯于强类型的环境时。</span>](#46 \"Doing type checking like this can help to avoid errors, but it still is not as clear as fixed properties. The checking is at run time, not at design time, and is therefore not as effective. Still it is better than no checking at all, particularly if you are used to a strongly typed environment.\")\n\n---\n### 类型动态属性\n- [<span id=\"47\">你如何代表一个对象的事实？</span>](#47 \"How do you represent a fact about an object?\")</br>\n- [<span id=\"47\">提供使用某种类型的实例进行参数化的属性。声明一个属性创建一个新类型的实例并指定值的类型属性。</span>](#47 \"\")\n---\n\n[<span id=\"48\">当我们深入研究`动态属性`时，我们会发现更丰富的`反射`示例，这是一种架构模式，当我们获得能够描述自身的运行时对象时，就会出现这种模式。 \\[POSA\\]比我打算在这里更详细地讨论反思。</span>](#48 \"As we delve deeper into dynamic properties, we find richer examples of reflection, an architectural pattern which appears when we get runtime objects that are able to describe themselves. [POSA] discusses reflection in much more detail than I intend to go into here.\")\n\n[<span id=\"49\">动态属性提供反射功能，即使在那些不支持反射的语言中。即使使用了一种能够提供一些反射的语言，`动态属性`的反射也更加集中 - 所以您可以提供更易于使用的接口。</span>](#49 \"Dynamic properties provide a reflective capability, even in those languages that don’t support reflection themselves. Even with a language that does provide some reflection, the reflection of dynamic properties is more focused – so you can provide an easier to use interface.\")\n\n[<span id=\"50\">使用所有这些合格的关联可能会很难遵循。另一种方式提供`类型动态属性`是使用单独的属性模式。独立属性模式的本质是它使属性成为一个对象（图6和清单10）。 你可以获得一个人的属性，然后与每个属性获得值和类型信息。</span>](#50 \"Using all of those qualified associations can get rather hard to follow. Another way of providing typed dynamic properties is to use the separate property pattern. The essence of the separate property pattern is that it makes the property an object in its own right (Figure 6 and Listing 10). You can get hold of the properties of a person, and then with each property get value and type information.\")\n\n\n---\n### 分离属性\n- [<span id=\"51\">你如何代表一个对象的属性，并允许属性记录这个属性<span>](#51 \"How do you represent a fact about an object, and allow facts to be recorded about that fact\")\n- [<span id=\"51\">为每个属性创建一个单独的对象。有关该属性的子属性可以然后被做成那个对象的属性。<span>](#51 \"Create a separate object for each property. Facts about that property can then be made properties of that object.\")\n---\n\n[<span id=\"52\">`独立属性`和限定的关联`动态属性`总是可用的两种选择。 到目前为止，我已经用限定的关联描述了灵活的和定义好的`动态属性`，因为合格的关联提供了一个更容易使用的接口。如果你愿意的话，你可以使用灵活和定义的具有单独属性的`动态属性`，尽管我不打算进入在这里。当我们了解类型化`动态属性`的复杂性时，`分离属性`风格变得更有优势。<span>](#52 \"Separate properties and qualified associations are two alternatives that are always available for dynamic properties. So far I’ve described flexible and defined dynamic properties with qualified associations because the qualified association presents a much easier interface to use.You can use flexible and defined dynamic properties with separate properties if you wish, although I’m not going to go into that here. As we get to the complexity of typed dynamic properties and onwards the separate property style becomes more of an advantage.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/10_1.png)\n> 图6.为分类的动态属性建模，使用单独的属性\n\n```java\nclass Person {\n    public Enumeration getProperties();\nclass ContactProperty {\n    public Object getValue();\n    public Class getType();\n    public ContactType getIndex();\n```\n> 列举10, 使用单独属性的类型化动态属性的操作\n\n[<span id=\"53\">`分离属性`和有限的关联不是相互排斥的。您可以轻松地同时提供两个接口。 这样你就得到了两者的优点。当然这会使接口更加复杂，所以先考虑一下用户的需求。给他们提供他们需要的接口，不要让接口变得复杂。但是，如果他们需要合格的关联和`分离属性`，那么这是一个合理的选择。我通常会使用合格的关联来获得值，但是这种类型可能没有多大意义。<span>](#52 \"Separate properties and qualified associations are not mutually exclusive. You can easily provide both interfaces at the same time. This way you get the advantages of both. Of course that makes the interface more complex, so think first about what the clients of person need.Give them the interface they need, don’t make it over complex. But if they need both qualified associations and separate properties, then that is a reasonable option. I would normally always use qualified associations for the value, but it may not make as much sense for the type.\")\n\n[<span id=\"54\">您也可以在这里考虑接口/实现的差异。在本文中，我想集中在概念上 - 它映射到软件的接口而不是实现。但值得一提的是，您可以在实现中使用单独的对象时提供合格的关联接口。如果人的客户端可以获取联系人属性对象，则只能在接口中使用单独的属性。通常隐藏`分离属性`以简化客户端的接口是有用的。</span>](# \"You can also consider the interface/implementation differences here. In this paper I want to concentrate on the conceptual – which maps to the interface of software rather than its implementation. But it is worth mentioning that you can provide a qualified association interface while using separate object in the implementation. You are only using separate properties in the interface if a client of person can obtain a contact property object. Often it is useful to hide the separate property to simplify the interface for the client.\")\n\n[<span id=\"55\">`分离属性`的一大优势是它可以让你把属性的信息放在属性中。 这些信息可能包括谁确定了属性，什么时候确定了属性等。 \\[Fowler AP§3.5\\]中的观察模式基于这个主题进行了深入的研究。如果您需要单独的属性，我在观察者模式所描述的大部分内容都值得思考。（我将观察模式看作是使用不同的属性。）</span>](#55 \"One of the big advantages of the Separate Properties is that it allows you put information about the property in the property. Such information might include who determined the property, when it was determined, and the like. The Observation pattern in \\[Fowler AP §3.5\\] build upon this theme in some depth. Much of what I’ve described there in terms of observations is worth considering if you need separate properties. \\(I see the observation pattern as a use of separate properties.\\)\")\n\n[<span id=\"56\">您可能想知道`分离属性`（模式）和限定关联（`UML`建模结构）之间的对比。 你也可以把合格的关联看作一种模式，一种联想模式。确实，我在\\[Fowler AP §15.2\\]中做了这个。我发现为设计创建模型考虑是有帮助的，因为它帮助我思考使用它们的权衡。当你将它们的模型比较清楚，如`分离属性`，这是特别有用的。当然，以模式开始的事情可以转化为建模结构，特别是如果使用`UML`构造型。历史映射模式\\[FowlerAP§15.3\\]就是一个很好的例子。我表示使用这种模式非常刻版。这是一个模式或建模？也许这是一个地板蜡和一个沙漠顶部。</span>](#56 \"You might be wondering at the contrast between separate properties \\(a pattern\\) and qualified associations \\(a UML modeling construct\\). You can also think of qualified associations as a pattern, a pattern of association. Indeed I did do this in \\[Fowler AP §15.2\\]. I have found it helpful to think of modeling constructs as patterns, for it helps me think about the trade-offs in using them. This is particularly useful when you are comparing them to something that is more clearly a pattern, such as separate property. Of course things that begin as patterns can be turned into modeling constructs, particularly if you use UML stereotypes. The historic mapping pattern \\[Fowler AP §15.3\\] is a good example of that. I represent that using the «history» stereotype. Is it a pattern or a modeling construction? Maybe it’s a floor wax and a desert topping too.\")\n\n---\n## [<span id=\"57\">具有多值关联的动态属性</span>](#57 \"Dynamic Properties with Multi-valued associations\")\n\n[<span id=\"58\">我上面的例子集中讨论了`动态属性`中每个键都有一个单一值的情况。 但是，您也可以在`动态属性`中有多个事件的情况。与人相处时，你可能会考虑一个多值的友好属性。处理这个问题有两种方法，一种简单而不令人满意，另一种令人满意，但（太）复杂。</span>](#58 \"My examples above have concentrated on cases where there is a single value for each key in the dynamic properties. But you can also have cases where there are multiple items in the dynamic properties. With Person you might consider a friends property which is multi-valued.There are two ways to deal with this, one that is simple and unsatisfying, another that is satisfying but (too) complex.\")\n\n\n[<span id=\"59\">简单的方法就是说`动态属性`的值可以是一个集合。然后我们可以像使用相同接口的其他对象一样操作它（清单11）。这很好，很简单，因为我们不需要对基本的`动态属性`模式做任何事情（这里的例子是一个类型化的`动态属性`，但是它可以和所有的模式一起工作）。然而，这并不令人满意，因为它不是真的是我们想要处理多值属性的方式。如果朋友是一个固定的属性，我们需要一个接口，如清单12所示。我不喜欢在这些情况下暴露集合。通过这样做，人员班级在我们添加或移除元素时就失去了应对的能力。这也消除了我们改变我们正在使用的集合类型的能力。</span>](#59 \"The simple approach is just to say that the value of a dynamic property can be a collection.We can then manipulate it like any other object with the same interface (Listing 11). This is nice and simple, since we don’t have to do anything to the basic dynamic property pattern.(The example here is with a typed dynamic property, but it will work with all of them.) It’s unsatisfying however because it is not really the way we would like to deal with multi-valued properties. If friends were a fixed property, we would want an interface along the lines of Listing 12. I don’t like exposing the vector in these cases. By doing so the person class loses the ability to react when we add or remove elements. It also removes our ability to change the type of collection we are using.\")\n\n```java\nPerson aPerson = new Person();\nContactType friends = new ContactType(“Friends”, Class.forName(“Vector”));\nPerson martin = new Person(“Martin”);\nmartin.setValueOf(“Friends”, new Vector());\nPerson kent = new Person(“Kent”);\nmartin.getValueOf(“Friends”).addElement(“Kent”);\nEnumeration friends = martin.getValueOf(“Friends”).elements();\n```\n> 列举11, 在类型化动态属性中使用集合值\n```java\nclass Person {\n    public Enumeration getFriends();\n    public void addFriend(Person arg);\n    public void removeFriend(Person arg);\n```\n> 列举12, 一个固定的多值属性的运作\n\n[<span id=\"60\">那么当我们有`动态属性`的时候，我们可以按照清单12的方式获得一个接口吗？ 那么，如果我们努力工作，就可以如图7所示。但这是一个复杂的模型。 通过一些巧妙的编码，我们可以隐藏接口（清单13和清单14）背后的大部分复杂性，并且使用起来相当方便（清单15）。但客户端仍然需要知道哪些属性是单值的，哪些属性是多值的，并且只有在运行时才能检查正确的使用情况。所有这些复杂性都是痛苦的-比使用`固定属性`更痛苦。我会非常不愿走这么远。</span>](#60 \"So can we get an interface along the lines of Listing 12, when we have dynamic properties? Well if we try hard enough we can, as you can see in Figure 7. But it is a complex model. With some clever coding we can hide much of that complexity behind the interface (Listing 13 and Listing 14) and make it reasonably convenient to use (Listing 15). But the client still needs to know which properties are single valued and which are multi-valued and all the checking for the right usage can only occur at run time. All this complexity is painful – a lot more painful than using fixed properties. I would be very reluctant to go this far.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/12_1.png)\n\n> 图7.满足对多值动态属性的过度支持\n\n```\nclass Person\n    public Object getValueOf(ContactType key);\n    public Enumeration getValuesOf(ContactType key);\n    public void setValueOf(ContactType key, Object newValue);\n    public void addValueTo(ContactType key, Object newValue);\n    public void removeValueFrom(ContactType key, Object newValue);\n    \nclass ContactType\n    public Class getValueType();\n    public boolean isMultiValued();\n    public boolean isSingleValued();\n    public ContactType(String name, Class valueType, boolean isMultiValued);\n```\n> 列举13, 图7的操作\n\n```java\nclass Person\n    public Object getValueOf(ContactType key) {\n        if (key.isMultiValued())\n            throw IllegalArgumentException(“should use getValuesOf()”)\n        //return the value\n    }\n    \n    public void addValueTo(ContactType key, Object newValue) {\n        if (key.isSingleValued())\n            throw IllegalArgumentException(“should use setValueOf”);\n        if (! key.getValueType().isInstance(newValue))\n            throw IllegalArgumentException (“Incorrect type for property”);\n        //add the value to the collection\n```\n> 列举14, 检查清单13的操作的使用情况\n\n```java\nfax = new ContactType(“fax”, Class.forName(“PhoneNumber”), false);\nPerson martin = new Person(“martin”);\nmartin.setValueOf(“fax”, new PhoneNumber(“123 1234”);\nmartinFax = martin.getValueOf(“fax”);\nfriends = new ContactType (“friends”, Class.forName(“Person”), true);\nmartin.addValueTo(“friends”, new Person(“Kent”));\n```\n> 列举15, 使用清单13的操作\n\n[<span id=\"61\">这种复杂性似乎是因为我们既有多值也有单值的`属性`。处理这些复杂性有一个内在的不同的接口，因此复杂性也是如此。当然，我们可以得到只有多值属性的情况。一个常见的模式是类型关系模式（图8）。在这里，一个人可能与许多不同公司有不同的雇佣关系（甚至与同一家公司有多个）。</span>](#61 \"This complexity appears because we have both multi valued and single-valued properties.There is an inherently different interface to dealing with these, hence the complexity. Of course we can get situations with only multi-valued properties. A common pattern for this is the Typed Relation ship pattern \\(Figure 8\\). Here a person may have number of different employment relationships with a number of different companies \\(or even several with the same company\\).\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/13_1.png)\n> 图8.类型关系的一个例子\n\n```java\nclass Employment {\n    public Employment (Person person, Company company, Employment Type type);\n    public void terminate()\n    …\n}\nclass Person {\n    public Enumeration getEmployments();\n    public void addEmployment (Company company, EmploymentType type);\n```\n> 列举16, 图8的`Java`接口\n\n[<span id=\"62\">正如我们想到的那样，很快就会发现，这与使用多值的`定义动态属性`非常类似，但是使用`分离属性`而不是合适的关联来表示。（或者说这句话太过分了？）实际上，图9显示了在这种情况下如何使用`定义动态属性`接口。这种事物的观点是真实的，所以一个类型化的关系不会添加任何新的模式语言。 但是类型化关系在建模圈子中是一种非常普遍的模式，很多人可能没有意识到它与`动态属性`模式的联系。</span>](#62 \"As we think of this, it should soon occur to you that this is really very similar as using a Defined Dynamic Property that is multi-valued, but expressed using a Separate Property rather than a Qualified Association. (Or is that sentence just too much of a mouthful?) Indeed Figure 9 shows how you can use a Defined Dynamic Property interface in this situation. This view of things is true, and so a typed relationship doesn’t add anything that new to this pattern language. But typed relationship is a very common pattern in modeling circles, and many may not realize its connection with the dynamic properties patterns.\")\n\n---\n### 类型关系\n- [<span id=\"63\">你如何表示两个对象之间的关系？（你如何表示多值动态属性？）</span>](#63 \"How do you represent a relationship between two objects?(How do you represent multi-valued dynamic properties?)\")\n- [<span id=\"63\">为两个对象之间的每个链接创建一个关系对象。 给关系对象一个类型对象来表示关系的含义。（类型对象是多值属性的名称。）</span>](#63 \"Create a relationship object for each link between the two objects. Give the relationship object a type object to indicate the meaning of the relationship.(The type object is the name of the multi-valued property.)\")\n---\n\n[<span id=\"64\">类型化关系的优势在于它可以很好地处理双向关系，并且为关系添加属性提供了一个简单的点。（当然，后者是一个`分离属性`的特征。）你可以在这个模式中添加一个复杂的知识级别，跟类型化的`动态属性`一样。但是，您应该考虑接口的影响。类型化关系迫使用户意识到雇佣对象，因为确实使用`分离属性`。事实上，人们倾向于将属性客体本身看作完全成熟的客体，而不是人（或公司）的一些属性。 但是合格的关联通常可以为许多目的提供更简单的接口。所以每当你看到，或者你正在考虑使用，一个类型的关系;你还应该考虑合格的关联形式。您可以在任何一个方向或两个方向上使用它，也可以将其用于除了键入的关系之外，或者除此之外。。</span>](#64 \"The strengths of typed relationship are that it works well with bi-directional relationships, and that it provides a simple point to add properties to the relationship. (The latter, of course, is a feature of separate properties.) You can add a sophisticated knowledge level to this pattern,along much the same lines as typed dynamic properties. However you should consider the interface implications. Typed relationships force users to be aware of the employment object,as indeed does any use of separate properties. Indeed people tend to see the property object as a full fledged object in its own right, rather as some property of the person (or company). But the qualified association can often provide a simpler interface for many purposes. So whenever you see, or you are considering using, a typed relationship; you should also consider the qualified association form. You can use it in either or both directions, and use it either in addition to the typed relationship, or in addition to it.\")\n\n[<span id=\"65\">但是这两种模式并不完全相同。如果使用图9，则表示雇主只能是某种特定工种的雇主。图8在图表中没有这样的约束，尽管大多数建模者会暗示这样的约束，除非雇用具有附加属性。当然，就业通常具有附加属性。一个常见的例子是日期范围（如问责制\\[Fowler，AP§2.4\\]）。</span>](#65 \"The two models are not quite identical however. If you use Figure 9 you are indicating that an employer can only be an employer once for a particular employment type. Figure 8 has no such constraint in the diagram as it stands, although most modelers would imply such a constraint,unless the employment had additional attributes. Often, of course, the employment does have the additional attributes. A common example is a date range (as in accountability \\[Fowler, AP §2.4\\].\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/14_1.png)\n> 图9.使用与图8相同情况的合格关联\n\n```java\npublic Person {\n    public void addEmployer (Company company, EmploymentType type);\n    public Enumeration getEmployersOfType (EmploymentType type);\n```\n> 列举17, 图9的接口\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/15_1.png)\n> 图10.键入的关系，显示通常假定的约束\n\n---\n## 不同种类的人\n[<span id=\"66\">到目前为止，我们假设我们只有一种人，我们为一个人定义的任何属性都是所有人的有效属性。但是，您确实会遇到不同类型的情况，以及不同类型的不同属性。管理人员可能需要一个管理部门的属性，执行人员可能需要一个属性作为高管卫生间的关键号码（在一个不是90年代的公司）。</span>](# \"So far we are assuming we only have one kind of person, and any properties we define for a person are valid properties for all people. However you do get situations where you have different types, and different properties for different types. A manager may need a property for department managed, an executive may need a property for executive washroom key number (in a not very 90’s company).\")\n\n[<span id=\"67\">别担心，我听到“使用继承愚蠢”的呼声。事实上，这是常用于分类的情况之一。实际上，这个过程比这个要复杂得多，特别是当你开始思考一个人可能扮演的角色时。我已经写了关于建模角色\\[Fowler roles\\]的主题的全文。角色模式考虑了我们对操作变化和`固定属性`变化感兴趣的情况。但在这种情况下，我想探索不同类型的对象与`动态属性`的概念的重叠。这种重叠会导致`动态属性知识级别模式`（一个对我的品味有点太大的名字）。</span>](#67 \"Don’t worry, I hear the cries of “use inheritance stupid”. Indeed this is one of the situations that is often used for subtyping. Actually it gets rather more involved than that, particularly when you start thinking of the various roles a person may play. I’ve written a whole paper on the subject of modeling roles \\[Fowler roles\\]. The roles patterns consider cases where we are interested in variations in operations and in variations of fixed properties. But in this case I want to explore the overlap of different kinds of object with the notion of dynamic properties. This overlap begets the dynamic properties knowledge level pattern \\(a name that is getting a little too large for my taste\\).\")\n\n[<span id=\"68\">为了使用这个模式，我们给`Person`一个`Person`类型的`类型对象`。然后，我们可以说，人物类型与联系人类型的关联指示哪些人物拥有该人物类型可用的属性。 如果我们尝试使用或要求某人的属性，则可以使用人员类型来检查使用情况是否正确。</span>](#68 \"To use the pattern we give the Person a type object of Person Type. We can then say that the person type’s association to contact type indicates which properties are available for people who have that person type. If we try to use, or ask for, a property on a person the person type can be used to check that the usage is correct.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/16_1.png)\n> 图11.动态属性知识水平\n\n```java\nclass Person {\n    public Object getValueOf(ContactProperty key);\n    public boolean hasProperty(ContactProperty key);\n    public void setValueOf(ContactProperty key, Object newValue);\nclass PersonType {\n    public boolean hasProperty(ContactProperty key);\n    public Enumeration getProperties();\n```\n> 列举18, 图11的操作\n```java\nclass Person {\n    public Object getValueOf (ContactProperty key) {\n        if (!hasProperty(key))\n            throw IllegalArgumentException(“Innapropriate key”);\n            //return the value\n```\n> 列举19, 检查具有动态属性知识级别的适当的密钥\n\n[<span id=\"69\">当我们开始使用这样的知识水平时，单独的属性变得越来越重要。 在这种情况下，我们很快就会开始停止将其视为一种属性，而不是把它作为一个对象。 什么是属性和什么是非属性之间的分界线是非常模糊的，这实际上取决于你对事物的看法。</span>](#69 \"As we start to use a knowledge level like this, the separate property becomes more and more important. In this case we soon start to stop thinking of it as a property, rather as some object in its own right. The dividing line between what is a property and what isn’t is very blurred,and it really depends upon your view of things.\")\n\n---\n### 动态属性知识水平\n- [<span id=\"70\">你如何执行某些类型的对象具有某些特性使用动态属性？</span>](#70 \"How do you enforce that certain kinds of objects have certain properties when you use dynamic properties?\")\n- [<span id=\"70\">创建一个知识级别来包含什么类型的对象使用的规则哪些类型的属性</span>](#70 \"Create a knowledge level to contain the rules of what types of objects use which types of properties\")\n---\n\n---\n\n## [<span id=\"71\">动态属性的几个小结</span>](#71 \"Some Summary Points on Dynamic Properties\")\n\n[<span id=\"72\">各种各样的`动态属性`构成了本文的大部分内容。但我必须重申，`动态属性`是我想要尽可能避免的。`动态属性`带来了很大的负担：接口不够清晰，使用操作而不是存储数据的困难。只是有时你别无选择，只能使用它们，在这种情况下，这篇论文应该有用的给你提供一些替代方案和之间的权衡。<span>](#72 \"Various kinds of dynamic properties make up the bulk of this paper. But I have to reiterate that dynamic properties are something I like to avoid if at all possible. Dynamic properties carry a heavy burden of disadvantage: the lack of clarity of the interface, the difficulty in using operations instead of stored data. It is just that sometimes you have little choice but to use them, and it is on these occasions that this paper should come in useful to give you some alternatives and the trade-offs between then.\")\n\n[<span id=\"73\">`动态属性`出现在改变接口有困难的地方。那些使用像他们这样的分布式对象系统的人，至少在原则上是这样，因为它允许他们在不改变客户端的情况下改变接口 - 而在分布式系统中，可能很难找到你的客户端。但是你仍然应该警惕这样做。每当你为`动态属性`添加一个新的键到你的键上，你都在有效地改变接口。所有的`动态属性`都在替换运行时检查的编译时间检查。你仍然有同样的问题保持你的客户端最新。</span>](#73 \"Dynamic properties appear most where there are difficulties in changing the interface. People who work with distributed object systems like them, at least in principle, because it allows them to alter an interface without compromising clients – and in a distributed system it may be very difficult to find who your clients are. But you should still be wary of doing this. Any time you add a new key to your keys for the dynamic properties you are effectively changing the interface. All the dynamic properties are doing is replacing a compile time check for a runtime check. You still have the same issues of keeping your clients up to date.\")\n\n[<span id=\"74\">`动态属性`的另一个常见用途是在数据库中。这里不仅仅是由于接口的问题，而且由于数据迁移的问题（如果不是主要的话）。更改数据库模式不仅会导致对使用该模式的程序进行潜在更改，还可能会强制您执行复杂的数据转换练习。同样，`动态属性`允许您在不更改数据库模式的情况下更改内容，从而不需要进行任何数据转换。在大型数据库中，这可能是一个引人注目的优势。</span>](#74 \"Another common use of dynamic properties is in databases. Here it is not just due to the problem of interface, but also (if not primarily) due to problems of data migration. Changing a database schema does not only cause a potential change to programs using the schema, it also may force you to do a complicated data conversion exercise. Again dynamic properties allow you to change things without changing the database schema, and thus not needing to do any data conversion. In large databases this can be a compelling advantage.\")\n\n---\n\n## [<span id=\"75\">一个你不知道的有关于属性的](#75 \"A property you don’t know about\")\n\n[<span id=\"76\">我想在本文中添加一个最后一个重要的属性。这是一个没有意识到属性的对象的情况。当属性被另一个对象所隐含，以及与有关的方式时，就会发生这种情况。</span>](#76 \"There is a last but important kind of property that I want to add to this paper. This is the case of an object having a property without realizing it. This occurs when the property is implied by another object and the way it relates to you.\")\n\n[<span id=\"77\">考虑一个管理数据库连接的对象。它会创建一堆数据库连接，并在请求时将它们传递给其他对象。当一个客户端连接完成后，可以将其返回给管理员，以供其他人使用。您可以通过向连接添加`isBusy`属性来完成此操作。图12显示了一个使用外部属性的替代方案。连接是空闲的还是繁忙的是由连接管理器中的哪个集合决定的。如果你有一个连接，你不能问它是空闲的还是忙的，而是你必须要求连接管理器是否特定的连接空闲或忙碌。你可以这样说，因为组合关联是一种方式。连接不知道连接管理器。 从某种意义上来说，空闲/忙碌状态根本不是连接的属性。但至少从某种意义上来说，这就是我提到它的原因。</span>](#77 \"Consider an object that manages database connections. It creates a bunch of database connections and hands them out to other objects when requested. When a client is done with the connection it can return it to the manager to be available for someone else. You could do this by adding an isBusy property to the connection. Figure 12 shows an alternative using an extrinsic property. Whether the connection is free or busy is determined by which collection in the connection manager it lies in. If you had a connection, you could not ask it whether it is free or busy, instead you would have to ask the connection manager whether a particular connection is free or busy. You can tell this because the composition associations are one way.The connection has no knowledge of the connection manager. In a sense the free/busy status isn’t a property of connection at all. Yet at least in some sense it is, which is why I mention it.\")\n\n![image](https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/17_1.png)\n> 图12.使用外部收集属性\n\n[<span id=\"78\">在纯粹的概念模型意义上，这种模式没有多大意义。但是，为什么你可能想要使用它，有实际的实施原因。如果您希望对此属性进行的所有更改都通过连接管理器进行，则此方法可以清楚地说明这一点。特别是当你想让连接管理器给你一个自由的连接，而你不关心哪一个时，这是一种自然的风格。</span>](#78 \"In a pure conceptual modeling sense this pattern does not make much sense. But there are practical implementation reasons why you may want to use it. If you want all changes to this property to go through a connection manager, then this approach makes this clear. In particular this is a natural style when you want the connection manager to give you a free connection and you don’t care which one.\")。\n\n[<span id=\"79\">使用外部属性的另一个原因是如果连接类是由其他人提供的，并且您不能更改其接口。 你可以添加新的属性而不用改变连接类。</span>](#79 \"Another reason to use an extrinsic property is if the connection class is provided by someone else and you can’t change its interface. You can add the new property without changing the connection class at all.\")\n\n---\n### 外在属性\n- [<span id=\"80\">你如何给对象一个属性而不改变它的接口？</span>](#80 \"How do you give an object a property without changing its interface?\")\n- [<span id=\"80\">让另一个对象负责知道这个属性。</span>](#80 \"Make another object responsible for knowing about the property.\")\n\n---\n[<span id=\"81\">`外在属性`的一个大问题是它会导致一个尴尬和不自然的接口。通常如果你想知道一些东西，你只要找到合适的对象并提出问题。在这里您需要找到保存外部集合的对象，并询问有关适当的对象。在某些情况下，比如这个，似乎是合理的。但大多数情况下，我宁愿让对象了解自己的属性（在这种情况下，我称之为`内在属性`）。</span>](#81 \"The big problem with the extrinsic property is that it leads to an awkward and unnatural interface. Usually if you want to know something, you just find the appropriate object and ask it. Here you need to find the object that holds the external collection, and ask it about the appropriate object. In some circumstances, such as this one, it seems reasonable. But most of the time I would prefer to let objects know about their own properties (in which case I call them intrinsic properties).\")\n\n---\n\n## 最后的想法\n\n[<span id=\"82\">当我完成本文时，我觉得需要再次敦促你不要使用我在这里写的东西，除非你真的需要它。`固定属性`的好处是伟大的。如果你需要别的东西，那么我希望这篇文章能给你一些想法和一些指导。但`固定属性`永远是你的第一选择。</span>](#82 \"As I finish this paper, I feel the need again to urge you not to use what I’ve been writing about here unless you really do need it. The advantages of fixed properties are great. If you need something else, then I hope this paper gives you some ideas and some guidance. But fixed properties are always your first choice.\")\n\n---\n\n## 参考\n\n[Fowler, AP] Fowler, Martin. Analysis Patterns: Reusable Object Models, Addison-1997\n[Fowler, roles] Fowler, Martin. Dealing with Roles,http://www.awl.com/cseng/titles/89542-0/awweb.htm\n[POSA] Buschman et al, Pattern Oriented Software Architecture, Wiley 1997\n\n\n----\n## 原文地址：http://martinfowler.com/apsupp/properties.pdf","slug":"dealing-with-properties","published":1,"updated":"2017-12-05T13:03:38.489Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjayvjb3b003t4kvnubbi9dja","content":"<h1 id=\"属性的处理-初步校对\"><a href=\"#属性的处理-初步校对\" class=\"headerlink\" title=\"属性的处理(初步校对)\"></a>属性的处理(初步校对)</h1><hr>\n<p><em>Martin Fowler</em> (《重构：改善既有代码的设计》作者)  </p><p><br>fowler@acm.org</p>\n<hr>\n<p><a href=\"#1\" title=\"Almost every object you create needs properties: some statement about the object. A person may have a height, a company may have a CEO, a flight may have a flight number. There are a number of ways to model properties. In this article I will explore some of these ways and when you may want to use them. I’ve often seen patterns touch on  this subject, but they usually only cover part of the picture. Here I want to cover the issue  more broadly to give a better discussion of the options.\"><span id=\"1\">你创建的每个对象几乎都需要属性：关于对象的一些声明。一个人可能有一个身高属性，一个公司可能有一个CEO，一个航班可能有一个航班号。有很多方法来创建属性。在这篇文章中，我将探讨其中一些你经常需要用到的方法。我经常看到涉及到这个话题的图案，但他们通常只涉及一部分。在这里，我想更广泛地讨论这个问题，以便更好地讨论这些选项。</span></a></p>\n<p><a href=\"#2\" title=\"The most common, and the simplest case is to use a Fixed Property , that is just declare the attribute on the class. In the vast majority of cases that is all you need to do. Fixed properties begin to fail when you have a large amount of them, or you need to change them frequently, possibly at run time. These forces lead you to the varieties of Dynamic Property . All dynamic properties have the quality of a parameterized attribute where to query a property you need to use a query method with a parameter. The simplest of these is the Flexible Dynamic Property where the parameter is just a string. This makes it easy to define and use properties, but is difficult to control. If you need that control you can use a Defined  Dynamic  Property  where  your parameters must be instances of some class. A further step of control allows you to strongly type your dynamic property with a Typed Dynamic Property .\"><span id=\"2\">最常见和最简单的情况是使用<code>固定属性</code>，即只声明类的属性。在绝大多数情况下，你只需要使用<code>固定属性</code>。在有大量固定属性或者需要频繁修改时，使用<code>固定属性</code>容易出错。这种情况下你可能会使用<code>动态属性</code>。所有的<code>动态属性</code>都有一个参数化属性的特性：你需要一个带参的方法来查询一个属性。当参数只是一个字符串,最简单的是<code>灵活的动态属性</code>。这样定义和使用属性会比较容易，但难以控制。如果你需要使用<code>动态属性</code>，在你的参数必须是一个类的实例的情况下。使用类型<code>动态属性</code>来增强对<code>动态属性</code>的控制。</span></a></p>\n<p><a href=\"#3\" title=\"As your property structures get more involved, you should consider making them Separate Properties , which makes the property an object in its own right. If you need multi-valued properties you can consider a Typed Relationship . The most complex example in this theme is where you want rules to control what kinds of objects have what kinds of properties – this needs a Dynamic Property Knowledge Level .\"><span id=\"3\">随着您的属性结构变得越来越复杂，您应该考虑将它们设置为“单独属性”，把一些属性综合起来创建一个对象。如果你需要多值属性，你可以考虑集合。在这篇文章中最复杂的例子是你想要规则来控制什么类型的对象具有什么样的属性 - 这需要一定的<code>动态属性</code>知识水平。</span></a></p>\n<p><a href=\"#4\" title=\"Another variety of property entirely is the Extrinsic Property , a pattern you use if you want to give an object a property, but not alter its interface to support it.\"><span id=\"4\">另一种属性完全是<code>外部属性</code>（Extrinsic Property），如果你想使用接口给一个对象创建一个属性，那么这就是你需要使用的一种模式。<span></span></span></a></p>\n<table>\n<thead>\n<tr>\n<th><a href=\"#5\" title=\"Problem\"><span id=\"5\">问题</span></a></th>\n<th><a href=\"#5\" title=\"Solution\"><span id=\"5\">答案</span></a></th>\n<th><a href=\"#5\" title=\"name\"><span id=\"5\">名称</span></a></th>\n<th><a href=\"#5\" title=\"page\"><span id=\"5\">页码</span></a></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#6\" title=\"Give it a specific attribute for that fact. This will translate to a query method and probably an update method in a programming language.\"><span id=\"6\">在编程语言里，当使用一个特定的属性，它需要查询或者更新。<span></span></span></a></td>\n<td><a href=\"#固定属性\" title=\"Fixed Property\"><code>固定属性</code></a></td>\n<td>4</td>\n</tr>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#7\" title=\"Provide a parameterizable attribute which can represent different properties depending on the parameter\"><span id=\"7\">提供可参数化的属性，可以根据参数表示不同的属性</span></a></td>\n<td><a href=\"#动态属性\" title=\"Dynamic Property\"><code>动态属性</code></a></td>\n<td>4</td>\n</tr>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#8\" title=\"Provide an attribute parameterized with a string. To declare a property just use the string.\"><span id=\"8\">提供一个用字符串参数化的属性。声明一个属性只是使用字符串.</span></a></td>\n<td><a href=\"#灵活的动态属性\" title=\"Flexible Dynamic Property\"><code>灵活的动态属性</code></a></td>\n<td>5</td>\n</tr>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#9\" title=\"Provide an attribute parameterized with an instance of some type. To declare a property create a new instance of that type\"><span id=\"9\">提供用某种类型的实例参数化的属性。要声明属性，请创建该类型的新实例</span></a></td>\n<td><a href=\"#定义动态属性\" title=\"Defined Dynamic Property\"><code>定义动态属性</code></a></td>\n<td>7</td>\n</tr>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#10\" title=\"Provide an attribute parameterized with a instance of some type. To declare a property create a new instance of the type and specify the value type of the property.\"><span id=\"10\">提供使用某种类型的实例进行参数化的属性。要声明属性，请创建该类型的新实例并指定该属性的值类型.</span></a></td>\n<td><a href=\"#类型动态属性\" title=\"Typed Dynamic Property\"><code>类型动态属性</code></a></td>\n<td>9</td>\n</tr>\n<tr>\n<td><a href=\"#11\" title=\"How do you represent a fact about an object, and allow facts to be recorded about that fact\"><span id=\"11\">你如何表示一个对象的属性，并允许对象的属性也具有属性</span></a></td>\n<td><a href=\"#11\" title=\"Create a separate object for each property. Facts about that property can then be made properties of that object.\"><span id=\"11\">为每个属性创建一个单独的对象。 关于那个属性的详细可以作为这个对象的的属性.<span></span></span></a></td>\n<td><a href=\"#分离属性\" title=\"Separate Properties\"><code>分离属性</code></a></td>\n<td>10</td>\n</tr>\n<tr>\n<td><a href=\"#12\" title=\"How do you represent a relationship between two objects?(How do you represent multi-valued dynamic properties?)\"><span id=\"12\">你如何表示两个对象之间的关系（如何表示多个值动态属性？）</span></a></td>\n<td><a href=\"#12\" title=\"Create a relationship object for each link between the two objects. Give the relationship object a type object to indicate the meaning of the relationship. (The type object is the name of the multi-valued property.)\"><span id=\"12\">为两个对象之间的每个链接创建一个关系对象。 给关系对象一个类型对象来表示关系的含义。 （类型对象是多值属性的名称。）<span></span></span></a></td>\n<td><a href=\"#类型关系\" title=\"Typed Relationship\"><code>类型关系</code></a></td>\n<td>14</td>\n</tr>\n<tr>\n<td><a href=\"#13\" title=\"How do you enforce that certain kinds of objects have certain properties when you use dynamic properties?\"><span id=\"13\">当你使用动态属性时，你如何强制某些类型的对象具有某些属性？</span></a></td>\n<td><a href=\"#13\" title=\"Create a knowledge level to contain the rules of what types of objects use which types of properties\"><span id=\"13\">创建知识级别以包含哪些类型的对象使用哪些类型的属性的规则</span></a></td>\n<td><a href=\"#动态属性知识水平\" title=\"Dynamic Property Knowledge Level\"><code>动态属性知识水平</code></a></td>\n<td>16</td>\n</tr>\n<tr>\n<td><a href=\"#14\" title=\"How do you give an object a property without changing its interface?\"><span id=\"14\">你如何给一个对象新增一个属性而不改变它的接口？</span></a></td>\n<td><a href=\"#14\" title=\"Make another object responsible for knowing about the property\">使用另一个对象负责属性</a></td>\n<td><a href=\"#外在性质\" title=\"Extrinsic Property\"><code>外在性质</code></a></td>\n<td>18</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2 id=\"什么是属性\"><a href=\"#什么是属性\" class=\"headerlink\" title=\"什么是属性\"></a>什么是属性</h2><p><a href=\"#15\" title=\"This is not a silly question. When people bandy around the term ‘property’ they can mean many different things. To some a property is an instance variable or data member of a class. To others they are kind of thing that goes in a box in a UML diagram. So before I start this article I have to define my usage of the word.\"><span id=\"15\">这不是一个愚蠢的问题。当人们使用“属性”这个词时，他们可能有很多不同的含义。对某些属性来说，是一个类的实例变量或数据成员。对于其他人来说，它们就像<code>UML</code>图中的一个盒子一样。所以在我开始这篇文章之前，我必须定义这个词的用法。</span></a></p>\n<p><a href=\"#16\" title=\"For my purposes a property is some information about an object that you can obtain by a query method. It may be a value type (such as int in Java) or an instance of a class. You may be able to update the property, but not necessarily. You may set the property when you create the object, but again not necessarily. The property may be stored as an instance variable or data member, but it does not have to be. The class may get the value from another class, or go through some further calculation. I am, therefore, taking an interface view of properties rather than an implementation view. This is a regular habit of mine in design: for me the essence of object-orientation is that you separate interface from implementation, and make interface more important.\"><span id=\"16\">为了我的目的，一个属性是关于一个可以通过查询方法获得的对象的一些信息。它可能是一个值类型（如<code>Java</code>中的<code>int</code>）或一个类的实例。您可能能够修改该属性，但不一定。您可以在创建对象时设置属性，但不一定。该属性可以作为实例变量或数据成员存储，但不一定是。班级可能会从另一个班级获得值，或者经过一些进一步的计算。因此，我采用属性的接口视图而不是实现视图。这是我在设计中经常使用的习惯：对于我来说，面向对象的本质是将接口与实现分开，并使接口更加重要。</span></a></p>\n<hr>\n<h2 id=\"固定属性\"><a href=\"#固定属性\" class=\"headerlink\" title=\"固定属性\"></a><span id=\"固定属性\">固定属性</span></h2><p><a href=\"#17\" title=\"Fixed properties are by far the most common kind of properties that we use. A Fixed Property is declared in the interface of the type. It gives the name and the return type for the property. Figure 1 shows properties modeled in UML, Listing 1 shows how the query methods for these properties would show up in Java. I’ve picked the example to show that this discussion applies equally well to UML attributes as well as UML associations. It also applies to calculated values (age) as well as those that are reasonably stored data (date of birth).\"><span id=\"17\"><code>固定属性</code>是我们使用的最常见的属性。 固定属性在类型的接口中声明。 它给出了属性的名称和返回类型。 图1显示了使用<code>UML</code>建模的属性，示例1显示了这些属性的查询方法如何在<code>Java</code>中使用。 我已经选择了这个例子来说明这个讨论同样适用于<code>UML</code>属性和<code>UML</code>关联。 它也适用于计算值（年龄）以及那些合理存储的数据（出生日期）。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/3_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图1.使用<code>固定属性</code>建模的人员<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Date <span class=\"title\">getDateOfBirth</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getAge</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Quantity <span class=\"title\">getHeight</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Company <span class=\"title\">getEmployer</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setDateOfBirth</span> <span class=\"params\">(Date newDateOfBirth)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setEmployer</span> <span class=\"params\">(Company newEmployer)</span></span>;</div></pre></td></tr></table></figure></p>\n<p>列举,图1的<code>java</code>操作</p>\n</blockquote>\n<p><a href=\"#18\" title=\"Query operations usually follow some naming convention. In smalltalk you always name the query after the name of the property (dateOfBirth). C++ never had a fixed convention, some people just named it after the property, others used the &#39;get&#39; convention (getDateOfBirth). Java started with no particular convention but now most people adopt the get convention. Personally I find the ‘get’ irritating when you read code so I would prefer to leave it out, but the Java style is to use the get, so I use it now. You should ensure that you follow the same convention whether you are using stored or derived values. Clients of the person class should not know or care whether age is stored or derived.\"><span id=\"18\">查询操作通常遵循一些命名约定。在<code>程序语言</code>中，您总是在属性名称（<code>dateOfBirth</code>）之后命名查询。 <code>C++</code>从来没有一个固定的约定，有些人只是在属性后面命名，而另一些人则使用<code>get</code>约定（<code>getDateOfBirth</code>）。 <code>Java</code>从没有特别的约定开始，但现在大多数人都采用<code>get</code>约定。就我个人而言，当您阅读代码时，我发现<code>get</code>令人恼火，所以我宁愿忽略它，但<code>Java</code>风格是使用<code>get</code>，所以现在就使用它。无论您使用的是存储值还是派生值，都应确保遵循相同的约定。使用<code>Person</code>的客户端不应该知道或关心年龄是否存储或派生。</span></a></p>\n<p><a href=\"#19\" title=\"The presence of modifier operations depends on whether you want the values to be directly modified. If you do then you will provide a modifier operation according to some naming scheme, eg setDateOfBirth(Date). Different conventions exist as to the return value. You can return the new value of the property (Date), the object being modified (Person), or nothing (void). I prefer to return void on modifiers, to help make clear the difference between a modifier and a query.\"><span id=\"19\"><code>修饰符</code>操作的存在取决于您是否希望直接修改值。如果你这样做，那么你会根据一些命名方案，例如<code>setDateOfBirth</code>（<code>Date</code>）提供一个修饰符操作。对于<code>返回值</code>存在不同的约定。你可以返回属性的新值（<code>Date</code>），被修改的对象（<code>Person</code>），或者什么都没有（<code>void</code>）。我更愿意在修饰符上返回<code>void</code>，以帮助明确修饰符和查询之间的区别。</span></a></p>\n<hr>\n<h3 id=\"固定属性-1\"><a href=\"#固定属性-1\" class=\"headerlink\" title=\"固定属性\"></a>固定属性</h3><p>  <a href=\"#20\" title=\"How do you represent a fact about an object?\"><span id=\"20\">你如何代表一个对象的事实？</span></a></p>\n<ul>\n<li><a href=\"#20\" title=\"Give it a specific attribute for that fact. This will translate to a query method and probably an update method in a programming language.\"><span id=\"20\">给它一个这个事实的特定属性。这将转化为查询方法，并可能是一种编程语言的更新方法。</span></a><br><br><a href=\"#20\" title=\"Clear and explicit interface\"><span id=\"20\">接口很清晰明确</span></a><br><br><a href=\"#20\" title=\"Can only add properties at design time\"><span id=\"20\"><font color=\"red\">只能在设计时添加属性</font></span></a><br></li>\n</ul>\n<hr>\n<p><a href=\"#21\" title=\"You may wish to provide arguments to the constructor for properties. Typically you want to set enough properties in the constructor so that you construct a well-formed class.\"><span id=\"21\">您可能希望为属性的<code>构造函数</code>提供参数。通常，您要在<code>构造函数</code>中设置足够的属性，以便构建格式良好的类。</span></a></p>\n<p><a href=\"#22\" title=\"Properties that you don’t want to be modified directly should not have a modifier operation.This might be the case for the age property, if you only want that determined by calculation from the date of birth. It also would be the case for an immutable property: one that does not change for the lifetime of the class. When you think of making a property immutable, remember to take human error into account. While the date of birth is an immutable property for humans in the real world, you might make a mistake typing into a computer system, and thus make it mutable. Software often models what we know of the world, rather than the world itself.\"><span id=\"22\">不想直接修改的属性不应该有<code>修饰符</code>操作。如果您只希望从出生之日起计算，那么年龄属性可能就是这种情况。对于一个不可改变的<code>属性</code>也是如此：一个在类的生命周期中不会改变的<code>属性</code>。当你想使<code>属性</code>不可改变时，请记住考虑到人为错误。虽然出生日期对于现实世界中的人类来说是不可改变的<code>属性</code>，但是您可能会在输入到计算机系统时出现错误，从而使其变得可变。软件常常模拟我们所知道的世界，而不是世界本身。</span></a></p>\n<p><a href=\"#23\" title=\"Fixed properties are by far the most common form of properties that you will come across.They are that way for good reasons: they are simple and convenient to use. You should use fixed properties as your first and most common choice for representing properties. In this paper I am going to give a lot of alternatives to fixed properties. For certain situations these alternatives are better, but most of the time they are not. Remember that as we go through the alternatives. I use fixed properties 99% of the time. Other varieties are more complex, which is why I&#39;m spending most of this paper on them — and also why I prefer not to use them!\"><span id=\"23\"><code>固定属性</code>是迄今为止您将遇到的最常见的<code>属性</code>形式。他们这样做是有原因的：他们使用简单方便。您应该使用固定属性作为表示属性的第一个也是最常见的选择。在本文中，我将给出许多固定属性的替代方案。在某些情况下，这些替代品更好，但大多数情况下不是。请记住，当我们经历的选择。我99％的时间使用固定的属性。其他品种更为复杂，这就是为什么我把这篇论文的大部分花费在他们身上 - 也是为什么我不愿意使用它们！</span></a></p>\n<h2 id=\"动态属性\"><a href=\"#动态属性\" class=\"headerlink\" title=\"动态属性\"></a><span id=\"动态属性\">动态属性</span></h2><p><a href=\"#24\" title=\"The key thing about fixed properties is that you fix them at design time, and all instances at run time must follow that decision. For some problems this is an awkward restriction. Imagine we are building a sophisticated contact system. There are some things that are fixed: home address, home and work phone, email. But they’re all sorts of little variations. For someone you need to record their parent’s address, another has a day work and evening work numbers.It’s hard to predict all these things in advance, and each time you change the system you have to go through compiling, testing, and distribution. To deal with this you need to use dynamic properties.\"><span id=\"24\"><code>固定属性</code>的关键在于您在设计时修复了这些属性，并且所有实例在运行时都必须遵循该决定。 对于一些问题，这是一个尴尬的限制。 想象一下，我们正在建立一个复杂的联络系统。 有一些东西是固定的：家庭住址，家庭和工作电话，电子邮件。 但他们是各种各样的小变化。 对于需要记录父母地址的人，另一个人有白天工作和晚上工作号码。 事先很难预测所有这些事情，每次更改系统时都必须经过编译，测试和分发。 要处理这个问题，你需要使用动态属性。</span></a></p>\n<hr>\n<h3 id=\"动态属性-1\"><a href=\"#动态属性-1\" class=\"headerlink\" title=\"动态属性\"></a>动态属性</h3><p>  <a href=\"#25\" title=\"How do you represent a fact about an object?\"><span id=\"25\">你如何代表一个对象的事实？</span></a><br><br>  <a href=\"#25\" title=\"Provide a parameterizable attribute which can represent different properties depending on the parameter\"><span id=\"25\">提供可参数化的属性，可以根据参数表示不同的属性</span></a> <br></p>\n<ul>\n<li><a href=\"#25\" title=\"Can add properties at run time\"><span id=\"25\"> 可以在运行时添加属性</span></a></li>\n<li><a href=\"#25\" title=\"Unclear interface\"><span id=\"25\"><font color=\"red\">接口不清晰</font></span></a></li>\n</ul>\n<hr>\n<p><a href=\"#26\" title=\"There are several variations on dynamic properties, each of which make different trade-offs between flexibility and safety. The simplest approach is Flexible Dynamic Properties. The essence of this pattern is that you add a qualified association to the person whose key is a simple value, usually a string (see Figure 2 and Listing 2). If you want to add a vacation address to a person Kent, you just use the code in Listing 3. You don’t need to recompile the person class. You could even build a GUI or a file reader that would add properties without recompiling the client either.\"><span id=\"26\"><code>动态属性</code>有多种变化，每种变化都会在<code>灵活性</code>和<code>安全性</code>之间做出不同的选择。 最简单的方法是<code>灵活动态属性</code>。 这种模式的本质是为键值为简单值的人（通常是字符串）添加一个合格的关联（参见图2和示例2）。 如果您想为某人Kent添加休假地址，则只需使用清单3中的代码即可。您不需要重新编译人员类。 你甚至可以建立一个图形用户界面（<code>GUI</code>）或者文件读取器来添加属性，而不用重新编译客户端。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/5_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图2.使用动态属性建模的人员<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span><span class=\"params\">(String key)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(String key, Object value)</span></span>;</div></pre></td></tr></table></figure></p>\n<p>列举2,图2的<code>java</code>方法<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">kent.setValueOf(“VacationAddress”, anAddress);</div><div class=\"line\">Address kentVactation = (Address) kent.getValueOf(“VacationAddress”)</div></pre></td></tr></table></figure></p>\n<p>列举3,使用动态属性<br><a href=\"#\" title=\"Said like that, you might wonder why anyone would ever use fixed properties, since dynamic properties such as this give you so much more flexibility. Of course there is a cost, and it lies in the reduction of the clarity of the dependencies between parts of the software. It is all very well adding a vacation address property to a person, but how do you know to get it back again? With fixed properties you can just look at the interface of person and see the properties. The compiler can check that don’t ask an object to do something it doesn’t understand. With a dynamic property you cannot do any design-time checking. Furthermore the interface of person is harder to see. Not just do you look at Person’s declared interface – you also have to find the dynamic properties, which will not be present in the class interface. You have to find that part of the code that sets the property (which usually will not be in the Person class at all) and dig it out.\"><span id=\"27\">这样说，你可能想知道为什么有人会使用固定的属性，因为动态的像这样的属性给了你更多的灵活性。当然有一个成本，它在于软件各部分之间依赖关系的清晰度降低。这一切都非常好给一个人增加一个度假地址属性，但是你怎么知道把它重新取回呢？有了固定的属性，你可以看看人的界面，看看属性。该编译器可以检查不要求对象做不理解的事情。 用一个动态属性，你不能做任何设计时检查。此外的界面人很难看。不只是你看<code>Person</code>的声明接口 -你也必须找到不会出现在类接口中的动态属性。你必须找到那些设置属性的代码部分（通常不会在<code>Person</code>类中）提现出来。</span></a></p>\n</blockquote>\n<hr>\n<h3 id=\"灵活动态属性\"><a href=\"#灵活动态属性\" class=\"headerlink\" title=\"灵活动态属性\"></a>灵活动态属性</h3><ul>\n<li><a href=\"#28\" title=\"How do you represent a fact about an object?\"><span id=\"28\">你如何代表一个对象的事实？</span></a><br></li>\n<li><a href=\"#28\" title=\"Provide an attribute parameterized with a string. To declare a property just use the string.\"><span id=\"28\">提供一个用字符串参数化的属性。只声明一个属性使用字符串。</span></a> <br> </li>\n</ul>\n<hr>\n<p><a href=\"#30\" title=\"Not just is the property hard to find, it also creates a nightmare dependency. With fixed properties the client code has a dependency to the person class – a dependency that is easy to keep track of. If you change the name of the property the compiler will let you know, and tell you what code you need to change to fix things. But the Flexible Dynamic Property creates a dependency into some arbitrary piece of code. It could be code that belongs to a class that is not even visible to the client. What happens if someone changes the key string? What happens if someone changes the type of object they put into the key string? Not just can the compiler do nothing to help you, you don’t even know where to start looking for potential changes.\"><span id=\"30\">不仅是属性很难找到，它的依赖也是一个噩梦。随着固定属性的客户端代码有一个依赖于人类 - 一个依赖是难以跟踪。如果你改变属性的名字，编译器会让你知道，并告诉你需要改变什么代码才能解决问题。但灵活的动态属性创建一个依赖于任意一段代码。它可能是属于一个类的代码甚至不能被客户端看到。如果有人更改密钥字符串会发生什么？如果有人改变他们把键入字符串的对象的类型会发生？不仅仅是编译器没法帮助你，你甚至不知道从哪里开始查找变化。</span></a></p>\n<p><a href=\"#31\" title=\"Flexible Dynamic Properties show this problem at it’s most extreme. The property could be created at design time by any client of Person. If another client of person uses that same property you have a dependency between two classes that is very hard to find. Furthermore properties can be added at run time by reading a file or by a GUI. It is impossible to find out, even at run time, what are the legal dynamic properties for a person. True you can ask a person if it has a property for vacation address – but if there isn’t one does that mean that that person does not have a vacation address, or does it mean that there is no such property as vacation address? And if it has no such property now, that doesn’t mean it won’t have one a few seconds later.\"><span id=\"31\"><code>灵活的动态属性</code>在最极端的情况下显示了这个问题。 该属性可能是<code>Person</code>的任何客户端在设计时创建。 如果另一个人的客户端使用同一个属性，那么你就很难找到两个类之间的依赖关系。 此外属性可以在运行时通过读取文件或通过<code>GUI</code>添加。 即使在运行时，不可能发现一个人的哪些动态属性是合法的。 当然，你可以问一个人，如果它有一个度假地址的属性 - 但如果没有一个这是否意味着这一点人没有假期地址，或者是否意味着没有这样的度假地址属性？ 而如果现在没有这样的属性，那并不意味着它几秒钟后不会有。</span></a></p>\n<p><a href=\"#32\" title=\"Another key disadvantage of flexible dynamic properties is that it is difficult to substitute them for operations. One of the key advantages of encapsulation is that a client that uses a property cannot tell whether it is stored as part of an object’s data, or computed by a method. This is a very important part of the object approach. It allows you not just a regular interface for both purposes, but also to change your mind without the client knowing. In the presence of subtyping you can even have a supertype store the property and subclasses compute or vice versa. However if you want to use dynamic properties the only way you can change stored data to a calculation is to put a specific trap in the general accessor for the dynamic property along the lines of Listing 4. This code is likely to be brittle and awkward to maintain.\"><span id=\"32\">灵活动态特性的另一个关键缺点是很难替代它们进行操作。封装的一个关键优势是使用属性的客户端无法分辨它是作为对象数据的一部分存储的，还是通过方法来计算的。这是一个对象方法非常重要的一部分。它可以让你不只是一个普通的接口实现，而且在客户端不知情的情况下改变你期望的值。当存在子类型，你甚至可以有一个超类型存储属性和子类计算，反之亦然。但是，如果要使用动态属性，则只能更改存储的数据一个计算就是在通用访问器中为<code>动态属性</code>设置一个特定的数值,清单4中的代码。这个代码可能很脆弱，难以维护。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span> <span class=\"params\">(String key)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (key = “vacationAddress”) </div><div class=\"line\">            <span class=\"keyword\">return</span> calculatedVacationAddress();</div><div class=\"line\">        <span class=\"keyword\">if</span> (key = “vacationPhone”) </div><div class=\"line\">            <span class=\"keyword\">return</span> getVacationPhone();</div><div class=\"line\">        <span class=\"comment\">// else return stored value…</span></div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举4,用操作替换<code>动态属性</code></p>\n</blockquote>\n<p><a href=\"#33\" title=\"Other forms of dynamic property help you solve some of these problems but not all. The essential disadvantage of a dynamic property is that you lose the clear interface and all designtime checking. Different approaches to dynamic properties give you different abilities to do run-time checking. If you need dynamic properties, and there are certainly situations when you do, then you just have to give up design time checking and a explicit design time interface. The only question is how explicit an interface and how much checking you can do at run time. With Flexible Dynamic Properties you don’t get any of either.\"><span id=\"33\">其他形式的动态属性可以帮助您解决其中一些问题，但不是全部。该<code>动态属性</code>的最大的缺点是：你失去了清晰的接口和所有的设计时间检查。<code>动态属性</code>的不同方法会让你额外写不同的检查方法。如果你需要<code>动态属性</code>，并且当然有确定的情况你这样做，那么你只需要放弃设计时间检查和明确的设计时间接口。唯一的问题是如何明确接口和有多少运行时检查。使用灵活的动态属性也会有同样的问题。</span></a></p>\n<p><a href=\"#34\" title=\"You find dynamic properties often in databases because it is often a pain to change the database schema, especially if there would be a lot of data to migrate. Interfaces of distributed components, such as in CORBA, also often use dynamic properties for a similar reason. There are a lot of distant clients using the interface, so you are reluctant to change it. In both of these cases it is not so much a distinction between compile-time and run-time, as much as a distinction between design-time and production.\"><span id=\"34\">你经常在数据库中发现动态属性，因为改变它通常是一个痛苦数据库模式，特别是如果有大量的数据迁移。分布式的接口例如在<code>CORBA</code>中的组件也经常因为相似的原因而使用动态属性。那里是很多使用界面的远程客户，所以你不愿意改变它。在这两种情况下，编译时和运行时间之间的区别并不是设计时和生产之间的区别。</span></a> </p>\n<p><a href=\"#35\" title=\"If all you are doing is displaying and updating information via a GUI, and the code never makes a fixed reference to the keys (i.e. you never see code like Listing 3), then you are pretty safe with a Flexible Dynamic Property. This is because you have not set up a nasty dependency to some arbitrary string as a key. Otherwise you should consider one of the other approaches to dynamic properties.\"><span id=\"35\">如果你正在做的是通过<code>GUI</code>显示和更新信息，而代码永远不会对键进行固定的引用（即，你永远不会看到像清单3那样的代码），那么使用灵活<code>动态属性</code>就非常安全。这是因为你没有设置一个任意字符串作为一个关键的讨厌的依赖。 否则，你应该考虑<code>动态属性</code>的其他方法之一。</span></a></p>\n<p><a href=\"#36\" title=\"The first step towards more run-time checking is the Defined Dynamic Property. The key difference between a defined as opposed to a flexible dynamic property is that the key used by the dynamic property is no longer some arbitrary string, but is now an instance of some class (Figure 3).\"><span id=\"36\">更多运行时检查的第一步是定义的动态属性。与<code>灵活动态属性</code>相反，定义的关键区别在于<code>动态属性</code>使用的关键字不再是一些任意的字符串，而是现在某个类的一个实例（图3）。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/7_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图3.定义的<code>动态属性</code></p>\n</blockquote>\n<p><a href=\"#37\" title=\"On the face of it using defined dynamic property does not change much. Indeed the code interface is almost identical (Listing 5 and Listing 6). But now the choice of keys is no longer entirely arbitrary, it is limited by the instances of contact type. Of course this still allows you to add properties at run time – you just create a new contact type. However now there is at least somewhere someone can look to get a list of potential keys without having to trawl through the program text. Any keys added at design time can be collected in a loader routine in the contact type class. You can easily provide services to find out the legal keys at run time.\"><span id=\"37\">在它的表面上使用定义的<code>动态属性</code>并没有太大的改变。事实上，代码界面几乎完全相同（清单5和清单6）。但是现在，关键字的选择不再是完全随意的，而是受到接触<code>类型</code>的限制。当然，这仍然允许您在运行时添加<code>属性</code>-只需创建一个新的关联<code>类型</code>。不过现在至少在某个地方可以找到一个潜在的<code>键</code>列表，而无需浏览程序<code>代码</code>。 在设计时添加的任何键都可以在关联类型类的加载程序中收集。您可以轻松地提供服务，以在运行时查找合法的<code>键</code>。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span><span class=\"params\">(ContactType key)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(ContactType key, Object value)</span></span>;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举5, 图3的Java接口<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactType</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Enumeration <span class=\"title\">instances</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasInstanceNamed</span><span class=\"params\">(String name)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ContactType <span class=\"title\">get</span><span class=\"params\">(String name)</span></span>;</div></pre></td></tr></table></figure></p>\n<p>列举6,为定义的属性类型提供的服务</p>\n</blockquote>\n<p><a href=\"#38\" title=\"In particular you can now set up some checking to prevent errors due to someone asking for a dynamic property that does not exist as in Listing 7. I’m throwing an unchecked exception here because I consider that the precondition for get() is that the client provides a legal name for a contact type. The client can always fulfill this responsibility by using hasInstanceNamed(), but most of the time client software will hang on to contact type objects, not strings.\"><span id=\"38\">你现在可以设置一些检查来防止由于某人要求一个不存在的<code>动态属性</code>而导致的错误。我在这里抛出一个未经检查的<code>异常</code>，因为我认为<code>get（）</code>的前提条件是<code>客户端</code>为联系人类型提供合法名称。客户端总是可以通过使用<code>hasInstanceNamed（）</code>来执行这个检查，但是大多数情况下客户端使用的是类型而不是字符串。</span></a></p>\n<hr>\n<h3 id=\"定义动态属性\"><a href=\"#定义动态属性\" class=\"headerlink\" title=\"定义动态属性\"></a>定义动态属性</h3><ul>\n<li><a href=\"#39\" title=\"How do you represent a fact about an object?\"><span id=\"39\">你如何代表一个对象的事实？</span></a></li>\n<li><a href=\"#39\" title=\"Provide an attribute parameterized with an instance of some type. To declare a property create a new instance of that type\"><span id=\"39\">提供用某种类型的实例参数化的属性。声明一个属性创建一个新类型的实例</span></a> </li>\n</ul>\n<hr>\n<p><a href=\"#40\" title=\"Usually the contact types will be held in a dictionary, usually indexed by a string. This dictionary could be a static field of contact type, but I prefer to make it a field on a Registrar.\"><span id=\"40\">通常，联系人类型将保存在字典中，通常由字符串索引。这个字典可能是一个静态的联系人类型的字段，但是我更愿意把它作为注册服务器上的字段。</span></a></p>\n<p><a href=\"#41\" title=\"Removing a contact type still has awkward consequences. In java the dynamic properties would still be present on those objects that had them, unless you write some complicated clean up code. I usually make it a rule to never delete the keys for a Defined Dynamic Property. If you want to use a new name you can easily alias the contact type by giving it one name but placing it in the defining dictionary several times.\"><span id=\"41\">删除联系人类型仍然具有尴尬的后果。在<code>java</code>中的<code>动态属性</code>仍然会出现在那些拥有它们的对象上，除非你写了一些复杂的东西清理代码。我通常会规定永远不要删除动态属性的键。如果你想使用一个新的名字，你可以通过给它一个其他名字，但是把它放置在定义的字典中几次，很容易地为联系类型添加别名。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactType</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ContactType <span class=\"title\">get</span><span class=\"params\">(String name)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (! hasInstanceNamed (name)) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(“No such contact type);</div><div class=\"line\">        <span class=\"comment\">// return the contact type</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// use with</span></div><div class=\"line\">Address kentVactation = (Address)kent.getValueOf(ContactType.get(“VacationAddress”));</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举7, 检查使用合法合同类型</p>\n</blockquote>\n<p><a href=\"#42\" title=\"At this point you might be wondering about what this has to do with conceptual modeling,after all I am writing a lot of code and discussing design trade-offs. This is an important conceptual issue because the conceptual choice you make affects the implementation options you have. If you choose to use flexible dynamic attributes in your conceptual model, you are making it pretty hard to use either defined dynamic attributes or fixed attributes in your implementation. One of the reasons you do conceptual models is to explore what is fixed and what is changeable in your users’ concepts. If total flexibility was my only goal then I would always use Figure 4. With this I can model any situation in the world. But this model is not very useful. Its uselessness comes from the fact that it does not indicate what is fixed. When you are doing a conceptual model you need to be aware of how your choices affect things in implementation – otherwise you are abdicating your responsibility as a modeler.\"><span id=\"42\">在这一点上，您可能想知道这与概念建模有什么关系，毕竟我写了很多代码并讨论了设计的权衡。这是一个重要的概念问题，因为您所做的概念选择会影响您的实现选择。如果你选择在你的概念模型中使用<code>灵活动态属性</code>，你很难在你的实现中使用定义的<code>动态属性</code>或<code>固定属性</code>。你做概念模型的原因之一是探索你的用户的概念是什么固定的，什么是可变的。如果全面的灵活性是我唯一的目标，那么我会总是使用图4.通过这个，我可以模拟世界上的任何情况。但是这个模型不是很有用。它在现实项目中是没用的，它不表示什么是固定的。什么时候你正在做一个概念模型，你需要知道你的选择如何影响项目实施-否则你失去了作为建模者的作用。</span></a></p>\n<p><a href=\"#43\" title=\"I often find that people discover dynamic properties, and then want to use them everywhere. The flexibility is so great, they get all the extendibility they ever want. Yes sometimes you need dynamic properties. but never forget there is a price. Only use them when you really need them. After all it is easy to add them later if you have to.\"><span id=\"43\">我经常发现人们发现<code>动态属性</code>，然后想要在任何地方使用它们。灵活性如此之大，他们获得了所有的可扩展性。是的，有时候你需要<code>动态属性</code>。但永远不会忘记有一个标准。只有当你真的使用它们需要他们才用。毕竟，如果必须使用，以后很容易添加它们。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/8_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图4.一个可以无用建模任何域的模型</p>\n</blockquote>\n<p><a href=\"#44\" title=\"The Defined Dynamic Property allows you to indicate rather more about what properties you have. These properties are still untyped. You cannot enforce that the value of the vacation address in Figure 3 is an address. You can do something about that by using a Typed Dynamic Property.\"><span id=\"44\"><code>定义动态属性</code>允许您更多地指出你拥有的属性。这些属性仍然是无类型的。您不能强制图3中休假地址的值是一个地址。 你可以通过使用<code>类型动态属性</code>来做些什么。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/9_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图5.为使用限定关联的类型化动态属性建模</p>\n</blockquote>\n<p><a href=\"#45\" title=\"A typed dynamic property adds type information to the defined dynamic property (Figure 6 and Figure 5 ). Here the instances of contact type do not just indicate what properites the person has, they also indicate the type of each property. The type constrains the value, along the lines of Listing 9.\"><span id=\"45\"><code>类型动态属性</code>将类型信息添加到定义的<code>动态属性</code>（图6和6）图5）。这里的联系人类型的实例不只是指出该人是什么合适的人有，他们也表示每个<code>属性</code>的类型。 类型约束的值，沿线清单9。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span><span class=\"params\">(ContactType key)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(ContactType key, Object value)</span></span>;</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactType</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Class <span class=\"title\">getValueType</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ContactType</span> <span class=\"params\">(String name, Class valueType)</span></span>;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举8, 键入动态属性的操作</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(ContactType key, Object value)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (! key.getValueType().isInstance(value))</div><div class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException (“Incorrect type <span class=\"keyword\">for</span> property”);</div><div class=\"line\">        <span class=\"comment\">// set the value</span></div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举9, 做类型检查</p>\n</blockquote>\n<p><a href=\"#46\" title=\"Doing type checking like this can help to avoid errors, but it still is not as clear as fixed properties. The checking is at run time, not at design time, and is therefore not as effective. Still it is better than no checking at all, particularly if you are used to a strongly typed environment.\"><span id=\"46\">这样做类型检查可以帮助避免错误，但它仍然不像固定属性那样清晰。 检查是在运行时，而不是在设计时，因此不是有效的。但还是比没有检查好，特别是如果你习惯于强类型的环境时。</span></a></p>\n<hr>\n<h3 id=\"类型动态属性\"><a href=\"#类型动态属性\" class=\"headerlink\" title=\"类型动态属性\"></a>类型动态属性</h3><ul>\n<li><a href=\"#47\" title=\"How do you represent a fact about an object?\"><span id=\"47\">你如何代表一个对象的事实？</span></a><br></li>\n<li><a href=\"#47\"><span id=\"47\">提供使用某种类型的实例进行参数化的属性。声明一个属性创建一个新类型的实例并指定值的类型属性。</span></a></li>\n</ul>\n<hr>\n<p><a href=\"#48\" title=\"As we delve deeper into dynamic properties, we find richer examples of reflection, an architectural pattern which appears when we get runtime objects that are able to describe themselves. [POSA] discusses reflection in much more detail than I intend to go into here.\"><span id=\"48\">当我们深入研究<code>动态属性</code>时，我们会发现更丰富的<code>反射</code>示例，这是一种架构模式，当我们获得能够描述自身的运行时对象时，就会出现这种模式。 [POSA]比我打算在这里更详细地讨论反思。</span></a></p>\n<p><a href=\"#49\" title=\"Dynamic properties provide a reflective capability, even in those languages that don’t support reflection themselves. Even with a language that does provide some reflection, the reflection of dynamic properties is more focused – so you can provide an easier to use interface.\"><span id=\"49\">动态属性提供反射功能，即使在那些不支持反射的语言中。即使使用了一种能够提供一些反射的语言，<code>动态属性</code>的反射也更加集中 - 所以您可以提供更易于使用的接口。</span></a></p>\n<p><a href=\"#50\" title=\"Using all of those qualified associations can get rather hard to follow. Another way of providing typed dynamic properties is to use the separate property pattern. The essence of the separate property pattern is that it makes the property an object in its own right (Figure 6 and Listing 10). You can get hold of the properties of a person, and then with each property get value and type information.\"><span id=\"50\">使用所有这些合格的关联可能会很难遵循。另一种方式提供<code>类型动态属性</code>是使用单独的属性模式。独立属性模式的本质是它使属性成为一个对象（图6和清单10）。 你可以获得一个人的属性，然后与每个属性获得值和类型信息。</span></a></p>\n<hr>\n<h3 id=\"分离属性\"><a href=\"#分离属性\" class=\"headerlink\" title=\"分离属性\"></a>分离属性</h3><ul>\n<li><a href=\"#51\" title=\"How do you represent a fact about an object, and allow facts to be recorded about that fact\"><span id=\"51\">你如何代表一个对象的属性，并允许属性记录这个属性<span></span></span></a></li>\n<li><a href=\"#51\" title=\"Create a separate object for each property. Facts about that property can then be made properties of that object.\"><span id=\"51\">为每个属性创建一个单独的对象。有关该属性的子属性可以然后被做成那个对象的属性。<span></span></span></a></li>\n</ul>\n<hr>\n<p><a href=\"#52\" title=\"Separate properties and qualified associations are two alternatives that are always available for dynamic properties. So far I’ve described flexible and defined dynamic properties with qualified associations because the qualified association presents a much easier interface to use.You can use flexible and defined dynamic properties with separate properties if you wish, although I’m not going to go into that here. As we get to the complexity of typed dynamic properties and onwards the separate property style becomes more of an advantage.\"><span id=\"52\"><code>独立属性</code>和限定的关联<code>动态属性</code>总是可用的两种选择。 到目前为止，我已经用限定的关联描述了灵活的和定义好的<code>动态属性</code>，因为合格的关联提供了一个更容易使用的接口。如果你愿意的话，你可以使用灵活和定义的具有单独属性的<code>动态属性</code>，尽管我不打算进入在这里。当我们了解类型化<code>动态属性</code>的复杂性时，<code>分离属性</code>风格变得更有优势。<span></span></span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/10_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图6.为分类的动态属性建模，使用单独的属性</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getProperties</span><span class=\"params\">()</span></span>;</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactProperty</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValue</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Class <span class=\"title\">getType</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ContactType <span class=\"title\">getIndex</span><span class=\"params\">()</span></span>;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举10, 使用单独属性的类型化动态属性的操作</p>\n</blockquote>\n<p><a href=\"#52\" title=\"Separate properties and qualified associations are not mutually exclusive. You can easily provide both interfaces at the same time. This way you get the advantages of both. Of course that makes the interface more complex, so think first about what the clients of person need.Give them the interface they need, don’t make it over complex. But if they need both qualified associations and separate properties, then that is a reasonable option. I would normally always use qualified associations for the value, but it may not make as much sense for the type.\"><span id=\"53\"><code>分离属性</code>和有限的关联不是相互排斥的。您可以轻松地同时提供两个接口。 这样你就得到了两者的优点。当然这会使接口更加复杂，所以先考虑一下用户的需求。给他们提供他们需要的接口，不要让接口变得复杂。但是，如果他们需要合格的关联和<code>分离属性</code>，那么这是一个合理的选择。我通常会使用合格的关联来获得值，但是这种类型可能没有多大意义。<span></span></span></a></p>\n<p><a href=\"#\" title=\"You can also consider the interface/implementation differences here. In this paper I want to concentrate on the conceptual – which maps to the interface of software rather than its implementation. But it is worth mentioning that you can provide a qualified association interface while using separate object in the implementation. You are only using separate properties in the interface if a client of person can obtain a contact property object. Often it is useful to hide the separate property to simplify the interface for the client.\"><span id=\"54\">您也可以在这里考虑接口/实现的差异。在本文中，我想集中在概念上 - 它映射到软件的接口而不是实现。但值得一提的是，您可以在实现中使用单独的对象时提供合格的关联接口。如果人的客户端可以获取联系人属性对象，则只能在接口中使用单独的属性。通常隐藏<code>分离属性</code>以简化客户端的接口是有用的。</span></a></p>\n<p><a href=\"#55\" title=\"One of the big advantages of the Separate Properties is that it allows you put information about the property in the property. Such information might include who determined the property, when it was determined, and the like. The Observation pattern in \\[Fowler AP §3.5\\] build upon this theme in some depth. Much of what I’ve described there in terms of observations is worth considering if you need separate properties. \\(I see the observation pattern as a use of separate properties.\\)\"><span id=\"55\"><code>分离属性</code>的一大优势是它可以让你把属性的信息放在属性中。 这些信息可能包括谁确定了属性，什么时候确定了属性等。 [Fowler AP§3.5]中的观察模式基于这个主题进行了深入的研究。如果您需要单独的属性，我在观察者模式所描述的大部分内容都值得思考。（我将观察模式看作是使用不同的属性。）</span></a></p>\n<p><a href=\"#56\" title=\"You might be wondering at the contrast between separate properties \\(a pattern\\) and qualified associations \\(a UML modeling construct\\). You can also think of qualified associations as a pattern, a pattern of association. Indeed I did do this in \\[Fowler AP §15.2\\]. I have found it helpful to think of modeling constructs as patterns, for it helps me think about the trade-offs in using them. This is particularly useful when you are comparing them to something that is more clearly a pattern, such as separate property. Of course things that begin as patterns can be turned into modeling constructs, particularly if you use UML stereotypes. The historic mapping pattern \\[Fowler AP §15.3\\] is a good example of that. I represent that using the «history» stereotype. Is it a pattern or a modeling construction? Maybe it’s a floor wax and a desert topping too.\"><span id=\"56\">您可能想知道<code>分离属性</code>（模式）和限定关联（<code>UML</code>建模结构）之间的对比。 你也可以把合格的关联看作一种模式，一种联想模式。确实，我在[Fowler AP §15.2]中做了这个。我发现为设计创建模型考虑是有帮助的，因为它帮助我思考使用它们的权衡。当你将它们的模型比较清楚，如<code>分离属性</code>，这是特别有用的。当然，以模式开始的事情可以转化为建模结构，特别是如果使用<code>UML</code>构造型。历史映射模式[FowlerAP§15.3]就是一个很好的例子。我表示使用这种模式非常刻版。这是一个模式或建模？也许这是一个地板蜡和一个沙漠顶部。</span></a></p>\n<hr>\n<h2 id=\"具有多值关联的动态属性\"><a href=\"#具有多值关联的动态属性\" class=\"headerlink\" title=\"具有多值关联的动态属性\"></a><a href=\"#57\" title=\"Dynamic Properties with Multi-valued associations\"><span id=\"57\">具有多值关联的动态属性</span></a></h2><p><a href=\"#58\" title=\"My examples above have concentrated on cases where there is a single value for each key in the dynamic properties. But you can also have cases where there are multiple items in the dynamic properties. With Person you might consider a friends property which is multi-valued.There are two ways to deal with this, one that is simple and unsatisfying, another that is satisfying but (too) complex.\"><span id=\"58\">我上面的例子集中讨论了<code>动态属性</code>中每个键都有一个单一值的情况。 但是，您也可以在<code>动态属性</code>中有多个事件的情况。与人相处时，你可能会考虑一个多值的友好属性。处理这个问题有两种方法，一种简单而不令人满意，另一种令人满意，但（太）复杂。</span></a></p>\n<p><a href=\"#59\" title=\"The simple approach is just to say that the value of a dynamic property can be a collection.We can then manipulate it like any other object with the same interface (Listing 11). This is nice and simple, since we don’t have to do anything to the basic dynamic property pattern.(The example here is with a typed dynamic property, but it will work with all of them.) It’s unsatisfying however because it is not really the way we would like to deal with multi-valued properties. If friends were a fixed property, we would want an interface along the lines of Listing 12. I don’t like exposing the vector in these cases. By doing so the person class loses the ability to react when we add or remove elements. It also removes our ability to change the type of collection we are using.\"><span id=\"59\">简单的方法就是说<code>动态属性</code>的值可以是一个集合。然后我们可以像使用相同接口的其他对象一样操作它（清单11）。这很好，很简单，因为我们不需要对基本的<code>动态属性</code>模式做任何事情（这里的例子是一个类型化的<code>动态属性</code>，但是它可以和所有的模式一起工作）。然而，这并不令人满意，因为它不是真的是我们想要处理多值属性的方式。如果朋友是一个固定的属性，我们需要一个接口，如清单12所示。我不喜欢在这些情况下暴露集合。通过这样做，人员班级在我们添加或移除元素时就失去了应对的能力。这也消除了我们改变我们正在使用的集合类型的能力。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">Person aPerson = <span class=\"keyword\">new</span> Person();</div><div class=\"line\">ContactType friends = <span class=\"keyword\">new</span> ContactType(“Friends”, Class.forName(“Vector”));</div><div class=\"line\">Person martin = <span class=\"keyword\">new</span> Person(“Martin”);</div><div class=\"line\">martin.setValueOf(“Friends”, <span class=\"keyword\">new</span> Vector());</div><div class=\"line\">Person kent = <span class=\"keyword\">new</span> Person(“Kent”);</div><div class=\"line\">martin.getValueOf(“Friends”).addElement(“Kent”);</div><div class=\"line\">Enumeration friends = martin.getValueOf(“Friends”).elements();</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举11, 在类型化动态属性中使用集合值<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getFriends</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addFriend</span><span class=\"params\">(Person arg)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">removeFriend</span><span class=\"params\">(Person arg)</span></span>;</div></pre></td></tr></table></figure></p>\n<p>列举12, 一个固定的多值属性的运作</p>\n</blockquote>\n<p><a href=\"#60\" title=\"So can we get an interface along the lines of Listing 12, when we have dynamic properties? Well if we try hard enough we can, as you can see in Figure 7. But it is a complex model. With some clever coding we can hide much of that complexity behind the interface (Listing 13 and Listing 14) and make it reasonably convenient to use (Listing 15). But the client still needs to know which properties are single valued and which are multi-valued and all the checking for the right usage can only occur at run time. All this complexity is painful – a lot more painful than using fixed properties. I would be very reluctant to go this far.\"><span id=\"60\">那么当我们有<code>动态属性</code>的时候，我们可以按照清单12的方式获得一个接口吗？ 那么，如果我们努力工作，就可以如图7所示。但这是一个复杂的模型。 通过一些巧妙的编码，我们可以隐藏接口（清单13和清单14）背后的大部分复杂性，并且使用起来相当方便（清单15）。但客户端仍然需要知道哪些属性是单值的，哪些属性是多值的，并且只有在运行时才能检查正确的使用情况。所有这些复杂性都是痛苦的-比使用<code>固定属性</code>更痛苦。我会非常不愿走这么远。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/12_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图7.满足对多值动态属性的过度支持</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">class Person</div><div class=\"line\">    public Object getValueOf(ContactType key);</div><div class=\"line\">    public Enumeration getValuesOf(ContactType key);</div><div class=\"line\">    public void setValueOf(ContactType key, Object newValue);</div><div class=\"line\">    public void addValueTo(ContactType key, Object newValue);</div><div class=\"line\">    public void removeValueFrom(ContactType key, Object newValue);</div><div class=\"line\">    </div><div class=\"line\">class ContactType</div><div class=\"line\">    public Class getValueType();</div><div class=\"line\">    public boolean isMultiValued();</div><div class=\"line\">    public boolean isSingleValued();</div><div class=\"line\">    public ContactType(String name, Class valueType, boolean isMultiValued);</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举13, 图7的操作</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span></span></div><div class=\"line\"><span class=\"class\">    <span class=\"title\">public</span> <span class=\"title\">Object</span> <span class=\"title\">getValueOf</span>(<span class=\"title\">ContactType</span> <span class=\"title\">key</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (key.isMultiValued())</div><div class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException(“<span class=\"function\">should use <span class=\"title\">getValuesOf</span><span class=\"params\">()</span>”)</span></div><div class=\"line\"><span class=\"function\">        <span class=\"comment\">//return the value</span></span></div><div class=\"line\"><span class=\"function\">    &#125;</span></div><div class=\"line\"><span class=\"function\">    </span></div><div class=\"line\"><span class=\"function\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addValueTo</span><span class=\"params\">(ContactType key, Object newValue)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (key.isSingleValued())</div><div class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException(“should use setValueOf”);</div><div class=\"line\">        <span class=\"keyword\">if</span> (! key.getValueType().isInstance(newValue))</div><div class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException (“Incorrect type <span class=\"keyword\">for</span> property”);</div><div class=\"line\">        <span class=\"comment\">//add the value to the collection</span></div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举14, 检查清单13的操作的使用情况</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">fax = <span class=\"keyword\">new</span> ContactType(“fax”, Class.forName(“PhoneNumber”), <span class=\"keyword\">false</span>);</div><div class=\"line\">Person martin = <span class=\"keyword\">new</span> Person(“martin”);</div><div class=\"line\">martin.setValueOf(“fax”, <span class=\"keyword\">new</span> PhoneNumber(“<span class=\"number\">123</span> <span class=\"number\">1234</span>”);</div><div class=\"line\">martinFax = martin.getValueOf(“fax”);</div><div class=\"line\">friends = <span class=\"keyword\">new</span> ContactType (“friends”, Class.forName(“Person”), <span class=\"keyword\">true</span>);</div><div class=\"line\">martin.addValueTo(“friends”, <span class=\"keyword\">new</span> Person(“Kent”));</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举15, 使用清单13的操作</p>\n</blockquote>\n<p><a href=\"#61\" title=\"This complexity appears because we have both multi valued and single-valued properties.There is an inherently different interface to dealing with these, hence the complexity. Of course we can get situations with only multi-valued properties. A common pattern for this is the Typed Relation ship pattern \\(Figure 8\\). Here a person may have number of different employment relationships with a number of different companies \\(or even several with the same company\\).\"><span id=\"61\">这种复杂性似乎是因为我们既有多值也有单值的<code>属性</code>。处理这些复杂性有一个内在的不同的接口，因此复杂性也是如此。当然，我们可以得到只有多值属性的情况。一个常见的模式是类型关系模式（图8）。在这里，一个人可能与许多不同公司有不同的雇佣关系（甚至与同一家公司有多个）。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/13_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图8.类型关系的一个例子</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Employment</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Employment</span> <span class=\"params\">(Person person, Company company, Employment Type type)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">terminate</span><span class=\"params\">()</span></span></div><div class=\"line\"><span class=\"function\">    …</span></div><div class=\"line\"><span class=\"function\">&#125;</span></div><div class=\"line\"><span class=\"function\">class Person </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getEmployments</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addEmployment</span> <span class=\"params\">(Company company, EmploymentType type)</span></span>;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举16, 图8的<code>Java</code>接口</p>\n</blockquote>\n<p><a href=\"#62\" title=\"As we think of this, it should soon occur to you that this is really very similar as using a Defined Dynamic Property that is multi-valued, but expressed using a Separate Property rather than a Qualified Association. (Or is that sentence just too much of a mouthful?) Indeed Figure 9 shows how you can use a Defined Dynamic Property interface in this situation. This view of things is true, and so a typed relationship doesn’t add anything that new to this pattern language. But typed relationship is a very common pattern in modeling circles, and many may not realize its connection with the dynamic properties patterns.\"><span id=\"62\">正如我们想到的那样，很快就会发现，这与使用多值的<code>定义动态属性</code>非常类似，但是使用<code>分离属性</code>而不是合适的关联来表示。（或者说这句话太过分了？）实际上，图9显示了在这种情况下如何使用<code>定义动态属性</code>接口。这种事物的观点是真实的，所以一个类型化的关系不会添加任何新的模式语言。 但是类型化关系在建模圈子中是一种非常普遍的模式，很多人可能没有意识到它与<code>动态属性</code>模式的联系。</span></a></p>\n<hr>\n<h3 id=\"类型关系\"><a href=\"#类型关系\" class=\"headerlink\" title=\"类型关系\"></a>类型关系</h3><ul>\n<li><a href=\"#63\" title=\"How do you represent a relationship between two objects?(How do you represent multi-valued dynamic properties?)\"><span id=\"63\">你如何表示两个对象之间的关系？（你如何表示多值动态属性？）</span></a></li>\n<li><a href=\"#63\" title=\"Create a relationship object for each link between the two objects. Give the relationship object a type object to indicate the meaning of the relationship.(The type object is the name of the multi-valued property.)\"><span id=\"63\">为两个对象之间的每个链接创建一个关系对象。 给关系对象一个类型对象来表示关系的含义。（类型对象是多值属性的名称。）</span></a></li>\n</ul>\n<hr>\n<p><a href=\"#64\" title=\"The strengths of typed relationship are that it works well with bi-directional relationships, and that it provides a simple point to add properties to the relationship. (The latter, of course, is a feature of separate properties.) You can add a sophisticated knowledge level to this pattern,along much the same lines as typed dynamic properties. However you should consider the interface implications. Typed relationships force users to be aware of the employment object,as indeed does any use of separate properties. Indeed people tend to see the property object as a full fledged object in its own right, rather as some property of the person (or company). But the qualified association can often provide a simpler interface for many purposes. So whenever you see, or you are considering using, a typed relationship; you should also consider the qualified association form. You can use it in either or both directions, and use it either in addition to the typed relationship, or in addition to it.\"><span id=\"64\">类型化关系的优势在于它可以很好地处理双向关系，并且为关系添加属性提供了一个简单的点。（当然，后者是一个<code>分离属性</code>的特征。）你可以在这个模式中添加一个复杂的知识级别，跟类型化的<code>动态属性</code>一样。但是，您应该考虑接口的影响。类型化关系迫使用户意识到雇佣对象，因为确实使用<code>分离属性</code>。事实上，人们倾向于将属性客体本身看作完全成熟的客体，而不是人（或公司）的一些属性。 但是合格的关联通常可以为许多目的提供更简单的接口。所以每当你看到，或者你正在考虑使用，一个类型的关系;你还应该考虑合格的关联形式。您可以在任何一个方向或两个方向上使用它，也可以将其用于除了键入的关系之外，或者除此之外。。</span></a></p>\n<p><a href=\"#65\" title=\"The two models are not quite identical however. If you use Figure 9 you are indicating that an employer can only be an employer once for a particular employment type. Figure 8 has no such constraint in the diagram as it stands, although most modelers would imply such a constraint,unless the employment had additional attributes. Often, of course, the employment does have the additional attributes. A common example is a date range (as in accountability \\[Fowler, AP §2.4\\].\"><span id=\"65\">但是这两种模式并不完全相同。如果使用图9，则表示雇主只能是某种特定工种的雇主。图8在图表中没有这样的约束，尽管大多数建模者会暗示这样的约束，除非雇用具有附加属性。当然，就业通常具有附加属性。一个常见的例子是日期范围（如问责制[Fowler，AP§2.4]）。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/14_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图9.使用与图8相同情况的合格关联</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> Person &#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addEmployer</span> <span class=\"params\">(Company company, EmploymentType type)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getEmployersOfType</span> <span class=\"params\">(EmploymentType type)</span></span>;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举17, 图9的接口</p>\n</blockquote>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/15_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图10.键入的关系，显示通常假定的约束</p>\n</blockquote>\n<hr>\n<h2 id=\"不同种类的人\"><a href=\"#不同种类的人\" class=\"headerlink\" title=\"不同种类的人\"></a>不同种类的人</h2><p><a href=\"#\" title=\"So far we are assuming we only have one kind of person, and any properties we define for a person are valid properties for all people. However you do get situations where you have different types, and different properties for different types. A manager may need a property for department managed, an executive may need a property for executive washroom key number (in a not very 90’s company).\"><span id=\"66\">到目前为止，我们假设我们只有一种人，我们为一个人定义的任何属性都是所有人的有效属性。但是，您确实会遇到不同类型的情况，以及不同类型的不同属性。管理人员可能需要一个管理部门的属性，执行人员可能需要一个属性作为高管卫生间的关键号码（在一个不是90年代的公司）。</span></a></p>\n<p><a href=\"#67\" title=\"Don’t worry, I hear the cries of “use inheritance stupid”. Indeed this is one of the situations that is often used for subtyping. Actually it gets rather more involved than that, particularly when you start thinking of the various roles a person may play. I’ve written a whole paper on the subject of modeling roles \\[Fowler roles\\]. The roles patterns consider cases where we are interested in variations in operations and in variations of fixed properties. But in this case I want to explore the overlap of different kinds of object with the notion of dynamic properties. This overlap begets the dynamic properties knowledge level pattern \\(a name that is getting a little too large for my taste\\).\"><span id=\"67\">别担心，我听到“使用继承愚蠢”的呼声。事实上，这是常用于分类的情况之一。实际上，这个过程比这个要复杂得多，特别是当你开始思考一个人可能扮演的角色时。我已经写了关于建模角色[Fowler roles]的主题的全文。角色模式考虑了我们对操作变化和<code>固定属性</code>变化感兴趣的情况。但在这种情况下，我想探索不同类型的对象与<code>动态属性</code>的概念的重叠。这种重叠会导致<code>动态属性知识级别模式</code>（一个对我的品味有点太大的名字）。</span></a></p>\n<p><a href=\"#68\" title=\"To use the pattern we give the Person a type object of Person Type. We can then say that the person type’s association to contact type indicates which properties are available for people who have that person type. If we try to use, or ask for, a property on a person the person type can be used to check that the usage is correct.\"><span id=\"68\">为了使用这个模式，我们给<code>Person</code>一个<code>Person</code>类型的<code>类型对象</code>。然后，我们可以说，人物类型与联系人类型的关联指示哪些人物拥有该人物类型可用的属性。 如果我们尝试使用或要求某人的属性，则可以使用人员类型来检查使用情况是否正确。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/16_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图11.动态属性知识水平</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span><span class=\"params\">(ContactProperty key)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasProperty</span><span class=\"params\">(ContactProperty key)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(ContactProperty key, Object newValue)</span></span>;</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PersonType</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasProperty</span><span class=\"params\">(ContactProperty key)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getProperties</span><span class=\"params\">()</span></span>;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举18, 图11的操作<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span> <span class=\"params\">(ContactProperty key)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!hasProperty(key))</div><div class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException(“Innapropriate key”);</div><div class=\"line\">            <span class=\"comment\">//return the value</span></div></pre></td></tr></table></figure></p>\n<p>列举19, 检查具有动态属性知识级别的适当的密钥</p>\n</blockquote>\n<p><a href=\"#69\" title=\"As we start to use a knowledge level like this, the separate property becomes more and more important. In this case we soon start to stop thinking of it as a property, rather as some object in its own right. The dividing line between what is a property and what isn’t is very blurred,and it really depends upon your view of things.\"><span id=\"69\">当我们开始使用这样的知识水平时，单独的属性变得越来越重要。 在这种情况下，我们很快就会开始停止将其视为一种属性，而不是把它作为一个对象。 什么是属性和什么是非属性之间的分界线是非常模糊的，这实际上取决于你对事物的看法。</span></a></p>\n<hr>\n<h3 id=\"动态属性知识水平\"><a href=\"#动态属性知识水平\" class=\"headerlink\" title=\"动态属性知识水平\"></a>动态属性知识水平</h3><ul>\n<li><a href=\"#70\" title=\"How do you enforce that certain kinds of objects have certain properties when you use dynamic properties?\"><span id=\"70\">你如何执行某些类型的对象具有某些特性使用动态属性？</span></a></li>\n<li><a href=\"#70\" title=\"Create a knowledge level to contain the rules of what types of objects use which types of properties\"><span id=\"70\">创建一个知识级别来包含什么类型的对象使用的规则哪些类型的属性</span></a></li>\n</ul>\n<hr>\n<hr>\n<h2 id=\"动态属性的几个小结\"><a href=\"#动态属性的几个小结\" class=\"headerlink\" title=\"动态属性的几个小结\"></a><a href=\"#71\" title=\"Some Summary Points on Dynamic Properties\"><span id=\"71\">动态属性的几个小结</span></a></h2><p><a href=\"#72\" title=\"Various kinds of dynamic properties make up the bulk of this paper. But I have to reiterate that dynamic properties are something I like to avoid if at all possible. Dynamic properties carry a heavy burden of disadvantage: the lack of clarity of the interface, the difficulty in using operations instead of stored data. It is just that sometimes you have little choice but to use them, and it is on these occasions that this paper should come in useful to give you some alternatives and the trade-offs between then.\"><span id=\"72\">各种各样的<code>动态属性</code>构成了本文的大部分内容。但我必须重申，<code>动态属性</code>是我想要尽可能避免的。<code>动态属性</code>带来了很大的负担：接口不够清晰，使用操作而不是存储数据的困难。只是有时你别无选择，只能使用它们，在这种情况下，这篇论文应该有用的给你提供一些替代方案和之间的权衡。<span></span></span></a></p>\n<p><a href=\"#73\" title=\"Dynamic properties appear most where there are difficulties in changing the interface. People who work with distributed object systems like them, at least in principle, because it allows them to alter an interface without compromising clients – and in a distributed system it may be very difficult to find who your clients are. But you should still be wary of doing this. Any time you add a new key to your keys for the dynamic properties you are effectively changing the interface. All the dynamic properties are doing is replacing a compile time check for a runtime check. You still have the same issues of keeping your clients up to date.\"><span id=\"73\"><code>动态属性</code>出现在改变接口有困难的地方。那些使用像他们这样的分布式对象系统的人，至少在原则上是这样，因为它允许他们在不改变客户端的情况下改变接口 - 而在分布式系统中，可能很难找到你的客户端。但是你仍然应该警惕这样做。每当你为<code>动态属性</code>添加一个新的键到你的键上，你都在有效地改变接口。所有的<code>动态属性</code>都在替换运行时检查的编译时间检查。你仍然有同样的问题保持你的客户端最新。</span></a></p>\n<p><a href=\"#74\" title=\"Another common use of dynamic properties is in databases. Here it is not just due to the problem of interface, but also (if not primarily) due to problems of data migration. Changing a database schema does not only cause a potential change to programs using the schema, it also may force you to do a complicated data conversion exercise. Again dynamic properties allow you to change things without changing the database schema, and thus not needing to do any data conversion. In large databases this can be a compelling advantage.\"><span id=\"74\"><code>动态属性</code>的另一个常见用途是在数据库中。这里不仅仅是由于接口的问题，而且由于数据迁移的问题（如果不是主要的话）。更改数据库模式不仅会导致对使用该模式的程序进行潜在更改，还可能会强制您执行复杂的数据转换练习。同样，<code>动态属性</code>允许您在不更改数据库模式的情况下更改内容，从而不需要进行任何数据转换。在大型数据库中，这可能是一个引人注目的优势。</span></a></p>\n<hr>\n<h2 id=\"一个你不知道的有关于属性的\"><a href=\"#一个你不知道的有关于属性的\" class=\"headerlink\" title=\"一个你不知道的有关于属性的\"></a><a href=\"#75\" title=\"A property you don’t know about\"><span id=\"75\">一个你不知道的有关于属性的</span></a></h2><p><a href=\"#76\" title=\"There is a last but important kind of property that I want to add to this paper. This is the case of an object having a property without realizing it. This occurs when the property is implied by another object and the way it relates to you.\"><span id=\"76\">我想在本文中添加一个最后一个重要的属性。这是一个没有意识到属性的对象的情况。当属性被另一个对象所隐含，以及与有关的方式时，就会发生这种情况。</span></a></p>\n<p><a href=\"#77\" title=\"Consider an object that manages database connections. It creates a bunch of database connections and hands them out to other objects when requested. When a client is done with the connection it can return it to the manager to be available for someone else. You could do this by adding an isBusy property to the connection. Figure 12 shows an alternative using an extrinsic property. Whether the connection is free or busy is determined by which collection in the connection manager it lies in. If you had a connection, you could not ask it whether it is free or busy, instead you would have to ask the connection manager whether a particular connection is free or busy. You can tell this because the composition associations are one way.The connection has no knowledge of the connection manager. In a sense the free/busy status isn’t a property of connection at all. Yet at least in some sense it is, which is why I mention it.\"><span id=\"77\">考虑一个管理数据库连接的对象。它会创建一堆数据库连接，并在请求时将它们传递给其他对象。当一个客户端连接完成后，可以将其返回给管理员，以供其他人使用。您可以通过向连接添加<code>isBusy</code>属性来完成此操作。图12显示了一个使用外部属性的替代方案。连接是空闲的还是繁忙的是由连接管理器中的哪个集合决定的。如果你有一个连接，你不能问它是空闲的还是忙的，而是你必须要求连接管理器是否特定的连接空闲或忙碌。你可以这样说，因为组合关联是一种方式。连接不知道连接管理器。 从某种意义上来说，空闲/忙碌状态根本不是连接的属性。但至少从某种意义上来说，这就是我提到它的原因。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/17_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图12.使用外部收集属性</p>\n</blockquote>\n<p><a href=\"#78\" title=\"In a pure conceptual modeling sense this pattern does not make much sense. But there are practical implementation reasons why you may want to use it. If you want all changes to this property to go through a connection manager, then this approach makes this clear. In particular this is a natural style when you want the connection manager to give you a free connection and you don’t care which one.\"><span id=\"78\">在纯粹的概念模型意义上，这种模式没有多大意义。但是，为什么你可能想要使用它，有实际的实施原因。如果您希望对此属性进行的所有更改都通过连接管理器进行，则此方法可以清楚地说明这一点。特别是当你想让连接管理器给你一个自由的连接，而你不关心哪一个时，这是一种自然的风格。</span></a>。</p>\n<p><a href=\"#79\" title=\"Another reason to use an extrinsic property is if the connection class is provided by someone else and you can’t change its interface. You can add the new property without changing the connection class at all.\"><span id=\"79\">使用外部属性的另一个原因是如果连接类是由其他人提供的，并且您不能更改其接口。 你可以添加新的属性而不用改变连接类。</span></a></p>\n<hr>\n<h3 id=\"外在属性\"><a href=\"#外在属性\" class=\"headerlink\" title=\"外在属性\"></a>外在属性</h3><ul>\n<li><a href=\"#80\" title=\"How do you give an object a property without changing its interface?\"><span id=\"80\">你如何给对象一个属性而不改变它的接口？</span></a></li>\n<li><a href=\"#80\" title=\"Make another object responsible for knowing about the property.\"><span id=\"80\">让另一个对象负责知道这个属性。</span></a></li>\n</ul>\n<hr>\n<p><a href=\"#81\" title=\"The big problem with the extrinsic property is that it leads to an awkward and unnatural interface. Usually if you want to know something, you just find the appropriate object and ask it. Here you need to find the object that holds the external collection, and ask it about the appropriate object. In some circumstances, such as this one, it seems reasonable. But most of the time I would prefer to let objects know about their own properties (in which case I call them intrinsic properties).\"><span id=\"81\"><code>外在属性</code>的一个大问题是它会导致一个尴尬和不自然的接口。通常如果你想知道一些东西，你只要找到合适的对象并提出问题。在这里您需要找到保存外部集合的对象，并询问有关适当的对象。在某些情况下，比如这个，似乎是合理的。但大多数情况下，我宁愿让对象了解自己的属性（在这种情况下，我称之为<code>内在属性</code>）。</span></a></p>\n<hr>\n<h2 id=\"最后的想法\"><a href=\"#最后的想法\" class=\"headerlink\" title=\"最后的想法\"></a>最后的想法</h2><p><a href=\"#82\" title=\"As I finish this paper, I feel the need again to urge you not to use what I’ve been writing about here unless you really do need it. The advantages of fixed properties are great. If you need something else, then I hope this paper gives you some ideas and some guidance. But fixed properties are always your first choice.\"><span id=\"82\">当我完成本文时，我觉得需要再次敦促你不要使用我在这里写的东西，除非你真的需要它。<code>固定属性</code>的好处是伟大的。如果你需要别的东西，那么我希望这篇文章能给你一些想法和一些指导。但<code>固定属性</code>永远是你的第一选择。</span></a></p>\n<hr>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><p>[Fowler, AP] Fowler, Martin. Analysis Patterns: Reusable Object Models, Addison-1997<br>[Fowler, roles] Fowler, Martin. Dealing with Roles,<a href=\"http://www.awl.com/cseng/titles/89542-0/awweb.htm\" target=\"_blank\" rel=\"external\">http://www.awl.com/cseng/titles/89542-0/awweb.htm</a><br>[POSA] Buschman et al, Pattern Oriented Software Architecture, Wiley 1997</p>\n<hr>\n<h2 id=\"原文地址：http-martinfowler-com-apsupp-properties-pdf\"><a href=\"#原文地址：http-martinfowler-com-apsupp-properties-pdf\" class=\"headerlink\" title=\"原文地址：http://martinfowler.com/apsupp/properties.pdf\"></a>原文地址：<a href=\"http://martinfowler.com/apsupp/properties.pdf\" target=\"_blank\" rel=\"external\">http://martinfowler.com/apsupp/properties.pdf</a></h2>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"属性的处理-初步校对\"><a href=\"#属性的处理-初步校对\" class=\"headerlink\" title=\"属性的处理(初步校对)\"></a>属性的处理(初步校对)</h1><hr>\n<p><em>Martin Fowler</em> (《重构：改善既有代码的设计》作者)  </p><p><br>fowler@acm.org</p>\n<hr>\n<p><a href=\"#1\" title=\"Almost every object you create needs properties: some statement about the object. A person may have a height, a company may have a CEO, a flight may have a flight number. There are a number of ways to model properties. In this article I will explore some of these ways and when you may want to use them. I’ve often seen patterns touch on  this subject, but they usually only cover part of the picture. Here I want to cover the issue  more broadly to give a better discussion of the options.\"><span id=\"1\">你创建的每个对象几乎都需要属性：关于对象的一些声明。一个人可能有一个身高属性，一个公司可能有一个CEO，一个航班可能有一个航班号。有很多方法来创建属性。在这篇文章中，我将探讨其中一些你经常需要用到的方法。我经常看到涉及到这个话题的图案，但他们通常只涉及一部分。在这里，我想更广泛地讨论这个问题，以便更好地讨论这些选项。</span></a></p>\n<p><a href=\"#2\" title=\"The most common, and the simplest case is to use a Fixed Property , that is just declare the attribute on the class. In the vast majority of cases that is all you need to do. Fixed properties begin to fail when you have a large amount of them, or you need to change them frequently, possibly at run time. These forces lead you to the varieties of Dynamic Property . All dynamic properties have the quality of a parameterized attribute where to query a property you need to use a query method with a parameter. The simplest of these is the Flexible Dynamic Property where the parameter is just a string. This makes it easy to define and use properties, but is difficult to control. If you need that control you can use a Defined  Dynamic  Property  where  your parameters must be instances of some class. A further step of control allows you to strongly type your dynamic property with a Typed Dynamic Property .\"><span id=\"2\">最常见和最简单的情况是使用<code>固定属性</code>，即只声明类的属性。在绝大多数情况下，你只需要使用<code>固定属性</code>。在有大量固定属性或者需要频繁修改时，使用<code>固定属性</code>容易出错。这种情况下你可能会使用<code>动态属性</code>。所有的<code>动态属性</code>都有一个参数化属性的特性：你需要一个带参的方法来查询一个属性。当参数只是一个字符串,最简单的是<code>灵活的动态属性</code>。这样定义和使用属性会比较容易，但难以控制。如果你需要使用<code>动态属性</code>，在你的参数必须是一个类的实例的情况下。使用类型<code>动态属性</code>来增强对<code>动态属性</code>的控制。</span></a></p>\n<p><a href=\"#3\" title=\"As your property structures get more involved, you should consider making them Separate Properties , which makes the property an object in its own right. If you need multi-valued properties you can consider a Typed Relationship . The most complex example in this theme is where you want rules to control what kinds of objects have what kinds of properties – this needs a Dynamic Property Knowledge Level .\"><span id=\"3\">随着您的属性结构变得越来越复杂，您应该考虑将它们设置为“单独属性”，把一些属性综合起来创建一个对象。如果你需要多值属性，你可以考虑集合。在这篇文章中最复杂的例子是你想要规则来控制什么类型的对象具有什么样的属性 - 这需要一定的<code>动态属性</code>知识水平。</span></a></p>\n<p><a href=\"#4\" title=\"Another variety of property entirely is the Extrinsic Property , a pattern you use if you want to give an object a property, but not alter its interface to support it.\"><span id=\"4\">另一种属性完全是<code>外部属性</code>（Extrinsic Property），如果你想使用接口给一个对象创建一个属性，那么这就是你需要使用的一种模式。<span></span></span></a></p>\n<table>\n<thead>\n<tr>\n<th><a href=\"#5\" title=\"Problem\"><span id=\"5\">问题</span></a></th>\n<th><a href=\"#5\" title=\"Solution\"><span id=\"5\">答案</span></a></th>\n<th><a href=\"#5\" title=\"name\"><span id=\"5\">名称</span></a></th>\n<th><a href=\"#5\" title=\"page\"><span id=\"5\">页码</span></a></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#6\" title=\"Give it a specific attribute for that fact. This will translate to a query method and probably an update method in a programming language.\"><span id=\"6\">在编程语言里，当使用一个特定的属性，它需要查询或者更新。<span></span></span></a></td>\n<td><a href=\"#固定属性\" title=\"Fixed Property\"><code>固定属性</code></a></td>\n<td>4</td>\n</tr>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#7\" title=\"Provide a parameterizable attribute which can represent different properties depending on the parameter\"><span id=\"7\">提供可参数化的属性，可以根据参数表示不同的属性</span></a></td>\n<td><a href=\"#动态属性\" title=\"Dynamic Property\"><code>动态属性</code></a></td>\n<td>4</td>\n</tr>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#8\" title=\"Provide an attribute parameterized with a string. To declare a property just use the string.\"><span id=\"8\">提供一个用字符串参数化的属性。声明一个属性只是使用字符串.</span></a></td>\n<td><a href=\"#灵活的动态属性\" title=\"Flexible Dynamic Property\"><code>灵活的动态属性</code></a></td>\n<td>5</td>\n</tr>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#9\" title=\"Provide an attribute parameterized with an instance of some type. To declare a property create a new instance of that type\"><span id=\"9\">提供用某种类型的实例参数化的属性。要声明属性，请创建该类型的新实例</span></a></td>\n<td><a href=\"#定义动态属性\" title=\"Defined Dynamic Property\"><code>定义动态属性</code></a></td>\n<td>7</td>\n</tr>\n<tr>\n<td> &nbsp;</td>\n<td><a href=\"#10\" title=\"Provide an attribute parameterized with a instance of some type. To declare a property create a new instance of the type and specify the value type of the property.\"><span id=\"10\">提供使用某种类型的实例进行参数化的属性。要声明属性，请创建该类型的新实例并指定该属性的值类型.</span></a></td>\n<td><a href=\"#类型动态属性\" title=\"Typed Dynamic Property\"><code>类型动态属性</code></a></td>\n<td>9</td>\n</tr>\n<tr>\n<td><a href=\"#11\" title=\"How do you represent a fact about an object, and allow facts to be recorded about that fact\"><span id=\"11\">你如何表示一个对象的属性，并允许对象的属性也具有属性</span></a></td>\n<td><a href=\"#11\" title=\"Create a separate object for each property. Facts about that property can then be made properties of that object.\"><span id=\"11\">为每个属性创建一个单独的对象。 关于那个属性的详细可以作为这个对象的的属性.<span></span></span></a></td>\n<td><a href=\"#分离属性\" title=\"Separate Properties\"><code>分离属性</code></a></td>\n<td>10</td>\n</tr>\n<tr>\n<td><a href=\"#12\" title=\"How do you represent a relationship between two objects?(How do you represent multi-valued dynamic properties?)\"><span id=\"12\">你如何表示两个对象之间的关系（如何表示多个值动态属性？）</span></a></td>\n<td><a href=\"#12\" title=\"Create a relationship object for each link between the two objects. Give the relationship object a type object to indicate the meaning of the relationship. (The type object is the name of the multi-valued property.)\"><span id=\"12\">为两个对象之间的每个链接创建一个关系对象。 给关系对象一个类型对象来表示关系的含义。 （类型对象是多值属性的名称。）<span></span></span></a></td>\n<td><a href=\"#类型关系\" title=\"Typed Relationship\"><code>类型关系</code></a></td>\n<td>14</td>\n</tr>\n<tr>\n<td><a href=\"#13\" title=\"How do you enforce that certain kinds of objects have certain properties when you use dynamic properties?\"><span id=\"13\">当你使用动态属性时，你如何强制某些类型的对象具有某些属性？</span></a></td>\n<td><a href=\"#13\" title=\"Create a knowledge level to contain the rules of what types of objects use which types of properties\"><span id=\"13\">创建知识级别以包含哪些类型的对象使用哪些类型的属性的规则</span></a></td>\n<td><a href=\"#动态属性知识水平\" title=\"Dynamic Property Knowledge Level\"><code>动态属性知识水平</code></a></td>\n<td>16</td>\n</tr>\n<tr>\n<td><a href=\"#14\" title=\"How do you give an object a property without changing its interface?\"><span id=\"14\">你如何给一个对象新增一个属性而不改变它的接口？</span></a></td>\n<td><a href=\"#14\" title=\"Make another object responsible for knowing about the property\">使用另一个对象负责属性</a></td>\n<td><a href=\"#外在性质\" title=\"Extrinsic Property\"><code>外在性质</code></a></td>\n<td>18</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2 id=\"什么是属性\"><a href=\"#什么是属性\" class=\"headerlink\" title=\"什么是属性\"></a>什么是属性</h2><p><a href=\"#15\" title=\"This is not a silly question. When people bandy around the term ‘property’ they can mean many different things. To some a property is an instance variable or data member of a class. To others they are kind of thing that goes in a box in a UML diagram. So before I start this article I have to define my usage of the word.\"><span id=\"15\">这不是一个愚蠢的问题。当人们使用“属性”这个词时，他们可能有很多不同的含义。对某些属性来说，是一个类的实例变量或数据成员。对于其他人来说，它们就像<code>UML</code>图中的一个盒子一样。所以在我开始这篇文章之前，我必须定义这个词的用法。</span></a></p>\n<p><a href=\"#16\" title=\"For my purposes a property is some information about an object that you can obtain by a query method. It may be a value type (such as int in Java) or an instance of a class. You may be able to update the property, but not necessarily. You may set the property when you create the object, but again not necessarily. The property may be stored as an instance variable or data member, but it does not have to be. The class may get the value from another class, or go through some further calculation. I am, therefore, taking an interface view of properties rather than an implementation view. This is a regular habit of mine in design: for me the essence of object-orientation is that you separate interface from implementation, and make interface more important.\"><span id=\"16\">为了我的目的，一个属性是关于一个可以通过查询方法获得的对象的一些信息。它可能是一个值类型（如<code>Java</code>中的<code>int</code>）或一个类的实例。您可能能够修改该属性，但不一定。您可以在创建对象时设置属性，但不一定。该属性可以作为实例变量或数据成员存储，但不一定是。班级可能会从另一个班级获得值，或者经过一些进一步的计算。因此，我采用属性的接口视图而不是实现视图。这是我在设计中经常使用的习惯：对于我来说，面向对象的本质是将接口与实现分开，并使接口更加重要。</span></a></p>\n<hr>\n<h2 id=\"固定属性\"><a href=\"#固定属性\" class=\"headerlink\" title=\"固定属性\"></a><span id=\"固定属性\">固定属性</span></h2><p><a href=\"#17\" title=\"Fixed properties are by far the most common kind of properties that we use. A Fixed Property is declared in the interface of the type. It gives the name and the return type for the property. Figure 1 shows properties modeled in UML, Listing 1 shows how the query methods for these properties would show up in Java. I’ve picked the example to show that this discussion applies equally well to UML attributes as well as UML associations. It also applies to calculated values (age) as well as those that are reasonably stored data (date of birth).\"><span id=\"17\"><code>固定属性</code>是我们使用的最常见的属性。 固定属性在类型的接口中声明。 它给出了属性的名称和返回类型。 图1显示了使用<code>UML</code>建模的属性，示例1显示了这些属性的查询方法如何在<code>Java</code>中使用。 我已经选择了这个例子来说明这个讨论同样适用于<code>UML</code>属性和<code>UML</code>关联。 它也适用于计算值（年龄）以及那些合理存储的数据（出生日期）。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/3_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图1.使用<code>固定属性</code>建模的人员<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Date <span class=\"title\">getDateOfBirth</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getAge</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Quantity <span class=\"title\">getHeight</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Company <span class=\"title\">getEmployer</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setDateOfBirth</span> <span class=\"params\">(Date newDateOfBirth)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setEmployer</span> <span class=\"params\">(Company newEmployer)</span></span>;</div></pre></td></tr></table></figure></p>\n<p>列举,图1的<code>java</code>操作</p>\n</blockquote>\n<p><a href=\"#18\" title=\"Query operations usually follow some naming convention. In smalltalk you always name the query after the name of the property (dateOfBirth). C++ never had a fixed convention, some people just named it after the property, others used the &#39;get&#39; convention (getDateOfBirth). Java started with no particular convention but now most people adopt the get convention. Personally I find the ‘get’ irritating when you read code so I would prefer to leave it out, but the Java style is to use the get, so I use it now. You should ensure that you follow the same convention whether you are using stored or derived values. Clients of the person class should not know or care whether age is stored or derived.\"><span id=\"18\">查询操作通常遵循一些命名约定。在<code>程序语言</code>中，您总是在属性名称（<code>dateOfBirth</code>）之后命名查询。 <code>C++</code>从来没有一个固定的约定，有些人只是在属性后面命名，而另一些人则使用<code>get</code>约定（<code>getDateOfBirth</code>）。 <code>Java</code>从没有特别的约定开始，但现在大多数人都采用<code>get</code>约定。就我个人而言，当您阅读代码时，我发现<code>get</code>令人恼火，所以我宁愿忽略它，但<code>Java</code>风格是使用<code>get</code>，所以现在就使用它。无论您使用的是存储值还是派生值，都应确保遵循相同的约定。使用<code>Person</code>的客户端不应该知道或关心年龄是否存储或派生。</span></a></p>\n<p><a href=\"#19\" title=\"The presence of modifier operations depends on whether you want the values to be directly modified. If you do then you will provide a modifier operation according to some naming scheme, eg setDateOfBirth(Date). Different conventions exist as to the return value. You can return the new value of the property (Date), the object being modified (Person), or nothing (void). I prefer to return void on modifiers, to help make clear the difference between a modifier and a query.\"><span id=\"19\"><code>修饰符</code>操作的存在取决于您是否希望直接修改值。如果你这样做，那么你会根据一些命名方案，例如<code>setDateOfBirth</code>（<code>Date</code>）提供一个修饰符操作。对于<code>返回值</code>存在不同的约定。你可以返回属性的新值（<code>Date</code>），被修改的对象（<code>Person</code>），或者什么都没有（<code>void</code>）。我更愿意在修饰符上返回<code>void</code>，以帮助明确修饰符和查询之间的区别。</span></a></p>\n<hr>\n<h3 id=\"固定属性-1\"><a href=\"#固定属性-1\" class=\"headerlink\" title=\"固定属性\"></a>固定属性</h3><p>  <a href=\"#20\" title=\"How do you represent a fact about an object?\"><span id=\"20\">你如何代表一个对象的事实？</span></a></p>\n<ul>\n<li><a href=\"#20\" title=\"Give it a specific attribute for that fact. This will translate to a query method and probably an update method in a programming language.\"><span id=\"20\">给它一个这个事实的特定属性。这将转化为查询方法，并可能是一种编程语言的更新方法。</span></a><br><br><a href=\"#20\" title=\"Clear and explicit interface\"><span id=\"20\">接口很清晰明确</span></a><br><br><a href=\"#20\" title=\"Can only add properties at design time\"><span id=\"20\"><font color=\"red\">只能在设计时添加属性</font></span></a><br></li>\n</ul>\n<hr>\n<p><a href=\"#21\" title=\"You may wish to provide arguments to the constructor for properties. Typically you want to set enough properties in the constructor so that you construct a well-formed class.\"><span id=\"21\">您可能希望为属性的<code>构造函数</code>提供参数。通常，您要在<code>构造函数</code>中设置足够的属性，以便构建格式良好的类。</span></a></p>\n<p><a href=\"#22\" title=\"Properties that you don’t want to be modified directly should not have a modifier operation.This might be the case for the age property, if you only want that determined by calculation from the date of birth. It also would be the case for an immutable property: one that does not change for the lifetime of the class. When you think of making a property immutable, remember to take human error into account. While the date of birth is an immutable property for humans in the real world, you might make a mistake typing into a computer system, and thus make it mutable. Software often models what we know of the world, rather than the world itself.\"><span id=\"22\">不想直接修改的属性不应该有<code>修饰符</code>操作。如果您只希望从出生之日起计算，那么年龄属性可能就是这种情况。对于一个不可改变的<code>属性</code>也是如此：一个在类的生命周期中不会改变的<code>属性</code>。当你想使<code>属性</code>不可改变时，请记住考虑到人为错误。虽然出生日期对于现实世界中的人类来说是不可改变的<code>属性</code>，但是您可能会在输入到计算机系统时出现错误，从而使其变得可变。软件常常模拟我们所知道的世界，而不是世界本身。</span></a></p>\n<p><a href=\"#23\" title=\"Fixed properties are by far the most common form of properties that you will come across.They are that way for good reasons: they are simple and convenient to use. You should use fixed properties as your first and most common choice for representing properties. In this paper I am going to give a lot of alternatives to fixed properties. For certain situations these alternatives are better, but most of the time they are not. Remember that as we go through the alternatives. I use fixed properties 99% of the time. Other varieties are more complex, which is why I&#39;m spending most of this paper on them — and also why I prefer not to use them!\"><span id=\"23\"><code>固定属性</code>是迄今为止您将遇到的最常见的<code>属性</code>形式。他们这样做是有原因的：他们使用简单方便。您应该使用固定属性作为表示属性的第一个也是最常见的选择。在本文中，我将给出许多固定属性的替代方案。在某些情况下，这些替代品更好，但大多数情况下不是。请记住，当我们经历的选择。我99％的时间使用固定的属性。其他品种更为复杂，这就是为什么我把这篇论文的大部分花费在他们身上 - 也是为什么我不愿意使用它们！</span></a></p>\n<h2 id=\"动态属性\"><a href=\"#动态属性\" class=\"headerlink\" title=\"动态属性\"></a><span id=\"动态属性\">动态属性</span></h2><p><a href=\"#24\" title=\"The key thing about fixed properties is that you fix them at design time, and all instances at run time must follow that decision. For some problems this is an awkward restriction. Imagine we are building a sophisticated contact system. There are some things that are fixed: home address, home and work phone, email. But they’re all sorts of little variations. For someone you need to record their parent’s address, another has a day work and evening work numbers.It’s hard to predict all these things in advance, and each time you change the system you have to go through compiling, testing, and distribution. To deal with this you need to use dynamic properties.\"><span id=\"24\"><code>固定属性</code>的关键在于您在设计时修复了这些属性，并且所有实例在运行时都必须遵循该决定。 对于一些问题，这是一个尴尬的限制。 想象一下，我们正在建立一个复杂的联络系统。 有一些东西是固定的：家庭住址，家庭和工作电话，电子邮件。 但他们是各种各样的小变化。 对于需要记录父母地址的人，另一个人有白天工作和晚上工作号码。 事先很难预测所有这些事情，每次更改系统时都必须经过编译，测试和分发。 要处理这个问题，你需要使用动态属性。</span></a></p>\n<hr>\n<h3 id=\"动态属性-1\"><a href=\"#动态属性-1\" class=\"headerlink\" title=\"动态属性\"></a>动态属性</h3><p>  <a href=\"#25\" title=\"How do you represent a fact about an object?\"><span id=\"25\">你如何代表一个对象的事实？</span></a><br><br>  <a href=\"#25\" title=\"Provide a parameterizable attribute which can represent different properties depending on the parameter\"><span id=\"25\">提供可参数化的属性，可以根据参数表示不同的属性</span></a> <br></p>\n<ul>\n<li><a href=\"#25\" title=\"Can add properties at run time\"><span id=\"25\"> 可以在运行时添加属性</span></a></li>\n<li><a href=\"#25\" title=\"Unclear interface\"><span id=\"25\"><font color=\"red\">接口不清晰</font></span></a></li>\n</ul>\n<hr>\n<p><a href=\"#26\" title=\"There are several variations on dynamic properties, each of which make different trade-offs between flexibility and safety. The simplest approach is Flexible Dynamic Properties. The essence of this pattern is that you add a qualified association to the person whose key is a simple value, usually a string (see Figure 2 and Listing 2). If you want to add a vacation address to a person Kent, you just use the code in Listing 3. You don’t need to recompile the person class. You could even build a GUI or a file reader that would add properties without recompiling the client either.\"><span id=\"26\"><code>动态属性</code>有多种变化，每种变化都会在<code>灵活性</code>和<code>安全性</code>之间做出不同的选择。 最简单的方法是<code>灵活动态属性</code>。 这种模式的本质是为键值为简单值的人（通常是字符串）添加一个合格的关联（参见图2和示例2）。 如果您想为某人Kent添加休假地址，则只需使用清单3中的代码即可。您不需要重新编译人员类。 你甚至可以建立一个图形用户界面（<code>GUI</code>）或者文件读取器来添加属性，而不用重新编译客户端。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/5_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图2.使用动态属性建模的人员<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span><span class=\"params\">(String key)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(String key, Object value)</span></span>;</div></pre></td></tr></table></figure></p>\n<p>列举2,图2的<code>java</code>方法<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">kent.setValueOf(“VacationAddress”, anAddress);</div><div class=\"line\">Address kentVactation = (Address) kent.getValueOf(“VacationAddress”)</div></pre></td></tr></table></figure></p>\n<p>列举3,使用动态属性<br><a href=\"#\" title=\"Said like that, you might wonder why anyone would ever use fixed properties, since dynamic properties such as this give you so much more flexibility. Of course there is a cost, and it lies in the reduction of the clarity of the dependencies between parts of the software. It is all very well adding a vacation address property to a person, but how do you know to get it back again? With fixed properties you can just look at the interface of person and see the properties. The compiler can check that don’t ask an object to do something it doesn’t understand. With a dynamic property you cannot do any design-time checking. Furthermore the interface of person is harder to see. Not just do you look at Person’s declared interface – you also have to find the dynamic properties, which will not be present in the class interface. You have to find that part of the code that sets the property (which usually will not be in the Person class at all) and dig it out.\"><span id=\"27\">这样说，你可能想知道为什么有人会使用固定的属性，因为动态的像这样的属性给了你更多的灵活性。当然有一个成本，它在于软件各部分之间依赖关系的清晰度降低。这一切都非常好给一个人增加一个度假地址属性，但是你怎么知道把它重新取回呢？有了固定的属性，你可以看看人的界面，看看属性。该编译器可以检查不要求对象做不理解的事情。 用一个动态属性，你不能做任何设计时检查。此外的界面人很难看。不只是你看<code>Person</code>的声明接口 -你也必须找到不会出现在类接口中的动态属性。你必须找到那些设置属性的代码部分（通常不会在<code>Person</code>类中）提现出来。</span></a></p>\n</blockquote>\n<hr>\n<h3 id=\"灵活动态属性\"><a href=\"#灵活动态属性\" class=\"headerlink\" title=\"灵活动态属性\"></a>灵活动态属性</h3><ul>\n<li><a href=\"#28\" title=\"How do you represent a fact about an object?\"><span id=\"28\">你如何代表一个对象的事实？</span></a><br></li>\n<li><a href=\"#28\" title=\"Provide an attribute parameterized with a string. To declare a property just use the string.\"><span id=\"28\">提供一个用字符串参数化的属性。只声明一个属性使用字符串。</span></a> <br> </li>\n</ul>\n<hr>\n<p><a href=\"#30\" title=\"Not just is the property hard to find, it also creates a nightmare dependency. With fixed properties the client code has a dependency to the person class – a dependency that is easy to keep track of. If you change the name of the property the compiler will let you know, and tell you what code you need to change to fix things. But the Flexible Dynamic Property creates a dependency into some arbitrary piece of code. It could be code that belongs to a class that is not even visible to the client. What happens if someone changes the key string? What happens if someone changes the type of object they put into the key string? Not just can the compiler do nothing to help you, you don’t even know where to start looking for potential changes.\"><span id=\"30\">不仅是属性很难找到，它的依赖也是一个噩梦。随着固定属性的客户端代码有一个依赖于人类 - 一个依赖是难以跟踪。如果你改变属性的名字，编译器会让你知道，并告诉你需要改变什么代码才能解决问题。但灵活的动态属性创建一个依赖于任意一段代码。它可能是属于一个类的代码甚至不能被客户端看到。如果有人更改密钥字符串会发生什么？如果有人改变他们把键入字符串的对象的类型会发生？不仅仅是编译器没法帮助你，你甚至不知道从哪里开始查找变化。</span></a></p>\n<p><a href=\"#31\" title=\"Flexible Dynamic Properties show this problem at it’s most extreme. The property could be created at design time by any client of Person. If another client of person uses that same property you have a dependency between two classes that is very hard to find. Furthermore properties can be added at run time by reading a file or by a GUI. It is impossible to find out, even at run time, what are the legal dynamic properties for a person. True you can ask a person if it has a property for vacation address – but if there isn’t one does that mean that that person does not have a vacation address, or does it mean that there is no such property as vacation address? And if it has no such property now, that doesn’t mean it won’t have one a few seconds later.\"><span id=\"31\"><code>灵活的动态属性</code>在最极端的情况下显示了这个问题。 该属性可能是<code>Person</code>的任何客户端在设计时创建。 如果另一个人的客户端使用同一个属性，那么你就很难找到两个类之间的依赖关系。 此外属性可以在运行时通过读取文件或通过<code>GUI</code>添加。 即使在运行时，不可能发现一个人的哪些动态属性是合法的。 当然，你可以问一个人，如果它有一个度假地址的属性 - 但如果没有一个这是否意味着这一点人没有假期地址，或者是否意味着没有这样的度假地址属性？ 而如果现在没有这样的属性，那并不意味着它几秒钟后不会有。</span></a></p>\n<p><a href=\"#32\" title=\"Another key disadvantage of flexible dynamic properties is that it is difficult to substitute them for operations. One of the key advantages of encapsulation is that a client that uses a property cannot tell whether it is stored as part of an object’s data, or computed by a method. This is a very important part of the object approach. It allows you not just a regular interface for both purposes, but also to change your mind without the client knowing. In the presence of subtyping you can even have a supertype store the property and subclasses compute or vice versa. However if you want to use dynamic properties the only way you can change stored data to a calculation is to put a specific trap in the general accessor for the dynamic property along the lines of Listing 4. This code is likely to be brittle and awkward to maintain.\"><span id=\"32\">灵活动态特性的另一个关键缺点是很难替代它们进行操作。封装的一个关键优势是使用属性的客户端无法分辨它是作为对象数据的一部分存储的，还是通过方法来计算的。这是一个对象方法非常重要的一部分。它可以让你不只是一个普通的接口实现，而且在客户端不知情的情况下改变你期望的值。当存在子类型，你甚至可以有一个超类型存储属性和子类计算，反之亦然。但是，如果要使用动态属性，则只能更改存储的数据一个计算就是在通用访问器中为<code>动态属性</code>设置一个特定的数值,清单4中的代码。这个代码可能很脆弱，难以维护。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span> <span class=\"params\">(String key)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (key = “vacationAddress”) </div><div class=\"line\">            <span class=\"keyword\">return</span> calculatedVacationAddress();</div><div class=\"line\">        <span class=\"keyword\">if</span> (key = “vacationPhone”) </div><div class=\"line\">            <span class=\"keyword\">return</span> getVacationPhone();</div><div class=\"line\">        <span class=\"comment\">// else return stored value…</span></div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举4,用操作替换<code>动态属性</code></p>\n</blockquote>\n<p><a href=\"#33\" title=\"Other forms of dynamic property help you solve some of these problems but not all. The essential disadvantage of a dynamic property is that you lose the clear interface and all designtime checking. Different approaches to dynamic properties give you different abilities to do run-time checking. If you need dynamic properties, and there are certainly situations when you do, then you just have to give up design time checking and a explicit design time interface. The only question is how explicit an interface and how much checking you can do at run time. With Flexible Dynamic Properties you don’t get any of either.\"><span id=\"33\">其他形式的动态属性可以帮助您解决其中一些问题，但不是全部。该<code>动态属性</code>的最大的缺点是：你失去了清晰的接口和所有的设计时间检查。<code>动态属性</code>的不同方法会让你额外写不同的检查方法。如果你需要<code>动态属性</code>，并且当然有确定的情况你这样做，那么你只需要放弃设计时间检查和明确的设计时间接口。唯一的问题是如何明确接口和有多少运行时检查。使用灵活的动态属性也会有同样的问题。</span></a></p>\n<p><a href=\"#34\" title=\"You find dynamic properties often in databases because it is often a pain to change the database schema, especially if there would be a lot of data to migrate. Interfaces of distributed components, such as in CORBA, also often use dynamic properties for a similar reason. There are a lot of distant clients using the interface, so you are reluctant to change it. In both of these cases it is not so much a distinction between compile-time and run-time, as much as a distinction between design-time and production.\"><span id=\"34\">你经常在数据库中发现动态属性，因为改变它通常是一个痛苦数据库模式，特别是如果有大量的数据迁移。分布式的接口例如在<code>CORBA</code>中的组件也经常因为相似的原因而使用动态属性。那里是很多使用界面的远程客户，所以你不愿意改变它。在这两种情况下，编译时和运行时间之间的区别并不是设计时和生产之间的区别。</span></a> </p>\n<p><a href=\"#35\" title=\"If all you are doing is displaying and updating information via a GUI, and the code never makes a fixed reference to the keys (i.e. you never see code like Listing 3), then you are pretty safe with a Flexible Dynamic Property. This is because you have not set up a nasty dependency to some arbitrary string as a key. Otherwise you should consider one of the other approaches to dynamic properties.\"><span id=\"35\">如果你正在做的是通过<code>GUI</code>显示和更新信息，而代码永远不会对键进行固定的引用（即，你永远不会看到像清单3那样的代码），那么使用灵活<code>动态属性</code>就非常安全。这是因为你没有设置一个任意字符串作为一个关键的讨厌的依赖。 否则，你应该考虑<code>动态属性</code>的其他方法之一。</span></a></p>\n<p><a href=\"#36\" title=\"The first step towards more run-time checking is the Defined Dynamic Property. The key difference between a defined as opposed to a flexible dynamic property is that the key used by the dynamic property is no longer some arbitrary string, but is now an instance of some class (Figure 3).\"><span id=\"36\">更多运行时检查的第一步是定义的动态属性。与<code>灵活动态属性</code>相反，定义的关键区别在于<code>动态属性</code>使用的关键字不再是一些任意的字符串，而是现在某个类的一个实例（图3）。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/7_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图3.定义的<code>动态属性</code></p>\n</blockquote>\n<p><a href=\"#37\" title=\"On the face of it using defined dynamic property does not change much. Indeed the code interface is almost identical (Listing 5 and Listing 6). But now the choice of keys is no longer entirely arbitrary, it is limited by the instances of contact type. Of course this still allows you to add properties at run time – you just create a new contact type. However now there is at least somewhere someone can look to get a list of potential keys without having to trawl through the program text. Any keys added at design time can be collected in a loader routine in the contact type class. You can easily provide services to find out the legal keys at run time.\"><span id=\"37\">在它的表面上使用定义的<code>动态属性</code>并没有太大的改变。事实上，代码界面几乎完全相同（清单5和清单6）。但是现在，关键字的选择不再是完全随意的，而是受到接触<code>类型</code>的限制。当然，这仍然允许您在运行时添加<code>属性</code>-只需创建一个新的关联<code>类型</code>。不过现在至少在某个地方可以找到一个潜在的<code>键</code>列表，而无需浏览程序<code>代码</code>。 在设计时添加的任何键都可以在关联类型类的加载程序中收集。您可以轻松地提供服务，以在运行时查找合法的<code>键</code>。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span><span class=\"params\">(ContactType key)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(ContactType key, Object value)</span></span>;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举5, 图3的Java接口<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactType</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> Enumeration <span class=\"title\">instances</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasInstanceNamed</span><span class=\"params\">(String name)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ContactType <span class=\"title\">get</span><span class=\"params\">(String name)</span></span>;</div></pre></td></tr></table></figure></p>\n<p>列举6,为定义的属性类型提供的服务</p>\n</blockquote>\n<p><a href=\"#38\" title=\"In particular you can now set up some checking to prevent errors due to someone asking for a dynamic property that does not exist as in Listing 7. I’m throwing an unchecked exception here because I consider that the precondition for get() is that the client provides a legal name for a contact type. The client can always fulfill this responsibility by using hasInstanceNamed(), but most of the time client software will hang on to contact type objects, not strings.\"><span id=\"38\">你现在可以设置一些检查来防止由于某人要求一个不存在的<code>动态属性</code>而导致的错误。我在这里抛出一个未经检查的<code>异常</code>，因为我认为<code>get（）</code>的前提条件是<code>客户端</code>为联系人类型提供合法名称。客户端总是可以通过使用<code>hasInstanceNamed（）</code>来执行这个检查，但是大多数情况下客户端使用的是类型而不是字符串。</span></a></p>\n<hr>\n<h3 id=\"定义动态属性\"><a href=\"#定义动态属性\" class=\"headerlink\" title=\"定义动态属性\"></a>定义动态属性</h3><ul>\n<li><a href=\"#39\" title=\"How do you represent a fact about an object?\"><span id=\"39\">你如何代表一个对象的事实？</span></a></li>\n<li><a href=\"#39\" title=\"Provide an attribute parameterized with an instance of some type. To declare a property create a new instance of that type\"><span id=\"39\">提供用某种类型的实例参数化的属性。声明一个属性创建一个新类型的实例</span></a> </li>\n</ul>\n<hr>\n<p><a href=\"#40\" title=\"Usually the contact types will be held in a dictionary, usually indexed by a string. This dictionary could be a static field of contact type, but I prefer to make it a field on a Registrar.\"><span id=\"40\">通常，联系人类型将保存在字典中，通常由字符串索引。这个字典可能是一个静态的联系人类型的字段，但是我更愿意把它作为注册服务器上的字段。</span></a></p>\n<p><a href=\"#41\" title=\"Removing a contact type still has awkward consequences. In java the dynamic properties would still be present on those objects that had them, unless you write some complicated clean up code. I usually make it a rule to never delete the keys for a Defined Dynamic Property. If you want to use a new name you can easily alias the contact type by giving it one name but placing it in the defining dictionary several times.\"><span id=\"41\">删除联系人类型仍然具有尴尬的后果。在<code>java</code>中的<code>动态属性</code>仍然会出现在那些拥有它们的对象上，除非你写了一些复杂的东西清理代码。我通常会规定永远不要删除动态属性的键。如果你想使用一个新的名字，你可以通过给它一个其他名字，但是把它放置在定义的字典中几次，很容易地为联系类型添加别名。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactType</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ContactType <span class=\"title\">get</span><span class=\"params\">(String name)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (! hasInstanceNamed (name)) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(“No such contact type);</div><div class=\"line\">        <span class=\"comment\">// return the contact type</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// use with</span></div><div class=\"line\">Address kentVactation = (Address)kent.getValueOf(ContactType.get(“VacationAddress”));</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举7, 检查使用合法合同类型</p>\n</blockquote>\n<p><a href=\"#42\" title=\"At this point you might be wondering about what this has to do with conceptual modeling,after all I am writing a lot of code and discussing design trade-offs. This is an important conceptual issue because the conceptual choice you make affects the implementation options you have. If you choose to use flexible dynamic attributes in your conceptual model, you are making it pretty hard to use either defined dynamic attributes or fixed attributes in your implementation. One of the reasons you do conceptual models is to explore what is fixed and what is changeable in your users’ concepts. If total flexibility was my only goal then I would always use Figure 4. With this I can model any situation in the world. But this model is not very useful. Its uselessness comes from the fact that it does not indicate what is fixed. When you are doing a conceptual model you need to be aware of how your choices affect things in implementation – otherwise you are abdicating your responsibility as a modeler.\"><span id=\"42\">在这一点上，您可能想知道这与概念建模有什么关系，毕竟我写了很多代码并讨论了设计的权衡。这是一个重要的概念问题，因为您所做的概念选择会影响您的实现选择。如果你选择在你的概念模型中使用<code>灵活动态属性</code>，你很难在你的实现中使用定义的<code>动态属性</code>或<code>固定属性</code>。你做概念模型的原因之一是探索你的用户的概念是什么固定的，什么是可变的。如果全面的灵活性是我唯一的目标，那么我会总是使用图4.通过这个，我可以模拟世界上的任何情况。但是这个模型不是很有用。它在现实项目中是没用的，它不表示什么是固定的。什么时候你正在做一个概念模型，你需要知道你的选择如何影响项目实施-否则你失去了作为建模者的作用。</span></a></p>\n<p><a href=\"#43\" title=\"I often find that people discover dynamic properties, and then want to use them everywhere. The flexibility is so great, they get all the extendibility they ever want. Yes sometimes you need dynamic properties. but never forget there is a price. Only use them when you really need them. After all it is easy to add them later if you have to.\"><span id=\"43\">我经常发现人们发现<code>动态属性</code>，然后想要在任何地方使用它们。灵活性如此之大，他们获得了所有的可扩展性。是的，有时候你需要<code>动态属性</code>。但永远不会忘记有一个标准。只有当你真的使用它们需要他们才用。毕竟，如果必须使用，以后很容易添加它们。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/8_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图4.一个可以无用建模任何域的模型</p>\n</blockquote>\n<p><a href=\"#44\" title=\"The Defined Dynamic Property allows you to indicate rather more about what properties you have. These properties are still untyped. You cannot enforce that the value of the vacation address in Figure 3 is an address. You can do something about that by using a Typed Dynamic Property.\"><span id=\"44\"><code>定义动态属性</code>允许您更多地指出你拥有的属性。这些属性仍然是无类型的。您不能强制图3中休假地址的值是一个地址。 你可以通过使用<code>类型动态属性</code>来做些什么。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/9_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图5.为使用限定关联的类型化动态属性建模</p>\n</blockquote>\n<p><a href=\"#45\" title=\"A typed dynamic property adds type information to the defined dynamic property (Figure 6 and Figure 5 ). Here the instances of contact type do not just indicate what properites the person has, they also indicate the type of each property. The type constrains the value, along the lines of Listing 9.\"><span id=\"45\"><code>类型动态属性</code>将类型信息添加到定义的<code>动态属性</code>（图6和6）图5）。这里的联系人类型的实例不只是指出该人是什么合适的人有，他们也表示每个<code>属性</code>的类型。 类型约束的值，沿线清单9。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span><span class=\"params\">(ContactType key)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(ContactType key, Object value)</span></span>;</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactType</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Class <span class=\"title\">getValueType</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ContactType</span> <span class=\"params\">(String name, Class valueType)</span></span>;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举8, 键入动态属性的操作</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(ContactType key, Object value)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (! key.getValueType().isInstance(value))</div><div class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException (“Incorrect type <span class=\"keyword\">for</span> property”);</div><div class=\"line\">        <span class=\"comment\">// set the value</span></div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举9, 做类型检查</p>\n</blockquote>\n<p><a href=\"#46\" title=\"Doing type checking like this can help to avoid errors, but it still is not as clear as fixed properties. The checking is at run time, not at design time, and is therefore not as effective. Still it is better than no checking at all, particularly if you are used to a strongly typed environment.\"><span id=\"46\">这样做类型检查可以帮助避免错误，但它仍然不像固定属性那样清晰。 检查是在运行时，而不是在设计时，因此不是有效的。但还是比没有检查好，特别是如果你习惯于强类型的环境时。</span></a></p>\n<hr>\n<h3 id=\"类型动态属性\"><a href=\"#类型动态属性\" class=\"headerlink\" title=\"类型动态属性\"></a>类型动态属性</h3><ul>\n<li><a href=\"#47\" title=\"How do you represent a fact about an object?\"><span id=\"47\">你如何代表一个对象的事实？</span></a><br></li>\n<li><a href=\"#47\"><span id=\"47\">提供使用某种类型的实例进行参数化的属性。声明一个属性创建一个新类型的实例并指定值的类型属性。</span></a></li>\n</ul>\n<hr>\n<p><a href=\"#48\" title=\"As we delve deeper into dynamic properties, we find richer examples of reflection, an architectural pattern which appears when we get runtime objects that are able to describe themselves. [POSA] discusses reflection in much more detail than I intend to go into here.\"><span id=\"48\">当我们深入研究<code>动态属性</code>时，我们会发现更丰富的<code>反射</code>示例，这是一种架构模式，当我们获得能够描述自身的运行时对象时，就会出现这种模式。 [POSA]比我打算在这里更详细地讨论反思。</span></a></p>\n<p><a href=\"#49\" title=\"Dynamic properties provide a reflective capability, even in those languages that don’t support reflection themselves. Even with a language that does provide some reflection, the reflection of dynamic properties is more focused – so you can provide an easier to use interface.\"><span id=\"49\">动态属性提供反射功能，即使在那些不支持反射的语言中。即使使用了一种能够提供一些反射的语言，<code>动态属性</code>的反射也更加集中 - 所以您可以提供更易于使用的接口。</span></a></p>\n<p><a href=\"#50\" title=\"Using all of those qualified associations can get rather hard to follow. Another way of providing typed dynamic properties is to use the separate property pattern. The essence of the separate property pattern is that it makes the property an object in its own right (Figure 6 and Listing 10). You can get hold of the properties of a person, and then with each property get value and type information.\"><span id=\"50\">使用所有这些合格的关联可能会很难遵循。另一种方式提供<code>类型动态属性</code>是使用单独的属性模式。独立属性模式的本质是它使属性成为一个对象（图6和清单10）。 你可以获得一个人的属性，然后与每个属性获得值和类型信息。</span></a></p>\n<hr>\n<h3 id=\"分离属性\"><a href=\"#分离属性\" class=\"headerlink\" title=\"分离属性\"></a>分离属性</h3><ul>\n<li><a href=\"#51\" title=\"How do you represent a fact about an object, and allow facts to be recorded about that fact\"><span id=\"51\">你如何代表一个对象的属性，并允许属性记录这个属性<span></span></span></a></li>\n<li><a href=\"#51\" title=\"Create a separate object for each property. Facts about that property can then be made properties of that object.\"><span id=\"51\">为每个属性创建一个单独的对象。有关该属性的子属性可以然后被做成那个对象的属性。<span></span></span></a></li>\n</ul>\n<hr>\n<p><a href=\"#52\" title=\"Separate properties and qualified associations are two alternatives that are always available for dynamic properties. So far I’ve described flexible and defined dynamic properties with qualified associations because the qualified association presents a much easier interface to use.You can use flexible and defined dynamic properties with separate properties if you wish, although I’m not going to go into that here. As we get to the complexity of typed dynamic properties and onwards the separate property style becomes more of an advantage.\"><span id=\"52\"><code>独立属性</code>和限定的关联<code>动态属性</code>总是可用的两种选择。 到目前为止，我已经用限定的关联描述了灵活的和定义好的<code>动态属性</code>，因为合格的关联提供了一个更容易使用的接口。如果你愿意的话，你可以使用灵活和定义的具有单独属性的<code>动态属性</code>，尽管我不打算进入在这里。当我们了解类型化<code>动态属性</code>的复杂性时，<code>分离属性</code>风格变得更有优势。<span></span></span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/10_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图6.为分类的动态属性建模，使用单独的属性</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getProperties</span><span class=\"params\">()</span></span>;</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ContactProperty</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValue</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Class <span class=\"title\">getType</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ContactType <span class=\"title\">getIndex</span><span class=\"params\">()</span></span>;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举10, 使用单独属性的类型化动态属性的操作</p>\n</blockquote>\n<p><a href=\"#52\" title=\"Separate properties and qualified associations are not mutually exclusive. You can easily provide both interfaces at the same time. This way you get the advantages of both. Of course that makes the interface more complex, so think first about what the clients of person need.Give them the interface they need, don’t make it over complex. But if they need both qualified associations and separate properties, then that is a reasonable option. I would normally always use qualified associations for the value, but it may not make as much sense for the type.\"><span id=\"53\"><code>分离属性</code>和有限的关联不是相互排斥的。您可以轻松地同时提供两个接口。 这样你就得到了两者的优点。当然这会使接口更加复杂，所以先考虑一下用户的需求。给他们提供他们需要的接口，不要让接口变得复杂。但是，如果他们需要合格的关联和<code>分离属性</code>，那么这是一个合理的选择。我通常会使用合格的关联来获得值，但是这种类型可能没有多大意义。<span></span></span></a></p>\n<p><a href=\"#\" title=\"You can also consider the interface/implementation differences here. In this paper I want to concentrate on the conceptual – which maps to the interface of software rather than its implementation. But it is worth mentioning that you can provide a qualified association interface while using separate object in the implementation. You are only using separate properties in the interface if a client of person can obtain a contact property object. Often it is useful to hide the separate property to simplify the interface for the client.\"><span id=\"54\">您也可以在这里考虑接口/实现的差异。在本文中，我想集中在概念上 - 它映射到软件的接口而不是实现。但值得一提的是，您可以在实现中使用单独的对象时提供合格的关联接口。如果人的客户端可以获取联系人属性对象，则只能在接口中使用单独的属性。通常隐藏<code>分离属性</code>以简化客户端的接口是有用的。</span></a></p>\n<p><a href=\"#55\" title=\"One of the big advantages of the Separate Properties is that it allows you put information about the property in the property. Such information might include who determined the property, when it was determined, and the like. The Observation pattern in \\[Fowler AP §3.5\\] build upon this theme in some depth. Much of what I’ve described there in terms of observations is worth considering if you need separate properties. \\(I see the observation pattern as a use of separate properties.\\)\"><span id=\"55\"><code>分离属性</code>的一大优势是它可以让你把属性的信息放在属性中。 这些信息可能包括谁确定了属性，什么时候确定了属性等。 [Fowler AP§3.5]中的观察模式基于这个主题进行了深入的研究。如果您需要单独的属性，我在观察者模式所描述的大部分内容都值得思考。（我将观察模式看作是使用不同的属性。）</span></a></p>\n<p><a href=\"#56\" title=\"You might be wondering at the contrast between separate properties \\(a pattern\\) and qualified associations \\(a UML modeling construct\\). You can also think of qualified associations as a pattern, a pattern of association. Indeed I did do this in \\[Fowler AP §15.2\\]. I have found it helpful to think of modeling constructs as patterns, for it helps me think about the trade-offs in using them. This is particularly useful when you are comparing them to something that is more clearly a pattern, such as separate property. Of course things that begin as patterns can be turned into modeling constructs, particularly if you use UML stereotypes. The historic mapping pattern \\[Fowler AP §15.3\\] is a good example of that. I represent that using the «history» stereotype. Is it a pattern or a modeling construction? Maybe it’s a floor wax and a desert topping too.\"><span id=\"56\">您可能想知道<code>分离属性</code>（模式）和限定关联（<code>UML</code>建模结构）之间的对比。 你也可以把合格的关联看作一种模式，一种联想模式。确实，我在[Fowler AP §15.2]中做了这个。我发现为设计创建模型考虑是有帮助的，因为它帮助我思考使用它们的权衡。当你将它们的模型比较清楚，如<code>分离属性</code>，这是特别有用的。当然，以模式开始的事情可以转化为建模结构，特别是如果使用<code>UML</code>构造型。历史映射模式[FowlerAP§15.3]就是一个很好的例子。我表示使用这种模式非常刻版。这是一个模式或建模？也许这是一个地板蜡和一个沙漠顶部。</span></a></p>\n<hr>\n<h2 id=\"具有多值关联的动态属性\"><a href=\"#具有多值关联的动态属性\" class=\"headerlink\" title=\"具有多值关联的动态属性\"></a><a href=\"#57\" title=\"Dynamic Properties with Multi-valued associations\"><span id=\"57\">具有多值关联的动态属性</span></a></h2><p><a href=\"#58\" title=\"My examples above have concentrated on cases where there is a single value for each key in the dynamic properties. But you can also have cases where there are multiple items in the dynamic properties. With Person you might consider a friends property which is multi-valued.There are two ways to deal with this, one that is simple and unsatisfying, another that is satisfying but (too) complex.\"><span id=\"58\">我上面的例子集中讨论了<code>动态属性</code>中每个键都有一个单一值的情况。 但是，您也可以在<code>动态属性</code>中有多个事件的情况。与人相处时，你可能会考虑一个多值的友好属性。处理这个问题有两种方法，一种简单而不令人满意，另一种令人满意，但（太）复杂。</span></a></p>\n<p><a href=\"#59\" title=\"The simple approach is just to say that the value of a dynamic property can be a collection.We can then manipulate it like any other object with the same interface (Listing 11). This is nice and simple, since we don’t have to do anything to the basic dynamic property pattern.(The example here is with a typed dynamic property, but it will work with all of them.) It’s unsatisfying however because it is not really the way we would like to deal with multi-valued properties. If friends were a fixed property, we would want an interface along the lines of Listing 12. I don’t like exposing the vector in these cases. By doing so the person class loses the ability to react when we add or remove elements. It also removes our ability to change the type of collection we are using.\"><span id=\"59\">简单的方法就是说<code>动态属性</code>的值可以是一个集合。然后我们可以像使用相同接口的其他对象一样操作它（清单11）。这很好，很简单，因为我们不需要对基本的<code>动态属性</code>模式做任何事情（这里的例子是一个类型化的<code>动态属性</code>，但是它可以和所有的模式一起工作）。然而，这并不令人满意，因为它不是真的是我们想要处理多值属性的方式。如果朋友是一个固定的属性，我们需要一个接口，如清单12所示。我不喜欢在这些情况下暴露集合。通过这样做，人员班级在我们添加或移除元素时就失去了应对的能力。这也消除了我们改变我们正在使用的集合类型的能力。</span></a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">Person aPerson = <span class=\"keyword\">new</span> Person();</div><div class=\"line\">ContactType friends = <span class=\"keyword\">new</span> ContactType(“Friends”, Class.forName(“Vector”));</div><div class=\"line\">Person martin = <span class=\"keyword\">new</span> Person(“Martin”);</div><div class=\"line\">martin.setValueOf(“Friends”, <span class=\"keyword\">new</span> Vector());</div><div class=\"line\">Person kent = <span class=\"keyword\">new</span> Person(“Kent”);</div><div class=\"line\">martin.getValueOf(“Friends”).addElement(“Kent”);</div><div class=\"line\">Enumeration friends = martin.getValueOf(“Friends”).elements();</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举11, 在类型化动态属性中使用集合值<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getFriends</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addFriend</span><span class=\"params\">(Person arg)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">removeFriend</span><span class=\"params\">(Person arg)</span></span>;</div></pre></td></tr></table></figure></p>\n<p>列举12, 一个固定的多值属性的运作</p>\n</blockquote>\n<p><a href=\"#60\" title=\"So can we get an interface along the lines of Listing 12, when we have dynamic properties? Well if we try hard enough we can, as you can see in Figure 7. But it is a complex model. With some clever coding we can hide much of that complexity behind the interface (Listing 13 and Listing 14) and make it reasonably convenient to use (Listing 15). But the client still needs to know which properties are single valued and which are multi-valued and all the checking for the right usage can only occur at run time. All this complexity is painful – a lot more painful than using fixed properties. I would be very reluctant to go this far.\"><span id=\"60\">那么当我们有<code>动态属性</code>的时候，我们可以按照清单12的方式获得一个接口吗？ 那么，如果我们努力工作，就可以如图7所示。但这是一个复杂的模型。 通过一些巧妙的编码，我们可以隐藏接口（清单13和清单14）背后的大部分复杂性，并且使用起来相当方便（清单15）。但客户端仍然需要知道哪些属性是单值的，哪些属性是多值的，并且只有在运行时才能检查正确的使用情况。所有这些复杂性都是痛苦的-比使用<code>固定属性</code>更痛苦。我会非常不愿走这么远。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/12_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图7.满足对多值动态属性的过度支持</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">class Person</div><div class=\"line\">    public Object getValueOf(ContactType key);</div><div class=\"line\">    public Enumeration getValuesOf(ContactType key);</div><div class=\"line\">    public void setValueOf(ContactType key, Object newValue);</div><div class=\"line\">    public void addValueTo(ContactType key, Object newValue);</div><div class=\"line\">    public void removeValueFrom(ContactType key, Object newValue);</div><div class=\"line\">    </div><div class=\"line\">class ContactType</div><div class=\"line\">    public Class getValueType();</div><div class=\"line\">    public boolean isMultiValued();</div><div class=\"line\">    public boolean isSingleValued();</div><div class=\"line\">    public ContactType(String name, Class valueType, boolean isMultiValued);</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举13, 图7的操作</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span></span></div><div class=\"line\"><span class=\"class\">    <span class=\"title\">public</span> <span class=\"title\">Object</span> <span class=\"title\">getValueOf</span>(<span class=\"title\">ContactType</span> <span class=\"title\">key</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (key.isMultiValued())</div><div class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException(“<span class=\"function\">should use <span class=\"title\">getValuesOf</span><span class=\"params\">()</span>”)</span></div><div class=\"line\"><span class=\"function\">        <span class=\"comment\">//return the value</span></span></div><div class=\"line\"><span class=\"function\">    &#125;</span></div><div class=\"line\"><span class=\"function\">    </span></div><div class=\"line\"><span class=\"function\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addValueTo</span><span class=\"params\">(ContactType key, Object newValue)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (key.isSingleValued())</div><div class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException(“should use setValueOf”);</div><div class=\"line\">        <span class=\"keyword\">if</span> (! key.getValueType().isInstance(newValue))</div><div class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException (“Incorrect type <span class=\"keyword\">for</span> property”);</div><div class=\"line\">        <span class=\"comment\">//add the value to the collection</span></div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举14, 检查清单13的操作的使用情况</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">fax = <span class=\"keyword\">new</span> ContactType(“fax”, Class.forName(“PhoneNumber”), <span class=\"keyword\">false</span>);</div><div class=\"line\">Person martin = <span class=\"keyword\">new</span> Person(“martin”);</div><div class=\"line\">martin.setValueOf(“fax”, <span class=\"keyword\">new</span> PhoneNumber(“<span class=\"number\">123</span> <span class=\"number\">1234</span>”);</div><div class=\"line\">martinFax = martin.getValueOf(“fax”);</div><div class=\"line\">friends = <span class=\"keyword\">new</span> ContactType (“friends”, Class.forName(“Person”), <span class=\"keyword\">true</span>);</div><div class=\"line\">martin.addValueTo(“friends”, <span class=\"keyword\">new</span> Person(“Kent”));</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举15, 使用清单13的操作</p>\n</blockquote>\n<p><a href=\"#61\" title=\"This complexity appears because we have both multi valued and single-valued properties.There is an inherently different interface to dealing with these, hence the complexity. Of course we can get situations with only multi-valued properties. A common pattern for this is the Typed Relation ship pattern \\(Figure 8\\). Here a person may have number of different employment relationships with a number of different companies \\(or even several with the same company\\).\"><span id=\"61\">这种复杂性似乎是因为我们既有多值也有单值的<code>属性</code>。处理这些复杂性有一个内在的不同的接口，因此复杂性也是如此。当然，我们可以得到只有多值属性的情况。一个常见的模式是类型关系模式（图8）。在这里，一个人可能与许多不同公司有不同的雇佣关系（甚至与同一家公司有多个）。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/13_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图8.类型关系的一个例子</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Employment</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Employment</span> <span class=\"params\">(Person person, Company company, Employment Type type)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">terminate</span><span class=\"params\">()</span></span></div><div class=\"line\"><span class=\"function\">    …</span></div><div class=\"line\"><span class=\"function\">&#125;</span></div><div class=\"line\"><span class=\"function\">class Person </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getEmployments</span><span class=\"params\">()</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addEmployment</span> <span class=\"params\">(Company company, EmploymentType type)</span></span>;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举16, 图8的<code>Java</code>接口</p>\n</blockquote>\n<p><a href=\"#62\" title=\"As we think of this, it should soon occur to you that this is really very similar as using a Defined Dynamic Property that is multi-valued, but expressed using a Separate Property rather than a Qualified Association. (Or is that sentence just too much of a mouthful?) Indeed Figure 9 shows how you can use a Defined Dynamic Property interface in this situation. This view of things is true, and so a typed relationship doesn’t add anything that new to this pattern language. But typed relationship is a very common pattern in modeling circles, and many may not realize its connection with the dynamic properties patterns.\"><span id=\"62\">正如我们想到的那样，很快就会发现，这与使用多值的<code>定义动态属性</code>非常类似，但是使用<code>分离属性</code>而不是合适的关联来表示。（或者说这句话太过分了？）实际上，图9显示了在这种情况下如何使用<code>定义动态属性</code>接口。这种事物的观点是真实的，所以一个类型化的关系不会添加任何新的模式语言。 但是类型化关系在建模圈子中是一种非常普遍的模式，很多人可能没有意识到它与<code>动态属性</code>模式的联系。</span></a></p>\n<hr>\n<h3 id=\"类型关系\"><a href=\"#类型关系\" class=\"headerlink\" title=\"类型关系\"></a>类型关系</h3><ul>\n<li><a href=\"#63\" title=\"How do you represent a relationship between two objects?(How do you represent multi-valued dynamic properties?)\"><span id=\"63\">你如何表示两个对象之间的关系？（你如何表示多值动态属性？）</span></a></li>\n<li><a href=\"#63\" title=\"Create a relationship object for each link between the two objects. Give the relationship object a type object to indicate the meaning of the relationship.(The type object is the name of the multi-valued property.)\"><span id=\"63\">为两个对象之间的每个链接创建一个关系对象。 给关系对象一个类型对象来表示关系的含义。（类型对象是多值属性的名称。）</span></a></li>\n</ul>\n<hr>\n<p><a href=\"#64\" title=\"The strengths of typed relationship are that it works well with bi-directional relationships, and that it provides a simple point to add properties to the relationship. (The latter, of course, is a feature of separate properties.) You can add a sophisticated knowledge level to this pattern,along much the same lines as typed dynamic properties. However you should consider the interface implications. Typed relationships force users to be aware of the employment object,as indeed does any use of separate properties. Indeed people tend to see the property object as a full fledged object in its own right, rather as some property of the person (or company). But the qualified association can often provide a simpler interface for many purposes. So whenever you see, or you are considering using, a typed relationship; you should also consider the qualified association form. You can use it in either or both directions, and use it either in addition to the typed relationship, or in addition to it.\"><span id=\"64\">类型化关系的优势在于它可以很好地处理双向关系，并且为关系添加属性提供了一个简单的点。（当然，后者是一个<code>分离属性</code>的特征。）你可以在这个模式中添加一个复杂的知识级别，跟类型化的<code>动态属性</code>一样。但是，您应该考虑接口的影响。类型化关系迫使用户意识到雇佣对象，因为确实使用<code>分离属性</code>。事实上，人们倾向于将属性客体本身看作完全成熟的客体，而不是人（或公司）的一些属性。 但是合格的关联通常可以为许多目的提供更简单的接口。所以每当你看到，或者你正在考虑使用，一个类型的关系;你还应该考虑合格的关联形式。您可以在任何一个方向或两个方向上使用它，也可以将其用于除了键入的关系之外，或者除此之外。。</span></a></p>\n<p><a href=\"#65\" title=\"The two models are not quite identical however. If you use Figure 9 you are indicating that an employer can only be an employer once for a particular employment type. Figure 8 has no such constraint in the diagram as it stands, although most modelers would imply such a constraint,unless the employment had additional attributes. Often, of course, the employment does have the additional attributes. A common example is a date range (as in accountability \\[Fowler, AP §2.4\\].\"><span id=\"65\">但是这两种模式并不完全相同。如果使用图9，则表示雇主只能是某种特定工种的雇主。图8在图表中没有这样的约束，尽管大多数建模者会暗示这样的约束，除非雇用具有附加属性。当然，就业通常具有附加属性。一个常见的例子是日期范围（如问责制[Fowler，AP§2.4]）。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/14_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图9.使用与图8相同情况的合格关联</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">public</span> Person &#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">addEmployer</span> <span class=\"params\">(Company company, EmploymentType type)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getEmployersOfType</span> <span class=\"params\">(EmploymentType type)</span></span>;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举17, 图9的接口</p>\n</blockquote>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/15_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图10.键入的关系，显示通常假定的约束</p>\n</blockquote>\n<hr>\n<h2 id=\"不同种类的人\"><a href=\"#不同种类的人\" class=\"headerlink\" title=\"不同种类的人\"></a>不同种类的人</h2><p><a href=\"#\" title=\"So far we are assuming we only have one kind of person, and any properties we define for a person are valid properties for all people. However you do get situations where you have different types, and different properties for different types. A manager may need a property for department managed, an executive may need a property for executive washroom key number (in a not very 90’s company).\"><span id=\"66\">到目前为止，我们假设我们只有一种人，我们为一个人定义的任何属性都是所有人的有效属性。但是，您确实会遇到不同类型的情况，以及不同类型的不同属性。管理人员可能需要一个管理部门的属性，执行人员可能需要一个属性作为高管卫生间的关键号码（在一个不是90年代的公司）。</span></a></p>\n<p><a href=\"#67\" title=\"Don’t worry, I hear the cries of “use inheritance stupid”. Indeed this is one of the situations that is often used for subtyping. Actually it gets rather more involved than that, particularly when you start thinking of the various roles a person may play. I’ve written a whole paper on the subject of modeling roles \\[Fowler roles\\]. The roles patterns consider cases where we are interested in variations in operations and in variations of fixed properties. But in this case I want to explore the overlap of different kinds of object with the notion of dynamic properties. This overlap begets the dynamic properties knowledge level pattern \\(a name that is getting a little too large for my taste\\).\"><span id=\"67\">别担心，我听到“使用继承愚蠢”的呼声。事实上，这是常用于分类的情况之一。实际上，这个过程比这个要复杂得多，特别是当你开始思考一个人可能扮演的角色时。我已经写了关于建模角色[Fowler roles]的主题的全文。角色模式考虑了我们对操作变化和<code>固定属性</code>变化感兴趣的情况。但在这种情况下，我想探索不同类型的对象与<code>动态属性</code>的概念的重叠。这种重叠会导致<code>动态属性知识级别模式</code>（一个对我的品味有点太大的名字）。</span></a></p>\n<p><a href=\"#68\" title=\"To use the pattern we give the Person a type object of Person Type. We can then say that the person type’s association to contact type indicates which properties are available for people who have that person type. If we try to use, or ask for, a property on a person the person type can be used to check that the usage is correct.\"><span id=\"68\">为了使用这个模式，我们给<code>Person</code>一个<code>Person</code>类型的<code>类型对象</code>。然后，我们可以说，人物类型与联系人类型的关联指示哪些人物拥有该人物类型可用的属性。 如果我们尝试使用或要求某人的属性，则可以使用人员类型来检查使用情况是否正确。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/16_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图11.动态属性知识水平</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span><span class=\"params\">(ContactProperty key)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasProperty</span><span class=\"params\">(ContactProperty key)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setValueOf</span><span class=\"params\">(ContactProperty key, Object newValue)</span></span>;</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PersonType</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">hasProperty</span><span class=\"params\">(ContactProperty key)</span></span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Enumeration <span class=\"title\">getProperties</span><span class=\"params\">()</span></span>;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>列举18, 图11的操作<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Object <span class=\"title\">getValueOf</span> <span class=\"params\">(ContactProperty key)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!hasProperty(key))</div><div class=\"line\">            <span class=\"keyword\">throw</span> IllegalArgumentException(“Innapropriate key”);</div><div class=\"line\">            <span class=\"comment\">//return the value</span></div></pre></td></tr></table></figure></p>\n<p>列举19, 检查具有动态属性知识级别的适当的密钥</p>\n</blockquote>\n<p><a href=\"#69\" title=\"As we start to use a knowledge level like this, the separate property becomes more and more important. In this case we soon start to stop thinking of it as a property, rather as some object in its own right. The dividing line between what is a property and what isn’t is very blurred,and it really depends upon your view of things.\"><span id=\"69\">当我们开始使用这样的知识水平时，单独的属性变得越来越重要。 在这种情况下，我们很快就会开始停止将其视为一种属性，而不是把它作为一个对象。 什么是属性和什么是非属性之间的分界线是非常模糊的，这实际上取决于你对事物的看法。</span></a></p>\n<hr>\n<h3 id=\"动态属性知识水平\"><a href=\"#动态属性知识水平\" class=\"headerlink\" title=\"动态属性知识水平\"></a>动态属性知识水平</h3><ul>\n<li><a href=\"#70\" title=\"How do you enforce that certain kinds of objects have certain properties when you use dynamic properties?\"><span id=\"70\">你如何执行某些类型的对象具有某些特性使用动态属性？</span></a></li>\n<li><a href=\"#70\" title=\"Create a knowledge level to contain the rules of what types of objects use which types of properties\"><span id=\"70\">创建一个知识级别来包含什么类型的对象使用的规则哪些类型的属性</span></a></li>\n</ul>\n<hr>\n<hr>\n<h2 id=\"动态属性的几个小结\"><a href=\"#动态属性的几个小结\" class=\"headerlink\" title=\"动态属性的几个小结\"></a><a href=\"#71\" title=\"Some Summary Points on Dynamic Properties\"><span id=\"71\">动态属性的几个小结</span></a></h2><p><a href=\"#72\" title=\"Various kinds of dynamic properties make up the bulk of this paper. But I have to reiterate that dynamic properties are something I like to avoid if at all possible. Dynamic properties carry a heavy burden of disadvantage: the lack of clarity of the interface, the difficulty in using operations instead of stored data. It is just that sometimes you have little choice but to use them, and it is on these occasions that this paper should come in useful to give you some alternatives and the trade-offs between then.\"><span id=\"72\">各种各样的<code>动态属性</code>构成了本文的大部分内容。但我必须重申，<code>动态属性</code>是我想要尽可能避免的。<code>动态属性</code>带来了很大的负担：接口不够清晰，使用操作而不是存储数据的困难。只是有时你别无选择，只能使用它们，在这种情况下，这篇论文应该有用的给你提供一些替代方案和之间的权衡。<span></span></span></a></p>\n<p><a href=\"#73\" title=\"Dynamic properties appear most where there are difficulties in changing the interface. People who work with distributed object systems like them, at least in principle, because it allows them to alter an interface without compromising clients – and in a distributed system it may be very difficult to find who your clients are. But you should still be wary of doing this. Any time you add a new key to your keys for the dynamic properties you are effectively changing the interface. All the dynamic properties are doing is replacing a compile time check for a runtime check. You still have the same issues of keeping your clients up to date.\"><span id=\"73\"><code>动态属性</code>出现在改变接口有困难的地方。那些使用像他们这样的分布式对象系统的人，至少在原则上是这样，因为它允许他们在不改变客户端的情况下改变接口 - 而在分布式系统中，可能很难找到你的客户端。但是你仍然应该警惕这样做。每当你为<code>动态属性</code>添加一个新的键到你的键上，你都在有效地改变接口。所有的<code>动态属性</code>都在替换运行时检查的编译时间检查。你仍然有同样的问题保持你的客户端最新。</span></a></p>\n<p><a href=\"#74\" title=\"Another common use of dynamic properties is in databases. Here it is not just due to the problem of interface, but also (if not primarily) due to problems of data migration. Changing a database schema does not only cause a potential change to programs using the schema, it also may force you to do a complicated data conversion exercise. Again dynamic properties allow you to change things without changing the database schema, and thus not needing to do any data conversion. In large databases this can be a compelling advantage.\"><span id=\"74\"><code>动态属性</code>的另一个常见用途是在数据库中。这里不仅仅是由于接口的问题，而且由于数据迁移的问题（如果不是主要的话）。更改数据库模式不仅会导致对使用该模式的程序进行潜在更改，还可能会强制您执行复杂的数据转换练习。同样，<code>动态属性</code>允许您在不更改数据库模式的情况下更改内容，从而不需要进行任何数据转换。在大型数据库中，这可能是一个引人注目的优势。</span></a></p>\n<hr>\n<h2 id=\"一个你不知道的有关于属性的\"><a href=\"#一个你不知道的有关于属性的\" class=\"headerlink\" title=\"一个你不知道的有关于属性的\"></a><a href=\"#75\" title=\"A property you don’t know about\"><span id=\"75\">一个你不知道的有关于属性的</span></a></h2><p><a href=\"#76\" title=\"There is a last but important kind of property that I want to add to this paper. This is the case of an object having a property without realizing it. This occurs when the property is implied by another object and the way it relates to you.\"><span id=\"76\">我想在本文中添加一个最后一个重要的属性。这是一个没有意识到属性的对象的情况。当属性被另一个对象所隐含，以及与有关的方式时，就会发生这种情况。</span></a></p>\n<p><a href=\"#77\" title=\"Consider an object that manages database connections. It creates a bunch of database connections and hands them out to other objects when requested. When a client is done with the connection it can return it to the manager to be available for someone else. You could do this by adding an isBusy property to the connection. Figure 12 shows an alternative using an extrinsic property. Whether the connection is free or busy is determined by which collection in the connection manager it lies in. If you had a connection, you could not ask it whether it is free or busy, instead you would have to ask the connection manager whether a particular connection is free or busy. You can tell this because the composition associations are one way.The connection has no knowledge of the connection manager. In a sense the free/busy status isn’t a property of connection at all. Yet at least in some sense it is, which is why I mention it.\"><span id=\"77\">考虑一个管理数据库连接的对象。它会创建一堆数据库连接，并在请求时将它们传递给其他对象。当一个客户端连接完成后，可以将其返回给管理员，以供其他人使用。您可以通过向连接添加<code>isBusy</code>属性来完成此操作。图12显示了一个使用外部属性的替代方案。连接是空闲的还是繁忙的是由连接管理器中的哪个集合决定的。如果你有一个连接，你不能问它是空闲的还是忙的，而是你必须要求连接管理器是否特定的连接空闲或忙碌。你可以这样说，因为组合关联是一种方式。连接不知道连接管理器。 从某种意义上来说，空闲/忙碌状态根本不是连接的属性。但至少从某种意义上来说，这就是我提到它的原因。</span></a></p>\n<p><img src=\"https://static.zuul.top/java-design-patterns-doc-for-cn/abstract-document/17_1.png\" alt=\"image\"></p>\n<blockquote>\n<p>图12.使用外部收集属性</p>\n</blockquote>\n<p><a href=\"#78\" title=\"In a pure conceptual modeling sense this pattern does not make much sense. But there are practical implementation reasons why you may want to use it. If you want all changes to this property to go through a connection manager, then this approach makes this clear. In particular this is a natural style when you want the connection manager to give you a free connection and you don’t care which one.\"><span id=\"78\">在纯粹的概念模型意义上，这种模式没有多大意义。但是，为什么你可能想要使用它，有实际的实施原因。如果您希望对此属性进行的所有更改都通过连接管理器进行，则此方法可以清楚地说明这一点。特别是当你想让连接管理器给你一个自由的连接，而你不关心哪一个时，这是一种自然的风格。</span></a>。</p>\n<p><a href=\"#79\" title=\"Another reason to use an extrinsic property is if the connection class is provided by someone else and you can’t change its interface. You can add the new property without changing the connection class at all.\"><span id=\"79\">使用外部属性的另一个原因是如果连接类是由其他人提供的，并且您不能更改其接口。 你可以添加新的属性而不用改变连接类。</span></a></p>\n<hr>\n<h3 id=\"外在属性\"><a href=\"#外在属性\" class=\"headerlink\" title=\"外在属性\"></a>外在属性</h3><ul>\n<li><a href=\"#80\" title=\"How do you give an object a property without changing its interface?\"><span id=\"80\">你如何给对象一个属性而不改变它的接口？</span></a></li>\n<li><a href=\"#80\" title=\"Make another object responsible for knowing about the property.\"><span id=\"80\">让另一个对象负责知道这个属性。</span></a></li>\n</ul>\n<hr>\n<p><a href=\"#81\" title=\"The big problem with the extrinsic property is that it leads to an awkward and unnatural interface. Usually if you want to know something, you just find the appropriate object and ask it. Here you need to find the object that holds the external collection, and ask it about the appropriate object. In some circumstances, such as this one, it seems reasonable. But most of the time I would prefer to let objects know about their own properties (in which case I call them intrinsic properties).\"><span id=\"81\"><code>外在属性</code>的一个大问题是它会导致一个尴尬和不自然的接口。通常如果你想知道一些东西，你只要找到合适的对象并提出问题。在这里您需要找到保存外部集合的对象，并询问有关适当的对象。在某些情况下，比如这个，似乎是合理的。但大多数情况下，我宁愿让对象了解自己的属性（在这种情况下，我称之为<code>内在属性</code>）。</span></a></p>\n<hr>\n<h2 id=\"最后的想法\"><a href=\"#最后的想法\" class=\"headerlink\" title=\"最后的想法\"></a>最后的想法</h2><p><a href=\"#82\" title=\"As I finish this paper, I feel the need again to urge you not to use what I’ve been writing about here unless you really do need it. The advantages of fixed properties are great. If you need something else, then I hope this paper gives you some ideas and some guidance. But fixed properties are always your first choice.\"><span id=\"82\">当我完成本文时，我觉得需要再次敦促你不要使用我在这里写的东西，除非你真的需要它。<code>固定属性</code>的好处是伟大的。如果你需要别的东西，那么我希望这篇文章能给你一些想法和一些指导。但<code>固定属性</code>永远是你的第一选择。</span></a></p>\n<hr>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><p>[Fowler, AP] Fowler, Martin. Analysis Patterns: Reusable Object Models, Addison-1997<br>[Fowler, roles] Fowler, Martin. Dealing with Roles,<a href=\"http://www.awl.com/cseng/titles/89542-0/awweb.htm\" target=\"_blank\" rel=\"external\">http://www.awl.com/cseng/titles/89542-0/awweb.htm</a><br>[POSA] Buschman et al, Pattern Oriented Software Architecture, Wiley 1997</p>\n<hr>\n<h2 id=\"原文地址：http-martinfowler-com-apsupp-properties-pdf\"><a href=\"#原文地址：http-martinfowler-com-apsupp-properties-pdf\" class=\"headerlink\" title=\"原文地址：http://martinfowler.com/apsupp/properties.pdf\"></a>原文地址：<a href=\"http://martinfowler.com/apsupp/properties.pdf\" target=\"_blank\" rel=\"external\">http://martinfowler.com/apsupp/properties.pdf</a></h2>"}],"PostAsset":[],"PostCategory":[{"post_id":"cjayvjb0600004kvnac9ydc1h","category_id":"cjayvjb0e00044kvnqf0ejrgq","_id":"cjayvjb0q000f4kvn55ja599v"},{"post_id":"cjayvjb0b00024kvn4pwr2z6i","category_id":"cjayvjb0e00044kvnqf0ejrgq","_id":"cjayvjb0u000l4kvnd9bcz0s2"},{"post_id":"cjayvjb0p000d4kvnfpavldmb","category_id":"cjayvjb0e00044kvnqf0ejrgq","_id":"cjayvjb0x000p4kvno6j9tfbo"},{"post_id":"cjayvjb0g00064kvn2slu7spe","category_id":"cjayvjb0e00044kvnqf0ejrgq","_id":"cjayvjb0z000s4kvnvz2rbcpm"},{"post_id":"cjayvjb0s000i4kvn09ukthjj","category_id":"cjayvjb0v000n4kvn4c8dc0zv","_id":"cjayvjb1500114kvny9cqjasc"},{"post_id":"cjayvjb0u000k4kvnpnl9py0z","category_id":"cjayvjb11000w4kvn4uwc196z","_id":"cjayvjb1a00174kvnf1ktyg1c"},{"post_id":"cjayvjb1400104kvnywm3xsz3","category_id":"cjayvjb0v000n4kvn4c8dc0zv","_id":"cjayvjb1b001a4kvnsvj8pkz1"},{"post_id":"cjayvjb0w000o4kvncfvhkrdf","category_id":"cjayvjb0v000n4kvn4c8dc0zv","_id":"cjayvjb1e001e4kvn315who4i"},{"post_id":"cjayvjb1800154kvnhgrag0ba","category_id":"cjayvjb0v000n4kvn4c8dc0zv","_id":"cjayvjb1g001i4kvn0irpdlqr"},{"post_id":"cjayvjb1a00194kvn003u80tk","category_id":"cjayvjb11000w4kvn4uwc196z","_id":"cjayvjb1h001k4kvn1x7pd2t1"},{"post_id":"cjayvjb0y000r4kvnf9qaltzf","category_id":"cjayvjb1900164kvn748j1hvt","_id":"cjayvjb1i001m4kvndvkl9wc0"},{"post_id":"cjayvjb10000v4kvn3pq7cs06","category_id":"cjayvjb1900164kvn748j1hvt","_id":"cjayvjb1k001p4kvn4zy2w82l"},{"post_id":"cjayvjb12000y4kvnn11pbbob","category_id":"cjayvjb1900164kvn748j1hvt","_id":"cjayvjb1l001t4kvnva9jpj5y"},{"post_id":"cjayvjb1600134kvnuvni5hmh","category_id":"cjayvjb1j001o4kvnp7mxyc3r","_id":"cjayvjb1p00204kvn2vfn352y"},{"post_id":"cjayvjb1d001d4kvnepl3h77o","category_id":"cjayvjb1j001o4kvnp7mxyc3r","_id":"cjayvjb1r00244kvnsgjsq0yo"},{"post_id":"cjayvjb1f001h4kvnb4l4v9dj","category_id":"cjayvjb1j001o4kvnp7mxyc3r","_id":"cjayvjb1t00284kvnorp073b0"},{"post_id":"cjayvjb3b003t4kvnubbi9dja","category_id":"cjayvjb3c003u4kvnxpgoylzl","_id":"cjayvjb3i003x4kvnqecnc4nl"},{"post_id":"cjayvjb0i00084kvnol54l58e","category_id":"cjayvjb0e00044kvnqf0ejrgq","_id":"cjayx38bx0000sgvnup31hfh8"},{"post_id":"cjayvjb0j00094kvnkdeh1opg","category_id":"cjayvjb0e00044kvnqf0ejrgq","_id":"cjayx38by0001sgvnncclav47"},{"post_id":"cjayvjb0n000c4kvnhtm3hwf3","category_id":"cjayvjb0e00044kvnqf0ejrgq","_id":"cjayx38gk0002sgvnaidxrxa9"}],"PostTag":[{"post_id":"cjayvjb0n000c4kvnhtm3hwf3","tag_id":"cjayvjb0g00054kvni6gvdz0b","_id":"cjayvjb0r000h4kvnsalcj9jq"},{"post_id":"cjayvjb0n000c4kvnhtm3hwf3","tag_id":"cjayvjb0k000b4kvncjc5a30g","_id":"cjayvjb0t000j4kvnbn8flgc2"},{"post_id":"cjayvjb0600004kvnac9ydc1h","tag_id":"cjayvjb0g00054kvni6gvdz0b","_id":"cjayvjb0x000q4kvnppggc6yu"},{"post_id":"cjayvjb0600004kvnac9ydc1h","tag_id":"cjayvjb0k000b4kvncjc5a30g","_id":"cjayvjb0z000t4kvnz787tmse"},{"post_id":"cjayvjb0600004kvnac9ydc1h","tag_id":"cjayvjb0r000g4kvn80zl56hl","_id":"cjayvjb12000x4kvnsx0c6lo1"},{"post_id":"cjayvjb0b00024kvn4pwr2z6i","tag_id":"cjayvjb0g00054kvni6gvdz0b","_id":"cjayvjb1a00184kvnk3bnmx7l"},{"post_id":"cjayvjb0b00024kvn4pwr2z6i","tag_id":"cjayvjb0k000b4kvncjc5a30g","_id":"cjayvjb1c001b4kvnfjcctdby"},{"post_id":"cjayvjb0b00024kvn4pwr2z6i","tag_id":"cjayvjb0r000g4kvn80zl56hl","_id":"cjayvjb1e001f4kvnnz71u9iz"},{"post_id":"cjayvjb0g00064kvn2slu7spe","tag_id":"cjayvjb0g00054kvni6gvdz0b","_id":"cjayvjb1k001q4kvncc6l3sll"},{"post_id":"cjayvjb0g00064kvn2slu7spe","tag_id":"cjayvjb0r000g4kvn80zl56hl","_id":"cjayvjb1m001u4kvnw7mqv0j9"},{"post_id":"cjayvjb0i00084kvnol54l58e","tag_id":"cjayvjb0g00054kvni6gvdz0b","_id":"cjayvjb1n001w4kvn2ulsxl3l"},{"post_id":"cjayvjb0i00084kvnol54l58e","tag_id":"cjayvjb1j001n4kvnen19mxwd","_id":"cjayvjb1o001y4kvnurpx1uks"},{"post_id":"cjayvjb0j00094kvnkdeh1opg","tag_id":"cjayvjb0g00054kvni6gvdz0b","_id":"cjayvjb1q00214kvnwa0h09mq"},{"post_id":"cjayvjb0j00094kvnkdeh1opg","tag_id":"cjayvjb0k000b4kvncjc5a30g","_id":"cjayvjb1r00234kvnyiw7b8vv"},{"post_id":"cjayvjb0p000d4kvnfpavldmb","tag_id":"cjayvjb0g00054kvni6gvdz0b","_id":"cjayvjb1s00254kvn4poq9xgp"},{"post_id":"cjayvjb0p000d4kvnfpavldmb","tag_id":"cjayvjb0k000b4kvncjc5a30g","_id":"cjayvjb1t00274kvnfk2r19j8"},{"post_id":"cjayvjb0p000d4kvnfpavldmb","tag_id":"cjayvjb0r000g4kvn80zl56hl","_id":"cjayvjb1t00294kvnpshe0eh0"},{"post_id":"cjayvjb0s000i4kvn09ukthjj","tag_id":"cjayvjb1q00224kvnsbm0v3v5","_id":"cjayvjb1w002d4kvnlptat1qe"},{"post_id":"cjayvjb0s000i4kvn09ukthjj","tag_id":"cjayvjb1s00264kvnsrcksc13","_id":"cjayvjb1w002e4kvnu12xur8n"},{"post_id":"cjayvjb0s000i4kvn09ukthjj","tag_id":"cjayvjb1u002a4kvnjhxn02wa","_id":"cjayvjb1x002g4kvnp7hvlsf6"},{"post_id":"cjayvjb0s000i4kvn09ukthjj","tag_id":"cjayvjb1v002b4kvn62depemj","_id":"cjayvjb1y002h4kvnxu9cq0qm"},{"post_id":"cjayvjb0u000k4kvnpnl9py0z","tag_id":"cjayvjb1v002c4kvnohx8la0c","_id":"cjayvjb20002l4kvn61ebda5r"},{"post_id":"cjayvjb0u000k4kvnpnl9py0z","tag_id":"cjayvjb1x002f4kvnan05h194","_id":"cjayvjb21002m4kvn5ett2m1l"},{"post_id":"cjayvjb0u000k4kvnpnl9py0z","tag_id":"cjayvjb1y002i4kvni1f0uhw3","_id":"cjayvjb22002o4kvnpbopbgxm"},{"post_id":"cjayvjb0w000o4kvncfvhkrdf","tag_id":"cjayvjb0g00054kvni6gvdz0b","_id":"cjayvjb23002r4kvn41y54ptz"},{"post_id":"cjayvjb0w000o4kvncfvhkrdf","tag_id":"cjayvjb20002k4kvn2e5x8bj1","_id":"cjayvjb24002s4kvngj2ok0ws"},{"post_id":"cjayvjb0w000o4kvncfvhkrdf","tag_id":"cjayvjb21002n4kvn3ld20035","_id":"cjayvjb25002u4kvnmyve0lnq"},{"post_id":"cjayvjb0y000r4kvnf9qaltzf","tag_id":"cjayvjb23002q4kvnyo770uhx","_id":"cjayvjb25002v4kvnd02w2efs"},{"post_id":"cjayvjb10000v4kvn3pq7cs06","tag_id":"cjayvjb23002q4kvnyo770uhx","_id":"cjayvjb27002x4kvnsslz3a0m"},{"post_id":"cjayvjb12000y4kvnn11pbbob","tag_id":"cjayvjb23002q4kvnyo770uhx","_id":"cjayvjb28002z4kvn4insgmbi"},{"post_id":"cjayvjb1400104kvnywm3xsz3","tag_id":"cjayvjb0g00054kvni6gvdz0b","_id":"cjayvjb2a00324kvn0xchlliu"},{"post_id":"cjayvjb1400104kvnywm3xsz3","tag_id":"cjayvjb20002k4kvn2e5x8bj1","_id":"cjayvjb2a00334kvnafl8x77v"},{"post_id":"cjayvjb1400104kvnywm3xsz3","tag_id":"cjayvjb2800304kvn0cobe5ys","_id":"cjayvjb2b00354kvnj19aqxga"},{"post_id":"cjayvjb1600134kvnuvni5hmh","tag_id":"cjayvjb2900314kvno29pf8ct","_id":"cjayvjb2c00364kvnkke0z4zg"},{"post_id":"cjayvjb1800154kvnhgrag0ba","tag_id":"cjayvjb2b00344kvnx0ynred8","_id":"cjayvjb2f003a4kvnu1gm3nas"},{"post_id":"cjayvjb1800154kvnhgrag0ba","tag_id":"cjayvjb0g00054kvni6gvdz0b","_id":"cjayvjb2g003b4kvnr57uyfgq"},{"post_id":"cjayvjb1800154kvnhgrag0ba","tag_id":"cjayvjb2c00374kvndr5phslr","_id":"cjayvjb2h003d4kvnrh07prmk"},{"post_id":"cjayvjb1800154kvnhgrag0ba","tag_id":"cjayvjb2d00384kvnf6f7v3wv","_id":"cjayvjb2h003e4kvnx549l58h"},{"post_id":"cjayvjb1a00194kvn003u80tk","tag_id":"cjayvjb1v002c4kvnohx8la0c","_id":"cjayvjb2j003h4kvnc4xisyi2"},{"post_id":"cjayvjb1a00194kvn003u80tk","tag_id":"cjayvjb2g003c4kvn55t3j3gi","_id":"cjayvjb2k003i4kvngj5938lk"},{"post_id":"cjayvjb1a00194kvn003u80tk","tag_id":"cjayvjb1y002i4kvni1f0uhw3","_id":"cjayvjb2l003k4kvn33ellpu0"},{"post_id":"cjayvjb1d001d4kvnepl3h77o","tag_id":"cjayvjb2j003g4kvnl9j1kqmj","_id":"cjayvjb2m003m4kvnfqk46gul"},{"post_id":"cjayvjb1d001d4kvnepl3h77o","tag_id":"cjayvjb2k003j4kvnjz19xlgd","_id":"cjayvjb2m003n4kvn3x279439"},{"post_id":"cjayvjb1f001h4kvnb4l4v9dj","tag_id":"cjayvjb2l003l4kvncs23w382","_id":"cjayvjb2q003q4kvn46b1p4dw"},{"post_id":"cjayvjb1f001h4kvnb4l4v9dj","tag_id":"cjayvjb2n003o4kvnvl78b5s0","_id":"cjayvjb2q003r4kvnp9ofrmd0"},{"post_id":"cjayvjb1f001h4kvnb4l4v9dj","tag_id":"cjayvjb2k003j4kvnjz19xlgd","_id":"cjayvjb2r003s4kvnnlvd3ebu"},{"post_id":"cjayvjb3b003t4kvnubbi9dja","tag_id":"cjayvjb3d003v4kvnie0yz25r","_id":"cjayvjb3i003y4kvnb47kh0y4"},{"post_id":"cjayvjb3b003t4kvnubbi9dja","tag_id":"cjayvjb3h003w4kvnvnm0d1p1","_id":"cjayvjb3j003z4kvno0udiqpl"},{"post_id":"cjayvjb0g00064kvn2slu7spe","tag_id":"cjayvjb0k000b4kvncjc5a30g","_id":"cjaz0kiv000000cvnshiluztf"},{"post_id":"cjayvjb0u000k4kvnpnl9py0z","tag_id":"cjaz0lw7k00010cvneh2hanlx","_id":"cjaz0lw7n00020cvnmpxl3t52"}],"Tag":[{"name":"Java","_id":"cjayvjb0g00054kvni6gvdz0b"},{"name":"中级难度","_id":"cjayvjb0k000b4kvncjc5a30g"},{"name":"译文","_id":"cjayvjb0r000g4kvn80zl56hl"},{"name":"中等难度","_id":"cjayvjb1c001c4kvnqdaqw1ua"},{"name":"初级难度","_id":"cjayvjb1j001n4kvnen19mxwd"},{"name":"二维码","_id":"cjayvjb1q00224kvnsbm0v3v5"},{"name":"登陆","_id":"cjayvjb1s00264kvnsrcksc13"},{"name":"APP","_id":"cjayvjb1u002a4kvnjhxn02wa"},{"name":"流程","_id":"cjayvjb1v002b4kvn62depemj"},{"name":"插件","_id":"cjayvjb1v002c4kvnohx8la0c"},{"name":"gitment","_id":"cjayvjb1x002f4kvnan05h194"},{"name":"Hexo","_id":"cjayvjb1y002i4kvni1f0uhw3"},{"name":"规范开发","_id":"cjayvjb1z002j4kvndzb3vzwb"},{"name":"Spring Boot","_id":"cjayvjb20002k4kvn2e5x8bj1"},{"name":"Exception","_id":"cjayvjb21002n4kvn3ld20035"},{"name":"java","_id":"cjayvjb23002q4kvnyo770uhx"},{"name":"Spring Cloud","_id":"cjayvjb2800304kvn0cobe5ys"},{"name":"其他","_id":"cjayvjb2900314kvno29pf8ct"},{"name":"二进制","_id":"cjayvjb2b00344kvnx0ynred8"},{"name":"Java基础","_id":"cjayvjb2c00374kvndr5phslr"},{"name":"位运算","_id":"cjayvjb2d00384kvnf6f7v3wv"},{"name":"主题","_id":"cjayvjb2g003c4kvn55t3j3gi"},{"name":"程序员","_id":"cjayvjb2j003g4kvnl9j1kqmj"},{"name":"转载","_id":"cjayvjb2k003j4kvnjz19xlgd"},{"name":"生活","_id":"cjayvjb2l003l4kvncs23w382"},{"name":"房子","_id":"cjayvjb2n003o4kvnvl78b5s0"},{"name":"属性","_id":"cjayvjb3d003v4kvnie0yz25r"},{"name":"设计","_id":"cjayvjb3h003w4kvnvnm0d1p1"},{"name":"规范","_id":"cjaz0lw7k00010cvneh2hanlx"}]}}